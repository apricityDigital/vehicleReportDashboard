var cT=Object.defineProperty;var uT=(t,e,n)=>e in t?cT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var me=(t,e,n)=>uT(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function dT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G_={exports:{}},td={},Y_={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ul=Symbol.for("react.element"),hT=Symbol.for("react.portal"),fT=Symbol.for("react.fragment"),mT=Symbol.for("react.strict_mode"),pT=Symbol.for("react.profiler"),gT=Symbol.for("react.provider"),yT=Symbol.for("react.context"),vT=Symbol.for("react.forward_ref"),xT=Symbol.for("react.suspense"),_T=Symbol.for("react.memo"),wT=Symbol.for("react.lazy"),H0=Symbol.iterator;function bT(t){return t===null||typeof t!="object"?null:(t=H0&&t[H0]||t["@@iterator"],typeof t=="function"?t:null)}var Q_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X_=Object.assign,Z_={};function uo(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Q_}uo.prototype.isReactComponent={};uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function J_(){}J_.prototype=uo.prototype;function Vm(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Q_}var Fm=Vm.prototype=new J_;Fm.constructor=Vm;X_(Fm,uo.prototype);Fm.isPureReactComponent=!0;var q0=Array.isArray,ew=Object.prototype.hasOwnProperty,Um={current:null},tw={key:!0,ref:!0,__self:!0,__source:!0};function nw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ew.call(e,r)&&!tw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ul,type:t,key:i,ref:o,props:s,_owner:Um.current}}function ET(t,e){return{$$typeof:ul,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ul}function kT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var K0=/\/+/g;function ah(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kT(""+t.key):e.toString(36)}function Ic(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ul:case hT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ah(o,0):r,q0(s)?(n="",t!=null&&(n=t.replace(K0,"$&/")+"/"),Ic(s,e,n,"",function(u){return u})):s!=null&&(Bm(s)&&(s=ET(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(K0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",q0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+ah(i,a);o+=Ic(i,e,n,l,s)}else if(l=bT(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+ah(i,a++),o+=Ic(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Hl(t,e,n){if(t==null)return t;var r=[],s=0;return Ic(t,r,"","",function(i){return e.call(n,i,s++)}),r}function TT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Cc={transition:null},ST={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Cc,ReactCurrentOwner:Um};function rw(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Hl,forEach:function(t,e,n){Hl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Hl(t,function(){e++}),e},toArray:function(t){return Hl(t,function(e){return e})||[]},only:function(t){if(!Bm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=uo;ae.Fragment=fT;ae.Profiler=pT;ae.PureComponent=Vm;ae.StrictMode=mT;ae.Suspense=xT;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ST;ae.act=rw;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=X_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Um.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ew.call(e,l)&&!tw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ul,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:yT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gT,_context:t},t.Consumer=t};ae.createElement=nw;ae.createFactory=function(t){var e=nw.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:vT,render:t}};ae.isValidElement=Bm;ae.lazy=function(t){return{$$typeof:wT,_payload:{_status:-1,_result:t},_init:TT}};ae.memo=function(t,e){return{$$typeof:_T,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Cc.transition;Cc.transition={};try{t()}finally{Cc.transition=e}};ae.unstable_act=rw;ae.useCallback=function(t,e){return Mt.current.useCallback(t,e)};ae.useContext=function(t){return Mt.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Mt.current.useEffect(t,e)};ae.useId=function(){return Mt.current.useId()};ae.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Mt.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};ae.useRef=function(t){return Mt.current.useRef(t)};ae.useState=function(t){return Mt.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Mt.current.useTransition()};ae.version="18.3.1";Y_.exports=ae;var $=Y_.exports;const zm=dT($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IT=$,CT=Symbol.for("react.element"),NT=Symbol.for("react.fragment"),AT=Object.prototype.hasOwnProperty,PT=IT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jT={key:!0,ref:!0,__self:!0,__source:!0};function sw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)AT.call(e,r)&&!jT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:CT,type:t,key:i,ref:o,props:s,_owner:PT.current}}td.Fragment=NT;td.jsx=sw;td.jsxs=sw;G_.exports=td;var c=G_.exports,rf={},iw={exports:{}},nn={},ow={exports:{}},aw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Y){var L=z.length;z.push(Y);e:for(;0<L;){var H=L-1>>>1,Q=z[H];if(0<s(Q,Y))z[H]=Y,z[L]=Q,L=H;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Y=z[0],L=z.pop();if(L!==Y){z[0]=L;e:for(var H=0,Q=z.length,te=Q>>>1;H<te;){var Ie=2*(H+1)-1,V=z[Ie],Z=Ie+1,Me=z[Z];if(0>s(V,L))Z<Q&&0>s(Me,V)?(z[H]=Me,z[Z]=L,H=Z):(z[H]=V,z[Ie]=L,H=Ie);else if(Z<Q&&0>s(Me,L))z[H]=Me,z[Z]=L,H=Z;else break e}}return Y}function s(z,Y){var L=z.sortIndex-Y.sortIndex;return L!==0?L:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,m=3,g=!1,v=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=z)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function N(z){if(w=!1,_(z),!v)if(n(l)!==null)v=!0,X(j);else{var Y=n(u);Y!==null&&ce(N,Y.startTime-z)}}function j(z,Y){v=!1,w&&(w=!1,b(x),x=-1),g=!0;var L=m;try{for(_(Y),f=n(l);f!==null&&(!(f.expirationTime>Y)||z&&!A());){var H=f.callback;if(typeof H=="function"){f.callback=null,m=f.priorityLevel;var Q=H(f.expirationTime<=Y);Y=t.unstable_now(),typeof Q=="function"?f.callback=Q:f===n(l)&&r(l),_(Y)}else r(l);f=n(l)}if(f!==null)var te=!0;else{var Ie=n(u);Ie!==null&&ce(N,Ie.startTime-Y),te=!1}return te}finally{f=null,m=L,g=!1}}var D=!1,E=null,x=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function R(){if(E!==null){var z=t.unstable_now();C=z;var Y=!0;try{Y=E(!0,z)}finally{Y?P():(D=!1,E=null)}}else D=!1}var P;if(typeof k=="function")P=function(){k(R)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,le=fe.port2;fe.port1.onmessage=R,P=function(){le.postMessage(null)}}else P=function(){S(R,0)};function X(z){E=z,D||(D=!0,P())}function ce(z,Y){x=S(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,X(j))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var L=m;m=Y;try{return z()}finally{m=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var L=m;m=z;try{return Y()}finally{m=L}},t.unstable_scheduleCallback=function(z,Y,L){var H=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?H+L:H):L=H,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=L+Q,z={id:h++,callback:Y,priorityLevel:z,startTime:L,expirationTime:Q,sortIndex:-1},L>H?(z.sortIndex=L,e(u,z),n(l)===null&&z===n(u)&&(w?(b(x),x=-1):w=!0,ce(N,L-H))):(z.sortIndex=Q,e(l,z),v||g||(v=!0,X(j))),z},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(z){var Y=m;return function(){var L=m;m=Y;try{return z.apply(this,arguments)}finally{m=L}}}})(aw);ow.exports=aw;var RT=ow.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DT=$,en=RT;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lw=new Set,Pa={};function ti(t,e){qi(t,e),qi(t+"Capture",e)}function qi(t,e){for(Pa[t]=e,t=0;t<e.length;t++)lw.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sf=Object.prototype.hasOwnProperty,MT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G0={},Y0={};function LT(t){return sf.call(Y0,t)?!0:sf.call(G0,t)?!1:MT.test(t)?Y0[t]=!0:(G0[t]=!0,!1)}function OT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VT(t,e,n,r){if(e===null||typeof e>"u"||OT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ft[t]=new Lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ft[e]=new Lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ft[t]=new Lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ft[t]=new Lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ft[t]=new Lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ft[t]=new Lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ft[t]=new Lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ft[t]=new Lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ft[t]=new Lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wm=/[\-:]([a-z])/g;function $m(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wm,$m);ft[e]=new Lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wm,$m);ft[e]=new Lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wm,$m);ft[e]=new Lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ft[t]=new Lt(t,1,!1,t.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ft[t]=new Lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hm(t,e,n,r){var s=ft.hasOwnProperty(e)?ft[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VT(e,n,s,r)&&(n=null),r||s===null?LT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vr=DT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),xi=Symbol.for("react.portal"),_i=Symbol.for("react.fragment"),qm=Symbol.for("react.strict_mode"),of=Symbol.for("react.profiler"),cw=Symbol.for("react.provider"),uw=Symbol.for("react.context"),Km=Symbol.for("react.forward_ref"),af=Symbol.for("react.suspense"),lf=Symbol.for("react.suspense_list"),Gm=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),dw=Symbol.for("react.offscreen"),Q0=Symbol.iterator;function Oo(t){return t===null||typeof t!="object"?null:(t=Q0&&t[Q0]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,lh;function Jo(t){if(lh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lh=e&&e[1]||""}return`
`+lh+t}var ch=!1;function uh(t,e){if(!t||ch)return"";ch=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ch=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jo(t):""}function FT(t){switch(t.tag){case 5:return Jo(t.type);case 16:return Jo("Lazy");case 13:return Jo("Suspense");case 19:return Jo("SuspenseList");case 0:case 2:case 15:return t=uh(t.type,!1),t;case 11:return t=uh(t.type.render,!1),t;case 1:return t=uh(t.type,!0),t;default:return""}}function cf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _i:return"Fragment";case xi:return"Portal";case of:return"Profiler";case qm:return"StrictMode";case af:return"Suspense";case lf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uw:return(t.displayName||"Context")+".Consumer";case cw:return(t._context.displayName||"Context")+".Provider";case Km:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gm:return e=t.displayName||null,e!==null?e:cf(t.type)||"Memo";case Cr:e=t._payload,t=t._init;try{return cf(t(e))}catch{}}return null}function UT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cf(e);case 8:return e===qm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ss(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BT(t){var e=hw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kl(t){t._valueTracker||(t._valueTracker=BT(t))}function fw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function eu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uf(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function X0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ss(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mw(t,e){e=e.checked,e!=null&&Hm(t,"checked",e,!1)}function df(t,e){mw(t,e);var n=ss(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hf(t,e.type,n):e.hasOwnProperty("defaultValue")&&hf(t,e.type,ss(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Z0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hf(t,e,n){(e!=="number"||eu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ea=Array.isArray;function Di(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ss(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ff(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function J0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(ea(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ss(n)}}function pw(t,e){var n=ss(e.value),r=ss(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ey(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,yw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ja(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ha={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zT=["Webkit","ms","Moz","O"];Object.keys(ha).forEach(function(t){zT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ha[e]=ha[t]})});function vw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ha.hasOwnProperty(t)&&ha[t]?(""+e).trim():e+"px"}function xw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var WT=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pf(t,e){if(e){if(WT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function gf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yf=null;function Ym(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vf=null,Mi=null,Li=null;function ty(t){if(t=fl(t)){if(typeof vf!="function")throw Error(B(280));var e=t.stateNode;e&&(e=od(e),vf(t.stateNode,t.type,e))}}function _w(t){Mi?Li?Li.push(t):Li=[t]:Mi=t}function ww(){if(Mi){var t=Mi,e=Li;if(Li=Mi=null,ty(t),e)for(t=0;t<e.length;t++)ty(e[t])}}function bw(t,e){return t(e)}function Ew(){}var dh=!1;function kw(t,e,n){if(dh)return t(e,n);dh=!0;try{return bw(t,e,n)}finally{dh=!1,(Mi!==null||Li!==null)&&(Ew(),ww())}}function Ra(t,e){var n=t.stateNode;if(n===null)return null;var r=od(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var xf=!1;if(ur)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){xf=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{xf=!1}function $T(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var fa=!1,tu=null,nu=!1,_f=null,HT={onError:function(t){fa=!0,tu=t}};function qT(t,e,n,r,s,i,o,a,l){fa=!1,tu=null,$T.apply(HT,arguments)}function KT(t,e,n,r,s,i,o,a,l){if(qT.apply(this,arguments),fa){if(fa){var u=tu;fa=!1,tu=null}else throw Error(B(198));nu||(nu=!0,_f=u)}}function ni(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Tw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ny(t){if(ni(t)!==t)throw Error(B(188))}function GT(t){var e=t.alternate;if(!e){if(e=ni(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ny(s),t;if(i===r)return ny(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Sw(t){return t=GT(t),t!==null?Iw(t):null}function Iw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Iw(t);if(e!==null)return e;t=t.sibling}return null}var Cw=en.unstable_scheduleCallback,ry=en.unstable_cancelCallback,YT=en.unstable_shouldYield,QT=en.unstable_requestPaint,We=en.unstable_now,XT=en.unstable_getCurrentPriorityLevel,Qm=en.unstable_ImmediatePriority,Nw=en.unstable_UserBlockingPriority,ru=en.unstable_NormalPriority,ZT=en.unstable_LowPriority,Aw=en.unstable_IdlePriority,nd=null,Un=null;function JT(t){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(nd,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:nS,eS=Math.log,tS=Math.LN2;function nS(t){return t>>>=0,t===0?32:31-(eS(t)/tS|0)|0}var Yl=64,Ql=4194304;function ta(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function su(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ta(a):(i&=o,i!==0&&(r=ta(i)))}else o=n&~s,o!==0?r=ta(o):i!==0&&(r=ta(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),s=1<<n,r|=t[n],e&=~s;return r}function rS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Sn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=rS(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function wf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pw(){var t=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),t}function hh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function iS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Xm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ee=0;function jw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Rw,Zm,Dw,Mw,Lw,bf=!1,Xl=[],zr=null,Wr=null,$r=null,Da=new Map,Ma=new Map,Ar=[],oS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sy(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":Da.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(e.pointerId)}}function Fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fl(e),e!==null&&Zm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function aS(t,e,n,r,s){switch(e){case"focusin":return zr=Fo(zr,t,e,n,r,s),!0;case"dragenter":return Wr=Fo(Wr,t,e,n,r,s),!0;case"mouseover":return $r=Fo($r,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Da.set(i,Fo(Da.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ma.set(i,Fo(Ma.get(i)||null,t,e,n,r,s)),!0}return!1}function Ow(t){var e=Ds(t.target);if(e!==null){var n=ni(e);if(n!==null){if(e=n.tag,e===13){if(e=Tw(n),e!==null){t.blockedOn=e,Lw(t.priority,function(){Dw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ef(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yf=r,n.target.dispatchEvent(r),yf=null}else return e=fl(n),e!==null&&Zm(e),t.blockedOn=n,!1;e.shift()}return!0}function iy(t,e,n){Nc(t)&&n.delete(e)}function lS(){bf=!1,zr!==null&&Nc(zr)&&(zr=null),Wr!==null&&Nc(Wr)&&(Wr=null),$r!==null&&Nc($r)&&($r=null),Da.forEach(iy),Ma.forEach(iy)}function Uo(t,e){t.blockedOn===e&&(t.blockedOn=null,bf||(bf=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,lS)))}function La(t){function e(s){return Uo(s,t)}if(0<Xl.length){Uo(Xl[0],t);for(var n=1;n<Xl.length;n++){var r=Xl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zr!==null&&Uo(zr,t),Wr!==null&&Uo(Wr,t),$r!==null&&Uo($r,t),Da.forEach(e),Ma.forEach(e),n=0;n<Ar.length;n++)r=Ar[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ar.length&&(n=Ar[0],n.blockedOn===null);)Ow(n),n.blockedOn===null&&Ar.shift()}var Oi=vr.ReactCurrentBatchConfig,iu=!0;function cS(t,e,n,r){var s=Ee,i=Oi.transition;Oi.transition=null;try{Ee=1,Jm(t,e,n,r)}finally{Ee=s,Oi.transition=i}}function uS(t,e,n,r){var s=Ee,i=Oi.transition;Oi.transition=null;try{Ee=4,Jm(t,e,n,r)}finally{Ee=s,Oi.transition=i}}function Jm(t,e,n,r){if(iu){var s=Ef(t,e,n,r);if(s===null)bh(t,e,r,ou,n),sy(t,r);else if(aS(s,t,e,n,r))r.stopPropagation();else if(sy(t,r),e&4&&-1<oS.indexOf(t)){for(;s!==null;){var i=fl(s);if(i!==null&&Rw(i),i=Ef(t,e,n,r),i===null&&bh(t,e,r,ou,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else bh(t,e,r,null,n)}}var ou=null;function Ef(t,e,n,r){if(ou=null,t=Ym(r),t=Ds(t),t!==null)if(e=ni(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Tw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ou=t,null}function Vw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XT()){case Qm:return 1;case Nw:return 4;case ru:case ZT:return 16;case Aw:return 536870912;default:return 16}default:return 16}}var Or=null,ep=null,Ac=null;function Fw(){if(Ac)return Ac;var t,e=ep,n=e.length,r,s="value"in Or?Or.value:Or.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ac=s.slice(t,1<r?1-r:void 0)}function Pc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zl(){return!0}function oy(){return!1}function rn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zl:oy,this.isPropagationStopped=oy,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),e}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=rn(ho),hl=Ve({},ho,{view:0,detail:0}),dS=rn(hl),fh,mh,Bo,rd=Ve({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(fh=t.screenX-Bo.screenX,mh=t.screenY-Bo.screenY):mh=fh=0,Bo=t),fh)},movementY:function(t){return"movementY"in t?t.movementY:mh}}),ay=rn(rd),hS=Ve({},rd,{dataTransfer:0}),fS=rn(hS),mS=Ve({},hl,{relatedTarget:0}),ph=rn(mS),pS=Ve({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),gS=rn(pS),yS=Ve({},ho,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vS=rn(yS),xS=Ve({},ho,{data:0}),ly=rn(xS),_S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ES(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bS[t])?!!e[t]:!1}function np(){return ES}var kS=Ve({},hl,{key:function(t){if(t.key){var e=_S[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TS=rn(kS),SS=Ve({},rd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cy=rn(SS),IS=Ve({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np}),CS=rn(IS),NS=Ve({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),AS=rn(NS),PS=Ve({},rd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jS=rn(PS),RS=[9,13,27,32],rp=ur&&"CompositionEvent"in window,ma=null;ur&&"documentMode"in document&&(ma=document.documentMode);var DS=ur&&"TextEvent"in window&&!ma,Uw=ur&&(!rp||ma&&8<ma&&11>=ma),uy=" ",dy=!1;function Bw(t,e){switch(t){case"keyup":return RS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wi=!1;function MS(t,e){switch(t){case"compositionend":return zw(e);case"keypress":return e.which!==32?null:(dy=!0,uy);case"textInput":return t=e.data,t===uy&&dy?null:t;default:return null}}function LS(t,e){if(wi)return t==="compositionend"||!rp&&Bw(t,e)?(t=Fw(),Ac=ep=Or=null,wi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Uw&&e.locale!=="ko"?null:e.data;default:return null}}var OS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OS[t.type]:e==="textarea"}function Ww(t,e,n,r){_w(r),e=au(e,"onChange"),0<e.length&&(n=new tp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var pa=null,Oa=null;function VS(t){e1(t,0)}function sd(t){var e=ki(t);if(fw(e))return t}function FS(t,e){if(t==="change")return e}var $w=!1;if(ur){var gh;if(ur){var yh="oninput"in document;if(!yh){var fy=document.createElement("div");fy.setAttribute("oninput","return;"),yh=typeof fy.oninput=="function"}gh=yh}else gh=!1;$w=gh&&(!document.documentMode||9<document.documentMode)}function my(){pa&&(pa.detachEvent("onpropertychange",Hw),Oa=pa=null)}function Hw(t){if(t.propertyName==="value"&&sd(Oa)){var e=[];Ww(e,Oa,t,Ym(t)),kw(VS,e)}}function US(t,e,n){t==="focusin"?(my(),pa=e,Oa=n,pa.attachEvent("onpropertychange",Hw)):t==="focusout"&&my()}function BS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sd(Oa)}function zS(t,e){if(t==="click")return sd(e)}function WS(t,e){if(t==="input"||t==="change")return sd(e)}function $S(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:$S;function Va(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!sf.call(e,s)||!An(t[s],e[s]))return!1}return!0}function py(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gy(t,e){var n=py(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=py(n)}}function qw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kw(){for(var t=window,e=eu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=eu(t.document)}return e}function sp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HS(t){var e=Kw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qw(n.ownerDocument.documentElement,n)){if(r!==null&&sp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=gy(n,i);var o=gy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qS=ur&&"documentMode"in document&&11>=document.documentMode,bi=null,kf=null,ga=null,Tf=!1;function yy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tf||bi==null||bi!==eu(r)||(r=bi,"selectionStart"in r&&sp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ga&&Va(ga,r)||(ga=r,r=au(kf,"onSelect"),0<r.length&&(e=new tp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bi)))}function Jl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ei={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},vh={},Gw={};ur&&(Gw=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function id(t){if(vh[t])return vh[t];if(!Ei[t])return t;var e=Ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Gw)return vh[t]=e[n];return t}var Yw=id("animationend"),Qw=id("animationiteration"),Xw=id("animationstart"),Zw=id("transitionend"),Jw=new Map,vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(t,e){Jw.set(t,e),ti(e,[t])}for(var xh=0;xh<vy.length;xh++){var _h=vy[xh],KS=_h.toLowerCase(),GS=_h[0].toUpperCase()+_h.slice(1);ms(KS,"on"+GS)}ms(Yw,"onAnimationEnd");ms(Qw,"onAnimationIteration");ms(Xw,"onAnimationStart");ms("dblclick","onDoubleClick");ms("focusin","onFocus");ms("focusout","onBlur");ms(Zw,"onTransitionEnd");qi("onMouseEnter",["mouseout","mouseover"]);qi("onMouseLeave",["mouseout","mouseover"]);qi("onPointerEnter",["pointerout","pointerover"]);qi("onPointerLeave",["pointerout","pointerover"]);ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YS=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function xy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,KT(r,e,void 0,t),t.currentTarget=null}function e1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;xy(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;xy(s,a,u),i=l}}}if(nu)throw t=_f,nu=!1,_f=null,t}function Ae(t,e){var n=e[Af];n===void 0&&(n=e[Af]=new Set);var r=t+"__bubble";n.has(r)||(t1(e,t,2,!1),n.add(r))}function wh(t,e,n){var r=0;e&&(r|=4),t1(n,t,r,e)}var ec="_reactListening"+Math.random().toString(36).slice(2);function Fa(t){if(!t[ec]){t[ec]=!0,lw.forEach(function(n){n!=="selectionchange"&&(YS.has(n)||wh(n,!1,t),wh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ec]||(e[ec]=!0,wh("selectionchange",!1,e))}}function t1(t,e,n,r){switch(Vw(e)){case 1:var s=cS;break;case 4:s=uS;break;default:s=Jm}n=s.bind(null,e,n,t),s=void 0,!xf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function bh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ds(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}kw(function(){var u=i,h=Ym(n),f=[];e:{var m=Jw.get(t);if(m!==void 0){var g=tp,v=t;switch(t){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":g=TS;break;case"focusin":v="focus",g=ph;break;case"focusout":v="blur",g=ph;break;case"beforeblur":case"afterblur":g=ph;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ay;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=fS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=CS;break;case Yw:case Qw:case Xw:g=gS;break;case Zw:g=AS;break;case"scroll":g=dS;break;case"wheel":g=jS;break;case"copy":case"cut":case"paste":g=vS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=cy}var w=(e&4)!==0,S=!w&&t==="scroll",b=w?m!==null?m+"Capture":null:m;w=[];for(var k=u,_;k!==null;){_=k;var N=_.stateNode;if(_.tag===5&&N!==null&&(_=N,b!==null&&(N=Ra(k,b),N!=null&&w.push(Ua(k,N,_)))),S)break;k=k.return}0<w.length&&(m=new g(m,v,null,n,h),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==yf&&(v=n.relatedTarget||n.fromElement)&&(Ds(v)||v[dr]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Ds(v):null,v!==null&&(S=ni(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(w=ay,N="onMouseLeave",b="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(w=cy,N="onPointerLeave",b="onPointerEnter",k="pointer"),S=g==null?m:ki(g),_=v==null?m:ki(v),m=new w(N,k+"leave",g,n,h),m.target=S,m.relatedTarget=_,N=null,Ds(h)===u&&(w=new w(b,k+"enter",v,n,h),w.target=_,w.relatedTarget=S,N=w),S=N,g&&v)t:{for(w=g,b=v,k=0,_=w;_;_=di(_))k++;for(_=0,N=b;N;N=di(N))_++;for(;0<k-_;)w=di(w),k--;for(;0<_-k;)b=di(b),_--;for(;k--;){if(w===b||b!==null&&w===b.alternate)break t;w=di(w),b=di(b)}w=null}else w=null;g!==null&&_y(f,m,g,w,!1),v!==null&&S!==null&&_y(f,S,v,w,!0)}}e:{if(m=u?ki(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var j=FS;else if(hy(m))if($w)j=WS;else{j=BS;var D=US}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=zS);if(j&&(j=j(t,u))){Ww(f,j,n,h);break e}D&&D(t,m,u),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&hf(m,"number",m.value)}switch(D=u?ki(u):window,t){case"focusin":(hy(D)||D.contentEditable==="true")&&(bi=D,kf=u,ga=null);break;case"focusout":ga=kf=bi=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,yy(f,n,h);break;case"selectionchange":if(qS)break;case"keydown":case"keyup":yy(f,n,h)}var E;if(rp)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else wi?Bw(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Uw&&n.locale!=="ko"&&(wi||x!=="onCompositionStart"?x==="onCompositionEnd"&&wi&&(E=Fw()):(Or=h,ep="value"in Or?Or.value:Or.textContent,wi=!0)),D=au(u,x),0<D.length&&(x=new ly(x,t,null,n,h),f.push({event:x,listeners:D}),E?x.data=E:(E=zw(n),E!==null&&(x.data=E)))),(E=DS?MS(t,n):LS(t,n))&&(u=au(u,"onBeforeInput"),0<u.length&&(h=new ly("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=E))}e1(f,e)})}function Ua(t,e,n){return{instance:t,listener:e,currentTarget:n}}function au(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ra(t,n),i!=null&&r.unshift(Ua(t,i,s)),i=Ra(t,e),i!=null&&r.push(Ua(t,i,s))),t=t.return}return r}function di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _y(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Ra(n,i),l!=null&&o.unshift(Ua(n,l,a))):s||(l=Ra(n,i),l!=null&&o.push(Ua(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var QS=/\r\n?/g,XS=/\u0000|\uFFFD/g;function wy(t){return(typeof t=="string"?t:""+t).replace(QS,`
`).replace(XS,"")}function tc(t,e,n){if(e=wy(e),wy(t)!==e&&n)throw Error(B(425))}function lu(){}var Sf=null,If=null;function Cf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nf=typeof setTimeout=="function"?setTimeout:void 0,ZS=typeof clearTimeout=="function"?clearTimeout:void 0,by=typeof Promise=="function"?Promise:void 0,JS=typeof queueMicrotask=="function"?queueMicrotask:typeof by<"u"?function(t){return by.resolve(null).then(t).catch(eI)}:Nf;function eI(t){setTimeout(function(){throw t})}function Eh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),La(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);La(e)}function Hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ey(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fo=Math.random().toString(36).slice(2),Fn="__reactFiber$"+fo,Ba="__reactProps$"+fo,dr="__reactContainer$"+fo,Af="__reactEvents$"+fo,tI="__reactListeners$"+fo,nI="__reactHandles$"+fo;function Ds(t){var e=t[Fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dr]||n[Fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ey(t);t!==null;){if(n=t[Fn])return n;t=Ey(t)}return e}t=n,n=t.parentNode}return null}function fl(t){return t=t[Fn]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ki(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function od(t){return t[Ba]||null}var Pf=[],Ti=-1;function ps(t){return{current:t}}function Re(t){0>Ti||(t.current=Pf[Ti],Pf[Ti]=null,Ti--)}function Ce(t,e){Ti++,Pf[Ti]=t.current,t.current=e}var is={},Ct=ps(is),Ht=ps(!1),zs=is;function Ki(t,e){var n=t.type.contextTypes;if(!n)return is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function qt(t){return t=t.childContextTypes,t!=null}function cu(){Re(Ht),Re(Ct)}function ky(t,e,n){if(Ct.current!==is)throw Error(B(168));Ce(Ct,e),Ce(Ht,n)}function n1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,UT(t)||"Unknown",s));return Ve({},n,r)}function uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||is,zs=Ct.current,Ce(Ct,t),Ce(Ht,Ht.current),!0}function Ty(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=n1(t,e,zs),r.__reactInternalMemoizedMergedChildContext=t,Re(Ht),Re(Ct),Ce(Ct,t)):Re(Ht),Ce(Ht,n)}var tr=null,ad=!1,kh=!1;function r1(t){tr===null?tr=[t]:tr.push(t)}function rI(t){ad=!0,r1(t)}function gs(){if(!kh&&tr!==null){kh=!0;var t=0,e=Ee;try{var n=tr;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}tr=null,ad=!1}catch(s){throw tr!==null&&(tr=tr.slice(t+1)),Cw(Qm,gs),s}finally{Ee=e,kh=!1}}return null}var Si=[],Ii=0,du=null,hu=0,on=[],an=0,Ws=null,rr=1,sr="";function Ns(t,e){Si[Ii++]=hu,Si[Ii++]=du,du=t,hu=e}function s1(t,e,n){on[an++]=rr,on[an++]=sr,on[an++]=Ws,Ws=t;var r=rr;t=sr;var s=32-Sn(r)-1;r&=~(1<<s),n+=1;var i=32-Sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,rr=1<<32-Sn(e)+s|n<<s|r,sr=i+t}else rr=1<<i|n<<s|r,sr=t}function ip(t){t.return!==null&&(Ns(t,1),s1(t,1,0))}function op(t){for(;t===du;)du=Si[--Ii],Si[Ii]=null,hu=Si[--Ii],Si[Ii]=null;for(;t===Ws;)Ws=on[--an],on[an]=null,sr=on[--an],on[an]=null,rr=on[--an],on[an]=null}var Jt=null,Xt=null,De=!1,wn=null;function i1(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jt=t,Xt=Hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jt=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ws!==null?{id:rr,overflow:sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jt=t,Xt=null,!0):!1;default:return!1}}function jf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rf(t){if(De){var e=Xt;if(e){var n=e;if(!Sy(t,e)){if(jf(t))throw Error(B(418));e=Hr(n.nextSibling);var r=Jt;e&&Sy(t,e)?i1(r,n):(t.flags=t.flags&-4097|2,De=!1,Jt=t)}}else{if(jf(t))throw Error(B(418));t.flags=t.flags&-4097|2,De=!1,Jt=t}}}function Iy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function nc(t){if(t!==Jt)return!1;if(!De)return Iy(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cf(t.type,t.memoizedProps)),e&&(e=Xt)){if(jf(t))throw o1(),Error(B(418));for(;e;)i1(t,e),e=Hr(e.nextSibling)}if(Iy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=Hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=Jt?Hr(t.stateNode.nextSibling):null;return!0}function o1(){for(var t=Xt;t;)t=Hr(t.nextSibling)}function Gi(){Xt=Jt=null,De=!1}function ap(t){wn===null?wn=[t]:wn.push(t)}var sI=vr.ReactCurrentBatchConfig;function zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function rc(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cy(t){var e=t._init;return e(t._payload)}function a1(t){function e(b,k){if(t){var _=b.deletions;_===null?(b.deletions=[k],b.flags|=16):_.push(k)}}function n(b,k){if(!t)return null;for(;k!==null;)e(b,k),k=k.sibling;return null}function r(b,k){for(b=new Map;k!==null;)k.key!==null?b.set(k.key,k):b.set(k.index,k),k=k.sibling;return b}function s(b,k){return b=Yr(b,k),b.index=0,b.sibling=null,b}function i(b,k,_){return b.index=_,t?(_=b.alternate,_!==null?(_=_.index,_<k?(b.flags|=2,k):_):(b.flags|=2,k)):(b.flags|=1048576,k)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,k,_,N){return k===null||k.tag!==6?(k=Ph(_,b.mode,N),k.return=b,k):(k=s(k,_),k.return=b,k)}function l(b,k,_,N){var j=_.type;return j===_i?h(b,k,_.props.children,N,_.key):k!==null&&(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Cr&&Cy(j)===k.type)?(N=s(k,_.props),N.ref=zo(b,k,_),N.return=b,N):(N=Vc(_.type,_.key,_.props,null,b.mode,N),N.ref=zo(b,k,_),N.return=b,N)}function u(b,k,_,N){return k===null||k.tag!==4||k.stateNode.containerInfo!==_.containerInfo||k.stateNode.implementation!==_.implementation?(k=jh(_,b.mode,N),k.return=b,k):(k=s(k,_.children||[]),k.return=b,k)}function h(b,k,_,N,j){return k===null||k.tag!==7?(k=Us(_,b.mode,N,j),k.return=b,k):(k=s(k,_),k.return=b,k)}function f(b,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Ph(""+k,b.mode,_),k.return=b,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ql:return _=Vc(k.type,k.key,k.props,null,b.mode,_),_.ref=zo(b,null,k),_.return=b,_;case xi:return k=jh(k,b.mode,_),k.return=b,k;case Cr:var N=k._init;return f(b,N(k._payload),_)}if(ea(k)||Oo(k))return k=Us(k,b.mode,_,null),k.return=b,k;rc(b,k)}return null}function m(b,k,_,N){var j=k!==null?k.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:a(b,k,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ql:return _.key===j?l(b,k,_,N):null;case xi:return _.key===j?u(b,k,_,N):null;case Cr:return j=_._init,m(b,k,j(_._payload),N)}if(ea(_)||Oo(_))return j!==null?null:h(b,k,_,N,null);rc(b,_)}return null}function g(b,k,_,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(_)||null,a(k,b,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ql:return b=b.get(N.key===null?_:N.key)||null,l(k,b,N,j);case xi:return b=b.get(N.key===null?_:N.key)||null,u(k,b,N,j);case Cr:var D=N._init;return g(b,k,_,D(N._payload),j)}if(ea(N)||Oo(N))return b=b.get(_)||null,h(k,b,N,j,null);rc(k,N)}return null}function v(b,k,_,N){for(var j=null,D=null,E=k,x=k=0,I=null;E!==null&&x<_.length;x++){E.index>x?(I=E,E=null):I=E.sibling;var C=m(b,E,_[x],N);if(C===null){E===null&&(E=I);break}t&&E&&C.alternate===null&&e(b,E),k=i(C,k,x),D===null?j=C:D.sibling=C,D=C,E=I}if(x===_.length)return n(b,E),De&&Ns(b,x),j;if(E===null){for(;x<_.length;x++)E=f(b,_[x],N),E!==null&&(k=i(E,k,x),D===null?j=E:D.sibling=E,D=E);return De&&Ns(b,x),j}for(E=r(b,E);x<_.length;x++)I=g(E,b,x,_[x],N),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?x:I.key),k=i(I,k,x),D===null?j=I:D.sibling=I,D=I);return t&&E.forEach(function(A){return e(b,A)}),De&&Ns(b,x),j}function w(b,k,_,N){var j=Oo(_);if(typeof j!="function")throw Error(B(150));if(_=j.call(_),_==null)throw Error(B(151));for(var D=j=null,E=k,x=k=0,I=null,C=_.next();E!==null&&!C.done;x++,C=_.next()){E.index>x?(I=E,E=null):I=E.sibling;var A=m(b,E,C.value,N);if(A===null){E===null&&(E=I);break}t&&E&&A.alternate===null&&e(b,E),k=i(A,k,x),D===null?j=A:D.sibling=A,D=A,E=I}if(C.done)return n(b,E),De&&Ns(b,x),j;if(E===null){for(;!C.done;x++,C=_.next())C=f(b,C.value,N),C!==null&&(k=i(C,k,x),D===null?j=C:D.sibling=C,D=C);return De&&Ns(b,x),j}for(E=r(b,E);!C.done;x++,C=_.next())C=g(E,b,x,C.value,N),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?x:C.key),k=i(C,k,x),D===null?j=C:D.sibling=C,D=C);return t&&E.forEach(function(R){return e(b,R)}),De&&Ns(b,x),j}function S(b,k,_,N){if(typeof _=="object"&&_!==null&&_.type===_i&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ql:e:{for(var j=_.key,D=k;D!==null;){if(D.key===j){if(j=_.type,j===_i){if(D.tag===7){n(b,D.sibling),k=s(D,_.props.children),k.return=b,b=k;break e}}else if(D.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Cr&&Cy(j)===D.type){n(b,D.sibling),k=s(D,_.props),k.ref=zo(b,D,_),k.return=b,b=k;break e}n(b,D);break}else e(b,D);D=D.sibling}_.type===_i?(k=Us(_.props.children,b.mode,N,_.key),k.return=b,b=k):(N=Vc(_.type,_.key,_.props,null,b.mode,N),N.ref=zo(b,k,_),N.return=b,b=N)}return o(b);case xi:e:{for(D=_.key;k!==null;){if(k.key===D)if(k.tag===4&&k.stateNode.containerInfo===_.containerInfo&&k.stateNode.implementation===_.implementation){n(b,k.sibling),k=s(k,_.children||[]),k.return=b,b=k;break e}else{n(b,k);break}else e(b,k);k=k.sibling}k=jh(_,b.mode,N),k.return=b,b=k}return o(b);case Cr:return D=_._init,S(b,k,D(_._payload),N)}if(ea(_))return v(b,k,_,N);if(Oo(_))return w(b,k,_,N);rc(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,k!==null&&k.tag===6?(n(b,k.sibling),k=s(k,_),k.return=b,b=k):(n(b,k),k=Ph(_,b.mode,N),k.return=b,b=k),o(b)):n(b,k)}return S}var Yi=a1(!0),l1=a1(!1),fu=ps(null),mu=null,Ci=null,lp=null;function cp(){lp=Ci=mu=null}function up(t){var e=fu.current;Re(fu),t._currentValue=e}function Df(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vi(t,e){mu=t,lp=Ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(lp!==t)if(t={context:t,memoizedValue:e,next:null},Ci===null){if(mu===null)throw Error(B(308));Ci=t,mu.dependencies={lanes:0,firstContext:t}}else Ci=Ci.next=t;return e}var Ms=null;function dp(t){Ms===null?Ms=[t]:Ms.push(t)}function c1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,dp(e)):(n.next=s.next,s.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nr=!1;function hp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function u1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hr(t,n)}return s=r.interleaved,s===null?(e.next=e,dp(r)):(e.next=s.next,s.next=e),r.interleaved=e,hr(t,n)}function jc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xm(t,n)}}function Ny(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pu(t,e,n,r){var s=t.updateQueue;Nr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=u=l=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(m=e,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){f=v.call(g,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,m=typeof v=="function"?v.call(g,f,m):v,m==null)break e;f=Ve({},f,m);break e;case 2:Nr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=f):h=h.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Hs|=o,t.lanes=o,t.memoizedState=f}}function Ay(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var ml={},Bn=ps(ml),za=ps(ml),Wa=ps(ml);function Ls(t){if(t===ml)throw Error(B(174));return t}function fp(t,e){switch(Ce(Wa,e),Ce(za,t),Ce(Bn,ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mf(e,t)}Re(Bn),Ce(Bn,e)}function Qi(){Re(Bn),Re(za),Re(Wa)}function d1(t){Ls(Wa.current);var e=Ls(Bn.current),n=mf(e,t.type);e!==n&&(Ce(za,t),Ce(Bn,n))}function mp(t){za.current===t&&(Re(Bn),Re(za))}var Le=ps(0);function gu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Th=[];function pp(){for(var t=0;t<Th.length;t++)Th[t]._workInProgressVersionPrimary=null;Th.length=0}var Rc=vr.ReactCurrentDispatcher,Sh=vr.ReactCurrentBatchConfig,$s=0,Oe=null,Je=null,ot=null,yu=!1,ya=!1,$a=0,iI=0;function vt(){throw Error(B(321))}function gp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!An(t[n],e[n]))return!1;return!0}function yp(t,e,n,r,s,i){if($s=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rc.current=t===null||t.memoizedState===null?cI:uI,t=n(r,s),ya){i=0;do{if(ya=!1,$a=0,25<=i)throw Error(B(301));i+=1,ot=Je=null,e.updateQueue=null,Rc.current=dI,t=n(r,s)}while(ya)}if(Rc.current=vu,e=Je!==null&&Je.next!==null,$s=0,ot=Je=Oe=null,yu=!1,e)throw Error(B(300));return t}function vp(){var t=$a!==0;return $a=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Oe.memoizedState=ot=t:ot=ot.next=t,ot}function fn(){if(Je===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=ot===null?Oe.memoizedState:ot.next;if(e!==null)ot=e,Je=t;else{if(t===null)throw Error(B(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},ot===null?Oe.memoizedState=ot=t:ot=ot.next=t}return ot}function Ha(t,e){return typeof e=="function"?e(t):e}function Ih(t){var e=fn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var h=u.lane;if(($s&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Oe.lanes|=h,Hs|=h}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,An(r,e.memoizedState)||($t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,Hs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ch(t){var e=fn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);An(i,e.memoizedState)||($t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function h1(){}function f1(t,e){var n=Oe,r=fn(),s=e(),i=!An(r.memoizedState,s);if(i&&(r.memoizedState=s,$t=!0),r=r.queue,xp(g1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,qa(9,p1.bind(null,n,r,s,e),void 0,null),at===null)throw Error(B(349));$s&30||m1(n,e,s)}return s}function m1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function p1(t,e,n,r){e.value=n,e.getSnapshot=r,y1(e)&&v1(t)}function g1(t,e,n){return n(function(){y1(e)&&v1(t)})}function y1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!An(t,n)}catch{return!0}}function v1(t){var e=hr(t,1);e!==null&&In(e,t,1,-1)}function Py(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:t},e.queue=t,t=t.dispatch=lI.bind(null,Oe,t),[e.memoizedState,t]}function qa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function x1(){return fn().memoizedState}function Dc(t,e,n,r){var s=Ln();Oe.flags|=t,s.memoizedState=qa(1|e,n,void 0,r===void 0?null:r)}function ld(t,e,n,r){var s=fn();r=r===void 0?null:r;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,r!==null&&gp(r,o.deps)){s.memoizedState=qa(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=qa(1|e,n,i,r)}function jy(t,e){return Dc(8390656,8,t,e)}function xp(t,e){return ld(2048,8,t,e)}function _1(t,e){return ld(4,2,t,e)}function w1(t,e){return ld(4,4,t,e)}function b1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function E1(t,e,n){return n=n!=null?n.concat([t]):null,ld(4,4,b1.bind(null,e,t),n)}function _p(){}function k1(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function T1(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function S1(t,e,n){return $s&21?(An(n,e)||(n=Pw(),Oe.lanes|=n,Hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=n)}function oI(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=Sh.transition;Sh.transition={};try{t(!1),e()}finally{Ee=n,Sh.transition=r}}function I1(){return fn().memoizedState}function aI(t,e,n){var r=Gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},C1(t))N1(e,n);else if(n=c1(t,e,n,r),n!==null){var s=Rt();In(n,t,r,s),A1(n,e,r)}}function lI(t,e,n){var r=Gr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(C1(t))N1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,An(a,o)){var l=e.interleaved;l===null?(s.next=s,dp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=c1(t,e,s,r),n!==null&&(s=Rt(),In(n,t,r,s),A1(n,e,r))}}function C1(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function N1(t,e){ya=yu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function A1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xm(t,n)}}var vu={readContext:hn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},cI={readContext:hn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:jy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dc(4194308,4,b1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dc(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aI.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:Py,useDebugValue:_p,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=Py(!1),e=t[0];return t=oI.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=Ln();if(De){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),at===null)throw Error(B(349));$s&30||m1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,jy(g1.bind(null,r,i,t),[t]),r.flags|=2048,qa(9,p1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ln(),e=at.identifierPrefix;if(De){var n=sr,r=rr;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$a++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uI={readContext:hn,useCallback:k1,useContext:hn,useEffect:xp,useImperativeHandle:E1,useInsertionEffect:_1,useLayoutEffect:w1,useMemo:T1,useReducer:Ih,useRef:x1,useState:function(){return Ih(Ha)},useDebugValue:_p,useDeferredValue:function(t){var e=fn();return S1(e,Je.memoizedState,t)},useTransition:function(){var t=Ih(Ha)[0],e=fn().memoizedState;return[t,e]},useMutableSource:h1,useSyncExternalStore:f1,useId:I1,unstable_isNewReconciler:!1},dI={readContext:hn,useCallback:k1,useContext:hn,useEffect:xp,useImperativeHandle:E1,useInsertionEffect:_1,useLayoutEffect:w1,useMemo:T1,useReducer:Ch,useRef:x1,useState:function(){return Ch(Ha)},useDebugValue:_p,useDeferredValue:function(t){var e=fn();return Je===null?e.memoizedState=t:S1(e,Je.memoizedState,t)},useTransition:function(){var t=Ch(Ha)[0],e=fn().memoizedState;return[t,e]},useMutableSource:h1,useSyncExternalStore:f1,useId:I1,unstable_isNewReconciler:!1};function xn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cd={isMounted:function(t){return(t=t._reactInternals)?ni(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rt(),s=Gr(t),i=ar(r,s);i.payload=e,n!=null&&(i.callback=n),e=qr(t,i,s),e!==null&&(In(e,t,s,r),jc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rt(),s=Gr(t),i=ar(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=qr(t,i,s),e!==null&&(In(e,t,s,r),jc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),r=Gr(t),s=ar(n,r);s.tag=2,e!=null&&(s.callback=e),e=qr(t,s,r),e!==null&&(In(e,t,r,n),jc(e,t,r))}};function Ry(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Va(n,r)||!Va(s,i):!0}function P1(t,e,n){var r=!1,s=is,i=e.contextType;return typeof i=="object"&&i!==null?i=hn(i):(s=qt(e)?zs:Ct.current,r=e.contextTypes,i=(r=r!=null)?Ki(t,s):is),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Dy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cd.enqueueReplaceState(e,e.state,null)}function Lf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},hp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=hn(i):(i=qt(e)?zs:Ct.current,s.context=Ki(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Mf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cd.enqueueReplaceState(s,s.state,null),pu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Xi(t,e){try{var n="",r=e;do n+=FT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Nh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Of(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hI=typeof WeakMap=="function"?WeakMap:Map;function j1(t,e,n){n=ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_u||(_u=!0,Kf=r),Of(t,e)},n}function R1(t,e,n){n=ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Of(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Of(t,e),typeof r!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function My(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=SI.bind(null,t,e,n),e.then(t,t))}function Ly(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Oy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ar(-1,1),e.tag=2,qr(n,e,1))),n.lanes|=1),t)}var fI=vr.ReactCurrentOwner,$t=!1;function jt(t,e,n,r){e.child=t===null?l1(e,null,n,r):Yi(e,t.child,n,r)}function Vy(t,e,n,r,s){n=n.render;var i=e.ref;return Vi(e,s),r=yp(t,e,n,r,i,s),n=vp(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fr(t,e,s)):(De&&n&&ip(e),e.flags|=1,jt(t,e,r,s),e.child)}function Fy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Cp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,D1(t,e,i,r,s)):(t=Vc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Va,n(o,r)&&t.ref===e.ref)return fr(t,e,s)}return e.flags|=1,t=Yr(i,r),t.ref=e.ref,t.return=e,e.child=t}function D1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Va(i,r)&&t.ref===e.ref)if($t=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,fr(t,e,s)}return Vf(t,e,n,r,s)}function M1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Ai,Qt),Qt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(Ai,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ce(Ai,Qt),Qt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ce(Ai,Qt),Qt|=r;return jt(t,e,s,n),e.child}function L1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vf(t,e,n,r,s){var i=qt(n)?zs:Ct.current;return i=Ki(e,i),Vi(e,s),n=yp(t,e,n,r,i,s),r=vp(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fr(t,e,s)):(De&&r&&ip(e),e.flags|=1,jt(t,e,n,s),e.child)}function Uy(t,e,n,r,s){if(qt(n)){var i=!0;uu(e)}else i=!1;if(Vi(e,s),e.stateNode===null)Mc(t,e),P1(e,n,r),Lf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=hn(u):(u=qt(n)?zs:Ct.current,u=Ki(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Dy(e,o,r,u),Nr=!1;var m=e.memoizedState;o.state=m,pu(e,r,o,s),l=e.memoizedState,a!==r||m!==l||Ht.current||Nr?(typeof h=="function"&&(Mf(e,n,h,r),l=e.memoizedState),(a=Nr||Ry(e,n,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,u1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:xn(e.type,a),o.props=u,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=hn(l):(l=qt(n)?zs:Ct.current,l=Ki(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&Dy(e,o,r,l),Nr=!1,m=e.memoizedState,o.state=m,pu(e,r,o,s);var v=e.memoizedState;a!==f||m!==v||Ht.current||Nr?(typeof g=="function"&&(Mf(e,n,g,r),v=e.memoizedState),(u=Nr||Ry(e,n,u,r,m,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ff(t,e,n,r,i,s)}function Ff(t,e,n,r,s,i){L1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ty(e,n,!1),fr(t,e,i);r=e.stateNode,fI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Yi(e,t.child,null,i),e.child=Yi(e,null,a,i)):jt(t,e,a,i),e.memoizedState=r.state,s&&Ty(e,n,!0),e.child}function O1(t){var e=t.stateNode;e.pendingContext?ky(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ky(t,e.context,!1),fp(t,e.containerInfo)}function By(t,e,n,r,s){return Gi(),ap(s),e.flags|=256,jt(t,e,n,r),e.child}var Uf={dehydrated:null,treeContext:null,retryLane:0};function Bf(t){return{baseLanes:t,cachePool:null,transitions:null}}function V1(t,e,n){var r=e.pendingProps,s=Le.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ce(Le,s&1),t===null)return Rf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=hd(o,r,0,null),t=Us(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Bf(n),e.memoizedState=Uf,t):wp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return mI(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Yr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Yr(a,i):(i=Us(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Bf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Uf,r}return i=t.child,t=i.sibling,r=Yr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wp(t,e){return e=hd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sc(t,e,n,r){return r!==null&&ap(r),Yi(e,t.child,null,n),t=wp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Nh(Error(B(422))),sc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=hd({mode:"visible",children:r.children},s,0,null),i=Us(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Yi(e,t.child,null,o),e.child.memoizedState=Bf(o),e.memoizedState=Uf,i);if(!(e.mode&1))return sc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=Nh(i,r,void 0),sc(t,e,o,r)}if(a=(o&t.childLanes)!==0,$t||a){if(r=at,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hr(t,s),In(r,t,s,-1))}return Ip(),r=Nh(Error(B(421))),sc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=II.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Xt=Hr(s.nextSibling),Jt=e,De=!0,wn=null,t!==null&&(on[an++]=rr,on[an++]=sr,on[an++]=Ws,rr=t.id,sr=t.overflow,Ws=e),e=wp(e,r.children),e.flags|=4096,e)}function zy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Df(t.return,e,n)}function Ah(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function F1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(jt(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zy(t,n,e);else if(t.tag===19)zy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&gu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ah(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&gu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ah(e,!0,n,null,i);break;case"together":Ah(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pI(t,e,n){switch(e.tag){case 3:O1(e),Gi();break;case 5:d1(e);break;case 1:qt(e.type)&&uu(e);break;case 4:fp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ce(fu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?V1(t,e,n):(Ce(Le,Le.current&1),t=fr(t,e,n),t!==null?t.sibling:null);Ce(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return F1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,M1(t,e,n)}return fr(t,e,n)}var U1,zf,B1,z1;U1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zf=function(){};B1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ls(Bn.current);var i=null;switch(n){case"input":s=uf(t,s),r=uf(t,r),i=[];break;case"select":s=Ve({},s,{value:void 0}),r=Ve({},r,{value:void 0}),i=[];break;case"textarea":s=ff(t,s),r=ff(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lu)}pf(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ae("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};z1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wo(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gI(t,e,n){var r=e.pendingProps;switch(op(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return qt(e.type)&&cu(),xt(e),null;case 3:return r=e.stateNode,Qi(),Re(Ht),Re(Ct),pp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(Qf(wn),wn=null))),zf(t,e),xt(e),null;case 5:mp(e);var s=Ls(Wa.current);if(n=e.type,t!==null&&e.stateNode!=null)B1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return xt(e),null}if(t=Ls(Bn.current),nc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Fn]=e,r[Ba]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<na.length;s++)Ae(na[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":X0(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":J0(r,i),Ae("invalid",r)}pf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&tc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&tc(r.textContent,a,t),s=["children",""+a]):Pa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Kl(r),Z0(r,i,!0);break;case"textarea":Kl(r),ey(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=lu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Fn]=e,t[Ba]=r,U1(t,e,!1,!1),e.stateNode=t;e:{switch(o=gf(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),s=r;break;case"iframe":case"object":case"embed":Ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<na.length;s++)Ae(na[s],t);s=r;break;case"source":Ae("error",t),s=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),s=r;break;case"details":Ae("toggle",t),s=r;break;case"input":X0(t,r),s=uf(t,r),Ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ve({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":J0(t,r),s=ff(t,r),Ae("invalid",t);break;default:s=r}pf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?xw(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yw(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ja(t,l):typeof l=="number"&&ja(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ae("scroll",t):l!=null&&Hm(t,i,l,o))}switch(n){case"input":Kl(t),Z0(t,r,!1);break;case"textarea":Kl(t),ey(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ss(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Di(t,!!r.multiple,i,!1):r.defaultValue!=null&&Di(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=lu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)z1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Ls(Wa.current),Ls(Bn.current),nc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fn]=e,(i=r.nodeValue!==n)&&(t=Jt,t!==null))switch(t.tag){case 3:tc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fn]=e,e.stateNode=r}return xt(e),null;case 13:if(Re(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Xt!==null&&e.mode&1&&!(e.flags&128))o1(),Gi(),e.flags|=98560,i=!1;else if(i=nc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Fn]=e}else Gi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),i=!1}else wn!==null&&(Qf(wn),wn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?tt===0&&(tt=3):Ip())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return Qi(),zf(t,e),t===null&&Fa(e.stateNode.containerInfo),xt(e),null;case 10:return up(e.type._context),xt(e),null;case 17:return qt(e.type)&&cu(),xt(e),null;case 19:if(Re(Le),i=e.memoizedState,i===null)return xt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Wo(i,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gu(t),o!==null){for(e.flags|=128,Wo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&We()>Zi&&(e.flags|=128,r=!0,Wo(i,!1),e.lanes=4194304)}else{if(!r)if(t=gu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!De)return xt(e),null}else 2*We()-i.renderingStartTime>Zi&&n!==1073741824&&(e.flags|=128,r=!0,Wo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=We(),e.sibling=null,n=Le.current,Ce(Le,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return Sp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function yI(t,e){switch(op(e),e.tag){case 1:return qt(e.type)&&cu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qi(),Re(Ht),Re(Ct),pp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mp(e),null;case 13:if(Re(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Gi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Le),null;case 4:return Qi(),null;case 10:return up(e.type._context),null;case 22:case 23:return Sp(),null;case 24:return null;default:return null}}var ic=!1,kt=!1,vI=typeof WeakSet=="function"?WeakSet:Set,G=null;function Ni(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function Wf(t,e,n){try{n()}catch(r){Be(t,e,r)}}var Wy=!1;function xI(t,e){if(Sf=iu,t=Kw(),sp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(l=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(If={focusedElem:t,selectionRange:n},iu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,S=v.memoizedState,b=e.stateNode,k=b.getSnapshotBeforeUpdate(e.elementType===e.type?w:xn(e.type,w),S);b.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(N){Be(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return v=Wy,Wy=!1,v}function va(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Wf(e,n,i)}s=s.next}while(s!==r)}}function ud(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $f(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function W1(t){var e=t.alternate;e!==null&&(t.alternate=null,W1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fn],delete e[Ba],delete e[Af],delete e[tI],delete e[nI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $1(t){return t.tag===5||t.tag===3||t.tag===4}function $y(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lu));else if(r!==4&&(t=t.child,t!==null))for(Hf(t,e,n),t=t.sibling;t!==null;)Hf(t,e,n),t=t.sibling}function qf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qf(t,e,n),t=t.sibling;t!==null;)qf(t,e,n),t=t.sibling}var ct=null,_n=!1;function kr(t,e,n){for(n=n.child;n!==null;)H1(t,e,n),n=n.sibling}function H1(t,e,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(nd,n)}catch{}switch(n.tag){case 5:kt||Ni(n,e);case 6:var r=ct,s=_n;ct=null,kr(t,e,n),ct=r,_n=s,ct!==null&&(_n?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(_n?(t=ct,n=n.stateNode,t.nodeType===8?Eh(t.parentNode,n):t.nodeType===1&&Eh(t,n),La(t)):Eh(ct,n.stateNode));break;case 4:r=ct,s=_n,ct=n.stateNode.containerInfo,_n=!0,kr(t,e,n),ct=r,_n=s;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Wf(n,e,o),s=s.next}while(s!==r)}kr(t,e,n);break;case 1:if(!kt&&(Ni(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Be(n,e,a)}kr(t,e,n);break;case 21:kr(t,e,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,kr(t,e,n),kt=r):kr(t,e,n);break;default:kr(t,e,n)}}function Hy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vI),e.forEach(function(r){var s=CI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,_n=!1;break e;case 3:ct=a.stateNode.containerInfo,_n=!0;break e;case 4:ct=a.stateNode.containerInfo,_n=!0;break e}a=a.return}if(ct===null)throw Error(B(160));H1(i,o,s),ct=null,_n=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Be(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)q1(e,t),e=e.sibling}function q1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),Rn(t),r&4){try{va(3,t,t.return),ud(3,t)}catch(w){Be(t,t.return,w)}try{va(5,t,t.return)}catch(w){Be(t,t.return,w)}}break;case 1:vn(e,t),Rn(t),r&512&&n!==null&&Ni(n,n.return);break;case 5:if(vn(e,t),Rn(t),r&512&&n!==null&&Ni(n,n.return),t.flags&32){var s=t.stateNode;try{ja(s,"")}catch(w){Be(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mw(s,i),gf(a,o);var u=gf(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?xw(s,f):h==="dangerouslySetInnerHTML"?yw(s,f):h==="children"?ja(s,f):Hm(s,h,f,u)}switch(a){case"input":df(s,i);break;case"textarea":pw(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Di(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Di(s,!!i.multiple,i.defaultValue,!0):Di(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ba]=i}catch(w){Be(t,t.return,w)}}break;case 6:if(vn(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Be(t,t.return,w)}}break;case 3:if(vn(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{La(e.containerInfo)}catch(w){Be(t,t.return,w)}break;case 4:vn(e,t),Rn(t);break;case 13:vn(e,t),Rn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(kp=We())),r&4&&Hy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(kt=(u=kt)||h,vn(e,t),kt=u):vn(e,t),Rn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(f=G=h;G!==null;){switch(m=G,g=m.child,m.tag){case 0:case 11:case 14:case 15:va(4,m,m.return);break;case 1:Ni(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Be(r,n,w)}}break;case 5:Ni(m,m.return);break;case 22:if(m.memoizedState!==null){Ky(f);continue}}g!==null?(g.return=m,G=g):Ky(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vw("display",o))}catch(w){Be(t,t.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Be(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vn(e,t),Rn(t),r&4&&Hy(t);break;case 21:break;default:vn(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($1(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ja(s,""),r.flags&=-33);var i=$y(t);qf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$y(t);Hf(t,a,o);break;default:throw Error(B(161))}}catch(l){Be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _I(t,e,n){G=t,K1(t)}function K1(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ic;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||kt;a=ic;var u=kt;if(ic=o,(kt=l)&&!u)for(G=s;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?Gy(s):l!==null?(l.return=o,G=l):Gy(s);for(;i!==null;)G=i,K1(i),i=i.sibling;G=s,ic=a,kt=u}qy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):qy(t)}}function qy(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kt||ud(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:xn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ay(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ay(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&La(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}kt||e.flags&512&&$f(e)}catch(m){Be(e,e.return,m)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Ky(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Gy(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ud(4,e)}catch(l){Be(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Be(e,s,l)}}var i=e.return;try{$f(e)}catch(l){Be(e,i,l)}break;case 5:var o=e.return;try{$f(e)}catch(l){Be(e,o,l)}}}catch(l){Be(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var wI=Math.ceil,xu=vr.ReactCurrentDispatcher,bp=vr.ReactCurrentOwner,dn=vr.ReactCurrentBatchConfig,pe=0,at=null,Ke=null,ht=0,Qt=0,Ai=ps(0),tt=0,Ka=null,Hs=0,dd=0,Ep=0,xa=null,Bt=null,kp=0,Zi=1/0,er=null,_u=!1,Kf=null,Kr=null,oc=!1,Vr=null,wu=0,_a=0,Gf=null,Lc=-1,Oc=0;function Rt(){return pe&6?We():Lc!==-1?Lc:Lc=We()}function Gr(t){return t.mode&1?pe&2&&ht!==0?ht&-ht:sI.transition!==null?(Oc===0&&(Oc=Pw()),Oc):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:Vw(t.type)),t):1}function In(t,e,n,r){if(50<_a)throw _a=0,Gf=null,Error(B(185));dl(t,n,r),(!(pe&2)||t!==at)&&(t===at&&(!(pe&2)&&(dd|=n),tt===4&&Pr(t,ht)),Kt(t,r),n===1&&pe===0&&!(e.mode&1)&&(Zi=We()+500,ad&&gs()))}function Kt(t,e){var n=t.callbackNode;sS(t,e);var r=su(t,t===at?ht:0);if(r===0)n!==null&&ry(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ry(n),e===1)t.tag===0?rI(Yy.bind(null,t)):r1(Yy.bind(null,t)),JS(function(){!(pe&6)&&gs()}),n=null;else{switch(jw(r)){case 1:n=Qm;break;case 4:n=Nw;break;case 16:n=ru;break;case 536870912:n=Aw;break;default:n=ru}n=t2(n,G1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function G1(t,e){if(Lc=-1,Oc=0,pe&6)throw Error(B(327));var n=t.callbackNode;if(Fi()&&t.callbackNode!==n)return null;var r=su(t,t===at?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bu(t,r);else{e=r;var s=pe;pe|=2;var i=Q1();(at!==t||ht!==e)&&(er=null,Zi=We()+500,Fs(t,e));do try{kI();break}catch(a){Y1(t,a)}while(!0);cp(),xu.current=i,pe=s,Ke!==null?e=0:(at=null,ht=0,e=tt)}if(e!==0){if(e===2&&(s=wf(t),s!==0&&(r=s,e=Yf(t,s))),e===1)throw n=Ka,Fs(t,0),Pr(t,r),Kt(t,We()),n;if(e===6)Pr(t,r);else{if(s=t.current.alternate,!(r&30)&&!bI(s)&&(e=bu(t,r),e===2&&(i=wf(t),i!==0&&(r=i,e=Yf(t,i))),e===1))throw n=Ka,Fs(t,0),Pr(t,r),Kt(t,We()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:As(t,Bt,er);break;case 3:if(Pr(t,r),(r&130023424)===r&&(e=kp+500-We(),10<e)){if(su(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Rt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Nf(As.bind(null,t,Bt,er),e);break}As(t,Bt,er);break;case 4:if(Pr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wI(r/1960))-r,10<r){t.timeoutHandle=Nf(As.bind(null,t,Bt,er),r);break}As(t,Bt,er);break;case 5:As(t,Bt,er);break;default:throw Error(B(329))}}}return Kt(t,We()),t.callbackNode===n?G1.bind(null,t):null}function Yf(t,e){var n=xa;return t.current.memoizedState.isDehydrated&&(Fs(t,e).flags|=256),t=bu(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&Qf(e)),t}function Qf(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function bI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!An(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pr(t,e){for(e&=~Ep,e&=~dd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function Yy(t){if(pe&6)throw Error(B(327));Fi();var e=su(t,0);if(!(e&1))return Kt(t,We()),null;var n=bu(t,e);if(t.tag!==0&&n===2){var r=wf(t);r!==0&&(e=r,n=Yf(t,r))}if(n===1)throw n=Ka,Fs(t,0),Pr(t,e),Kt(t,We()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,As(t,Bt,er),Kt(t,We()),null}function Tp(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Zi=We()+500,ad&&gs())}}function qs(t){Vr!==null&&Vr.tag===0&&!(pe&6)&&Fi();var e=pe;pe|=1;var n=dn.transition,r=Ee;try{if(dn.transition=null,Ee=1,t)return t()}finally{Ee=r,dn.transition=n,pe=e,!(pe&6)&&gs()}}function Sp(){Qt=Ai.current,Re(Ai)}function Fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZS(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(op(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cu();break;case 3:Qi(),Re(Ht),Re(Ct),pp();break;case 5:mp(r);break;case 4:Qi();break;case 13:Re(Le);break;case 19:Re(Le);break;case 10:up(r.type._context);break;case 22:case 23:Sp()}n=n.return}if(at=t,Ke=t=Yr(t.current,null),ht=Qt=e,tt=0,Ka=null,Ep=dd=Hs=0,Bt=xa=null,Ms!==null){for(e=0;e<Ms.length;e++)if(n=Ms[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ms=null}return t}function Y1(t,e){do{var n=Ke;try{if(cp(),Rc.current=vu,yu){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yu=!1}if($s=0,ot=Je=Oe=null,ya=!1,$a=0,bp.current=null,n===null||n.return===null){tt=1,Ka=e,Ke=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ht,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Ly(o);if(g!==null){g.flags&=-257,Oy(g,o,a,i,e),g.mode&1&&My(i,u,e),e=g,l=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){My(i,u,e),Ip();break e}l=Error(B(426))}}else if(De&&a.mode&1){var S=Ly(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Oy(S,o,a,i,e),ap(Xi(l,a));break e}}i=l=Xi(l,a),tt!==4&&(tt=2),xa===null?xa=[i]:xa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=j1(i,l,e);Ny(i,b);break e;case 1:a=l;var k=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof k.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Kr===null||!Kr.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=R1(i,a,e);Ny(i,N);break e}}i=i.return}while(i!==null)}Z1(n)}catch(j){e=j,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function Q1(){var t=xu.current;return xu.current=vu,t===null?vu:t}function Ip(){(tt===0||tt===3||tt===2)&&(tt=4),at===null||!(Hs&268435455)&&!(dd&268435455)||Pr(at,ht)}function bu(t,e){var n=pe;pe|=2;var r=Q1();(at!==t||ht!==e)&&(er=null,Fs(t,e));do try{EI();break}catch(s){Y1(t,s)}while(!0);if(cp(),pe=n,xu.current=r,Ke!==null)throw Error(B(261));return at=null,ht=0,tt}function EI(){for(;Ke!==null;)X1(Ke)}function kI(){for(;Ke!==null&&!YT();)X1(Ke)}function X1(t){var e=e2(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?Z1(t):Ke=e,bp.current=null}function Z1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yI(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Ke=null;return}}else if(n=gI(n,e,Qt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);tt===0&&(tt=5)}function As(t,e,n){var r=Ee,s=dn.transition;try{dn.transition=null,Ee=1,TI(t,e,n,r)}finally{dn.transition=s,Ee=r}return null}function TI(t,e,n,r){do Fi();while(Vr!==null);if(pe&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(iS(t,i),t===at&&(Ke=at=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oc||(oc=!0,t2(ru,function(){return Fi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=dn.transition,dn.transition=null;var o=Ee;Ee=1;var a=pe;pe|=4,bp.current=null,xI(t,n),q1(n,t),HS(If),iu=!!Sf,If=Sf=null,t.current=n,_I(n),QT(),pe=a,Ee=o,dn.transition=i}else t.current=n;if(oc&&(oc=!1,Vr=t,wu=s),i=t.pendingLanes,i===0&&(Kr=null),JT(n.stateNode),Kt(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_u)throw _u=!1,t=Kf,Kf=null,t;return wu&1&&t.tag!==0&&Fi(),i=t.pendingLanes,i&1?t===Gf?_a++:(_a=0,Gf=t):_a=0,gs(),null}function Fi(){if(Vr!==null){var t=jw(wu),e=dn.transition,n=Ee;try{if(dn.transition=null,Ee=16>t?16:t,Vr===null)var r=!1;else{if(t=Vr,Vr=null,wu=0,pe&6)throw Error(B(331));var s=pe;for(pe|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:va(8,h,i)}var f=h.child;if(f!==null)f.return=h,G=f;else for(;G!==null;){h=G;var m=h.sibling,g=h.return;if(W1(h),h===u){G=null;break}if(m!==null){m.return=g,G=m;break}G=g}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:va(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,G=b;break e}G=i.return}}var k=t.current;for(G=k;G!==null;){o=G;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,G=_;else e:for(o=k;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ud(9,a)}}catch(j){Be(a,a.return,j)}if(a===o){G=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,G=N;break e}G=a.return}}if(pe=s,gs(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(nd,t)}catch{}r=!0}return r}finally{Ee=n,dn.transition=e}}return!1}function Qy(t,e,n){e=Xi(n,e),e=j1(t,e,1),t=qr(t,e,1),e=Rt(),t!==null&&(dl(t,1,e),Kt(t,e))}function Be(t,e,n){if(t.tag===3)Qy(t,t,n);else for(;e!==null;){if(e.tag===3){Qy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kr===null||!Kr.has(r))){t=Xi(n,t),t=R1(e,t,1),e=qr(e,t,1),t=Rt(),e!==null&&(dl(e,1,t),Kt(e,t));break}}e=e.return}}function SI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(ht&n)===n&&(tt===4||tt===3&&(ht&130023424)===ht&&500>We()-kp?Fs(t,0):Ep|=n),Kt(t,e)}function J1(t,e){e===0&&(t.mode&1?(e=Ql,Ql<<=1,!(Ql&130023424)&&(Ql=4194304)):e=1);var n=Rt();t=hr(t,e),t!==null&&(dl(t,e,n),Kt(t,n))}function II(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J1(t,n)}function CI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),J1(t,n)}var e2;e2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)$t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $t=!1,pI(t,e,n);$t=!!(t.flags&131072)}else $t=!1,De&&e.flags&1048576&&s1(e,hu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mc(t,e),t=e.pendingProps;var s=Ki(e,Ct.current);Vi(e,n),s=yp(null,e,r,t,s,n);var i=vp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qt(r)?(i=!0,uu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hp(e),s.updater=cd,e.stateNode=s,s._reactInternals=e,Lf(e,r,t,n),e=Ff(null,e,r,!0,i,n)):(e.tag=0,De&&i&&ip(e),jt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=AI(r),t=xn(r,t),s){case 0:e=Vf(null,e,r,t,n);break e;case 1:e=Uy(null,e,r,t,n);break e;case 11:e=Vy(null,e,r,t,n);break e;case 14:e=Fy(null,e,r,xn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Vf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Uy(t,e,r,s,n);case 3:e:{if(O1(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,u1(t,e),pu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Xi(Error(B(423)),e),e=By(t,e,r,n,s);break e}else if(r!==s){s=Xi(Error(B(424)),e),e=By(t,e,r,n,s);break e}else for(Xt=Hr(e.stateNode.containerInfo.firstChild),Jt=e,De=!0,wn=null,n=l1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gi(),r===s){e=fr(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return d1(e),t===null&&Rf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Cf(r,s)?o=null:i!==null&&Cf(r,i)&&(e.flags|=32),L1(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&Rf(e),null;case 13:return V1(t,e,n);case 4:return fp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yi(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Vy(t,e,r,s,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ce(fu,r._currentValue),r._currentValue=o,i!==null)if(An(i.value,o)){if(i.children===s.children&&!Ht.current){e=fr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ar(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Df(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Df(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}jt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Vi(e,n),s=hn(s),r=r(s),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,s=xn(r,e.pendingProps),s=xn(r.type,s),Fy(t,e,r,s,n);case 15:return D1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xn(r,s),Mc(t,e),e.tag=1,qt(r)?(t=!0,uu(e)):t=!1,Vi(e,n),P1(e,r,s),Lf(e,r,s,n),Ff(null,e,r,!0,t,n);case 19:return F1(t,e,n);case 22:return M1(t,e,n)}throw Error(B(156,e.tag))};function t2(t,e){return Cw(t,e)}function NI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new NI(t,e,n,r)}function Cp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AI(t){if(typeof t=="function")return Cp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Km)return 11;if(t===Gm)return 14}return 2}function Yr(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Cp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _i:return Us(n.children,s,i,e);case qm:o=8,s|=8;break;case of:return t=cn(12,n,e,s|2),t.elementType=of,t.lanes=i,t;case af:return t=cn(13,n,e,s),t.elementType=af,t.lanes=i,t;case lf:return t=cn(19,n,e,s),t.elementType=lf,t.lanes=i,t;case dw:return hd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cw:o=10;break e;case uw:o=9;break e;case Km:o=11;break e;case Gm:o=14;break e;case Cr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=cn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Us(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function hd(t,e,n,r){return t=cn(22,t,r,e),t.elementType=dw,t.lanes=n,t.stateNode={isHidden:!1},t}function Ph(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function jh(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hh(0),this.expirationTimes=hh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Np(t,e,n,r,s,i,o,a,l){return t=new PI(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=cn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(i),t}function jI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function n2(t){if(!t)return is;t=t._reactInternals;e:{if(ni(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(qt(n))return n1(t,n,e)}return e}function r2(t,e,n,r,s,i,o,a,l){return t=Np(n,r,!0,t,s,i,o,a,l),t.context=n2(null),n=t.current,r=Rt(),s=Gr(n),i=ar(r,s),i.callback=e??null,qr(n,i,s),t.current.lanes=s,dl(t,s,r),Kt(t,r),t}function fd(t,e,n,r){var s=e.current,i=Rt(),o=Gr(s);return n=n2(n),e.context===null?e.context=n:e.pendingContext=n,e=ar(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=qr(s,e,o),t!==null&&(In(t,s,o,i),jc(t,s,o)),o}function Eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ap(t,e){Xy(t,e),(t=t.alternate)&&Xy(t,e)}function RI(){return null}var s2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pp(t){this._internalRoot=t}md.prototype.render=Pp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));fd(t,e,null,null)};md.prototype.unmount=Pp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qs(function(){fd(null,t,null,null)}),e[dr]=null}};function md(t){this._internalRoot=t}md.prototype.unstable_scheduleHydration=function(t){if(t){var e=Mw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ar.length&&e!==0&&e<Ar[n].priority;n++);Ar.splice(n,0,t),n===0&&Ow(t)}};function jp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zy(){}function DI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Eu(o);i.call(u)}}var o=r2(e,r,t,0,null,!1,!1,"",Zy);return t._reactRootContainer=o,t[dr]=o.current,Fa(t.nodeType===8?t.parentNode:t),qs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Eu(l);a.call(u)}}var l=Np(t,0,!1,null,null,!1,!1,"",Zy);return t._reactRootContainer=l,t[dr]=l.current,Fa(t.nodeType===8?t.parentNode:t),qs(function(){fd(e,l,n,r)}),l}function gd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Eu(o);a.call(l)}}fd(e,o,t,s)}else o=DI(n,e,t,s,r);return Eu(o)}Rw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ta(e.pendingLanes);n!==0&&(Xm(e,n|1),Kt(e,We()),!(pe&6)&&(Zi=We()+500,gs()))}break;case 13:qs(function(){var r=hr(t,1);if(r!==null){var s=Rt();In(r,t,1,s)}}),Ap(t,1)}};Zm=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=Rt();In(e,t,134217728,n)}Ap(t,134217728)}};Dw=function(t){if(t.tag===13){var e=Gr(t),n=hr(t,e);if(n!==null){var r=Rt();In(n,t,e,r)}Ap(t,e)}};Mw=function(){return Ee};Lw=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};vf=function(t,e,n){switch(e){case"input":if(df(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=od(r);if(!s)throw Error(B(90));fw(r),df(r,s)}}}break;case"textarea":pw(t,n);break;case"select":e=n.value,e!=null&&Di(t,!!n.multiple,e,!1)}};bw=Tp;Ew=qs;var MI={usingClientEntryPoint:!1,Events:[fl,ki,od,_w,ww,Tp]},$o={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LI={bundleType:$o.bundleType,version:$o.version,rendererPackageName:$o.rendererPackageName,rendererConfig:$o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sw(t),t===null?null:t.stateNode},findFiberByHostInstance:$o.findFiberByHostInstance||RI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{nd=ac.inject(LI),Un=ac}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MI;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jp(e))throw Error(B(200));return jI(t,e,null,n)};nn.createRoot=function(t,e){if(!jp(t))throw Error(B(299));var n=!1,r="",s=s2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Np(t,1,!1,null,null,n,!1,r,s),t[dr]=e.current,Fa(t.nodeType===8?t.parentNode:t),new Pp(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Sw(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return qs(t)};nn.hydrate=function(t,e,n){if(!pd(e))throw Error(B(200));return gd(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!jp(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=s2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=r2(e,null,t,1,n??null,s,!1,i,o),t[dr]=e.current,Fa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new md(e)};nn.render=function(t,e,n){if(!pd(e))throw Error(B(200));return gd(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!pd(t))throw Error(B(40));return t._reactRootContainer?(qs(function(){gd(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1};nn.unstable_batchedUpdates=Tp;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pd(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return gd(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function i2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i2)}catch(t){console.error(t)}}i2(),iw.exports=nn;var OI=iw.exports,Jy=OI;rf.createRoot=Jy.createRoot,rf.hydrateRoot=Jy.hydrateRoot;const VI=()=>{};var ev={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},FI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},a2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(m=64)),r.push(n[h],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new UI;const m=i<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const v=u<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BI=function(t){const e=o2(t);return a2.encodeByteArray(e,!0)},ku=function(t){return BI(t).replace(/\./g,"")},l2=function(t){try{return a2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=()=>zI().__FIREBASE_DEFAULTS__,$I=()=>{if(typeof process>"u"||typeof ev>"u")return;const t=ev.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&l2(t[1]);return e&&JSON.parse(e)},yd=()=>{try{return VI()||WI()||$I()||HI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},c2=t=>{var e,n;return(n=(e=yd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qI=t=>{const e=c2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},u2=()=>{var t;return(t=yd())===null||t===void 0?void 0:t.config},d2=t=>{var e;return(e=yd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t){return t.endsWith(".cloudworkstations.dev")}async function h2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ku(JSON.stringify(n)),ku(JSON.stringify(o)),""].join(".")}const wa={};function YI(){const t={prod:[],emulator:[]};for(const e of Object.keys(wa))wa[e]?t.emulator.push(e):t.prod.push(e);return t}function QI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let tv=!1;function f2(t,e){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||wa[t]===e||wa[t]||tv)return;wa[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=YI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{tv=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=QI(r),g=n("text"),v=document.getElementById(g)||document.createElement("span"),w=n("learnmore"),S=document.getElementById(w)||document.createElement("a"),b=n("preprendIcon"),k=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const _=m.element;a(_),h(S,w);const N=u();l(k,b),_.append(k,v,S,N),document.body.appendChild(_)}i?(v.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function ZI(){var t;const e=(t=yd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nC(){const t=Nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rC(){return!ZI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sC(){try{return typeof indexedDB=="object"}catch{return!1}}function iC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="FirebaseError";class xr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oC,Object.setPrototypeOf(this,xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?aC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new xr(s,a,r)}}function aC(t,e){return t.replace(lC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const lC=/\{\$([^}]+)}/g;function cC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ks(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(nv(i)&&nv(o)){if(!Ks(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function nv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ra(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function sa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function uC(t,e){const n=new dC(t,e);return n.subscribe.bind(n)}class dC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Rh),s.error===void 0&&(s.error=Rh),s.complete===void 0&&(s.complete=Rh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(t){return t&&t._delegate?t._delegate:t}class Gs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new KI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pC(e))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ps){return this.instances.has(e)}getOptions(e=Ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ps){return this.component?this.component.multipleInstances?e:Ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mC(t){return t===Ps?void 0:t}function pC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const yC={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},vC=ue.INFO,xC={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},_C=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=xC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rp{constructor(e){this.name=e,this._logLevel=vC,this._logHandler=_C,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const wC=(t,e)=>e.some(n=>t instanceof n);let rv,sv;function bC(){return rv||(rv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EC(){return sv||(sv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m2=new WeakMap,Xf=new WeakMap,p2=new WeakMap,Dh=new WeakMap,Dp=new WeakMap;function kC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Qr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&m2.set(n,t)}).catch(()=>{}),Dp.set(e,t),e}function TC(t){if(Xf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Xf.set(t,e)}let Zf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SC(t){Zf=t(Zf)}function IC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mh(this),e,...n);return p2.set(r,e.sort?e.sort():[e]),Qr(r)}:EC().includes(t)?function(...e){return t.apply(Mh(this),e),Qr(m2.get(this))}:function(...e){return Qr(t.apply(Mh(this),e))}}function CC(t){return typeof t=="function"?IC(t):(t instanceof IDBTransaction&&TC(t),wC(t,bC())?new Proxy(t,Zf):t)}function Qr(t){if(t instanceof IDBRequest)return kC(t);if(Dh.has(t))return Dh.get(t);const e=CC(t);return e!==t&&(Dh.set(t,e),Dp.set(e,t)),e}const Mh=t=>Dp.get(t);function NC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Qr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Qr(o.result),l.oldVersion,l.newVersion,Qr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const AC=["get","getKey","getAll","getAllKeys","count"],PC=["put","add","delete","clear"],Lh=new Map;function iv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lh.get(e))return Lh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=PC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||AC.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Lh.set(e,i),i}SC(t=>({...t,get:(e,n,r)=>iv(e,n)||t.get(e,n,r),has:(e,n)=>!!iv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jf="@firebase/app",ov="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Rp("@firebase/app"),DC="@firebase/app-compat",MC="@firebase/analytics-compat",LC="@firebase/analytics",OC="@firebase/app-check-compat",VC="@firebase/app-check",FC="@firebase/auth",UC="@firebase/auth-compat",BC="@firebase/database",zC="@firebase/data-connect",WC="@firebase/database-compat",$C="@firebase/functions",HC="@firebase/functions-compat",qC="@firebase/installations",KC="@firebase/installations-compat",GC="@firebase/messaging",YC="@firebase/messaging-compat",QC="@firebase/performance",XC="@firebase/performance-compat",ZC="@firebase/remote-config",JC="@firebase/remote-config-compat",eN="@firebase/storage",tN="@firebase/storage-compat",nN="@firebase/firestore",rN="@firebase/ai",sN="@firebase/firestore-compat",iN="firebase",oN="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="[DEFAULT]",aN={[Jf]:"fire-core",[DC]:"fire-core-compat",[LC]:"fire-analytics",[MC]:"fire-analytics-compat",[VC]:"fire-app-check",[OC]:"fire-app-check-compat",[FC]:"fire-auth",[UC]:"fire-auth-compat",[BC]:"fire-rtdb",[zC]:"fire-data-connect",[WC]:"fire-rtdb-compat",[$C]:"fire-fn",[HC]:"fire-fn-compat",[qC]:"fire-iid",[KC]:"fire-iid-compat",[GC]:"fire-fcm",[YC]:"fire-fcm-compat",[QC]:"fire-perf",[XC]:"fire-perf-compat",[ZC]:"fire-rc",[JC]:"fire-rc-compat",[eN]:"fire-gcs",[tN]:"fire-gcs-compat",[nN]:"fire-fst",[sN]:"fire-fst-compat",[rN]:"fire-vertex","fire-js":"fire-js",[iN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new Map,lN=new Map,tm=new Map;function av(t,e){try{t.container.addComponent(e)}catch(n){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ji(t){const e=t.name;if(tm.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;tm.set(e,t);for(const n of Tu.values())av(n,t);for(const n of lN.values())av(n,t);return!0}function Mp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ln(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new gl("app","Firebase",cN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=oN;function g2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:em,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Xr.create("bad-app-name",{appName:String(s)});if(n||(n=u2()),!n)throw Xr.create("no-options");const i=Tu.get(s);if(i){if(Ks(n,i.options)&&Ks(r,i.config))return i;throw Xr.create("duplicate-app",{appName:s})}const o=new gC(s);for(const l of tm.values())o.addComponent(l);const a=new uN(n,r,o);return Tu.set(s,a),a}function y2(t=em){const e=Tu.get(t);if(!e&&t===em&&u2())return g2();if(!e)throw Xr.create("no-app",{appName:t});return e}function Zr(t,e,n){var r;let s=(r=aN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(a.join(" "));return}Ji(new Gs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="firebase-heartbeat-database",hN=1,Ga="firebase-heartbeat-store";let Oh=null;function v2(){return Oh||(Oh=NC(dN,hN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ga)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xr.create("idb-open",{originalErrorMessage:t.message})})),Oh}async function fN(t){try{const n=(await v2()).transaction(Ga),r=await n.objectStore(Ga).get(x2(t));return await n.done,r}catch(e){if(e instanceof xr)mr.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mr.warn(n.message)}}}async function lv(t,e){try{const r=(await v2()).transaction(Ga,"readwrite");await r.objectStore(Ga).put(e,x2(t)),await r.done}catch(n){if(n instanceof xr)mr.warn(n.message);else{const r=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mr.warn(r.message)}}}function x2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=1024,pN=30;class gN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>pN){const o=xN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cv(),{heartbeatsToSend:r,unsentEntries:s}=yN(this._heartbeatsCache.heartbeats),i=ku(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return mr.warn(n),""}}}function cv(){return new Date().toISOString().substring(0,10)}function yN(t,e=mN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),uv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),uv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sC()?iC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uv(t){return ku(JSON.stringify({version:2,heartbeats:t})).length}function xN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){Ji(new Gs("platform-logger",e=>new jC(e),"PRIVATE")),Ji(new Gs("heartbeat",e=>new gN(e),"PRIVATE")),Zr(Jf,ov,t),Zr(Jf,ov,"esm2017"),Zr("fire-js","")}_N("");function Lp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function _2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wN=_2,w2=new gl("auth","Firebase",_2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=new Rp("@firebase/auth");function bN(t,...e){Su.logLevel<=ue.WARN&&Su.warn(`Auth (${mo}): ${t}`,...e)}function Fc(t,...e){Su.logLevel<=ue.ERROR&&Su.error(`Auth (${mo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t,...e){throw Op(t,...e)}function zn(t,...e){return Op(t,...e)}function b2(t,e,n){const r=Object.assign(Object.assign({},wN()),{[e]:n});return new gl("auth","Firebase",r).create(e,{appName:t.name})}function lr(t){return b2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return w2.create(t,...e)}function ne(t,e,...n){if(!t)throw Op(e,...n)}function ir(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fc(e),new Error(e)}function pr(t,e){t||ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function EN(){return dv()==="http:"||dv()==="https:"}function dv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EN()||eC()||"connection"in navigator)?navigator.onLine:!0}function TN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){this.shortDelay=e,this.longDelay=n,pr(n>e,"Short delay should be less than long delay!"),this.isMobile=XI()||tC()}get(){return kN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t,e){pr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CN=new vl(3e4,6e4);function ys(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _r(t,e,n,r,s={}){return k2(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=yl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return JI()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&pl(t.emulatorConfig.host)&&(u.credentials="include"),E2.fetch()(await T2(t,t.config.apiHost,n,a),u)})}async function k2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},SN),e);try{const s=new AN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw lc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw lc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw lc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw lc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw b2(t,h,u);Pn(t,h)}}catch(s){if(s instanceof xr)throw s;Pn(t,"network-request-failed",{message:String(s)})}}async function xl(t,e,n,r,s={}){const i=await _r(t,e,n,r,s);return"mfaPendingCredential"in i&&Pn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function T2(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Vp(t.config,s):`${t.config.apiScheme}://${s}`;return IN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function NN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zn(this.auth,"network-request-failed")),CN.get())})}}function lc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=zn(t,e,r);return s.customData._tokenResponse=n,s}function hv(t){return t!==void 0&&t.enterprise!==void 0}class PN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jN(t,e){return _r(t,"GET","/v2/recaptchaConfig",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(t,e){return _r(t,"POST","/v1/accounts:delete",e)}async function Iu(t,e){return _r(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DN(t,e=!1){const n=st(t),r=await n.getIdToken(e),s=Fp(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ba(Vh(s.auth_time)),issuedAtTime:ba(Vh(s.iat)),expirationTime:ba(Vh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Vh(t){return Number(t)*1e3}function Fp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fc("JWT malformed, contained fewer than 3 sections"),null;try{const s=l2(n);return s?JSON.parse(s):(Fc("Failed to decode base64 JWT payload"),null)}catch(s){return Fc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function fv(t){const e=Fp(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof xr&&MN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function MN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ba(this.lastLoginAt),this.creationTime=ba(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await eo(t,Iu(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?S2(i.providerUserInfo):[],a=VN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new rm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function ON(t){const e=st(t);await Cu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function S2(t){return t.map(e=>{var{providerId:n}=e,r=Lp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t,e){const n=await k2(t,{},async()=>{const r=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await T2(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",E2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UN(t,e){return _r(t,"POST","/v2/accounts:revokeToken",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=fv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await FN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ui;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ne(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ui,this.toJSON())}_performRefresh(){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class En{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Lp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await eo(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DN(this,e)}reload(){return ON(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new En(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await eo(this,RN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,k=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:N,isAnonymous:j,providerData:D,stsTokenManager:E}=n;ne(_&&E,e,"internal-error");const x=Ui.fromJSON(this.name,E);ne(typeof _=="string",e,"internal-error"),Tr(f,e.name),Tr(m,e.name),ne(typeof N=="boolean",e,"internal-error"),ne(typeof j=="boolean",e,"internal-error"),Tr(g,e.name),Tr(v,e.name),Tr(w,e.name),Tr(S,e.name),Tr(b,e.name),Tr(k,e.name);const I=new En({uid:_,auth:e,email:m,emailVerified:N,displayName:f,isAnonymous:j,photoURL:v,phoneNumber:g,tenantId:w,stsTokenManager:x,createdAt:b,lastLoginAt:k});return D&&Array.isArray(D)&&(I.providerData=D.map(C=>Object.assign({},C))),S&&(I._redirectEventId=S),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ui;s.updateFromServerResponse(n);const i=new En({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?S2(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ui;a.updateFromIdToken(r);const l=new En({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new rm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Map;function or(t){pr(t instanceof Function,"Expected a class definition");let e=mv.get(t);return e?(pr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}I2.type="NONE";const pv=I2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t,e,n){return`firebase:${t}:${e}:${n}`}class Bi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Uc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Uc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Iu(this.auth,{idToken:e}).catch(()=>{});return n?En._fromGetAccountInfoResponse(this.auth,n,e):null}return En._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Bi(or(pv),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||or(pv);const o=Uc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Iu(e,{idToken:h}).catch(()=>{});if(!m)break;f=await En._fromGetAccountInfoResponse(e,m,h)}else f=En._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Bi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Bi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(P2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R2(e))return"Blackberry";if(D2(e))return"Webos";if(N2(e))return"Safari";if((e.includes("chrome/")||A2(e))&&!e.includes("edge/"))return"Chrome";if(j2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function C2(t=Nt()){return/firefox\//i.test(t)}function N2(t=Nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A2(t=Nt()){return/crios\//i.test(t)}function P2(t=Nt()){return/iemobile/i.test(t)}function j2(t=Nt()){return/android/i.test(t)}function R2(t=Nt()){return/blackberry/i.test(t)}function D2(t=Nt()){return/webos/i.test(t)}function Up(t=Nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BN(t=Nt()){var e;return Up(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zN(){return nC()&&document.documentMode===10}function M2(t=Nt()){return Up(t)||j2(t)||D2(t)||R2(t)||/windows phone/i.test(t)||P2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t,e=[]){let n;switch(t){case"Browser":n=gv(Nt());break;case"Worker":n=`${gv(Nt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(t,e={}){return _r(t,"GET","/v2/passwordPolicy",ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=6;class qN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:HN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yv(this),this.idTokenSubscription=new yv(this),this.beforeStateQueue=new WN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=or(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Bi.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Iu(this,{idToken:e}),r=await En._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ln(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(lr(this));const n=e?st(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $N(this),n=new qN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await UN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&or(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Bi.create(this,[or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=L2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ri(t){return st(t)}class yv{constructor(e){this.auth=e,this.observer=null,this.addObserver=uC(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GN(t){vd=t}function O2(t){return vd.loadJS(t)}function YN(){return vd.recaptchaEnterpriseScript}function QN(){return vd.gapiScript}function XN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ZN{constructor(){this.enterprise=new JN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class JN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const eA="recaptcha-enterprise",V2="NO_RECAPTCHA";class tA{constructor(e){this.type=eA,this.auth=ri(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{jN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new PN(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;hv(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(V2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZN().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&hv(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=YN();l.length!==0&&(l+=a),O2(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function vv(t,e,n,r=!1,s=!1){const i=new tA(t);let o;if(s)o=V2;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function sm(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await vv(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await vv(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t,e){const n=Mp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ks(i,e??{}))return s;Pn(s,"already-initialized")}return n.initialize({options:e})}function rA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(or);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sA(t,e,n){const r=ri(t);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=F2(e),{host:o,port:a}=iA(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(Ks(u,r.config.emulator)&&Ks(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,pl(o)?(h2(`${i}//${o}${l}`),f2("Auth",!0)):oA()}function F2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iA(t){const e=F2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:xv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:xv(o)}}}function xv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function oA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ir("not implemented")}_getIdTokenResponse(e){return ir("not implemented")}_linkToIdToken(e,n){return ir("not implemented")}_getReauthenticationResolver(e){return ir("not implemented")}}async function aA(t,e){return _r(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(t,e){return xl(t,"POST","/v1/accounts:signInWithPassword",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(t,e){return xl(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}async function uA(t,e){return xl(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Bp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ya(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ya(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,n,"signInWithPassword",lA);case"emailLink":return cA(e,{email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,r,"signUpPassword",aA);case"emailLink":return uA(e,{idToken:n,email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zi(t,e){return xl(t,"POST","/v1/accounts:signInWithIdp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="http://localhost";class Ys extends Bp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Lp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ys(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zi(e,n)}buildRequest(){const e={requestUri:dA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fA(t){const e=ra(sa(t)).link,n=e?ra(sa(e)).deep_link_id:null,r=ra(sa(t)).deep_link_id;return(r?ra(sa(r)).link:null)||r||n||e||t}class zp{constructor(e){var n,r,s,i,o,a;const l=ra(sa(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=hA((s=l.mode)!==null&&s!==void 0?s:null);ne(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=fA(e);try{return new zp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.providerId=po.PROVIDER_ID}static credential(e,n){return Ya._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zp.parseLink(n);return ne(r,"argument-error"),Ya._fromEmailAndCode(e,r.code,r.tenantId)}}po.PROVIDER_ID="password";po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends U2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends _l{constructor(){super("facebook.com")}static credential(e){return Ys._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends _l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ys._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rr.credential(n,r)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends _l{constructor(){super("github.com")}static credential(e){return Ys._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends _l{constructor(){super("twitter.com")}static credential(e,n){return Ys._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mr.credential(n,r)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(t,e){return xl(t,"POST","/v1/accounts:signUp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await En._fromIdTokenResponse(e,r,s),o=_v(r);return new Qs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=_v(r);return new Qs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function _v(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends xr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nu(e,n,r,s)}}function B2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nu._fromErrorAndOperation(t,i,e,r):i})}async function pA(t,e,n=!1){const r=await eo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e,n=!1){const{auth:r}=t;if(ln(r.app))return Promise.reject(lr(r));const s="reauthenticate";try{const i=await eo(t,B2(r,s,e,t),n);ne(i.idToken,r,"internal-error");const o=Fp(i.idToken);ne(o,r,"internal-error");const{sub:a}=o;return ne(t.uid===a,r,"user-mismatch"),Qs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Pn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(t,e,n=!1){if(ln(t.app))return Promise.reject(lr(t));const r="signIn",s=await B2(t,r,e),i=await Qs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function yA(t,e){return z2(ri(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(t){const e=ri(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vA(t,e,n){if(ln(t.app))return Promise.reject(lr(t));const r=ri(t),o=await sm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mA).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&W2(t),l}),a=await Qs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function xA(t,e,n){return ln(t.app)?Promise.reject(lr(t)):yA(st(t),po.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&W2(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(t,e){return _r(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=st(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await eo(r,_A(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function bA(t,e,n,r){return st(t).onIdTokenChanged(e,n,r)}function EA(t,e,n){return st(t).beforeAuthStateChanged(e,n)}function kA(t,e,n,r){return st(t).onAuthStateChanged(e,n,r)}function Au(t){return st(t).signOut()}const Pu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pu,"1"),this.storage.removeItem(Pu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=1e3,SA=10;class H2 extends $2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);zN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,SA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},TA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}H2.type="LOCAL";const IA=H2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2 extends $2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}q2.type="SESSION";const K2=q2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new xd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await CA(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Wp("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return window}function AA(t){Wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}async function PA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function RA(){return G2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="firebaseLocalStorageDb",DA=1,ju="firebaseLocalStorage",Q2="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _d(t,e){return t.transaction([ju],e?"readwrite":"readonly").objectStore(ju)}function MA(){const t=indexedDB.deleteDatabase(Y2);return new wl(t).toPromise()}function im(){const t=indexedDB.open(Y2,DA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ju,{keyPath:Q2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ju)?e(r):(r.close(),await MA(),e(await im()))})})}async function wv(t,e,n){const r=_d(t,!0).put({[Q2]:e,value:n});return new wl(r).toPromise()}async function LA(t,e){const n=_d(t,!1).get(e),r=await new wl(n).toPromise();return r===void 0?null:r.value}function bv(t,e){const n=_d(t,!0).delete(e);return new wl(n).toPromise()}const OA=800,VA=3;class X2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await im(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xd._getInstance(RA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await PA(),!this.activeServiceWorker)return;this.sender=new NA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await im();return await wv(e,Pu,"1"),await bv(e,Pu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>LA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=_d(s,!1).getAll();return new wl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X2.type="LOCAL";const FA=X2;new vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t,e){return e?or(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p extends Bp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BA(t){return z2(t.auth,new $p(t),t.bypassAuthState)}function zA(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),gA(n,new $p(t),t.bypassAuthState)}async function WA(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),pA(n,new $p(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BA;case"linkViaPopup":case"linkViaRedirect":return WA;case"reauthViaPopup":case"reauthViaRedirect":return zA;default:Pn(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new vl(2e3,1e4);class Pi extends Z2{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Pi.currentPopupAction&&Pi.currentPopupAction.cancel(),Pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=Wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$A.get())};e()}}Pi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="pendingRedirect",Bc=new Map;class qA extends Z2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bc.get(this.auth._key());if(!e){try{const r=await KA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bc.set(this.auth._key(),e)}return this.bypassAuthState||Bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KA(t,e){const n=QA(e),r=YA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function GA(t,e){Bc.set(t._key(),e)}function YA(t){return or(t._redirectPersistence)}function QA(t){return Uc(HA,t.config.apiKey,t.name)}async function XA(t,e,n=!1){if(ln(t.app))return Promise.reject(lr(t));const r=ri(t),s=UA(r,e),o=await new qA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=10*60*1e3;class JA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!J2(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ev(e))}saveEventToCache(e){this.cachedEventUids.add(Ev(e)),this.lastProcessedEventTime=Date.now()}}function Ev(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function J2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(t,e={}){return _r(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rP=/^https?/;async function sP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tP(t);for(const n of e)try{if(iP(n))return}catch{}Pn(t,"unauthorized-domain")}function iP(t){const e=nm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!rP.test(n))return!1;if(nP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new vl(3e4,6e4);function kv(){const t=Wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aP(t){return new Promise((e,n)=>{var r,s,i;function o(){kv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kv(),n(zn(t,"network-request-failed"))},timeout:oP.get()})}if(!((s=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Wn().gapi)===null||i===void 0)&&i.load)o();else{const a=XN("iframefcb");return Wn()[a]=()=>{gapi.load?o():n(zn(t,"network-request-failed"))},O2(`${QN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zc=null,e})}let zc=null;function lP(t){return zc=zc||aP(t),zc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new vl(5e3,15e3),uP="__/auth/iframe",dP="emulator/auth/iframe",hP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mP(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vp(e,dP):`https://${t.config.authDomain}/${uP}`,r={apiKey:e.apiKey,appName:t.name,v:mo},s=fP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${yl(r).slice(1)}`}async function pP(t){const e=await lP(t),n=Wn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:mP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=zn(t,"network-request-failed"),a=Wn().setTimeout(()=>{i(o)},cP.get());function l(){Wn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yP=500,vP=600,xP="_blank",_P="http://localhost";class Tv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wP(t,e,n,r=yP,s=vP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},gP),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Nt().toLowerCase();n&&(a=A2(u)?xP:n),C2(u)&&(e=e||_P,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(BN(u)&&a!=="_self")return bP(e||"",a),new Tv(null);const f=window.open(e||"",a,h);ne(f,t,"popup-blocked");try{f.focus()}catch{}return new Tv(f)}function bP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="__/auth/handler",kP="emulator/auth/handler",TP=encodeURIComponent("fac");async function Sv(t,e,n,r,s,i){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mo,eventId:s};if(e instanceof U2){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof _l){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${TP}=${encodeURIComponent(l)}`:"";return`${SP(t)}?${yl(a).slice(1)}${u}`}function SP({config:t}){return t.emulator?Vp(t,kP):`https://${t.authDomain}/${EP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="webStorageSupport";class IP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=K2,this._completeRedirectFn=XA,this._overrideRedirectResult=GA}async _openPopup(e,n,r,s){var i;pr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Sv(e,n,r,nm(),s);return wP(e,o,Wp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Sv(e,n,r,nm(),s);return AA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(pr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await pP(e),r=new JA(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fh,{type:Fh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Fh];o!==void 0&&n(!!o),Pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return M2()||N2()||Up()}}const CP=IP;var Iv="@firebase/auth",Cv="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PP(t){Ji(new Gs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:L2(t)},u=new KN(r,s,i,l);return rA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ji(new Gs("auth-internal",e=>{const n=ri(e.getProvider("auth").getImmediate());return(r=>new NP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zr(Iv,Cv,AP(t)),Zr(Iv,Cv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=5*60,RP=d2("authIdTokenMaxAge")||jP;let Nv=null;const DP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RP)return;const s=n==null?void 0:n.token;Nv!==s&&(Nv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MP(t=y2()){const e=Mp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nA(t,{popupRedirectResolver:CP,persistence:[FA,IA,K2]}),r=d2("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=DP(i.toString());EA(n,o,()=>o(n.currentUser)),bA(n,a=>o(a))}}const s=c2("auth");return s&&sA(n,`http://${s}`),n}function LP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}GN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=zn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",LP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PP("Browser");var Av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,eb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,x){function I(){}I.prototype=x.prototype,E.D=x.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(C,A,R){for(var P=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)P[fe-2]=arguments[fe];return x.prototype[A].apply(C,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,x,I){I||(I=0);var C=Array(16);if(typeof x=="string")for(var A=0;16>A;++A)C[A]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(A=0;16>A;++A)C[A]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=E.g[0],I=E.g[1],A=E.g[2];var R=E.g[3],P=x+(R^I&(A^R))+C[0]+3614090360&4294967295;x=I+(P<<7&4294967295|P>>>25),P=R+(A^x&(I^A))+C[1]+3905402710&4294967295,R=x+(P<<12&4294967295|P>>>20),P=A+(I^R&(x^I))+C[2]+606105819&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(x^A&(R^x))+C[3]+3250441966&4294967295,I=A+(P<<22&4294967295|P>>>10),P=x+(R^I&(A^R))+C[4]+4118548399&4294967295,x=I+(P<<7&4294967295|P>>>25),P=R+(A^x&(I^A))+C[5]+1200080426&4294967295,R=x+(P<<12&4294967295|P>>>20),P=A+(I^R&(x^I))+C[6]+2821735955&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(x^A&(R^x))+C[7]+4249261313&4294967295,I=A+(P<<22&4294967295|P>>>10),P=x+(R^I&(A^R))+C[8]+1770035416&4294967295,x=I+(P<<7&4294967295|P>>>25),P=R+(A^x&(I^A))+C[9]+2336552879&4294967295,R=x+(P<<12&4294967295|P>>>20),P=A+(I^R&(x^I))+C[10]+4294925233&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(x^A&(R^x))+C[11]+2304563134&4294967295,I=A+(P<<22&4294967295|P>>>10),P=x+(R^I&(A^R))+C[12]+1804603682&4294967295,x=I+(P<<7&4294967295|P>>>25),P=R+(A^x&(I^A))+C[13]+4254626195&4294967295,R=x+(P<<12&4294967295|P>>>20),P=A+(I^R&(x^I))+C[14]+2792965006&4294967295,A=R+(P<<17&4294967295|P>>>15),P=I+(x^A&(R^x))+C[15]+1236535329&4294967295,I=A+(P<<22&4294967295|P>>>10),P=x+(A^R&(I^A))+C[1]+4129170786&4294967295,x=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(x^I))+C[6]+3225465664&4294967295,R=x+(P<<9&4294967295|P>>>23),P=A+(x^I&(R^x))+C[11]+643717713&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^x&(A^R))+C[0]+3921069994&4294967295,I=A+(P<<20&4294967295|P>>>12),P=x+(A^R&(I^A))+C[5]+3593408605&4294967295,x=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(x^I))+C[10]+38016083&4294967295,R=x+(P<<9&4294967295|P>>>23),P=A+(x^I&(R^x))+C[15]+3634488961&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^x&(A^R))+C[4]+3889429448&4294967295,I=A+(P<<20&4294967295|P>>>12),P=x+(A^R&(I^A))+C[9]+568446438&4294967295,x=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(x^I))+C[14]+3275163606&4294967295,R=x+(P<<9&4294967295|P>>>23),P=A+(x^I&(R^x))+C[3]+4107603335&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^x&(A^R))+C[8]+1163531501&4294967295,I=A+(P<<20&4294967295|P>>>12),P=x+(A^R&(I^A))+C[13]+2850285829&4294967295,x=I+(P<<5&4294967295|P>>>27),P=R+(I^A&(x^I))+C[2]+4243563512&4294967295,R=x+(P<<9&4294967295|P>>>23),P=A+(x^I&(R^x))+C[7]+1735328473&4294967295,A=R+(P<<14&4294967295|P>>>18),P=I+(R^x&(A^R))+C[12]+2368359562&4294967295,I=A+(P<<20&4294967295|P>>>12),P=x+(I^A^R)+C[5]+4294588738&4294967295,x=I+(P<<4&4294967295|P>>>28),P=R+(x^I^A)+C[8]+2272392833&4294967295,R=x+(P<<11&4294967295|P>>>21),P=A+(R^x^I)+C[11]+1839030562&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^x)+C[14]+4259657740&4294967295,I=A+(P<<23&4294967295|P>>>9),P=x+(I^A^R)+C[1]+2763975236&4294967295,x=I+(P<<4&4294967295|P>>>28),P=R+(x^I^A)+C[4]+1272893353&4294967295,R=x+(P<<11&4294967295|P>>>21),P=A+(R^x^I)+C[7]+4139469664&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^x)+C[10]+3200236656&4294967295,I=A+(P<<23&4294967295|P>>>9),P=x+(I^A^R)+C[13]+681279174&4294967295,x=I+(P<<4&4294967295|P>>>28),P=R+(x^I^A)+C[0]+3936430074&4294967295,R=x+(P<<11&4294967295|P>>>21),P=A+(R^x^I)+C[3]+3572445317&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^x)+C[6]+76029189&4294967295,I=A+(P<<23&4294967295|P>>>9),P=x+(I^A^R)+C[9]+3654602809&4294967295,x=I+(P<<4&4294967295|P>>>28),P=R+(x^I^A)+C[12]+3873151461&4294967295,R=x+(P<<11&4294967295|P>>>21),P=A+(R^x^I)+C[15]+530742520&4294967295,A=R+(P<<16&4294967295|P>>>16),P=I+(A^R^x)+C[2]+3299628645&4294967295,I=A+(P<<23&4294967295|P>>>9),P=x+(A^(I|~R))+C[0]+4096336452&4294967295,x=I+(P<<6&4294967295|P>>>26),P=R+(I^(x|~A))+C[7]+1126891415&4294967295,R=x+(P<<10&4294967295|P>>>22),P=A+(x^(R|~I))+C[14]+2878612391&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~x))+C[5]+4237533241&4294967295,I=A+(P<<21&4294967295|P>>>11),P=x+(A^(I|~R))+C[12]+1700485571&4294967295,x=I+(P<<6&4294967295|P>>>26),P=R+(I^(x|~A))+C[3]+2399980690&4294967295,R=x+(P<<10&4294967295|P>>>22),P=A+(x^(R|~I))+C[10]+4293915773&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~x))+C[1]+2240044497&4294967295,I=A+(P<<21&4294967295|P>>>11),P=x+(A^(I|~R))+C[8]+1873313359&4294967295,x=I+(P<<6&4294967295|P>>>26),P=R+(I^(x|~A))+C[15]+4264355552&4294967295,R=x+(P<<10&4294967295|P>>>22),P=A+(x^(R|~I))+C[6]+2734768916&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~x))+C[13]+1309151649&4294967295,I=A+(P<<21&4294967295|P>>>11),P=x+(A^(I|~R))+C[4]+4149444226&4294967295,x=I+(P<<6&4294967295|P>>>26),P=R+(I^(x|~A))+C[11]+3174756917&4294967295,R=x+(P<<10&4294967295|P>>>22),P=A+(x^(R|~I))+C[2]+718787259&4294967295,A=R+(P<<15&4294967295|P>>>17),P=I+(R^(A|~x))+C[9]+3951481745&4294967295,E.g[0]=E.g[0]+x&4294967295,E.g[1]=E.g[1]+(A+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.u=function(E,x){x===void 0&&(x=E.length);for(var I=x-this.blockSize,C=this.B,A=this.h,R=0;R<x;){if(A==0)for(;R<=I;)s(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<x;)if(C[A++]=E.charCodeAt(R++),A==this.blockSize){s(this,C),A=0;break}}else for(;R<x;)if(C[A++]=E[R++],A==this.blockSize){s(this,C),A=0;break}}this.h=A,this.o+=x},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var x=1;x<E.length-8;++x)E[x]=0;var I=8*this.o;for(x=E.length-8;x<E.length;++x)E[x]=I&255,I/=256;for(this.u(E),E=Array(16),x=I=0;4>x;++x)for(var C=0;32>C;C+=8)E[I++]=this.g[x]>>>C&255;return E};function i(E,x){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=x(E)}function o(E,x){this.h=x;for(var I=[],C=!0,A=E.length-1;0<=A;A--){var R=E[A]|0;C&&R==x||(I[A]=R,C=!1)}this.g=I}var a={};function l(E){return-128<=E&&128>E?i(E,function(x){return new o([x|0],0>x?-1:0)}):new o([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return S(u(-E));for(var x=[],I=1,C=0;E>=I;C++)x[C]=E/I|0,I*=4294967296;return new o(x,0)}function h(E,x){if(E.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(E.charAt(0)=="-")return S(h(E.substring(1),x));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(x,8)),C=f,A=0;A<E.length;A+=8){var R=Math.min(8,E.length-A),P=parseInt(E.substring(A,A+R),x);8>R?(R=u(Math.pow(x,R)),C=C.j(R).add(u(P))):(C=C.j(I),C=C.add(u(P)))}return C}var f=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-S(this).m();for(var E=0,x=1,I=0;I<this.g.length;I++){var C=this.i(I);E+=(0<=C?C:4294967296+C)*x,x*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(v(this))return"0";if(w(this))return"-"+S(this).toString(E);for(var x=u(Math.pow(E,6)),I=this,C="";;){var A=N(I,x).g;I=b(I,A.j(x));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=A,v(I))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function v(E){if(E.h!=0)return!1;for(var x=0;x<E.g.length;x++)if(E.g[x]!=0)return!1;return!0}function w(E){return E.h==-1}t.l=function(E){return E=b(this,E),w(E)?-1:v(E)?0:1};function S(E){for(var x=E.g.length,I=[],C=0;C<x;C++)I[C]=~E.g[C];return new o(I,~E.h).add(m)}t.abs=function(){return w(this)?S(this):this},t.add=function(E){for(var x=Math.max(this.g.length,E.g.length),I=[],C=0,A=0;A<=x;A++){var R=C+(this.i(A)&65535)+(E.i(A)&65535),P=(R>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);C=P>>>16,R&=65535,P&=65535,I[A]=P<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function b(E,x){return E.add(S(x))}t.j=function(E){if(v(this)||v(E))return f;if(w(this))return w(E)?S(this).j(S(E)):S(S(this).j(E));if(w(E))return S(this.j(S(E)));if(0>this.l(g)&&0>E.l(g))return u(this.m()*E.m());for(var x=this.g.length+E.g.length,I=[],C=0;C<2*x;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var A=0;A<E.g.length;A++){var R=this.i(C)>>>16,P=this.i(C)&65535,fe=E.i(A)>>>16,le=E.i(A)&65535;I[2*C+2*A]+=P*le,k(I,2*C+2*A),I[2*C+2*A+1]+=R*le,k(I,2*C+2*A+1),I[2*C+2*A+1]+=P*fe,k(I,2*C+2*A+1),I[2*C+2*A+2]+=R*fe,k(I,2*C+2*A+2)}for(C=0;C<x;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=x;C<2*x;C++)I[C]=0;return new o(I,0)};function k(E,x){for(;(E[x]&65535)!=E[x];)E[x+1]+=E[x]>>>16,E[x]&=65535,x++}function _(E,x){this.g=E,this.h=x}function N(E,x){if(v(x))throw Error("division by zero");if(v(E))return new _(f,f);if(w(E))return x=N(S(E),x),new _(S(x.g),S(x.h));if(w(x))return x=N(E,S(x)),new _(S(x.g),x.h);if(30<E.g.length){if(w(E)||w(x))throw Error("slowDivide_ only works with positive integers.");for(var I=m,C=x;0>=C.l(E);)I=j(I),C=j(C);var A=D(I,1),R=D(C,1);for(C=D(C,2),I=D(I,2);!v(C);){var P=R.add(C);0>=P.l(E)&&(A=A.add(I),R=P),C=D(C,1),I=D(I,1)}return x=b(E,A.j(x)),new _(A,x)}for(A=f;0<=E.l(x);){for(I=Math.max(1,Math.floor(E.m()/x.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=u(I),P=R.j(x);w(P)||0<P.l(E);)I-=C,R=u(I),P=R.j(x);v(R)&&(R=m),A=A.add(R),E=b(E,P)}return new _(A,E)}t.A=function(E){return N(this,E).h},t.and=function(E){for(var x=Math.max(this.g.length,E.g.length),I=[],C=0;C<x;C++)I[C]=this.i(C)&E.i(C);return new o(I,this.h&E.h)},t.or=function(E){for(var x=Math.max(this.g.length,E.g.length),I=[],C=0;C<x;C++)I[C]=this.i(C)|E.i(C);return new o(I,this.h|E.h)},t.xor=function(E){for(var x=Math.max(this.g.length,E.g.length),I=[],C=0;C<x;C++)I[C]=this.i(C)^E.i(C);return new o(I,this.h^E.h)};function j(E){for(var x=E.g.length+1,I=[],C=0;C<x;C++)I[C]=E.i(C)<<1|E.i(C-1)>>>31;return new o(I,E.h)}function D(E,x){var I=x>>5;x%=32;for(var C=E.g.length-I,A=[],R=0;R<C;R++)A[R]=0<x?E.i(R+I)>>>x|E.i(R+I+1)<<32-x:E.i(R+I);return new o(A,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,eb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Jr=o}).apply(typeof Av<"u"?Av:typeof self<"u"?self:typeof window<"u"?window:{});var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tb,ia,nb,Wc,om,rb,sb,ib;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,p,y){return d==Array.prototype||d==Object.prototype||(d[p]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof cc=="object"&&cc];for(var p=0;p<d.length;++p){var y=d[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(d,p){if(p)e:{var y=r;d=d.split(".");for(var T=0;T<d.length-1;T++){var M=d[T];if(!(M in y))break e;y=y[M]}d=d[d.length-1],T=y[d],p=p(T),p!=T&&p!=null&&e(y,d,{configurable:!0,writable:!0,value:p})}}function i(d,p){d instanceof String&&(d+="");var y=0,T=!1,M={next:function(){if(!T&&y<d.length){var O=y++;return{value:p(O,d[O]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(d){return d||function(){return i(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var p=typeof d;return p=p!="object"?p:d?Array.isArray(d)?"array":p:"null",p=="array"||p=="object"&&typeof d.length=="number"}function u(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function h(d,p,y){return d.call.apply(d.bind,arguments)}function f(d,p,y){if(!d)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),d.apply(p,M)}}return function(){return d.apply(p,arguments)}}function m(d,p,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(d,p){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),d.apply(this,T)}}function v(d,p){function y(){}y.prototype=p.prototype,d.aa=p.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(T,M,O){for(var W=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)W[ke-2]=arguments[ke];return p.prototype[M].apply(T,W)}}function w(d){const p=d.length;if(0<p){const y=Array(p);for(let T=0;T<p;T++)y[T]=d[T];return y}return[]}function S(d,p){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(l(T)){const M=d.length||0,O=T.length||0;d.length=M+O;for(let W=0;W<O;W++)d[M+W]=T[W]}else d.push(T)}}class b{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function k(d){return/^[\s\xa0]*$/.test(d)}function _(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function N(d){return N[" "](d),d}N[" "]=function(){};var j=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function D(d,p,y){for(const T in d)p.call(y,d[T],T,d)}function E(d,p){for(const y in d)p.call(void 0,d[y],y,d)}function x(d){const p={};for(const y in d)p[y]=d[y];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(d,p){let y,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(y in T)d[y]=T[y];for(let O=0;O<I.length;O++)y=I[O],Object.prototype.hasOwnProperty.call(T,y)&&(d[y]=T[y])}}function A(d){var p=1;d=d.split(":");const y=[];for(;0<p&&d.length;)y.push(d.shift()),p--;return d.length&&y.push(d.join(":")),y}function R(d){a.setTimeout(()=>{throw d},0)}function P(){var d=Y;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class fe{constructor(){this.h=this.g=null}add(p,y){const T=le.get();T.set(p,y),this.h?this.h.next=T:this.g=T,this.h=T}}var le=new b(()=>new X,d=>d.reset());class X{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,z=!1,Y=new fe,L=()=>{const d=a.Promise.resolve(void 0);ce=()=>{d.then(H)}};var H=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(y){R(y)}var p=le;p.j(d),100>p.h&&(p.h++,d.next=p.g,p.g=d)}z=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return d}();function V(d,p){if(te.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,T=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget){if(j){e:{try{N(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else y=="mouseover"?p=d.fromElement:y=="mouseout"&&(p=d.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Z[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&V.aa.h.call(this)}}v(V,te);var Z={2:"touch",3:"pen",4:"mouse"};V.prototype.h=function(){V.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function Vt(d,p,y,T,M){this.listener=d,this.proxy=null,this.src=p,this.type=y,this.capture=!!T,this.ha=M,this.key=++Ye,this.da=this.fa=!1}function Qe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function He(d){this.src=d,this.g={},this.h=0}He.prototype.add=function(d,p,y,T,M){var O=d.toString();d=this.g[O],d||(d=this.g[O]=[],this.h++);var W=ve(d,p,T,M);return-1<W?(p=d[W],y||(p.fa=!1)):(p=new Vt(p,this.src,O,!!T,M),p.fa=y,d.push(p)),p};function Xe(d,p){var y=p.type;if(y in d.g){var T=d.g[y],M=Array.prototype.indexOf.call(T,p,void 0),O;(O=0<=M)&&Array.prototype.splice.call(T,M,1),O&&(Qe(p),d.g[y].length==0&&(delete d.g[y],d.h--))}}function ve(d,p,y,T){for(var M=0;M<d.length;++M){var O=d[M];if(!O.da&&O.listener==p&&O.capture==!!y&&O.ha==T)return M}return-1}var gn="closure_lm_"+(1e6*Math.random()|0),ee={};function qg(d,p,y,T,M){if(Array.isArray(p)){for(var O=0;O<p.length;O++)qg(d,p[O],y,T,M);return null}return y=Yg(y),d&&d[Me]?d.K(p,y,u(T)?!!T.capture:!1,M):Dk(d,p,y,!1,T,M)}function Dk(d,p,y,T,M,O){if(!p)throw Error("Invalid event type");var W=u(M)?!!M.capture:!!M,ke=Wd(d);if(ke||(d[gn]=ke=new He(d)),y=ke.add(p,y,T,W,O),y.proxy)return y;if(T=Mk(),y.proxy=T,T.src=d,T.listener=y,d.addEventListener)Ie||(M=W),M===void 0&&(M=!1),d.addEventListener(p.toString(),T,M);else if(d.attachEvent)d.attachEvent(Gg(p.toString()),T);else if(d.addListener&&d.removeListener)d.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Mk(){function d(y){return p.call(d.src,d.listener,y)}const p=Lk;return d}function Kg(d,p,y,T,M){if(Array.isArray(p))for(var O=0;O<p.length;O++)Kg(d,p[O],y,T,M);else T=u(T)?!!T.capture:!!T,y=Yg(y),d&&d[Me]?(d=d.i,p=String(p).toString(),p in d.g&&(O=d.g[p],y=ve(O,y,T,M),-1<y&&(Qe(O[y]),Array.prototype.splice.call(O,y,1),O.length==0&&(delete d.g[p],d.h--)))):d&&(d=Wd(d))&&(p=d.g[p.toString()],d=-1,p&&(d=ve(p,y,T,M)),(y=-1<d?p[d]:null)&&zd(y))}function zd(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[Me])Xe(p.i,d);else{var y=d.type,T=d.proxy;p.removeEventListener?p.removeEventListener(y,T,d.capture):p.detachEvent?p.detachEvent(Gg(y),T):p.addListener&&p.removeListener&&p.removeListener(T),(y=Wd(p))?(Xe(y,d),y.h==0&&(y.src=null,p[gn]=null)):Qe(d)}}}function Gg(d){return d in ee?ee[d]:ee[d]="on"+d}function Lk(d,p){if(d.da)d=!0;else{p=new V(p,this);var y=d.listener,T=d.ha||d.src;d.fa&&zd(d),d=y.call(T,p)}return d}function Wd(d){return d=d[gn],d instanceof He?d:null}var $d="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yg(d){return typeof d=="function"?d:(d[$d]||(d[$d]=function(p){return d.handleEvent(p)}),d[$d])}function pt(){Q.call(this),this.i=new He(this),this.M=this,this.F=null}v(pt,Q),pt.prototype[Me]=!0,pt.prototype.removeEventListener=function(d,p,y,T){Kg(this,d,p,y,T)};function At(d,p){var y,T=d.F;if(T)for(y=[];T;T=T.F)y.push(T);if(d=d.M,T=p.type||p,typeof p=="string")p=new te(p,d);else if(p instanceof te)p.target=p.target||d;else{var M=p;p=new te(T,d),C(p,M)}if(M=!0,y)for(var O=y.length-1;0<=O;O--){var W=p.g=y[O];M=Nl(W,T,!0,p)&&M}if(W=p.g=d,M=Nl(W,T,!0,p)&&M,M=Nl(W,T,!1,p)&&M,y)for(O=0;O<y.length;O++)W=p.g=y[O],M=Nl(W,T,!1,p)&&M}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var d=this.i,p;for(p in d.g){for(var y=d.g[p],T=0;T<y.length;T++)Qe(y[T]);delete d.g[p],d.h--}}this.F=null},pt.prototype.K=function(d,p,y,T){return this.i.add(String(d),p,!1,y,T)},pt.prototype.L=function(d,p,y,T){return this.i.add(String(d),p,!0,y,T)};function Nl(d,p,y,T){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,O=0;O<p.length;++O){var W=p[O];if(W&&!W.da&&W.capture==y){var ke=W.listener,lt=W.ha||W.src;W.fa&&Xe(d.i,W),M=ke.call(lt,T)!==!1&&M}}return M&&!T.defaultPrevented}function Qg(d,p,y){if(typeof d=="function")y&&(d=m(d,y));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(d,p||0)}function Xg(d){d.g=Qg(()=>{d.g=null,d.i&&(d.i=!1,Xg(d))},d.l);const p=d.h;d.h=null,d.m.apply(null,p)}class Ok extends Q{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Xg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ko(d){Q.call(this),this.h=d,this.g={}}v(ko,Q);var Zg=[];function Jg(d){D(d.g,function(p,y){this.g.hasOwnProperty(y)&&zd(p)},d),d.g={}}ko.prototype.N=function(){ko.aa.N.call(this),Jg(this)},ko.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hd=a.JSON.stringify,Vk=a.JSON.parse,Fk=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function qd(){}qd.prototype.h=null;function e0(d){return d.h||(d.h=d.i())}function t0(){}var To={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kd(){te.call(this,"d")}v(Kd,te);function Gd(){te.call(this,"c")}v(Gd,te);var ws={},n0=null;function Al(){return n0=n0||new pt}ws.La="serverreachability";function r0(d){te.call(this,ws.La,d)}v(r0,te);function So(d){const p=Al();At(p,new r0(p))}ws.STAT_EVENT="statevent";function s0(d,p){te.call(this,ws.STAT_EVENT,d),this.stat=p}v(s0,te);function Pt(d){const p=Al();At(p,new s0(p,d))}ws.Ma="timingevent";function i0(d,p){te.call(this,ws.Ma,d),this.size=p}v(i0,te);function Io(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},p)}function Co(){this.g=!0}Co.prototype.xa=function(){this.g=!1};function Uk(d,p,y,T,M,O){d.info(function(){if(d.g)if(O)for(var W="",ke=O.split("&"),lt=0;lt<ke.length;lt++){var ge=ke[lt].split("=");if(1<ge.length){var gt=ge[0];ge=ge[1];var yt=gt.split("_");W=2<=yt.length&&yt[1]=="type"?W+(gt+"="+ge+"&"):W+(gt+"=redacted&")}}else W=null;else W=O;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+p+`
`+y+`
`+W})}function Bk(d,p,y,T,M,O,W){d.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+p+`
`+y+`
`+O+" "+W})}function ai(d,p,y,T){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+Wk(d,y)+(T?" "+T:"")})}function zk(d,p){d.info(function(){return"TIMEOUT: "+p})}Co.prototype.info=function(){};function Wk(d,p){if(!d.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var T=y[d];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var O=M[0];if(O!="noop"&&O!="stop"&&O!="close")for(var W=1;W<M.length;W++)M[W]=""}}}}return Hd(y)}catch{return p}}var Pl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},o0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yd;function jl(){}v(jl,qd),jl.prototype.g=function(){return new XMLHttpRequest},jl.prototype.i=function(){return{}},Yd=new jl;function wr(d,p,y,T){this.j=d,this.i=p,this.l=y,this.R=T||1,this.U=new ko(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new a0}function a0(){this.i=null,this.g="",this.h=!1}var l0={},Qd={};function Xd(d,p,y){d.L=1,d.v=Ll(Yn(p)),d.m=y,d.P=!0,c0(d,null)}function c0(d,p){d.F=Date.now(),Rl(d),d.A=Yn(d.v);var y=d.A,T=d.R;Array.isArray(T)||(T=[String(T)]),E0(y.i,"t",T),d.C=0,y=d.j.J,d.h=new a0,d.g=B0(d.j,y?p:null,!d.m),0<d.O&&(d.M=new Ok(m(d.Y,d,d.g),d.O)),p=d.U,y=d.g,T=d.ca;var M="readystatechange";Array.isArray(M)||(M&&(Zg[0]=M.toString()),M=Zg);for(var O=0;O<M.length;O++){var W=qg(y,M[O],T||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=d.H?x(d.H):{},d.m?(d.u||(d.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,p)):(d.u="GET",d.g.ea(d.A,d.u,null,p)),So(),Uk(d.i,d.u,d.A,d.l,d.R,d.m)}wr.prototype.ca=function(d){d=d.target;const p=this.M;p&&Qn(d)==3?p.j():this.Y(d)},wr.prototype.Y=function(d){try{if(d==this.g)e:{const yt=Qn(this.g);var p=this.g.Ba();const ui=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||A0(this.g)))){this.J||yt!=4||p==7||(p==8||0>=ui?So(3):So(2)),Zd(this);var y=this.g.Z();this.X=y;t:if(u0(this)){var T=A0(this.g);d="";var M=T.length,O=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bs(this),No(this);var W="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,d+=this.h.i.decode(T[p],{stream:!(O&&p==M-1)});T.length=0,this.h.g+=d,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=y==200,Bk(this.i,this.u,this.A,this.l,this.R,yt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,lt=this.g;if((ke=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(ke)){var ge=ke;break t}}ge=null}if(y=ge)ai(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jd(this,y);else{this.o=!1,this.s=3,Pt(12),bs(this),No(this);break e}}if(this.P){y=!0;let yn;for(;!this.J&&this.C<W.length;)if(yn=$k(this,W),yn==Qd){yt==4&&(this.s=4,Pt(14),y=!1),ai(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==l0){this.s=4,Pt(15),ai(this.i,this.l,W,"[Invalid Chunk]"),y=!1;break}else ai(this.i,this.l,yn,null),Jd(this,yn);if(u0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||W.length!=0||this.h.h||(this.s=1,Pt(16),y=!1),this.o=this.o&&y,!y)ai(this.i,this.l,W,"[Invalid Chunked Response]"),bs(this),No(this);else if(0<W.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),ih(gt),gt.M=!0,Pt(11))}}else ai(this.i,this.l,W,null),Jd(this,W);yt==4&&bs(this),this.o&&!this.J&&(yt==4?O0(this.j,this):(this.o=!1,Rl(this)))}else aT(this.g),y==400&&0<W.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),bs(this),No(this)}}}catch{}finally{}};function u0(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function $k(d,p){var y=d.C,T=p.indexOf(`
`,y);return T==-1?Qd:(y=Number(p.substring(y,T)),isNaN(y)?l0:(T+=1,T+y>p.length?Qd:(p=p.slice(T,T+y),d.C=T+y,p)))}wr.prototype.cancel=function(){this.J=!0,bs(this)};function Rl(d){d.S=Date.now()+d.I,d0(d,d.I)}function d0(d,p){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Io(m(d.ba,d),p)}function Zd(d){d.B&&(a.clearTimeout(d.B),d.B=null)}wr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(zk(this.i,this.A),this.L!=2&&(So(),Pt(17)),bs(this),this.s=2,No(this)):d0(this,this.S-d)};function No(d){d.j.G==0||d.J||O0(d.j,d)}function bs(d){Zd(d);var p=d.M;p&&typeof p.ma=="function"&&p.ma(),d.M=null,Jg(d.U),d.g&&(p=d.g,d.g=null,p.abort(),p.ma())}function Jd(d,p){try{var y=d.j;if(y.G!=0&&(y.g==d||eh(y.h,d))){if(!d.K&&eh(y.h,d)&&y.G==3){try{var T=y.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)zl(y),Ul(y);else break e;sh(y),Pt(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Io(m(y.Za,y),6e3));if(1>=m0(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ks(y,11)}else if((d.K||y.g==d)&&zl(y),!k(p))for(M=y.Da.g.parse(p),p=0;p<M.length;p++){let ge=M[p];if(y.T=ge[0],ge=ge[1],y.G==2)if(ge[0]=="c"){y.K=ge[1],y.ia=ge[2];const gt=ge[3];gt!=null&&(y.la=gt,y.j.info("VER="+y.la));const yt=ge[4];yt!=null&&(y.Aa=yt,y.j.info("SVER="+y.Aa));const ui=ge[5];ui!=null&&typeof ui=="number"&&0<ui&&(T=1.5*ui,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const yn=d.g;if(yn){const $l=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($l){var O=T.h;O.g||$l.indexOf("spdy")==-1&&$l.indexOf("quic")==-1&&$l.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(th(O,O.h),O.h=null))}if(T.D){const oh=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;oh&&(T.ya=oh,Ne(T.I,T.D,oh))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var W=d;if(T.qa=U0(T,T.J?T.ia:null,T.W),W.K){p0(T.h,W);var ke=W,lt=T.L;lt&&(ke.I=lt),ke.B&&(Zd(ke),Rl(ke)),T.g=W}else M0(T);0<y.i.length&&Bl(y)}else ge[0]!="stop"&&ge[0]!="close"||ks(y,7);else y.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ks(y,7):rh(y):ge[0]!="noop"&&y.l&&y.l.ta(ge),y.v=0)}}So(4)}catch{}}var Hk=class{constructor(d,p){this.g=d,this.map=p}};function h0(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function f0(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function m0(d){return d.h?1:d.g?d.g.size:0}function eh(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function th(d,p){d.g?d.g.add(p):d.h=p}function p0(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}h0.prototype.cancel=function(){if(this.i=g0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function g0(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let p=d.i;for(const y of d.g.values())p=p.concat(y.D);return p}return w(d.i)}function qk(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var p=[],y=d.length,T=0;T<y;T++)p.push(d[T]);return p}p=[],y=0;for(T in d)p[y++]=d[T];return p}function Kk(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var p=[];d=d.length;for(var y=0;y<d;y++)p.push(y);return p}p=[],y=0;for(const T in d)p[y++]=T;return p}}}function y0(d,p){if(d.forEach&&typeof d.forEach=="function")d.forEach(p,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,p,void 0);else for(var y=Kk(d),T=qk(d),M=T.length,O=0;O<M;O++)p.call(void 0,T[O],y&&y[O],d)}var v0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gk(d,p){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var T=d[y].indexOf("="),M=null;if(0<=T){var O=d[y].substring(0,T);M=d[y].substring(T+1)}else O=d[y];p(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Es(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Es){this.h=d.h,Dl(this,d.j),this.o=d.o,this.g=d.g,Ml(this,d.s),this.l=d.l;var p=d.i,y=new jo;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),x0(this,y),this.m=d.m}else d&&(p=String(d).match(v0))?(this.h=!1,Dl(this,p[1]||"",!0),this.o=Ao(p[2]||""),this.g=Ao(p[3]||"",!0),Ml(this,p[4]),this.l=Ao(p[5]||"",!0),x0(this,p[6]||"",!0),this.m=Ao(p[7]||"")):(this.h=!1,this.i=new jo(null,this.h))}Es.prototype.toString=function(){var d=[],p=this.j;p&&d.push(Po(p,_0,!0),":");var y=this.g;return(y||p=="file")&&(d.push("//"),(p=this.o)&&d.push(Po(p,_0,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(Po(y,y.charAt(0)=="/"?Xk:Qk,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",Po(y,Jk)),d.join("")};function Yn(d){return new Es(d)}function Dl(d,p,y){d.j=y?Ao(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function Ml(d,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);d.s=p}else d.s=null}function x0(d,p,y){p instanceof jo?(d.i=p,eT(d.i,d.h)):(y||(p=Po(p,Zk)),d.i=new jo(p,d.h))}function Ne(d,p,y){d.i.set(p,y)}function Ll(d){return Ne(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ao(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Po(d,p,y){return typeof d=="string"?(d=encodeURI(d).replace(p,Yk),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Yk(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var _0=/[#\/\?@]/g,Qk=/[#\?:]/g,Xk=/[#\?]/g,Zk=/[#\?@]/g,Jk=/#/g;function jo(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function br(d){d.g||(d.g=new Map,d.h=0,d.i&&Gk(d.i,function(p,y){d.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=jo.prototype,t.add=function(d,p){br(this),this.i=null,d=li(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(p),this.h+=1,this};function w0(d,p){br(d),p=li(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function b0(d,p){return br(d),p=li(d,p),d.g.has(p)}t.forEach=function(d,p){br(this),this.g.forEach(function(y,T){y.forEach(function(M){d.call(p,M,T,this)},this)},this)},t.na=function(){br(this);const d=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let T=0;T<p.length;T++){const M=d[T];for(let O=0;O<M.length;O++)y.push(p[T])}return y},t.V=function(d){br(this);let p=[];if(typeof d=="string")b0(this,d)&&(p=p.concat(this.g.get(li(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)p=p.concat(d[y])}return p},t.set=function(d,p){return br(this),this.i=null,d=li(this,d),b0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},t.get=function(d,p){return d?(d=this.V(d),0<d.length?String(d[0]):p):p};function E0(d,p,y){w0(d,p),0<y.length&&(d.i=null,d.g.set(li(d,p),w(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var T=p[y];const O=encodeURIComponent(String(T)),W=this.V(T);for(T=0;T<W.length;T++){var M=O;W[T]!==""&&(M+="="+encodeURIComponent(String(W[T]))),d.push(M)}}return this.i=d.join("&")};function li(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function eT(d,p){p&&!d.j&&(br(d),d.i=null,d.g.forEach(function(y,T){var M=T.toLowerCase();T!=M&&(w0(this,T),E0(this,M,y))},d)),d.j=p}function tT(d,p){const y=new Co;if(a.Image){const T=new Image;T.onload=g(Er,y,"TestLoadImage: loaded",!0,p,T),T.onerror=g(Er,y,"TestLoadImage: error",!1,p,T),T.onabort=g(Er,y,"TestLoadImage: abort",!1,p,T),T.ontimeout=g(Er,y,"TestLoadImage: timeout",!1,p,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=d}else p(!1)}function nT(d,p){const y=new Co,T=new AbortController,M=setTimeout(()=>{T.abort(),Er(y,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:T.signal}).then(O=>{clearTimeout(M),O.ok?Er(y,"TestPingServer: ok",!0,p):Er(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Er(y,"TestPingServer: error",!1,p)})}function Er(d,p,y,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(y)}catch{}}function rT(){this.g=new Fk}function sT(d,p,y){const T=y||"";try{y0(d,function(M,O){let W=M;u(M)&&(W=Hd(M)),p.push(T+O+"="+encodeURIComponent(W))})}catch(M){throw p.push(T+"type="+encodeURIComponent("_badmap")),M}}function Ol(d){this.l=d.Ub||null,this.j=d.eb||!1}v(Ol,qd),Ol.prototype.g=function(){return new Vl(this.l,this.j)},Ol.prototype.i=function(d){return function(){return d}}({});function Vl(d,p){pt.call(this),this.D=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Vl,pt),t=Vl.prototype,t.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=p,this.readyState=1,Do(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(p.body=d),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ro(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Do(this)),this.g&&(this.readyState=3,Do(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;k0(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function k0(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?Ro(this):Do(this),this.readyState==3&&k0(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Ro(this))},t.Qa=function(d){this.g&&(this.response=d,Ro(this))},t.ga=function(){this.g&&Ro(this)};function Ro(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Do(d)}t.setRequestHeader=function(d,p){this.u.append(d,p)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=p.next();return d.join(`\r
`)};function Do(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function T0(d){let p="";return D(d,function(y,T){p+=T,p+=":",p+=y,p+=`\r
`}),p}function nh(d,p,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=T0(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):Ne(d,p,y))}function Ue(d){pt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ue,pt);var iT=/^https?$/i,oT=["POST","PUT"];t=Ue.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,p,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yd.g(),this.v=this.o?e0(this.o):e0(Yd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(O){S0(this,O);return}if(d=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)y.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const O of T.keys())y.set(O,T.get(O));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(O=>O.toLowerCase()=="content-type"),M=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(oT,p,void 0))||T||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of y)this.g.setRequestHeader(O,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{N0(this),this.u=!0,this.g.send(d),this.u=!1}catch(O){S0(this,O)}};function S0(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.m=5,I0(d),Fl(d)}function I0(d){d.A||(d.A=!0,At(d,"complete"),At(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,At(this,"complete"),At(this,"abort"),Fl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fl(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?C0(this):this.bb())},t.bb=function(){C0(this)};function C0(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Qn(d)!=4||d.Z()!=2)){if(d.u&&Qn(d)==4)Qg(d.Ea,0,d);else if(At(d,"readystatechange"),Qn(d)==4){d.h=!1;try{const W=d.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var T;if(T=W===0){var M=String(d.D).match(v0)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),T=!iT.test(M?M.toLowerCase():"")}y=T}if(y)At(d,"complete"),At(d,"success");else{d.m=6;try{var O=2<Qn(d)?d.g.statusText:""}catch{O=""}d.l=O+" ["+d.Z()+"]",I0(d)}}finally{Fl(d)}}}}function Fl(d,p){if(d.g){N0(d);const y=d.g,T=d.v[0]?()=>{}:null;d.g=null,d.v=null,p||At(d,"ready");try{y.onreadystatechange=T}catch{}}}function N0(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Qn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),Vk(p)}};function A0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function aT(d){const p={};d=(d.g&&2<=Qn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<d.length;T++){if(k(d[T]))continue;var y=A(d[T]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const O=p[M]||[];p[M]=O,O.push(y)}E(p,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(d,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||p}function P0(d){this.Aa=0,this.i=[],this.j=new Co,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mo("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mo("baseRetryDelayMs",5e3,d),this.cb=Mo("retryDelaySeedMs",1e4,d),this.Wa=Mo("forwardChannelMaxRetries",2,d),this.wa=Mo("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new h0(d&&d.concurrentRequestLimit),this.Da=new rT,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=P0.prototype,t.la=8,t.G=1,t.connect=function(d,p,y,T){Pt(0),this.W=d,this.H=p||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=U0(this,null,this.W),Bl(this)};function rh(d){if(j0(d),d.G==3){var p=d.U++,y=Yn(d.I);if(Ne(y,"SID",d.K),Ne(y,"RID",p),Ne(y,"TYPE","terminate"),Lo(d,y),p=new wr(d,d.j,p),p.L=2,p.v=Ll(Yn(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=B0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Rl(p)}F0(d)}function Ul(d){d.g&&(ih(d),d.g.cancel(),d.g=null)}function j0(d){Ul(d),d.u&&(a.clearTimeout(d.u),d.u=null),zl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Bl(d){if(!f0(d.h)&&!d.s){d.s=!0;var p=d.Ga;ce||L(),z||(ce(),z=!0),Y.add(p,d),d.B=0}}function lT(d,p){return m0(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=p.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Io(m(d.Ga,d,p),V0(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const M=new wr(this,this.j,d);let O=this.o;if(this.S&&(O?(O=x(O),C(O,this.S)):O=this.S),this.m!==null||this.O||(M.H=O,O=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=D0(this,M,p),y=Yn(this.I),Ne(y,"RID",d),Ne(y,"CVER",22),this.D&&Ne(y,"X-HTTP-Session-Id",this.D),Lo(this,y),O&&(this.O?p="headers="+encodeURIComponent(String(T0(O)))+"&"+p:this.m&&nh(y,this.m,O)),th(this.h,M),this.Ua&&Ne(y,"TYPE","init"),this.P?(Ne(y,"$req",p),Ne(y,"SID","null"),M.T=!0,Xd(M,y,null)):Xd(M,y,p),this.G=2}}else this.G==3&&(d?R0(this,d):this.i.length==0||f0(this.h)||R0(this))};function R0(d,p){var y;p?y=p.l:y=d.U++;const T=Yn(d.I);Ne(T,"SID",d.K),Ne(T,"RID",y),Ne(T,"AID",d.T),Lo(d,T),d.m&&d.o&&nh(T,d.m,d.o),y=new wr(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),p&&(d.i=p.D.concat(d.i)),p=D0(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),th(d.h,y),Xd(y,T,p)}function Lo(d,p){d.H&&D(d.H,function(y,T){Ne(p,T,y)}),d.l&&y0({},function(y,T){Ne(p,T,y)})}function D0(d,p,y){y=Math.min(d.i.length,y);var T=d.l?m(d.l.Na,d.l,d):null;e:{var M=d.i;let O=-1;for(;;){const W=["count="+y];O==-1?0<y?(O=M[0].g,W.push("ofs="+O)):O=0:W.push("ofs="+O);let ke=!0;for(let lt=0;lt<y;lt++){let ge=M[lt].g;const gt=M[lt].map;if(ge-=O,0>ge)O=Math.max(0,M[lt].g-100),ke=!1;else try{sT(gt,W,"req"+ge+"_")}catch{T&&T(gt)}}if(ke){T=W.join("&");break e}}}return d=d.i.splice(0,y),p.D=d,T}function M0(d){if(!d.g&&!d.u){d.Y=1;var p=d.Fa;ce||L(),z||(ce(),z=!0),Y.add(p,d),d.v=0}}function sh(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Io(m(d.Fa,d),V0(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,L0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Io(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),Ul(this),L0(this))};function ih(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function L0(d){d.g=new wr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var p=Yn(d.qa);Ne(p,"RID","rpc"),Ne(p,"SID",d.K),Ne(p,"AID",d.T),Ne(p,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ne(p,"TO",d.ja),Ne(p,"TYPE","xmlhttp"),Lo(d,p),d.m&&d.o&&nh(p,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=Ll(Yn(p)),y.m=null,y.P=!0,c0(y,d)}t.Za=function(){this.C!=null&&(this.C=null,Ul(this),sh(this),Pt(19))};function zl(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function O0(d,p){var y=null;if(d.g==p){zl(d),ih(d),d.g=null;var T=2}else if(eh(d.h,p))y=p.D,p0(d.h,p),T=1;else return;if(d.G!=0){if(p.o)if(T==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var M=d.B;T=Al(),At(T,new i0(T,y)),Bl(d)}else M0(d);else if(M=p.s,M==3||M==0&&0<p.X||!(T==1&&lT(d,p)||T==2&&sh(d)))switch(y&&0<y.length&&(p=d.h,p.i=p.i.concat(y)),M){case 1:ks(d,5);break;case 4:ks(d,10);break;case 3:ks(d,6);break;default:ks(d,2)}}}function V0(d,p){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*p}function ks(d,p){if(d.j.info("Error code "+p),p==2){var y=m(d.fb,d),T=d.Xa;const M=!T;T=new Es(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Dl(T,"https"),Ll(T),M?tT(T.toString(),y):nT(T.toString(),y)}else Pt(2);d.G=0,d.l&&d.l.sa(p),F0(d),j0(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function F0(d){if(d.G=0,d.ka=[],d.l){const p=g0(d.h);(p.length!=0||d.i.length!=0)&&(S(d.ka,p),S(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function U0(d,p,y){var T=y instanceof Es?Yn(y):new Es(y);if(T.g!="")p&&(T.g=p+"."+T.g),Ml(T,T.s);else{var M=a.location;T=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var O=new Es(null);T&&Dl(O,T),p&&(O.g=p),M&&Ml(O,M),y&&(O.l=y),T=O}return y=d.D,p=d.ya,y&&p&&Ne(T,y,p),Ne(T,"VER",d.la),Lo(d,T),T}function B0(d,p,y){if(p&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Ca&&!d.pa?new Ue(new Ol({eb:y})):new Ue(d.pa),p.Ha(d.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function z0(){}t=z0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wl(){}Wl.prototype.g=function(d,p){return new Yt(d,p)};function Yt(d,p){pt.call(this),this.g=new P0(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(d?d["X-WebChannel-Client-Profile"]=p.va:d={"X-WebChannel-Client-Profile":p.va}),this.g.S=d,(d=p&&p.Sb)&&!k(d)&&(this.g.m=d),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!k(p)&&(this.g.D=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new ci(this)}v(Yt,pt),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){rh(this.g)},Yt.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=Hd(d),d=y);p.i.push(new Hk(p.Ya++,d)),p.G==3&&Bl(p)},Yt.prototype.N=function(){this.g.l=null,delete this.j,rh(this.g),delete this.g,Yt.aa.N.call(this)};function W0(d){Kd.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(const y in p){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}v(W0,Kd);function $0(){Gd.call(this),this.status=1}v($0,Gd);function ci(d){this.g=d}v(ci,z0),ci.prototype.ua=function(){At(this.g,"a")},ci.prototype.ta=function(d){At(this.g,new W0(d))},ci.prototype.sa=function(d){At(this.g,new $0)},ci.prototype.ra=function(){At(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,ib=function(){return new Wl},sb=function(){return Al()},rb=ws,om={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pl.NO_ERROR=0,Pl.TIMEOUT=8,Pl.HTTP_ERROR=6,Wc=Pl,o0.COMPLETE="complete",nb=o0,t0.EventType=To,To.OPEN="a",To.CLOSE="b",To.ERROR="c",To.MESSAGE="d",pt.prototype.listen=pt.prototype.K,ia=t0,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,tb=Ue}).apply(typeof cc<"u"?cc:typeof self<"u"?self:typeof window<"u"?window:{});const Pv="@firebase/firestore",jv="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Rp("@firebase/firestore");function pi(){return Xs.logLevel}function q(t,...e){if(Xs.logLevel<=ue.DEBUG){const n=e.map(Hp);Xs.debug(`Firestore (${go}): ${t}`,...n)}}function gr(t,...e){if(Xs.logLevel<=ue.ERROR){const n=e.map(Hp);Xs.error(`Firestore (${go}): ${t}`,...n)}}function to(t,...e){if(Xs.logLevel<=ue.WARN){const n=e.map(Hp);Xs.warn(`Firestore (${go}): ${t}`,...n)}}function Hp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ob(t,r,n)}function ob(t,e,n){let r=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw gr(r),new Error(r)}function xe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ob(e,s,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class VP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FP{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new cr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new cr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new ab(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class UP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new UP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=WP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function am(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return oe(r,s);{const i=lb(),o=$P(i.encode(Dv(t,n)),i.encode(Dv(e,n)));return o!==0?o:oe(r,s)}}n+=r>65535?2:1}return oe(t.length,e.length)}function Dv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function $P(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function no(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=-62135596800,Lv=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Lv);return new nt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Mv)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lv}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Mv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new nt(0,0))}static max(){return new se(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__name__";class Vn{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Vn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return oe(e.length,n.length)}static compareSegments(e,n){const r=Vn.isNumericId(e),s=Vn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Vn.extractNumericId(e).compare(Vn.extractNumericId(n)):am(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class je extends Vn{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const HP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Vn{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return HP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ov}static keyField(){return new dt([Ov])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(je.fromString(e))}static fromName(e){return new J(je.fromString(e).popFirst(5))}static empty(){return new J(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=-1;function qP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new os(s,J.empty(),e)}function KP(t){return new os(t.readTime,t.key,Qa)}class os{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new os(se.min(),J.empty(),Qa)}static max(){return new os(se.max(),J.empty(),Qa)}}function GP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==YP)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function XP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}wd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=-1;function bd(t){return t==null}function Ru(t){return t===0&&1/t==-1/0}function ZP(t){return typeof t=="number"&&Number.isInteger(t)&&!Ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="";function JP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Vv(e)),e=ej(t.get(n),e);return Vv(e)}function ej(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ub:n+="";break;default:n+=i}}return n}function Vv(t){return t+ub+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function db(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uc(this.root,e,this.comparator,!0)}}class uc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Uv(this.data.getIterator())}getIteratorFrom(e){return new Uv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class Uv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new rt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return no(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hb("Invalid base64 string: "+i):i}}(e);return new mt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const tj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=tj.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="server_timestamp",mb="__type__",pb="__previous_value__",gb="__local_write_time__";function Kp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[mb])===null||n===void 0?void 0:n.stringValue)===fb}function Ed(t){const e=t.mapValue.fields[pb];return Kp(e)?Ed(e):e}function Xa(t){const e=as(t.mapValue.fields[gb].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Du="(default)";class Za{constructor(e,n){this.projectId=e,this.database=n||Du}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===Du}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="__type__",rj="__max__",dc={mapValue:{}},vb="__vector__",Mu="value";function cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kp(t)?4:ij(t)?9007199254740991:sj(t)?10:11:re(28295,{value:t})}function qn(t,e){if(t===e)return!0;const n=cs(t);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xa(t).isEqual(Xa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=as(s.timestampValue),a=as(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ls(s.bytesValue).isEqual(ls(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ze(s.geoPointValue.latitude)===ze(i.geoPointValue.latitude)&&ze(s.geoPointValue.longitude)===ze(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ze(s.integerValue)===ze(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ze(s.doubleValue),a=ze(i.doubleValue);return o===a?Ru(o)===Ru(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return no(t.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Fv(o)!==Fv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!qn(o[l],a[l])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function Ja(t,e){return(t.values||[]).find(n=>qn(n,e))!==void 0}function ro(t,e){if(t===e)return 0;const n=cs(t),r=cs(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ze(i.integerValue||i.doubleValue),l=ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Bv(t.timestampValue,e.timestampValue);case 4:return Bv(Xa(t),Xa(e));case 5:return am(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ls(i),l=ls(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=oe(a[u],l[u]);if(h!==0)return h}return oe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=oe(ze(i.latitude),ze(o.latitude));return a!==0?a:oe(ze(i.longitude),ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,h;const f=i.fields||{},m=o.fields||{},g=(a=f[Mu])===null||a===void 0?void 0:a.arrayValue,v=(l=m[Mu])===null||l===void 0?void 0:l.arrayValue,w=oe(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:zv(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===dc.mapValue&&o===dc.mapValue)return 0;if(i===dc.mapValue)return 1;if(o===dc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=am(l[f],h[f]);if(m!==0)return m;const g=ro(a[l[f]],u[h[f]]);if(g!==0)return g}return oe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw re(23264,{Pe:n})}}function Bv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=as(t),r=as(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function zv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ro(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function so(t){return lm(t)}function lm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=as(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=lm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${lm(n.fields[o])}`;return s+"}"}(t.mapValue):re(61005,{value:t})}function $c(t){switch(cs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ed(t);return e?16+$c(e):16;case 5:return 2*t.stringValue.length;case 6:return ls(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+$c(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return vs(r.fields,(i,o)=>{s+=i.length+$c(o)}),s}(t.mapValue);default:throw re(13486,{value:t})}}function Wv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cm(t){return!!t&&"integerValue"in t}function Gp(t){return!!t&&"arrayValue"in t}function $v(t){return!!t&&"nullValue"in t}function Hv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hc(t){return!!t&&"mapValue"in t}function sj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[yb])===null||n===void 0?void 0:n.stringValue)===vb}function Ea(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ea(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ea(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ij(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ea(n)}setAll(e){let n=dt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ea(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Hc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new zt(Ea(this.value))}}function xb(t){const e=[];return vs(t.fields,(n,r)=>{const s=new dt([n]);if(Hc(r)){const i=xb(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Tt(e,0,se.min(),se.min(),se.min(),zt.empty(),0)}static newFoundDocument(e,n,r,s){return new Tt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new Tt(e,2,n,se.min(),se.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,se.min(),se.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.position=e,this.inclusive=n}}function qv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=ro(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n="asc"){this.field=e,this.dir=n}}function oj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{}class Ge extends _b{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lj(e,n,r):n==="array-contains"?new dj(e,r):n==="in"?new hj(e,r):n==="not-in"?new fj(e,r):n==="array-contains-any"?new mj(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cj(e,r):new uj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ro(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jn extends _b{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new jn(e,n)}matches(e){return wb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function wb(t){return t.op==="and"}function bb(t){return aj(t)&&wb(t)}function aj(t){for(const e of t.filters)if(e instanceof jn)return!1;return!0}function um(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+so(t.value);if(bb(t))return t.filters.map(e=>um(e)).join(",");{const e=t.filters.map(n=>um(n)).join(",");return`${t.op}(${e})`}}function Eb(t,e){return t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.field.isEqual(s.field)&&qn(r.value,s.value)}(t,e):t instanceof jn?function(r,s){return s instanceof jn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Eb(o,s.filters[a]),!0):!1}(t,e):void re(19439)}function kb(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${so(n.value)}`}(t):t instanceof jn?function(n){return n.op.toString()+" {"+n.getFilters().map(kb).join(" ,")+"}"}(t):"Filter"}class lj extends Ge{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class cj extends Ge{constructor(e,n){super(e,"in",n),this.keys=Tb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uj extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=Tb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Tb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class dj extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gp(n)&&Ja(n.arrayValue,this.value)}}class hj extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ja(this.value.arrayValue,n)}}class fj extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ja(this.value.arrayValue,n)}}class mj extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ja(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function Gv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new pj(t,e,n,r,s,i,o)}function Yp(t){const e=ie(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>um(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>so(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>so(r)).join(",")),e.Ie=n}return e.Ie}function Qp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Eb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kv(t.startAt,e.startAt)&&Kv(t.endAt,e.endAt)}function dm(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function gj(t,e,n,r,s,i,o,a){return new xo(t,e,n,r,s,i,o,a)}function Xp(t){return new xo(t)}function Yv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Sb(t){return t.collectionGroup!==null}function ka(t){const e=ie(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new el(i,r))}),n.has(dt.keyField().canonicalString())||e.Ee.push(new el(dt.keyField(),r))}return e.Ee}function $n(t){const e=ie(t);return e.de||(e.de=yj(e,ka(t))),e.de}function yj(t,e){if(t.limitType==="F")return Gv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new el(s.field,i)});const n=t.endAt?new Lu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lu(t.startAt.position,t.startAt.inclusive):null;return Gv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hm(t,e){const n=t.filters.concat([e]);return new xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fm(t,e,n){return new xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kd(t,e){return Qp($n(t),$n(e))&&t.limitType===e.limitType}function Ib(t){return`${Yp($n(t))}|lt:${t.limitType}`}function gi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>kb(s)).join(", ")}]`),bd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>so(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>so(s)).join(",")),`Target(${r})`}($n(t))}; limitType=${t.limitType})`}function Td(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ka(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=qv(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,ka(r),s)||r.endAt&&!function(o,a,l){const u=qv(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,ka(r),s))}(t,e)}function vj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Cb(t){return(e,n)=>{let r=!1;for(const s of ka(t)){const i=xj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xj(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?ro(l,u):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return db(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new Fe(J.comparator);function yr(){return _j}const Nb=new Fe(J.comparator);function oa(...t){let e=Nb;for(const n of t)e=e.insert(n.key,n);return e}function Ab(t){let e=Nb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Os(){return Ta()}function Pb(){return Ta()}function Ta(){return new si(t=>t.toString(),(t,e)=>t.isEqual(e))}const wj=new Fe(J.comparator),bj=new rt(J.comparator);function de(...t){let e=bj;for(const n of t)e=e.add(n);return e}const Ej=new rt(oe);function kj(){return Ej}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(e)?"-0":e}}function jb(t){return{integerValue:""+t}}function Tj(t,e){return ZP(e)?jb(e):Zp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this._=void 0}}function Sj(t,e,n){return t instanceof tl?function(s,i){const o={fields:{[mb]:{stringValue:fb},[gb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Kp(i)&&(i=Ed(i)),i&&(o.fields[pb]=i),{mapValue:o}}(n,e):t instanceof nl?Db(t,e):t instanceof rl?Mb(t,e):function(s,i){const o=Rb(s,i),a=Qv(o)+Qv(s.Re);return cm(o)&&cm(s.Re)?jb(a):Zp(s.serializer,a)}(t,e)}function Ij(t,e,n){return t instanceof nl?Db(t,e):t instanceof rl?Mb(t,e):n}function Rb(t,e){return t instanceof Ou?function(r){return cm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class tl extends Sd{}class nl extends Sd{constructor(e){super(),this.elements=e}}function Db(t,e){const n=Lb(e);for(const r of t.elements)n.some(s=>qn(s,r))||n.push(r);return{arrayValue:{values:n}}}class rl extends Sd{constructor(e){super(),this.elements=e}}function Mb(t,e){let n=Lb(e);for(const r of t.elements)n=n.filter(s=>!qn(s,r));return{arrayValue:{values:n}}}class Ou extends Sd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Qv(t){return ze(t.integerValue||t.doubleValue)}function Lb(t){return Gp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n){this.field=e,this.transform=n}}function Nj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof nl&&s instanceof nl||r instanceof rl&&s instanceof rl?no(r.elements,s.elements,qn):r instanceof Ou&&s instanceof Ou?qn(r.Re,s.Re):r instanceof tl&&s instanceof tl}(t.transform,e.transform)}class Aj{constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Id{}function Ob(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jp(t.key,Cn.none()):new bl(t.key,t.data,Cn.none());{const n=t.data,r=zt.empty();let s=new rt(dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new xs(t.key,r,new Zt(s.toArray()),Cn.none())}}function Pj(t,e,n){t instanceof bl?function(s,i,o){const a=s.value.clone(),l=Zv(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof xs?function(s,i,o){if(!qc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Zv(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Vb(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Sa(t,e,n,r){return t instanceof bl?function(i,o,a,l){if(!qc(i.precondition,o))return a;const u=i.value.clone(),h=Jv(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof xs?function(i,o,a,l){if(!qc(i.precondition,o))return a;const u=Jv(i.fieldTransforms,l,o),h=o.data;return h.setAll(Vb(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return qc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function jj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Rb(r.transform,s||null);i!=null&&(n===null&&(n=zt.empty()),n.set(r.field,i))}return n||null}function Xv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&no(r,s,(i,o)=>Nj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bl extends Id{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xs extends Id{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Zv(t,e,n){const r=new Map;xe(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Ij(o,a,n[s]))}return r}function Jv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Sj(i,o,e))}return r}class Jp extends Id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rj extends Id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Pj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Pb();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Ob(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&no(this.mutations,e.mutations,(n,r)=>Xv(n,r))&&no(this.baseMutations,e.baseMutations,(n,r)=>Xv(n,r))}}class eg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return wj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new eg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,he;function Oj(t){switch(t){case F.OK:return re(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function Fb(t){if(t===void 0)return gr("GRPC error has no .code"),F.UNKNOWN;switch(t){case qe.OK:return F.OK;case qe.CANCELLED:return F.CANCELLED;case qe.UNKNOWN:return F.UNKNOWN;case qe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case qe.INTERNAL:return F.INTERNAL;case qe.UNAVAILABLE:return F.UNAVAILABLE;case qe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case qe.NOT_FOUND:return F.NOT_FOUND;case qe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case qe.ABORTED:return F.ABORTED;case qe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case qe.DATA_LOSS:return F.DATA_LOSS;default:return re(39323,{code:t})}}(he=qe||(qe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=new Jr([4294967295,4294967295],0);function ex(t){const e=lb().encode(t),n=new eb;return n.update(e),new Uint8Array(n.digest())}function tx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Jr([n,r],0),new Jr([s,i],0)]}class tg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new aa(`Invalid padding: ${n}`);if(r<0)throw new aa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new aa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new aa(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Jr.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Jr.fromNumber(r)));return s.compare(Vj)===1&&(s=new Jr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=ex(e),[r,s]=tx(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.Se(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new tg(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=ex(e),[r,s]=tx(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,El.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cd(se.min(),s,new Fe(oe),yr(),de())}}class El{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new El(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class Ub{constructor(e,n){this.targetId=e,this.Ce=n}}class Bb{constructor(e,n,r=mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class nx{constructor(){this.Fe=0,this.Me=rx(),this.xe=mt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=de(),n=de(),r=de();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re(38017,{changeType:i})}}),new El(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=rx()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,xe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Fj{constructor(e){this.ze=e,this.je=new Map,this.He=yr(),this.Je=hc(),this.Ye=hc(),this.Ze=new Fe(oe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(dm(i))if(r===0){const o=new J(i.path);this.tt(n,o,Tt.newNoDocument(o,se.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ls(r).toUint8Array()}catch(l){if(l instanceof hb)return to("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new tg(o,s,i)}catch(l){return to(l instanceof aa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&dm(a.target)){const l=new J(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,Tt.newNoDocument(l,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=de();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Cd(e,n,this.Ze,this.He,r);return this.He=yr(),this.Je=hc(),this.Ye=hc(),this.Ze=new Fe(oe),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new nx,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new rt(oe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new rt(oe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new nx),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function hc(){return new Fe(J.comparator)}function rx(){return new Fe(J.comparator)}const Uj={asc:"ASCENDING",desc:"DESCENDING"},Bj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zj={and:"AND",or:"OR"};class Wj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mm(t,e){return t.useProto3Json||bd(e)?e:{value:e}}function Vu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $j(t,e){return Vu(t,e.toTimestamp())}function Hn(t){return xe(!!t,49232),se.fromTimestamp(function(n){const r=as(n);return new nt(r.seconds,r.nanos)}(t))}function ng(t,e){return pm(t,e).canonicalString()}function pm(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Wb(t){const e=je.fromString(t);return xe(Gb(e),10190,{key:e.toString()}),e}function gm(t,e){return ng(t.databaseId,e.path)}function Uh(t,e){const n=Wb(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(Hb(n))}function $b(t,e){return ng(t.databaseId,e)}function Hj(t){const e=Wb(t);return e.length===4?je.emptyPath():Hb(e)}function ym(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Hb(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function sx(t,e,n){return{name:gm(t,e),fields:n.value.mapValue.fields}}function qj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(xe(h===void 0||typeof h=="string",58123),mt.fromBase64String(h||"")):(xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),mt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?F.UNKNOWN:Fb(u.code);return new K(h,u.message||"")}(o);n=new Bb(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Uh(t,r.document.name),i=Hn(r.document.updateTime),o=r.document.createTime?Hn(r.document.createTime):se.min(),a=new zt({mapValue:{fields:r.document.fields}}),l=Tt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Kc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Uh(t,r.document),i=r.readTime?Hn(r.readTime):se.min(),o=Tt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Kc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Uh(t,r.document),i=r.removedTargetIds||[];n=new Kc([],i,s,null)}else{if(!("filter"in e))return re(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Lj(s,i),a=r.targetId;n=new Ub(a,o)}}return n}function Kj(t,e){let n;if(e instanceof bl)n={update:sx(t,e.key,e.value)};else if(e instanceof Jp)n={delete:gm(t,e.key)};else if(e instanceof xs)n={update:sx(t,e.key,e.data),updateMask:n4(e.fieldMask)};else{if(!(e instanceof Rj))return re(16599,{ft:e.type});n={verify:gm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof tl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ou)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:$j(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)}(t,e.precondition)),n}function Gj(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Hn(s.updateTime):Hn(i);return o.isEqual(se.min())&&(o=Hn(i)),new Aj(o,s.transformResults||[])}(n,e))):[]}function Yj(t,e){return{documents:[$b(t,e.path)]}}function Qj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$b(t,s);const i=function(u){if(u.length!==0)return Kb(jn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:yi(m.field),direction:Jj(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=mm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:n,parent:s}}function Xj(t){let e=Hj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=qb(f);return m instanceof jn&&bb(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(v){return new el(vi(v.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,bd(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,g=f.values||[];return new Lu(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new Lu(g,m)}(n.endAt)),gj(e,s,o,i,a,"F",l,u)}function Zj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vi(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=vi(n.unaryFilter.field);return Ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vi(n.unaryFilter.field);return Ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vi(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(vi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return jn.create(n.compositeFilter.filters.map(r=>qb(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function Jj(t){return Uj[t]}function e4(t){return Bj[t]}function t4(t){return zj[t]}function yi(t){return{fieldPath:t.canonicalString()}}function vi(t){return dt.fromServerFormat(t.fieldPath)}function Kb(t){return t instanceof Ge?function(n){if(n.op==="=="){if(Hv(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NAN"}};if($v(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hv(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NOT_NAN"}};if($v(n.value))return{unaryFilter:{field:yi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yi(n.field),op:e4(n.op),value:n.value}}}(t):t instanceof jn?function(n){const r=n.getFilters().map(s=>Kb(s));return r.length===1?r[0]:{compositeFilter:{op:t4(n.op),filters:r}}}(t):re(54877,{filter:t})}function n4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Gb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r,s,i=se.min(),o=se.min(),a=mt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.wt=e}}function s4(t){const e=Xj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(){this.Cn=new o4}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(os.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(os.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class o4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rt(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yb=41943040;class Ut{static withCacheSize(e){return new Ut(e,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(Yb,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new io(0)}static lr(){return new io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="LruGarbageCollector",a4=1048576;function ax([t,e],[n,r]){const s=oe(t,n);return s===0?oe(e,r):s}class l4{constructor(e){this.Er=e,this.buffer=new rt(ax),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ax(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class c4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){q(ox,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vo(n)?q(ox,"Ignoring IndexedDB error during garbage collection: ",n):await yo(n)}await this.mr(3e5)})}}class u4{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(wd.le);const r=new l4(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(ix)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ix):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),pi()<=ue.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function d4(t,e){return new u4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.changes=new si(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Sa(r.mutation,s,Zt.empty(),nt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const s=Os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=oa();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=yr();const o=Ta(),a=function(){return Ta()}();return n.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof xs)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Sa(h.mutation,u,h.mutation.getFieldMask(),nt.now())):o.set(u.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new f4(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ta();let s=new Fe((o,a)=>o-a),i=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Zt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(s.get(a.batchId)||de()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=Pb();h.forEach(m=>{if(!i.has(m)){const g=Ob(n.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Os());let a=Qa,l=i;return o.next(u=>U.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,de())).next(h=>({batchId:a,changes:Ab(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=oa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=oa();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,l=>{const u=function(f,m){return new xo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Tt.newInvalidDocument(h)))});let a=oa();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&Sa(h.mutation,u,Zt.empty(),nt.now()),Td(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return U.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Hn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:s4(s.bundledQuery),readTime:Hn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.overlays=new Fe(J.comparator),this.Qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Os();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Os(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Fe((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Os(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Os(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return U.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Mj(n,r));let i=this.Qr.get(n);i===void 0&&(i=de(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this.$r=new rt(it.Ur),this.Kr=new rt(it.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new it(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new it(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new J(new je([])),r=new it(n,e),s=new it(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new J(new je([])),r=new it(n,e),s=new it(n,e+1);let i=de();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new it(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return J.comparator(e.key,n.key)||oe(e.Zr,n.Zr)}static Wr(e,n){return oe(e.Zr,n.Zr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new rt(it.Ur)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Dj(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Xr=this.Xr.add(new it(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?qp:this.nr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new it(n,0),s=new it(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const a=this.ei(o.Zr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(oe);return n.forEach(s=>{const i=new it(s,0),o=new it(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{r=r.add(a.Zr)})}),U.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new it(new J(i),0);let a=new rt(oe);return this.Xr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Zr)),!0)},o),U.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){xe(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return U.forEach(n.mutations,s=>{const i=new it(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new it(n,0),s=this.Xr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.ii=e,this.docs=function(){return new Fe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=yr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Tt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=yr();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||GP(KP(h),r)<=0||(s.has(h.key)||Td(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re(9500)}si(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _4(this)}getSize(e){return U.resolve(this.size)}}class _4 extends h4{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e){this.persistence=e,this.oi=new si(n=>Yp(n),Qp),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this._i=0,this.ai=new rg,this.targetCount=0,this.ui=io.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),U.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new io(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Tr(n),U.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n){this.ci={},this.overlays={},this.li=new wd(0),this.hi=!1,this.hi=!0,this.Pi=new y4,this.referenceDelegate=e(this),this.Ti=new w4(this),this.indexManager=new i4,this.remoteDocumentCache=function(s){return new x4(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new r4(n),this.Ei=new p4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new v4(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new b4(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return U.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class b4 extends QP{constructor(e){super(),this.currentSequenceNumber=e}}class sg{constructor(e){this.persistence=e,this.Vi=new rg,this.mi=null}static fi(e){return new sg(e)}get gi(){if(this.mi)return this.mi;throw re(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.gi,r=>{const s=J.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return U.or([()=>U.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Fu{constructor(e,n){this.persistence=e,this.yi=new si(r=>JP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=d4(this,n)}static fi(e,n){return new Fu(e,n)}di(){}Ai(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return U.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,se.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),U.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$c(e.data.value)),n}Dr(e,n,r){return U.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=de(),s=de();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ig(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return rC()?8:XP(Nt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Ss(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new E4;return this.bs(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(pi()<=ue.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",gi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),U.resolve()):(pi()<=ue.DEBUG&&q("QueryEngine","Query:",gi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(pi()<=ue.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",gi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(n))):U.resolve())}ws(e,n){if(Yv(n))return U.resolve(null);let r=$n(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fm(n,null,"F"),r=$n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=de(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.vs(n,a);return this.Cs(n,u,o,l.readTime)?this.ws(e,fm(n,null,"F")):this.Fs(e,u,n,l)}))})))}Ss(e,n,r,s){return Yv(n)||s.isEqual(se.min())?U.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(pi()<=ue.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gi(n)),this.Fs(e,o,n,qP(s,Qa)).next(a=>a))})}vs(e,n){let r=new rt(Cb(e));return n.forEach((s,i)=>{Td(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}bs(e,n,r){return pi()<=ue.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",gi(n)),this.ys.getDocumentsMatchingQuery(e,n,os.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="LocalStore",T4=3e8;class S4{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Fe(oe),this.Os=new si(i=>Yp(i),Qp),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m4(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function I4(t,e,n,r){return new S4(t,e,n,r)}async function Xb(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=de();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({ks:u,removedBatchIds:o,addedBatchIds:a}))})})}function C4(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,m=f.keys();let g=U.resolve();return m.forEach(v=>{g=g.next(()=>h.getEntry(l,v)).next(w=>{const S=u.docVersions.get(v);xe(S!==null,48541),w.version.compareTo(S)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=de();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Zb(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function N4(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ti.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ti.addMatchingKeys(i,h.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(mt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(w,S,b){return w.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=T4?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,g,h)&&a.push(n.Ti.updateTargetData(i,g))});let l=yr(),u=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(A4(i,o,e.documentUpdates).next(h=>{l=h.qs,u=h.Qs})),!r.isEqual(se.min())){const h=n.Ti.getLastRemoteSnapshotVersion(i).next(f=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.xs=s,i))}function A4(t,e,n){let r=de(),s=de();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=yr();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q(og,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{qs:o,Qs:s}})}function P4(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function j4(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new Fr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function vm(t,e,n){const r=ie(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!vo(o))throw o;q(og,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function lx(t,e,n){const r=ie(t);let s=se.min(),i=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=ie(l),m=f.Os.get(h);return m!==void 0?U.resolve(f.xs.get(m)):f.Ti.getTargetData(u,h)}(r,o,$n(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:se.min(),n?i:de())).next(a=>(R4(r,vj(e),a),{documents:a,$s:i})))}function R4(t,e,n){let r=t.Ns.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class cx{constructor(){this.activeTargetIds=kj()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class D4{constructor(){this.xo=new cx,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new cx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="ConnectivityMonitor";class dx{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){q(ux,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){q(ux,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc=null;function xm(){return fc===null?fc=function(){return 268435456+Math.round(2147483648*Math.random())}():fc++,"0x"+fc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="RestConnection",L4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O4{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Du?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=xm(),a=this.jo(e,n.toUriEncodedString());q(Bh,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,s,i);const{host:u}=new URL(a),h=pl(u);return this.Jo(e,a,l,r,h).then(f=>(q(Bh,`Received RPC '${e}' ${o}: `,f),f),f=>{throw to(Bh,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+go}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=L4[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class F4 extends O4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=xm();return new Promise((a,l)=>{const u=new tb;u.setWithCredentials(!0),u.listenOnce(nb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Wc.NO_ERROR:const f=u.getResponseJson();q(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Wc.TIMEOUT:q(_t,`RPC '${e}' ${o} timed out`),l(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const m=u.getStatus();if(q(_t,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const w=function(b){const k=b.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(k)>=0?k:F.UNKNOWN}(v.status);l(new K(w,v.message))}else l(new K(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K(F.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{q(_t,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);q(_t,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=xm(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ib(),a=sb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");q(_t,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,g=!1;const v=new V4({Zo:S=>{g?q(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(m||(q(_t,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),q(_t,`RPC '${e}' stream ${s} sending:`,S),f.send(S))},Xo:()=>f.close()}),w=(S,b,k)=>{S.listen(b,_=>{try{k(_)}catch(N){setTimeout(()=>{throw N},0)}})};return w(f,ia.EventType.OPEN,()=>{g||(q(_t,`RPC '${e}' stream ${s} transport opened.`),v.__())}),w(f,ia.EventType.CLOSE,()=>{g||(g=!0,q(_t,`RPC '${e}' stream ${s} transport closed`),v.u_())}),w(f,ia.EventType.ERROR,S=>{g||(g=!0,to(_t,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),v.u_(new K(F.UNAVAILABLE,"The operation could not be completed")))}),w(f,ia.EventType.MESSAGE,S=>{var b;if(!g){const k=S.data[0];xe(!!k,16349);const _=k,N=(_==null?void 0:_.error)||((b=_[0])===null||b===void 0?void 0:b.error);if(N){q(_t,`RPC '${e}' stream ${s} received error:`,N);const j=N.status;let D=function(I){const C=qe[I];if(C!==void 0)return Fb(C)}(j),E=N.message;D===void 0&&(D=F.INTERNAL,E="Unknown error status: "+j+" with message "+N.message),g=!0,v.u_(new K(D,E)),f.close()}else q(_t,`RPC '${e}' stream ${s} received:`,k),v.c_(k)}}),w(a,rb.STAT_EVENT,S=>{S.stat===om.PROXY?q(_t,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===om.NOPROXY&&q(_t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.a_()},0),v}}function zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t){return new Wj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=s,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="PersistentStream";class eE{constructor(e,n,r,s,i,o,a,l){this.xi=e,this.y_=r,this.w_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Jb(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(gr(n.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.S_===n&&this.K_(r,s)},r=>{e(()=>{const s=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(s)})})}K_(e,n){const r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.W_(s))}),this.stream.onMessage(s=>{r(()=>++this.v_==1?this.z_(s):this.onNext(s))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return q(hx,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(q(hx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U4 extends eE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=qj(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?Hn(o.readTime):se.min()}(e);return this.listener.j_(n,r)}H_(e){const n={};n.database=ym(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=dm(l)?{documents:Yj(i,l)}:{query:Qj(i,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zb(i,o.resumeToken);const u=mm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=Vu(i,o.snapshotVersion.toTimestamp());const u=mm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Zj(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){const n={};n.database=ym(this.serializer),n.removeTarget=e,this.L_(n)}}class B4 extends eE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=Gj(e.writeResults,e.commitTime),r=Hn(e.commitTime);return this.listener.ea(r,n)}ta(){const e={};e.database=ym(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Kj(this.serializer,r))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{}class W4 extends z4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.na=!1}ra(){if(this.na)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,pm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(F.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,pm(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class $4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(gr(n),this.oa=!1):q("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="RemoteStore";class H4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(o=>{r.enqueueAndForget(async()=>{ii(this)&&(q(Zs,"Restarting streams for network reachability change."),await async function(l){const u=ie(l);u.Ta.add(4),await kl(u),u.da.set("Unknown"),u.Ta.delete(4),await Ad(u)}(this))})}),this.da=new $4(r,s)}}async function Ad(t){if(ii(t))for(const e of t.Ia)await e(!0)}async function kl(t){for(const e of t.Ia)await e(!1)}function tE(t,e){const n=ie(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),ug(n)?cg(n):_o(n).M_()&&lg(n,e))}function ag(t,e){const n=ie(t),r=_o(n);n.Pa.delete(e),r.M_()&&nE(n,e),n.Pa.size===0&&(r.M_()?r.N_():ii(n)&&n.da.set("Unknown"))}function lg(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_o(t).H_(e)}function nE(t,e){t.Aa.Ke(e),_o(t).J_(e)}function cg(t){t.Aa=new Fj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),_o(t).start(),t.da._a()}function ug(t){return ii(t)&&!_o(t).F_()&&t.Pa.size>0}function ii(t){return ie(t).Ta.size===0}function rE(t){t.Aa=void 0}async function q4(t){t.da.set("Online")}async function K4(t){t.Pa.forEach((e,n)=>{lg(t,e)})}async function G4(t,e){rE(t),ug(t)?(t.da.ca(e),cg(t)):t.da.set("Unknown")}async function Y4(t,e,n){if(t.da.set("Online"),e instanceof Bb&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Pa.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Pa.delete(a),s.Aa.removeTarget(a))}(t,e)}catch(r){q(Zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uu(t,r)}else if(e instanceof Kc?t.Aa.Xe(e):e instanceof Ub?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(se.min()))try{const r=await Zb(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Aa.It(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Pa.get(u);h&&i.Pa.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.Pa.get(l);if(!h)return;i.Pa.set(l,h.withResumeToken(mt.EMPTY_BYTE_STRING,h.snapshotVersion)),nE(i,l);const f=new Fr(h.target,l,u,h.sequenceNumber);lg(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q(Zs,"Failed to raise snapshot:",r),await Uu(t,r)}}async function Uu(t,e,n){if(!vo(e))throw e;t.Ta.add(1),await kl(t),t.da.set("Offline"),n||(n=()=>Zb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Zs,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await Ad(t)})}function sE(t,e){return e().catch(n=>Uu(t,n,e))}async function Pd(t){const e=ie(t),n=us(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:qp;for(;Q4(e);)try{const s=await P4(e.localStore,r);if(s===null){e.ha.length===0&&n.N_();break}r=s.batchId,X4(e,s)}catch(s){await Uu(e,s)}iE(e)&&oE(e)}function Q4(t){return ii(t)&&t.ha.length<10}function X4(t,e){t.ha.push(e);const n=us(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function iE(t){return ii(t)&&!us(t).F_()&&t.ha.length>0}function oE(t){us(t).start()}async function Z4(t){us(t).ta()}async function J4(t){const e=us(t);for(const n of t.ha)e.Z_(n.mutations)}async function eR(t,e,n){const r=t.ha.shift(),s=eg.from(r,e,n);await sE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Pd(t)}async function tR(t,e){e&&us(t).Y_&&await async function(r,s){if(function(o){return Oj(o)&&o!==F.ABORTED}(s.code)){const i=r.ha.shift();us(r).O_(),await sE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Pd(r)}}(t,e),iE(t)&&oE(t)}async function fx(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),q(Zs,"RemoteStore received new credentials");const r=ii(n);n.Ta.add(3),await kl(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await Ad(n)}async function nR(t,e){const n=ie(t);e?(n.Ta.delete(2),await Ad(n)):e||(n.Ta.add(2),await kl(n),n.da.set("Unknown"))}function _o(t){return t.Ra||(t.Ra=function(n,r,s){const i=ie(n);return i.ra(),new U4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:q4.bind(null,t),n_:K4.bind(null,t),i_:G4.bind(null,t),j_:Y4.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),ug(t)?cg(t):t.da.set("Unknown")):(await t.Ra.stop(),rE(t))})),t.Ra}function us(t){return t.Va||(t.Va=function(n,r,s){const i=ie(n);return i.ra(),new B4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:Z4.bind(null,t),i_:tR.bind(null,t),X_:J4.bind(null,t),ea:eR.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await Pd(t)):(await t.Va.stop(),t.ha.length>0&&(q(Zs,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new dg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hg(t,e){if(gr("AsyncQueue",`${e}: ${t}`),vo(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{static emptySet(e){return new Wi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=oa(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.ma=new Fe(J.comparator)}track(e){const n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):re(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}}class oo{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new oo(e,n,Wi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class sR{constructor(){this.queries=px(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=px(),i.forEach((o,a)=>{for(const l of a.ya)l.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function px(){return new si(t=>Ib(t),kd)}async function aE(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.wa()&&e.Sa()&&(r=2):(i=new rR,r=e.Sa()?0:1);try{switch(r){case 0:i.pa=await n.onListen(s,!0);break;case 1:i.pa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=hg(o,`Initialization of query '${gi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ya.push(e),e.Da(n.onlineState),i.pa&&e.va(i.pa)&&fg(n)}async function lE(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ya.indexOf(e);o>=0&&(i.ya.splice(o,1),i.ya.length===0?s=e.Sa()?0:1:!i.wa()&&e.Sa()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iR(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ya)a.va(s)&&(r=!0);o.pa=s}}r&&fg(n)}function oR(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.ya)i.onError(n);r.queries.delete(e)}function fg(t){t.ba.forEach(e=>{e.next()})}var _m,gx;(gx=_m||(_m={})).Ca="default",gx.Cache="cache";class cE{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==_m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.key=e}}class dE{constructor(e){this.key=e}}class aR{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=de(),this.mutatedKeys=de(),this.Ha=Cb(e),this.Ja=new Wi(this.Ha)}get Ya(){return this.Ga}Za(e,n){const r=n?n.Xa:new mx,s=n?n.Ja:this.Ja;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),g=Td(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;m&&g?m.data.isEqual(g.data)?v!==w&&(r.track({type:3,doc:g}),S=!0):this.eu(m,g)||(r.track({type:2,doc:g}),S=!0,(l&&this.Ha(g,l)>0||u&&this.Ha(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),S=!0):m&&!g&&(r.track({type:1,doc:m}),S=!0,(l||u)&&(a=!0)),S&&(g?(o=o.add(g),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ja:o,Xa:r,Cs:a,mutatedKeys:i}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((h,f)=>function(g,v){const w=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Vt:S})}};return w(g)-w(v)}(h.type,f.type)||this.Ha(h.doc,f.doc)),this.tu(r),s=s!=null&&s;const a=n&&!s?this.nu():[],l=this.ja.size===0&&this.current&&!s?1:0,u=l!==this.za;return this.za=l,o.length!==0||u?{snapshot:new oo(this.query,e.Ja,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new mx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=de(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new dE(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new uE(r))}),n}su(e){this.Ga=e.$s,this.ja=de();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return oo.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const mg="SyncEngine";class lR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cR{constructor(e){this.key=e,this._u=!1}}class uR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new si(a=>Ib(a),kd),this.cu=new Map,this.lu=new Set,this.hu=new Fe(J.comparator),this.Pu=new Map,this.Tu=new rg,this.Iu={},this.Eu=new Map,this.du=io.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function dR(t,e,n=!0){const r=yE(t);let s;const i=r.uu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ou()):s=await hE(r,e,n,!0),s}async function hR(t,e){const n=yE(t);await hE(n,e,!0,!1)}async function hE(t,e,n,r){const s=await j4(t.localStore,$n(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await fR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&tE(t.remoteStore,s),a}async function fR(t,e,n,r,s){t.Ru=(f,m,g)=>async function(w,S,b,k){let _=S.view.Za(b);_.Cs&&(_=await lx(w.localStore,S.query,!1).then(({documents:E})=>S.view.Za(E,_)));const N=k&&k.targetChanges.get(S.targetId),j=k&&k.targetMismatches.get(S.targetId)!=null,D=S.view.applyChanges(_,w.isPrimaryClient,N,j);return vx(w,S.targetId,D.ru),D.snapshot}(t,f,m,g);const i=await lx(t.localStore,e,!0),o=new aR(e,i.$s),a=o.Za(i.documents),l=El.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);vx(t,n,u.ru);const h=new lR(e,n,o);return t.uu.set(e,h),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),u.snapshot}async function mR(t,e,n){const r=ie(t),s=r.uu.get(e),i=r.cu.get(s.targetId);if(i.length>1)return r.cu.set(s.targetId,i.filter(o=>!kd(o,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await vm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ag(r.remoteStore,s.targetId),wm(r,s.targetId)}).catch(yo)):(wm(r,s.targetId),await vm(r.localStore,s.targetId,!0))}async function pR(t,e){const n=ie(t),r=n.uu.get(e),s=n.cu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ag(n.remoteStore,r.targetId))}async function gR(t,e,n){const r=ER(t);try{const s=await function(o,a){const l=ie(o),u=nt.now(),h=a.reduce((g,v)=>g.add(v.key),de());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=yr(),w=de();return l.Bs.getEntries(g,h).next(S=>{v=S,v.forEach((b,k)=>{k.isValidDocument()||(w=w.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(S=>{f=S;const b=[];for(const k of a){const _=jj(k,f.get(k.key).overlayedDocument);_!=null&&b.push(new xs(k.key,_,xb(_.value.mapValue),Cn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,b,a)}).next(S=>{m=S;const b=S.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(g,S.batchId,b)})}).then(()=>({batchId:m.batchId,changes:Ab(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Iu[o.currentUser.toKey()];u||(u=new Fe(oe)),u=u.insert(a,l),o.Iu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Tl(r,s.changes),await Pd(r.remoteStore)}catch(s){const i=hg(s,"Failed to persist write");n.reject(i)}}async function fE(t,e){const n=ie(t);try{const r=await N4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Pu.get(i);o&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o._u=!0:s.modifiedDocuments.size>0?xe(o._u,14607):s.removedDocuments.size>0&&(xe(o._u,42227),o._u=!1))}),await Tl(n,r,e)}catch(r){await yo(r)}}function yx(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.uu.forEach((i,o)=>{const a=o.view.Da(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ie(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const m of f.ya)m.Da(a)&&(u=!0)}),u&&fg(l)}(r.eventManager,e),s.length&&r.au.j_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yR(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Pu.get(e),i=s&&s.key;if(i){let o=new Fe(J.comparator);o=o.insert(i,Tt.newNoDocument(i,se.min()));const a=de().add(i),l=new Cd(se.min(),new Map,new Fe(oe),o,a);await fE(r,l),r.hu=r.hu.remove(i),r.Pu.delete(e),pg(r)}else await vm(r.localStore,e,!1).then(()=>wm(r,e,n)).catch(yo)}async function vR(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await C4(n.localStore,e);pE(n,r,null),mE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tl(n,s)}catch(s){await yo(s)}}async function xR(t,e,n){const r=ie(t);try{const s=await function(o,a){const l=ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(xe(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);pE(r,e,n),mE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Tl(r,s)}catch(s){await yo(s)}}function mE(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function pE(t,e,n){const r=ie(t);let s=r.Iu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Iu[r.currentUser.toKey()]=s}}function wm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.cu.get(e))t.uu.delete(r),n&&t.au.Vu(r,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(r=>{t.Tu.containsKey(r)||gE(t,r)})}function gE(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(ag(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),pg(t))}function vx(t,e,n){for(const r of n)r instanceof uE?(t.Tu.addReference(r.key,e),_R(t,r)):r instanceof dE?(q(mg,"Document no longer in limbo: "+r.key),t.Tu.removeReference(r.key,e),t.Tu.containsKey(r.key)||gE(t,r.key)):re(19791,{mu:r})}function _R(t,e){const n=e.key,r=n.path.canonicalString();t.hu.get(n)||t.lu.has(r)||(q(mg,"New document in limbo: "+n),t.lu.add(r),pg(t))}function pg(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new J(je.fromString(e)),r=t.du.next();t.Pu.set(r,new cR(n)),t.hu=t.hu.insert(n,r),tE(t.remoteStore,new Fr($n(Xp(n.path)),r,"TargetPurposeLimboResolution",wd.le))}}async function Tl(t,e,n){const r=ie(t),s=[],i=[],o=[];r.uu.isEmpty()||(r.uu.forEach((a,l)=>{o.push(r.Ru(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=ig.Rs(l.targetId,u);i.push(f)}}))}),await Promise.all(o),r.au.j_(s),await async function(l,u){const h=ie(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(u,m=>U.forEach(m.ds,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>U.forEach(m.As,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!vo(f))throw f;q(og,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.xs.get(m),v=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(v);h.xs=h.xs.insert(m,w)}}}(r.localStore,i))}async function wR(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){q(mg,"User change. New user:",e.toKey());const r=await Xb(n.localStore,e);n.currentUser=e,function(i,o){i.Eu.forEach(a=>{a.forEach(l=>{l.reject(new K(F.CANCELLED,o))})}),i.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tl(n,r.ks)}}function bR(t,e){const n=ie(t),r=n.Pu.get(e);if(r&&r._u)return de().add(r.key);{let s=de();const i=n.cu.get(e);if(!i)return s;for(const o of i){const a=n.uu.get(o);s=s.unionWith(a.view.Ya)}return s}}function yE(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yR.bind(null,e),e.au.j_=iR.bind(null,e.eventManager),e.au.Vu=oR.bind(null,e.eventManager),e}function ER(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xR.bind(null,e),e}class Bu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return I4(this.persistence,new k4,e.initialUser,this.serializer)}yu(e){return new Qb(sg.fi,this.serializer)}pu(e){return new D4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bu.provider={build:()=>new Bu};class kR extends Bu{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){xe(this.persistence.referenceDelegate instanceof Fu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new c4(r,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new Qb(r=>Fu.fi(r,n),this.serializer)}}class bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wR.bind(null,this.syncEngine),await nR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sR}()}createDatastore(e){const n=Nd(e.databaseInfo.databaseId),r=function(i){return new F4(i)}(e.databaseInfo);return function(i,o,a,l){return new W4(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new H4(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>yx(this.syncEngine,n,0),function(){return dx.C()?new dx:new M4}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,h){const f=new uR(s,i,o,a,l,u);return h&&(f.Au=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);q(Zs,"RemoteStore shutting down."),i.Ta.add(5),await kl(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bm.provider={build:()=>new bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class TR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Et.UNAUTHENTICATED,this.clientId=cb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q(ds,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(ds,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wh(t,e){t.asyncQueue.verifyOperationInProgress(),q(ds,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Xb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await SR(t);q(ds,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>fx(e.remoteStore,s)),t._onlineComponents=e}async function SR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(ds,"Using user provided OfflineComponentProvider");try{await Wh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;to("Error using user provided cache. Falling back to memory cache: "+n),await Wh(t,new Bu)}}else q(ds,"Using default OfflineComponentProvider"),await Wh(t,new kR(void 0));return t._offlineComponents}async function xE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(ds,"Using user provided OnlineComponentProvider"),await xx(t,t._uninitializedComponentsProvider._online)):(q(ds,"Using default OnlineComponentProvider"),await xx(t,new bm))),t._onlineComponents}function IR(t){return xE(t).then(e=>e.syncEngine)}async function _E(t){const e=await xE(t),n=e.eventManager;return n.onListen=dR.bind(null,e.syncEngine),n.onUnlisten=mR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pR.bind(null,e.syncEngine),n}function CR(t,e,n={}){const r=new cr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new vE({next:m=>{h.Cu(),o.enqueueAndForget(()=>lE(i,f));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new cE(Xp(a.path),h,{includeMetadataChanges:!0,La:!0});return aE(i,f)}(await _E(t),t.asyncQueue,e,n,r)),r.promise}function NR(t,e,n={}){const r=new cr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new vE({next:m=>{h.Cu(),o.enqueueAndForget(()=>lE(i,f)),m.fromCache&&l.source==="server"?u.reject(new K(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new cE(a,h,{includeMetadataChanges:!0,La:!0});return aE(i,f)}(await _E(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AR(t,e,n,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wx(t){if(!J.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bx(t){if(J.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jd(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firestore.googleapis.com",Ex=!0;class kx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EE,this.ssl=Ex}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Ex;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<a4)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OP;switch(r.type){case"firstParty":return new BP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_x.get(n);r&&(q("ComponentProvider","Removing Datastore"),_x.delete(n),r.terminate())}(this),Promise.resolve()}}function PR(t,e,n,r={}){var s;t=Kn(t,Rd);const i=pl(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i&&(h2(`https://${l}`),f2("Firestore",!0)),o.host!==EE&&o.host!==l&&to("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:r});if(!Ks(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Et.MOCK_USER;else{h=GI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Et(m)}t._authCredentials=new VP(new ab(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oi(this.firestore,e,this._query)}}class Dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}}class es extends oi{constructor(e,n,r){super(e,n,Xp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new J(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function jR(t,e,...n){if(t=st(t),bE("collection","path",e),t instanceof Rd){const r=je.fromString(e,...n);return bx(r),new es(t,null,r)}{if(!(t instanceof Dt||t instanceof es))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return bx(r),new es(t.firestore,null,r)}}function Nn(t,e,...n){if(t=st(t),arguments.length===1&&(e=cb.newId()),bE("doc","path",e),t instanceof Rd){const r=je.fromString(e,...n);return wx(r),new Dt(t,null,new J(r))}{if(!(t instanceof Dt||t instanceof es))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return wx(r),new Dt(t.firestore,t instanceof es?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="AsyncQueue";class Sx{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Jb(this,"async_queue_retry"),this.ec=()=>{const r=zh();r&&q(Tx,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const n=zh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=zh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new cr;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!vo(e))throw e;q(Tx,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,gr("INTERNAL UNHANDLED ERROR: ",Ix(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const s=dg.createAndSchedule(this,e,n,r,i=>this.oc(i));return this.Hu.push(s),s}nc(){this.Ju&&re(47125,{_c:Ix(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function Ix(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class wo extends Rd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Sx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sx(e),this._firestoreClient=void 0,await e}}}function RR(t,e){const n=typeof t=="object"?t:y2(),r=typeof t=="string"?t:Du,s=Mp(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=qI("firestore");i&&PR(s,...i)}return s}function gg(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DR(t),t._firestoreClient}function DR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,h){return new nj(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wE(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new TR(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ao(mt.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ao(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=/^__.*__$/;class LR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new bl(e,this.data,n,this.fieldTransforms)}}class kE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function TE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{hc:t})}}class xg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new xg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Tc({path:r,Ec:!1});return s.dc(e),s}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Tc({path:r,Ec:!1});return s.Pc(),s}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return zu(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(TE(this.hc)&&MR.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class OR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nd(e)}gc(e,n,r,s=!1){return new xg({hc:e,methodName:n,fc:r,path:dt.emptyPath(),Ec:!1,mc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _g(t){const e=t._freezeSettings(),n=Nd(t._databaseId);return new OR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VR(t,e,n,r,s,i={}){const o=t.gc(i.merge||i.mergeFields?2:0,e,n,s);bg("Data must be an object, but it was:",o,r);const a=SE(r,o);let l,u;if(i.merge)l=new Zt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Em(e,f,n);if(!o.contains(m))throw new K(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);CE(h,m)||h.push(m)}l=new Zt(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new LR(new zt(a),l,u)}class Ld extends Md{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ld}}class wg extends Md{_toFieldTransform(e){return new Cj(e.path,new tl)}isEqual(e){return e instanceof wg}}function FR(t,e,n,r){const s=t.gc(1,e,n);bg("Data must be an object, but it was:",s,r);const i=[],o=zt.empty();vs(r,(l,u)=>{const h=Eg(e,l,n);u=st(u);const f=s.Ac(h);if(u instanceof Ld)i.push(h);else{const m=Sl(u,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new Zt(i);return new kE(o,a,s.fieldTransforms)}function UR(t,e,n,r,s,i){const o=t.gc(1,e,n),a=[Em(e,r,n)],l=[s];if(i.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Em(e,i[m])),l.push(i[m+1]);const u=[],h=zt.empty();for(let m=a.length-1;m>=0;--m)if(!CE(u,a[m])){const g=a[m];let v=l[m];v=st(v);const w=o.Ac(g);if(v instanceof Ld)u.push(g);else{const S=Sl(v,w);S!=null&&(u.push(g),h.set(g,S))}}const f=new Zt(u);return new kE(h,f,o.fieldTransforms)}function BR(t,e,n,r=!1){return Sl(n,t.gc(r?4:3,e))}function Sl(t,e){if(IE(t=st(t)))return bg("Unsupported field value:",e,t),SE(t,e);if(t instanceof Md)return function(r,s){if(!TE(s.hc))throw s.Vc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Vc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Sl(a,s.Rc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Tj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=nt.fromDate(r);return{timestampValue:Vu(s.serializer,i)}}if(r instanceof nt){const i=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vu(s.serializer,i)}}if(r instanceof yg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ao)return{bytesValue:zb(s.serializer,r._byteString)};if(r instanceof Dt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ng(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vg)return function(o,a){return{mapValue:{fields:{[yb]:{stringValue:vb},[Mu]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Vc("VectorValues must only contain numeric values.");return Zp(a.serializer,u)})}}}}}}(r,s);throw s.Vc(`Unsupported field value: ${jd(r)}`)}(t,e)}function SE(t,e){const n={};return db(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(t,(r,s)=>{const i=Sl(s,e.Ic(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function IE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof yg||t instanceof ao||t instanceof Dt||t instanceof Md||t instanceof vg)}function bg(t,e,n){if(!IE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=jd(n);throw r==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+r)}}function Em(t,e,n){if((e=st(e))instanceof Dd)return e._internalPath;if(typeof e=="string")return Eg(t,e);throw zu("Field path arguments must be of type string or ",t,!1,void 0,n)}const zR=new RegExp("[~\\*/\\[\\]]");function Eg(t,e,n){if(e.search(zR)>=0)throw zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dd(...e.split("."))._internalPath}catch{throw zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(F.INVALID_ARGUMENT,a+t+l)}function CE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WR extends NE{data(){return super.data()}}function kg(t,e){return typeof e=="string"?Eg(t,e):e instanceof Dd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class AE extends Tg{}function HR(t,e,...n){let r=[];e instanceof Tg&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Ig).length,a=i.filter(l=>l instanceof Sg).length;if(o>1||o>0&&a>0)throw new K(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Sg extends AE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sg(e,n,r)}_apply(e){const n=this._parse(e);return PE(e._query,n),new oi(e.firestore,e.converter,hm(e._query,n))}_parse(e){const n=_g(e.firestore);return function(i,o,a,l,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Nx(f,h);const v=[];for(const w of f)v.push(Cx(l,i,w));m={arrayValue:{values:v}}}else m=Cx(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Nx(f,h),m=BR(a,o,f,h==="in"||h==="not-in");return Ge.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ig extends Tg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ig(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)PE(o,l),o=hm(o,l)}(e._query,n),new oi(e.firestore,e.converter,hm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cg extends AE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new el(i,o)}(e._query,this._field,this._direction);return new oi(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new xo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function qR(t,e="asc"){const n=e,r=kg("orderBy",t);return Cg._create(r,n)}function Cx(t,e,n){if(typeof(n=st(n))=="string"){if(n==="")throw new K(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sb(e)&&n.indexOf("/")!==-1)throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!J.isDocumentKey(r))throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wv(t,new J(r))}if(n instanceof Dt)return Wv(t,n._key);throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(n)}.`)}function Nx(t,e){if(!Array.isArray(t)||t.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PE(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class KR{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Mu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ze(o.doubleValue));return new vg(i)}convertGeoPoint(e){return new yg(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ed(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xa(e));default:return null}}convertTimestamp(e){const n=as(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);xe(Gb(r),9688,{name:e});const s=new Za(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||gr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jE extends NE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(kg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Gc extends jE{data(e={}){return super.data(e)}}class YR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new la(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gc(this._firestore,this._userDataWriter,r.key,r,new la(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Gc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new la(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Gc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new la(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:QR(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t){t=Kn(t,Dt);const e=Kn(t.firestore,wo);return CR(gg(e),t._key).then(n=>JR(e,t,n))}class RE extends KR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ao(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function XR(t){t=Kn(t,oi);const e=Kn(t.firestore,wo),n=gg(e),r=new RE(e);return $R(t._query),NR(n,t._query).then(s=>new YR(e,r,t,s))}function DE(t,e,n){t=Kn(t,Dt);const r=Kn(t.firestore,wo),s=GR(t.converter,e);return Ag(r,[VR(_g(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Cn.none())])}function Il(t,e,n,...r){t=Kn(t,Dt);const s=Kn(t.firestore,wo),i=_g(s);let o;return o=typeof(e=st(e))=="string"||e instanceof Dd?UR(i,"updateDoc",t._key,e,n,r):FR(i,"updateDoc",t._key,e),Ag(s,[o.toMutation(t._key,Cn.exists(!0))])}function ZR(t){return Ag(Kn(t.firestore,wo),[new Jp(t._key,Cn.none())])}function Ag(t,e){return function(r,s){const i=new cr;return r.asyncQueue.enqueueAndForget(async()=>gR(await IR(r),s,i)),i.promise}(gg(t),e)}function JR(t,e,n){const r=n.docs.get(e._key),s=new RE(t);return new jE(t,s,e._key,r,new la(n.hasPendingWrites,n.fromCache),e.converter)}function tn(){return new wg("serverTimestamp")}(function(e,n=!0){(function(s){go=s})(mo),Ji(new Gs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new wo(new FP(r.getProvider("auth-internal")),new zP(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Zr(Pv,jv,e),Zr(Pv,jv,"esm2017")})();var eD="firebase",tD="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr(eD,tD,"app");const km={apiKey:"AIzaSyAA8WeKYlk_pZB_T-A0g2kosP8ixqf0GYU",authDomain:"vehicles-f1f63.firebaseapp.com",projectId:"vehicles-f1f63",storageBucket:"vehicles-f1f63.firebasestorage.app",messagingSenderId:"887499842648",appId:"1:887499842648:web:fe7df601e4041f1544d62d",measurementId:"G-HLXCDWXRY3"},ME=g2(km),Ze=MP(ME),Gt=RR(ME);Ze.settings={appVerificationDisabledForTesting:!1};console.log(" Firebase initialized:",{projectId:km.projectId,authDomain:km.authDomain,hasAuth:!!Ze,hasDb:!!Gt});const Te={PENDING:"pending",APPROVED:"approved",REJECTED:"rejected",SUSPENDED:"suspended"},bt={ADMIN:"admin",OPERATOR:"operator",VIEWER:"viewer"},nD=async t=>{console.log("Starting user signup process...",{email:t.email,name:t.name});try{const{email:e,password:n,name:r,department:s,phone:i,role:o=bt.VIEWER}=t;console.log("Step 1: Creating Firebase Auth user...");const l=(await vA(Ze,e,n)).user;console.log(" Firebase Auth user created:",l.uid),console.log("Step 2: Updating user profile..."),await wA(l,{displayName:r}),console.log(" User profile updated"),console.log("Step 3: Creating Firestore user document...");const u={uid:l.uid,email:e,name:r,department:s,phone:i,role:o,status:Te.PENDING,createdAt:tn(),updatedAt:tn(),approvedBy:null,approvedAt:null};return await DE(Nn(Gt,"users",l.uid),u),console.log(" Firestore user document created"),console.log("Step 4: Signing out user..."),await Au(Ze),console.log(" User signed out"),console.log(" Signup process completed successfully"),{success:!0,message:"Account created successfully. Please wait for admin approval.",user:{uid:l.uid,email:e,name:r,status:Te.PENDING}}}catch(e){console.error(" Error during signup process:",e),console.error("Error details:",{code:e.code,message:e.message,stack:e.stack});let n=e.message;return e.code==="auth/email-already-in-use"?n="An account with this email already exists. Please use a different email or try signing in.":e.code==="auth/weak-password"?n="Password is too weak. Please use a stronger password.":e.code==="auth/invalid-email"?n="Invalid email address. Please check your email and try again.":e.code==="auth/network-request-failed"&&(n="Network error. Please check your internet connection and try again."),{success:!1,message:n,errorCode:e.code}}},rD=async(t,e)=>{try{const r=(await xA(Ze,t,e)).user,s=await Ng(Nn(Gt,"users",r.uid));if(!s.exists())return await Au(Ze),{success:!1,message:"User data not found. Please contact administrator."};const i=s.data();if(i.status!==Te.APPROVED){await Au(Ze);let o="Account access denied.";switch(i.status){case Te.PENDING:o="Your account is pending approval. Please wait for admin approval.";break;case Te.REJECTED:o="Your account has been rejected. Please contact administrator.";break;case Te.SUSPENDED:o="Your account has been suspended. Please contact administrator.";break}return{success:!1,message:o}}return{success:!0,message:"Login successful",user:{uid:r.uid,email:r.email,name:i.name,role:i.role,department:i.department,status:i.status}}}catch(n){return console.error("Error signing in:",n),{success:!1,message:n.message}}},Ax=async()=>{try{return await Au(Ze),{success:!0,message:"Logged out successfully"}}catch(t){return console.error("Error signing out:",t),{success:!1,message:t.message}}},sD=async t=>{try{const e=await Ng(Nn(Gt,"users",t));return e.exists()?e.data():null}catch(e){return console.error("Error getting user data:",e),null}},LE=async(t,e)=>{try{return await Il(Nn(Gt,"users",t),{status:Te.APPROVED,approvedBy:e,approvedAt:tn(),updatedAt:tn()}),{success:!0,message:"User approved successfully"}}catch(n){return console.error("Error approving user:",n),{success:!1,message:n.message}}},OE=async(t,e)=>{try{return await Il(Nn(Gt,"users",t),{status:Te.REJECTED,rejectedBy:e,rejectedAt:tn(),updatedAt:tn()}),{success:!0,message:"User rejected successfully"}}catch(n){return console.error("Error rejecting user:",n),{success:!1,message:n.message}}},Wu=async()=>{try{const t=jR(Gt,"users"),e=HR(t,qR("createdAt","desc")),n=await XR(e),r=[];return n.forEach(s=>{r.push({id:s.id,...s.data()})}),r}catch(t){throw console.error("Error getting all users:",t),t}},iD=async(t,e,n)=>{try{return await Il(Nn(Gt,"users",t),{role:e,updatedAt:tn(),roleUpdatedBy:n,roleUpdatedAt:tn()}),{success:!0,message:"User role updated successfully"}}catch(r){return console.error("Error updating user role:",r),{success:!1,message:r.message}}},oD=async(t,e,n="")=>{try{return await Il(Nn(Gt,"users",t),{status:Te.SUSPENDED,suspendedBy:e,suspendedAt:tn(),suspensionReason:n,updatedAt:tn()}),{success:!0,message:"User suspended successfully"}}catch(r){return console.error("Error suspending user:",r),{success:!1,message:r.message}}},aD=async(t,e)=>{try{return await Il(Nn(Gt,"users",t),{status:Te.APPROVED,reactivatedBy:e,reactivatedAt:tn(),suspensionReason:null,updatedAt:tn()}),{success:!0,message:"User reactivated successfully"}}catch(n){return console.error("Error reactivating user:",n),{success:!1,message:n.message}}},VE=async(t,e,n="")=>{try{const r=await Ng(Nn(Gt,"users",t));if(!r.exists())return{success:!1,message:"User not found"};const s=r.data();console.warn(" USER DELETION:",{deletedUserId:t,deletedUserEmail:s.email,deletedUserName:s.name,deletedBy:e,reason:n,timestamp:new Date().toISOString()});try{await DE(Nn(Gt,"deletedUsers",t),{...s,deletedBy:e,deletedAt:tn(),deletionReason:n,originalId:t})}catch(i){console.warn("Could not create deletion log:",i)}return await ZR(Nn(Gt,"users",t)),{success:!0,message:"User deleted successfully",deletedUser:{id:t,email:s.email,name:s.name}}}catch(r){return console.error("Error deleting user:",r),{success:!1,message:r.message}}},lD=async(t,e,n="")=>{try{const r=[],s=[];for(const i of t)try{const o=await VE(i,e,n);o.success?r.push(o.deletedUser):s.push({userId:i,error:o.message})}catch(o){s.push({userId:i,error:o.message})}return{success:s.length===0,message:`Deleted ${r.length} users${s.length>0?`, ${s.length} failed`:""}`,deletedUsers:r,errors:s}}catch(r){return console.error("Error bulk deleting users:",r),{success:!1,message:r.message}}},cD=async(t,e)=>{try{const n=[];for(const r of t){const s=await LE(r,e);n.push({userId:r,...s})}return{success:!0,results:n}}catch(n){return console.error("Error bulk approving users:",n),{success:!1,message:n.message}}},uD=async(t,e)=>{try{const n=[];for(const r of t){const s=await OE(r,e);n.push({userId:r,...s})}return{success:!0,results:n}}catch(n){return console.error("Error bulk rejecting users:",n),{success:!1,message:n.message}}},dD=t=>kA(Ze,t),FE=$.createContext(),UE=()=>{const t=$.useContext(FE);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},hD=({children:t})=>{const[e,n]=$.useState(null),[r,s]=$.useState(!0),[i,o]=$.useState(!1);$.useEffect(()=>{const u=dD(async h=>{if(h)try{const f=await sD(h.uid);f&&f.status==="approved"?n({uid:h.uid,email:h.email,name:f.name,role:f.role,department:f.department,status:f.status}):(await Ax(),n(null))}catch(f){console.error("Error getting user data:",f),n(null)}else n(null);s(!1),o(!0)});return()=>u()},[]);const l={user:e,loading:r,authChecked:i,logout:async()=>{try{await Ax(),n(null)}catch(u){console.error("Error signing out:",u)}}};return c.jsx(FE.Provider,{value:l,children:t})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Cl(t){return t+.5|0}const Ur=(t,e,n)=>Math.max(Math.min(t,n),e);function ca(t){return Ur(Cl(t*2.55),0,255)}function ts(t){return Ur(Cl(t*255),0,255)}function nr(t){return Ur(Cl(t/2.55)/100,0,1)}function Px(t){return Ur(Cl(t*100),0,100)}const sn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Tm=[..."0123456789ABCDEF"],fD=t=>Tm[t&15],mD=t=>Tm[(t&240)>>4]+Tm[t&15],mc=t=>(t&240)>>4===(t&15),pD=t=>mc(t.r)&&mc(t.g)&&mc(t.b)&&mc(t.a);function gD(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&sn[t[1]]*17,g:255&sn[t[2]]*17,b:255&sn[t[3]]*17,a:e===5?sn[t[4]]*17:255}:(e===7||e===9)&&(n={r:sn[t[1]]<<4|sn[t[2]],g:sn[t[3]]<<4|sn[t[4]],b:sn[t[5]]<<4|sn[t[6]],a:e===9?sn[t[7]]<<4|sn[t[8]]:255})),n}const yD=(t,e)=>t<255?e(t):"";function vD(t){var e=pD(t)?fD:mD;return t?"#"+e(t.r)+e(t.g)+e(t.b)+yD(t.a,e):void 0}const xD=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function BE(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function _D(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function wD(t,e,n){const r=BE(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function bD(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Pg(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,u,h;return i!==o&&(h=i-o,u=a>.5?h/(2-i-o):h/(i+o),l=bD(n,r,s,h,i),l=l*60+.5),[l|0,u||0,a]}function jg(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ts)}function Rg(t,e,n){return jg(BE,t,e,n)}function ED(t,e,n){return jg(wD,t,e,n)}function kD(t,e,n){return jg(_D,t,e,n)}function zE(t){return(t%360+360)%360}function TD(t){const e=xD.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?ca(+e[5]):ts(+e[5]));const s=zE(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=ED(s,i,o):e[1]==="hsv"?r=kD(s,i,o):r=Rg(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function SD(t,e){var n=Pg(t);n[0]=zE(n[0]+e),n=Rg(n),t.r=n[0],t.g=n[1],t.b=n[2]}function ID(t){if(!t)return;const e=Pg(t),n=e[0],r=Px(e[1]),s=Px(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${nr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const jx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function CD(){const t={},e=Object.keys(Rx),n=Object.keys(jx);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,jx[i]);i=parseInt(Rx[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let pc;function ND(t){pc||(pc=CD(),pc.transparent=[0,0,0,0]);const e=pc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const AD=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function PD(t){const e=AD.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?ca(o):Ur(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?ca(r):Ur(r,0,255)),s=255&(e[4]?ca(s):Ur(s,0,255)),i=255&(e[6]?ca(i):Ur(i,0,255)),{r,g:s,b:i,a:n}}}function jD(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${nr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const $h=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,hi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function RD(t,e,n){const r=hi(nr(t.r)),s=hi(nr(t.g)),i=hi(nr(t.b));return{r:ts($h(r+n*(hi(nr(e.r))-r))),g:ts($h(s+n*(hi(nr(e.g))-s))),b:ts($h(i+n*(hi(nr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function gc(t,e,n){if(t){let r=Pg(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Rg(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function WE(t,e){return t&&Object.assign(e||{},t)}function Dx(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ts(t[3]))):(e=WE(t,{r:0,g:0,b:0,a:1}),e.a=ts(e.a)),e}function DD(t){return t.charAt(0)==="r"?PD(t):TD(t)}class sl{constructor(e){if(e instanceof sl)return e;const n=typeof e;let r;n==="object"?r=Dx(e):n==="string"&&(r=gD(e)||ND(e)||DD(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=WE(this._rgb);return e&&(e.a=nr(e.a)),e}set rgb(e){this._rgb=Dx(e)}rgbString(){return this._valid?jD(this._rgb):void 0}hexString(){return this._valid?vD(this._rgb):void 0}hslString(){return this._valid?ID(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=RD(this._rgb,e._rgb,n)),this}clone(){return new sl(this.rgb)}alpha(e){return this._rgb.a=ts(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Cl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return gc(this._rgb,2,e),this}darken(e){return gc(this._rgb,2,-e),this}saturate(e){return gc(this._rgb,1,e),this}desaturate(e){return gc(this._rgb,1,-e),this}rotate(e){return SD(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Xn(){}const MD=(()=>{let t=0;return()=>t++})();function Se(t){return t==null}function et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ye(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function mn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Dn(t,e){return mn(t)?t:e}function be(t,e){return typeof t>"u"?e:t}const LD=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Pe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function we(t,e,n,r){let s,i,o;if(et(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(ye(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function $u(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Hu(t){if(et(t))return t.map(Hu);if(ye(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Hu(t[n[s]]);return e}return t}function $E(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function OD(t,e,n,r){if(!$E(t))return;const s=e[t],i=n[t];ye(s)&&ye(i)?il(s,i,r):e[t]=Hu(i)}function il(t,e,n){const r=et(e)?e:[e],s=r.length;if(!ye(t))return t;n=n||{};const i=n.merger||OD;let o;for(let a=0;a<s;++a){if(o=r[a],!ye(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)i(l[u],t,o,n)}return t}function Ia(t,e){return il(t,e,{merger:VD})}function VD(t,e,n){if(!$E(t))return;const r=e[t],s=n[t];ye(r)&&ye(s)?Ia(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Hu(s))}const Mx={"":t=>t,x:t=>t.x,y:t=>t.y};function FD(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function UD(t){const e=FD(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function lo(t,e){return(Mx[e]||(Mx[e]=UD(e)))(t)}function Dg(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ol=t=>typeof t<"u",hs=t=>typeof t=="function",Lx=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function BD(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const It=Math.PI,ns=2*It,qu=Number.POSITIVE_INFINITY,zD=It/180,kn=It/2,Ts=It/4,Ox=It*2/3,HE=Math.log10,rs=Math.sign;function Yc(t,e,n){return Math.abs(t-e)<n}function Vx(t){const e=Math.round(t);t=Yc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(HE(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function WD(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function $D(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ku(t){return!$D(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function HD(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function qD(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Vs(t){return t*(It/180)}function KD(t){return t*(180/It)}function Fx(t){if(!mn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function GD(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*It&&(i+=ns),{angle:i,distance:s}}function YD(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ss(t){return(t%ns+ns)%ns}function QD(t,e,n,r){const s=Ss(t),i=Ss(e),o=Ss(n),a=Ss(i-s),l=Ss(o-s),u=Ss(s-i),h=Ss(s-o);return s===i||s===o||r||a>l&&u<h}function Tn(t,e,n){return Math.max(e,Math.min(n,t))}function XD(t){return Tn(t,-32768,32767)}function ji(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Mg(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Sm=(t,e,n,r)=>Mg(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),ZD=(t,e,n)=>Mg(t,n,r=>t[r][e]>=n);function JD(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const qE=["push","pop","shift","splice","unshift"];function eM(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),qE.forEach(n=>{const r="_onData"+Dg(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Ux(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(qE.forEach(i=>{delete t[i]}),delete t._chartjs)}function KE(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const GE=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function YE(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,GE.call(window,()=>{r=!1,t.apply(e,n)}))}}function tM(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Lg=t=>t==="start"?"left":t==="end"?"right":"center",wt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,nM=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,yc=t=>t===0||t===1,Bx=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ns/n)),zx=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ns/n)+1,Ca={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*kn)+1,easeOutSine:t=>Math.sin(t*kn),easeInOutSine:t=>-.5*(Math.cos(It*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>yc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>yc(t)?t:Bx(t,.075,.3),easeOutElastic:t=>yc(t)?t:zx(t,.075,.3),easeInOutElastic(t){return yc(t)?t:t<.5?.5*Bx(t*2,.1125,.45):.5+.5*zx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ca.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ca.easeInBounce(t*2)*.5:Ca.easeOutBounce(t*2-1)*.5+.5};function QE(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Wx(t){return QE(t)?t:new sl(t)}function Hh(t){return QE(t)?t:new sl(t).saturate(.5).darken(.1).hexString()}const rM=["x","y","borderWidth","radius","tension"],sM=["color","borderColor","backgroundColor"];function iM(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:sM},numbers:{type:"number",properties:rM}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function oM(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const $x=new Map;function aM(t,e){e=e||{};const n=t+JSON.stringify(e);let r=$x.get(n);return r||(r=new Intl.NumberFormat(t,e),$x.set(n,r)),r}function XE(t,e,n){return aM(e,n).format(t)}const lM={values(t){return et(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=cM(t,n)}const o=HE(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),XE(t,r,l)}};function cM(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ZE={formatters:lM};function uM(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ZE.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Js=Object.create(null),Im=Object.create(null);function Na(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function qh(t,e,n){return typeof e=="string"?il(Na(t,e),n):il(Na(t,""),e)}class dM{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Hh(s.backgroundColor),this.hoverBorderColor=(r,s)=>Hh(s.borderColor),this.hoverColor=(r,s)=>Hh(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return qh(this,e,n)}get(e){return Na(this,e)}describe(e,n){return qh(Im,e,n)}override(e,n){return qh(Js,e,n)}route(e,n,r,s){const i=Na(this,e),o=Na(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[s];return ye(l)?Object.assign({},u,l):be(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var $e=new dM({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[iM,oM,uM]);function hM(t){return!t||Se(t.size)||Se(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Hx(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Is(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function qx(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Kx(t,e,n,r){JE(t,e,n,r,null)}function JE(t,e,n,r,s){let i,o,a,l,u,h,f,m;const g=e.pointStyle,v=e.rotation,w=e.radius;let S=(v||0)*zD;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(S),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),g){default:s?t.ellipse(n,r,s/2,w,0,0,ns):t.arc(n,r,w,0,ns),t.closePath();break;case"triangle":h=s?s/2:w,t.moveTo(n+Math.sin(S)*h,r-Math.cos(S)*w),S+=Ox,t.lineTo(n+Math.sin(S)*h,r-Math.cos(S)*w),S+=Ox,t.lineTo(n+Math.sin(S)*h,r-Math.cos(S)*w),t.closePath();break;case"rectRounded":u=w*.516,l=w-u,o=Math.cos(S+Ts)*l,f=Math.cos(S+Ts)*(s?s/2-u:l),a=Math.sin(S+Ts)*l,m=Math.sin(S+Ts)*(s?s/2-u:l),t.arc(n-f,r-a,u,S-It,S-kn),t.arc(n+m,r-o,u,S-kn,S),t.arc(n+f,r+a,u,S,S+kn),t.arc(n-m,r+o,u,S+kn,S+It),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*w,h=s?s/2:l,t.rect(n-h,r-l,2*h,2*l);break}S+=Ts;case"rectRot":f=Math.cos(S)*(s?s/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,m=Math.sin(S)*(s?s/2:w),t.moveTo(n-f,r-a),t.lineTo(n+m,r-o),t.lineTo(n+f,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":S+=Ts;case"cross":f=Math.cos(S)*(s?s/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,m=Math.sin(S)*(s?s/2:w),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":f=Math.cos(S)*(s?s/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,m=Math.sin(S)*(s?s/2:w),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),S+=Ts,f=Math.cos(S)*(s?s/2:w),o=Math.cos(S)*w,a=Math.sin(S)*w,m=Math.sin(S)*(s?s/2:w),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(S)*w,a=Math.sin(S)*w,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(S)*(s?s/2:w),r+Math.sin(S)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ek(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Og(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Vg(t){t.restore()}function fM(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Se(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function mM(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,h=s.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function pM(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function al(t,e,n,r,s,i={}){const o=et(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,u;for(t.save(),t.font=s.string,fM(t,i),l=0;l<o.length;++l)u=o[l],i.backdrop&&pM(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Se(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,n,r,i.maxWidth)),t.fillText(u,n,r,i.maxWidth),mM(t,n,r,u,i),r+=Number(s.lineHeight);t.restore()}function Gu(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*It,It,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,It,kn,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,kn,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-kn,!0),t.lineTo(n+o.topLeft,r)}const gM=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,yM=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function vM(t,e){const n=(""+t).match(gM);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const xM=t=>+t||0;function tk(t,e){const n={},r=ye(e),s=r?Object.keys(e):e,i=ye(t)?r?o=>be(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=xM(i(o));return n}function nk(t){return tk(t,{top:"y",right:"x",bottom:"y",left:"x"})}function $i(t){return tk(t,["topLeft","topRight","bottomLeft","bottomRight"])}function pn(t){const e=nk(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function St(t,e){t=t||{},e=e||$e.font;let n=be(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=be(t.style,e.style);r&&!(""+r).match(yM)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:be(t.family,e.family),lineHeight:vM(be(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:be(t.weight,e.weight),string:""};return s.string=hM(s),s}function vc(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function _M(t,e,n){const{min:r,max:s}=t,i=LD(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function bo(t,e){return Object.assign(Object.create(t),e)}function Fg(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=ok("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>Fg([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return sk(a,l,()=>CM(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Yx(a).includes(l)},ownKeys(a){return Yx(a)},set(a,l,u){const h=a._storage||(a._storage=s());return a[l]=h[l]=u,delete a._keys,!0}})}function co(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:rk(t,r),setContext:i=>co(t,i,n,r),override:i=>co(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return sk(i,o,()=>bM(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function rk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:hs(n)?n:()=>n,isIndexable:hs(r)?r:()=>r}}const wM=(t,e)=>t?t+Dg(e):e,Ug=(t,e)=>ye(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function sk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function bM(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return hs(a)&&o.isScriptable(e)&&(a=EM(e,a,t,n)),et(a)&&a.length&&(a=kM(e,a,t,o.isIndexable)),Ug(e,a)&&(a=co(a,s,i&&i[e],o)),a}function EM(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Ug(t,l)&&(l=Bg(s._scopes,s,t,l)),l}function kM(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(ye(e[0])){const l=e,u=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const f=Bg(u,s,t,h);e.push(co(f,i,o&&o[t],a))}}return e}function ik(t,e,n){return hs(t)?t(e,n):t}const TM=(t,e)=>t===!0?e:typeof t=="string"?lo(e,t):void 0;function SM(t,e,n,r,s){for(const i of e){const o=TM(n,i);if(o){t.add(o);const a=ik(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Bg(t,e,n,r){const s=e._rootScopes,i=ik(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=Gx(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Gx(a,o,i,l,r),l===null)?!1:Fg(Array.from(a),[""],s,i,()=>IM(e,n,r))}function Gx(t,e,n,r,s){for(;n;)n=SM(t,e,n,r,s);return n}function IM(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return et(s)&&ye(n)?n:s||{}}function CM(t,e,n,r){let s;for(const i of e)if(s=ok(wM(i,t),n),typeof s<"u")return Ug(t,s)?Bg(n,r,t,s):s}function ok(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Yx(t){let e=t._keys;return e||(e=t._keys=NM(t._scopes)),e}function NM(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}function zg(){return typeof window<"u"&&typeof document<"u"}function Wg(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Yu(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Od=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function AM(t,e){return Od(t).getPropertyValue(e)}const PM=["top","right","bottom","left"];function Bs(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=PM[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const jM=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function RM(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(jM(s,i,t.target))a=s,l=i;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function js(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Od(n),i=s.boxSizing==="border-box",o=Bs(s,"padding"),a=Bs(s,"border","width"),{x:l,y:u,box:h}=RM(t,n),f=o.left+(h&&a.left),m=o.top+(h&&a.top);let{width:g,height:v}=e;return i&&(g-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-f)/g*n.width/r),y:Math.round((u-m)/v*n.height/r)}}function DM(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&Wg(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Od(i),l=Bs(a,"border","width"),u=Bs(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,r=Yu(a.maxWidth,i,"clientWidth"),s=Yu(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||qu,maxHeight:s||qu}}const xc=t=>Math.round(t*10)/10;function MM(t,e,n,r){const s=Od(t),i=Bs(s,"margin"),o=Yu(s.maxWidth,t,"clientWidth")||qu,a=Yu(s.maxHeight,t,"clientHeight")||qu,l=DM(t,e,n);let{width:u,height:h}=l;if(s.boxSizing==="content-box"){const m=Bs(s,"border","width"),g=Bs(s,"padding");u-=g.width+m.width,h-=g.height+m.height}return u=Math.max(0,u-i.width),h=Math.max(0,r?u/r:h-i.height),u=xc(Math.min(u,o,l.maxWidth)),h=xc(Math.min(h,a,l.maxHeight)),u&&!h&&(h=xc(u/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,u=xc(Math.floor(h*r))),{width:u,height:h}}function Qx(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const LM=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};zg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Xx(t,e){const n=AM(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}const OM=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},VM=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Hi(t,e,n){return t?OM(e,n):VM()}function ak(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function lk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function _c(t,e,n){return t.options.clip?t[n]:e[n]}function FM(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:_c(n,e,"left"),right:_c(n,e,"right"),top:_c(r,e,"top"),bottom:_c(r,e,"bottom")}:e}function UM(t,e){const n=e._clip;if(n.disabled)return!1;const r=FM(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class BM{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=GE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Zn=new BM;const Zx="transparent",zM={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Wx(t||Zx),s=r.valid&&Wx(e||Zx);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class WM{constructor(e,n,r,s){const i=n[r];s=vc([e.to,s,i,e.from]);const o=vc([e.from,i,s]);this._active=!0,this._fn=e.fn||zM[e.type||typeof o],this._easing=Ca[e.easing]||Ca.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=vc([e.to,n,s,e.from]),this._from=vc([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class ck{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ye(e))return;const n=Object.keys($e.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!ye(i))return;const o={};for(const a of n)o[a]=i[a];(et(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=HM(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&$M(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,n));continue}const h=n[u];let f=i[u];const m=r.get(u);if(f)if(m&&f.active()){f.update(m,h,a);continue}else f.cancel();if(!m||!m.duration){e[u]=h;continue}i[u]=f=new WM(m,e,u,h),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Zn.add(this._chart,r),!0}}function $M(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function HM(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Jx(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function qM(t,e,n){if(n===!1)return!1;const r=Jx(t,n),s=Jx(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function KM(t){let e,n,r,s;return ye(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function uk(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function e_(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(h=!0,r.all)continue;break}u=t.values[l],mn(u)&&(i||e===0||rs(e)===rs(u))&&(e+=u)}return!h&&!r.all?0:e}function GM(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[s]:h,[i]:t[h]};return a}function Kh(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function YM(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function QM(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function XM(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function t_(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function n_(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,u=o.axis,h=YM(i,o,r),f=e.length;let m;for(let g=0;g<f;++g){const v=e[g],{[l]:w,[u]:S}=v,b=v._stacks||(v._stacks={});m=b[u]=XM(s,h,w),m[a]=S,m._top=t_(m,o,!0,r.type),m._bottom=t_(m,o,!1,r.type);const k=m._visualValues||(m._visualValues={});k[a]=S}}function Gh(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function ZM(t,e){return bo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function JM(t,e,n){return bo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ho(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Yh=t=>t==="reset"||t==="none",r_=(t,e)=>e?t:Object.assign({},t),eL=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:uk(n,!0),values:null};class Aa{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Kh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ho(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,m,g,v)=>f==="x"?m:f==="r"?v:g,i=n.xAxisID=be(r.xAxisID,Gh(e,"x")),o=n.yAxisID=be(r.yAxisID,Gh(e,"y")),a=n.rAxisID=be(r.rAxisID,Gh(e,"r")),l=n.indexAxis,u=n.iAxisID=s(l,i,o,a),h=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ux(this._data,this),e._stacked&&Ho(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ye(n)){const s=this._cachedMeta;this._data=GM(n,s)}else if(r!==n){if(r){Ux(r,this);const s=this._cachedMeta;Ho(s),s._parsed=[]}n&&Object.isExtensible(n)&&eM(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Kh(n.vScale,n),n.stack!==r.stack&&(s=!0,Ho(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(n_(this,n._parsed),n._stacked=Kh(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],h,f,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{et(s[e])?m=this.parseArrayData(r,s,e,n):ye(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const g=()=>f[a]===null||u&&f[a]<u[a];for(h=0;h<n;++h)r._parsed[h+e]=f=m[h],l&&(g()&&(l=!1),u=f);r._sorted=l}o&&n_(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,u=i.getLabels(),h=i===o,f=new Array(s);let m,g,v;for(m=0,g=s;m<g;++m)v=m+r,f[m]={[a]:h||i.parse(u[v],v),[l]:o.parse(n[v],v)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,u,h,f;for(l=0,u=s;l<u;++l)h=l+r,f=n[h],a[l]={x:i.parse(f[0],h),y:o.parse(f[1],h)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(s);let h,f,m,g;for(h=0,f=s;h<f;++h)m=h+r,g=n[m],u[h]={x:i.parse(lo(g,a),m),y:o.parse(lo(g,l),m)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:uk(s,!0),values:n._stacks[e.axis]._visualValues};return e_(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=e_(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=eL(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=QM(a);let m,g;function v(){g=s[m];const w=g[a.axis];return!mn(g[e.axis])||h>w||f<w}for(m=0;m<o&&!(!v()&&(this.updateRangeFromParsed(u,e,g,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!v()){this.updateRangeFromParsed(u,e,g,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],mn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=KM(be(this.options.clip,qM(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,i,a,l),h=a;h<a+l;++h){const f=s[h];f.hidden||(f.active&&u?o.push(f):f.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=JM(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=ZM(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&ol(r);if(a)return r_(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],m=u.getOptionScopes(this.getDataset(),h),g=Object.keys($e.elements[e]),v=()=>this.getContext(r,s,n),w=u.resolveNamedOptions(m,g,v,f);return w.$shared&&(w.$shared=l,i[o]=Object.freeze(r_(w,l))),w}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,n),m=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(m,this.getContext(e,r,n))}const u=new ck(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Yh(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){Yh(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Yh(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Ho(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}me(Aa,"defaults",{}),me(Aa,"datasetElementType",null),me(Aa,"dataElementType",null);function tL(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=KE(r.sort((s,i)=>s-i))}return t._cache.$bar}function nL(t){const e=t.iScale,n=tL(e,t.type);let r=e._length,s,i,o,a;const l=()=>{o===32767||o===-32768||(ol(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,i=n.length;s<i;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,i=e.ticks.length;s<i;++s)o=e.getPixelForTick(s),l();return r}function rL(t,e,n,r){const s=n.barThickness;let i,o;return Se(s)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}function sL(t,e,n,r){const s=e.pixels,i=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const u=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:u}}function iL(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),o=Math.min(s,i),a=Math.max(s,i);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[n.axis]=u,e._custom={barStart:l,barEnd:u,start:s,end:i,min:o,max:a}}function dk(t,e,n,r){return et(t)?iL(t,e,n,r):e[n.axis]=n.parse(t,r),e}function s_(t,e,n,r){const s=t.iScale,i=t.vScale,o=s.getLabels(),a=s===i,l=[];let u,h,f,m;for(u=n,h=n+r;u<h;++u)m=e[u],f={},f[s.axis]=a||s.parse(o[u],u),l.push(dk(m,f,i,u));return l}function Qh(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function oL(t,e,n){return t!==0?rs(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function aL(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function lL(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:h}=aL(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=u:(n._bottom||0)===r?s=h:(i[i_(h,o,a,l)]=!0,s=u)),i[i_(s,o,a,l)]=!0,t.borderSkipped=i}function i_(t,e,n,r){return r?(t=cL(t,e,n),t=o_(t,n,e)):t=o_(t,e,n),t}function cL(t,e,n){return t===e?n:t===n?e:t}function o_(t,e,n){return t==="start"?e:t==="end"?n:t}function uL(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Qc extends Aa{parsePrimitiveData(e,n,r,s){return s_(e,n,r,s)}parseArrayData(e,n,r,s){return s_(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=i.axis==="x"?a:l,h=o.axis==="x"?a:l,f=[];let m,g,v,w;for(m=r,g=r+s;m<g;++m)w=n[m],v={},v[i.axis]=i.parse(lo(w,u),m),f.push(dk(lo(w,h),v,o,m));return f}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),o=i._custom,a=Qh(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:m}=this._getSharedOptions(n,s);for(let g=n;g<n+r;g++){const v=this.getParsed(g),w=i||Se(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),S=this._calculateBarIndexPixels(g,h),b=(v._stacks||{})[a.axis],k={horizontal:u,base:w.base,enableBorderRadius:!b||Qh(v._custom)||o===b._top||o===b._bottom,x:u?w.head:S.center,y:u?S.center:w.head,height:u?S.size:Math.abs(w.size),width:u?Math.abs(w.size):S.size};m&&(k.options=f||this.resolveDataElementOptions(g,e[g].active?"active":s));const _=k.options||e[g].options;lL(k,_,b,o),uL(k,_,h.ratio),this.updateElement(e[g],g,k,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),i=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],u=h=>{const f=h._parsed.find(g=>g[r.axis]===l),m=f&&f[h.vScale.axis];if(Se(m)||isNaN(m))return!0};for(const h of s)if(!(n!==void 0&&u(h))&&((i===!1||o.indexOf(h.stack)===-1||i===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const a=e.barThickness;return{min:a||nL(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),u=l._custom,h=Qh(u);let f=l[n.axis],m=0,g=r?this.applyStack(n,l,r):f,v,w;g!==f&&(m=g-f,g=f),h&&(f=u.barStart,g=u.barEnd-u.barStart,f!==0&&rs(f)!==rs(u.barEnd)&&(m=0),m+=f);const S=!Se(i)&&!h?i:m;let b=n.getPixelForValue(S);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(m+g):v=b,w=v-b,Math.abs(w)<o){w=oL(w,n,a)*o,f===a&&(b-=w/2);const k=n.getPixelForDecimal(0),_=n.getPixelForDecimal(1),N=Math.min(k,_),j=Math.max(k,_);b=Math.max(Math.min(b,j),N),v=b+w,r&&!h&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(v)-n.getValueForPixel(b))}if(b===n.getPixelForValue(a)){const k=rs(w)*n.getLineWidthForValue(a)/2;b+=k,w-=k}return{size:w,base:b,head:v,center:v+w/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,o=be(s.maxBarThickness,1/0);let a,l;if(n.grouped){const u=i?this._getStackCount(e):n.stackCount,h=s.barThickness==="flex"?sL(e,n,s,u):rL(e,n,s,u),f=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=h.start+h.chunk*f+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}me(Qc,"id","bar"),me(Qc,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),me(Qc,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Cs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $g{constructor(e){me(this,"options");this.options=e||{}}static override(e){Object.assign($g.prototype,e)}init(){}formats(){return Cs()}parse(){return Cs()}format(){return Cs()}add(){return Cs()}diff(){return Cs()}startOf(){return Cs()}endOf(){return Cs()}}var dL={_date:$g};function hL(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const u=a._reversePixels?ZD:Sm;if(r){if(s._sharedOptions){const h=i[0],f=typeof h.getRange=="function"&&h.getRange(e);if(f){const m=u(i,e,n-f),g=u(i,e,n+f);return{lo:m.lo,hi:g.hi}}}}else{const h=u(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:m}=t,g=m.slice(0,h.lo+1).reverse().findIndex(w=>!Se(w[f.axis]));h.lo-=Math.max(0,g);const v=m.slice(h.hi).findIndex(w=>!Se(w[f.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:i.length-1}}function Vd(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:u,data:h}=i[a],{lo:f,hi:m}=hL(i[a],e,o,s);for(let g=f;g<=m;++g){const v=h[g];v.skip||r(v,u,g)}}}function fL(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Xh(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Vd(t,n,e,function(a,l,u){!s&&!ek(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:u})},!0),i}function mL(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:f}=GD(o,{x:e.x,y:e.y});QD(f,u,h)&&s.push({element:o,datasetIndex:a,index:l})}return Vd(t,n,e,i),s}function pL(t,e,n,r,s,i){let o=[];const a=fL(n);let l=Number.POSITIVE_INFINITY;function u(h,f,m){const g=h.inRange(e.x,e.y,s);if(r&&!g)return;const v=h.getCenterPoint(s);if(!(!!i||t.isPointInArea(v))&&!g)return;const S=a(e,v);S<l?(o=[{element:h,datasetIndex:f,index:m}],l=S):S===l&&o.push({element:h,datasetIndex:f,index:m})}return Vd(t,n,e,u),o}function Zh(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?mL(t,e,n,s):pL(t,e,n,r,s,i)}function a_(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Vd(t,n,e,(l,u,h)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var gL={modes:{index(t,e,n,r){const s=js(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Xh(t,s,i,r,o):Zh(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,f=u.data[h];f&&!f.skip&&l.push({element:f,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,n,r){const s=js(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Xh(t,s,i,r,o):Zh(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const s=js(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Xh(t,s,i,r,o)},nearest(t,e,n,r){const s=js(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Zh(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=js(e,t);return a_(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=js(e,t);return a_(t,s,"y",n.intersect,r)}}};const hk=["left","top","right","bottom"];function qo(t,e){return t.filter(n=>n.pos===e)}function l_(t,e){return t.filter(n=>hk.indexOf(n.pos)===-1&&n.box.axis===e)}function Ko(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function yL(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function vL(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!hk.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function xL(t,e){const n=vL(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=h?h*s:l&&e.availableHeight)}return n}function _L(t){const e=yL(t),n=Ko(e.filter(u=>u.box.fullSize),!0),r=Ko(qo(e,"left"),!0),s=Ko(qo(e,"right")),i=Ko(qo(e,"top"),!0),o=Ko(qo(e,"bottom")),a=l_(e,"x"),l=l_(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:qo(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function c_(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function fk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function wL(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!ye(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&fk(o,i.getPadding());const a=Math.max(0,e.outerWidth-c_(o,t,"left","right")),l=Math.max(0,e.outerHeight-c_(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function bL(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function EL(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function ua(t,e,n,r){const s=[];let i,o,a,l,u,h;for(i=0,o=t.length,u=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,EL(a.horizontal,e));const{same:f,other:m}=wL(e,n,a,r);u|=f&&s.length,h=h||m,l.fullSize||s.push(a)}return u&&ua(s,e,n,r)||h}function wc(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function u_(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,u=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const f=e.w*h,m=u.size||l.height;ol(u.start)&&(o=u.start),l.fullSize?wc(l,s.left,o,n.outerWidth-s.right-s.left,m):wc(l,e.left+u.placed,o,f,m),u.start=o,u.placed+=f,o=l.bottom}else{const f=e.h*h,m=u.size||l.width;ol(u.start)&&(i=u.start),l.fullSize?wc(l,i,s.top,m,n.outerHeight-s.bottom-s.top):wc(l,i,e.top+u.placed,m,f),u.start=i,u.placed+=f,i=l.right}}e.x=i,e.y=o}var un={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=pn(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=_L(t.boxes),l=a.vertical,u=a.horizontal;we(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,S)=>S.box.options&&S.box.options.display===!1?w:w+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},s);fk(m,pn(r));const g=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),v=xL(l.concat(u),f);ua(a.fullSize,g,f,v),ua(l,g,f,v),ua(u,g,f,v)&&ua(l,g,f,v),bL(g),u_(a.leftAndTop,g,f,v),g.x+=g.w,g.y+=g.h,u_(a.rightAndBottom,g,f,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},we(a.chartArea,w=>{const S=w.box;Object.assign(S,t.chartArea),S.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class mk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class kL extends mk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Xc="$chartjs",TL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},d_=t=>t===null||t==="";function SL(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Xc]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",d_(s)){const i=Xx(t,"width");i!==void 0&&(t.width=i)}if(d_(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Xx(t,"height");i!==void 0&&(t.height=i)}return t}const pk=LM?{passive:!0}:!1;function IL(t,e,n){t&&t.addEventListener(e,n,pk)}function CL(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,pk)}function NL(t,e){const n=TL[t.type]||t.type,{x:r,y:s}=js(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Qu(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function AL(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Qu(a.addedNodes,r),o=o&&!Qu(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function PL(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Qu(a.removedNodes,r),o=o&&!Qu(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const ll=new Map;let h_=0;function gk(){const t=window.devicePixelRatio;t!==h_&&(h_=t,ll.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function jL(t,e){ll.size||window.addEventListener("resize",gk),ll.set(t,e)}function RL(t){ll.delete(t),ll.size||window.removeEventListener("resize",gk)}function DL(t,e,n){const r=t.canvas,s=r&&Wg(r);if(!s)return;const i=YE((a,l)=>{const u=s.clientWidth;n(a,l),u<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||i(u,h)});return o.observe(s),jL(t,i),o}function Jh(t,e,n){n&&n.disconnect(),e==="resize"&&RL(t)}function ML(t,e,n){const r=t.canvas,s=YE(i=>{t.ctx!==null&&n(NL(i,t))},t);return IL(r,e,s),s}class LL extends mk{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(SL(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Xc])return!1;const r=n[Xc].initial;["height","width"].forEach(i=>{const o=r[i];Se(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Xc],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:AL,detach:PL,resize:DL}[n]||ML;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Jh,detach:Jh,resize:Jh}[n]||CL)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return MM(e,n,r,s)}isAttached(e){const n=e&&Wg(e);return!!(n&&n.isConnected)}}function OL(t){return!zg()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?kL:LL}class fs{constructor(){me(this,"x");me(this,"y");me(this,"active",!1);me(this,"options");me(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Ku(this.x)&&Ku(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}me(fs,"defaults",{}),me(fs,"defaultRoutes");function VL(t,e){const n=t.options.ticks,r=FL(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?BL(e):[],o=i.length,a=i[0],l=i[o-1],u=[];if(o>s)return zL(e,u,i,o/s),u;const h=UL(i,e,s);if(o>0){let f,m;const g=o>1?Math.round((l-a)/(o-1)):null;for(bc(e,u,h,Se(g)?0:a-g,a),f=0,m=o-1;f<m;f++)bc(e,u,h,i[f],i[f+1]);return bc(e,u,h,l,Se(g)?e.length:l+g),u}return bc(e,u,h),u}function FL(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function UL(t,e,n){const r=WL(t),s=e.length/n;if(!r)return Math.max(s,1);const i=WD(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function BL(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function zL(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function bc(t,e,n,r,s){const i=be(r,0),o=Math.min(be(s,t.length),t.length);let a=0,l,u,h;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),h=i;h<0;)a++,h=Math.round(i+a*n);for(u=Math.max(i,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(i+a*n))}function WL(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const $L=t=>t==="left"?"right":t==="right"?"left":t,f_=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,m_=(t,e)=>Math.min(e||t,t);function p_(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function HL(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(l-i,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(s-1))/2,l+=s<e?u:-u,l<i-a||l>o+a)))return l}function qL(t,e){we(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Go(t){return t.drawTicks?t.tickLength:0}function g_(t,e){if(!t.display)return 0;const n=St(t.font,e),r=pn(t.padding);return(et(t.text)?t.text.length:1)*n.lineHeight+r.height}function KL(t,e){return bo(t,{scale:e,type:"scale"})}function GL(t,e,n){return bo(t,{tick:n,index:e,type:"tick"})}function YL(t,e,n){let r=Lg(t);return(n&&e!=="right"||!n&&e==="right")&&(r=$L(r)),r}function QL(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let f=0,m,g,v;const w=o-s,S=a-i;if(t.isHorizontal()){if(g=wt(r,i,a),ye(n)){const b=Object.keys(n)[0],k=n[b];v=h[b].getPixelForValue(k)+w-e}else n==="center"?v=(u.bottom+u.top)/2+w-e:v=f_(t,n,e);m=a-i}else{if(ye(n)){const b=Object.keys(n)[0],k=n[b];g=h[b].getPixelForValue(k)-S+e}else n==="center"?g=(u.left+u.right)/2-S+e:g=f_(t,n,e);v=wt(r,o,s),f=n==="left"?-kn:kn}return{titleX:g,titleY:v,maxWidth:m,rotation:f}}class Eo extends fs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Dn(e,Number.POSITIVE_INFINITY),n=Dn(n,Number.NEGATIVE_INFINITY),r=Dn(r,Number.POSITIVE_INFINITY),s=Dn(s,Number.NEGATIVE_INFINITY),{min:Dn(e,r),max:Dn(n,s),minDefined:mn(e),maxDefined:mn(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Dn(n,Dn(r,n)),max:Dn(r,Dn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_M(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?p_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=VL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pe(this.options.afterUpdate,[this])}beforeSetDimensions(){Pe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Pe(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Pe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=m_(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),f=h.widest.width,m=h.highest.height,g=Tn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),f+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-Go(e.grid)-n.padding-g_(e.title,this.chart.options.font),u=Math.sqrt(f*f+m*m),o=KD(Math.min(Math.asin(Tn((h.highest.height+6)/a,-1,1)),Math.asin(Tn(l/u,-1,1))-Math.asin(Tn(m/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=g_(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Go(i)+l):(e.height=this.maxHeight,e.width=Go(i)+l),r.display&&this.ticks.length){const{first:u,last:h,widest:f,highest:m}=this._getLabelSizes(),g=r.padding*2,v=Vs(this.labelRotation),w=Math.cos(v),S=Math.sin(v);if(a){const b=r.mirror?0:S*f.width+w*m.height;e.height=Math.min(this.maxHeight,e.height+b+g)}else{const b=r.mirror?0:w*f.width+S*m.height;e.width=Math.min(this.maxWidth,e.width+b+g)}this._calculatePadding(u,h,S,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,g=0;l?u?(m=s*e.width,g=r*n.height):(m=r*e.height,g=s*n.width):i==="start"?g=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,g=n.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-f+o)*this.width/(this.width-f),0)}else{let h=n.height/2,f=e.height/2;i==="start"?(h=0,f=e.height):i==="end"&&(h=n.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Se(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=p_(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/m_(n,r));let u=0,h=0,f,m,g,v,w,S,b,k,_,N,j;for(f=0;f<n;f+=l){if(v=e[f].label,w=this._resolveTickFontOptions(f),s.font=S=w.string,b=i[S]=i[S]||{data:{},gc:[]},k=w.lineHeight,_=N=0,!Se(v)&&!et(v))_=Hx(s,b.data,b.gc,_,v),N=k;else if(et(v))for(m=0,g=v.length;m<g;++m)j=v[m],!Se(j)&&!et(j)&&(_=Hx(s,b.data,b.gc,_,j),N+=k);o.push(_),a.push(N),u=Math.max(_,u),h=Math.max(N,h)}qL(i,n);const D=o.indexOf(u),E=a.indexOf(h),x=I=>({width:o[I]||0,height:a[I]||0});return{first:x(0),last:x(n-1),widest:x(D),highest:x(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return XD(this._alignToPixels?Is(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=GL(this.getContext(),e,r))}return this.$context||(this.$context=KL(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Vs(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,u=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=Go(i),g=[],v=a.setContext(this.getContext()),w=v.display?v.width:0,S=w/2,b=function(X){return Is(r,X,w)};let k,_,N,j,D,E,x,I,C,A,R,P;if(o==="top")k=b(this.bottom),E=this.bottom-m,I=k-S,A=b(e.top)+S,P=e.bottom;else if(o==="bottom")k=b(this.top),A=e.top,P=b(e.bottom)-S,E=k+S,I=this.top+m;else if(o==="left")k=b(this.right),D=this.right-m,x=k-S,C=b(e.left)+S,R=e.right;else if(o==="right")k=b(this.left),C=e.left,R=b(e.right)-S,D=k+S,x=this.left+m;else if(n==="x"){if(o==="center")k=b((e.top+e.bottom)/2+.5);else if(ye(o)){const X=Object.keys(o)[0],ce=o[X];k=b(this.chart.scales[X].getPixelForValue(ce))}A=e.top,P=e.bottom,E=k+S,I=E+m}else if(n==="y"){if(o==="center")k=b((e.left+e.right)/2);else if(ye(o)){const X=Object.keys(o)[0],ce=o[X];k=b(this.chart.scales[X].getPixelForValue(ce))}D=k-S,x=D-m,C=e.left,R=e.right}const fe=be(s.ticks.maxTicksLimit,f),le=Math.max(1,Math.ceil(f/fe));for(_=0;_<f;_+=le){const X=this.getContext(_),ce=i.setContext(X),z=a.setContext(X),Y=ce.lineWidth,L=ce.color,H=z.dash||[],Q=z.dashOffset,te=ce.tickWidth,Ie=ce.tickColor,V=ce.tickBorderDash||[],Z=ce.tickBorderDashOffset;N=HL(this,_,l),N!==void 0&&(j=Is(r,N,Y),u?D=x=C=R=j:E=I=A=P=j,g.push({tx1:D,ty1:E,tx2:x,ty2:I,x1:C,y1:A,x2:R,y2:P,width:Y,color:L,borderDash:H,borderDashOffset:Q,tickWidth:te,tickColor:Ie,tickBorderDash:V,tickBorderDashOffset:Z}))}return this._ticksLength=f,this._borderValue=k,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:f}=i,m=Go(r.grid),g=m+h,v=f?-h:g,w=-Vs(this.labelRotation),S=[];let b,k,_,N,j,D,E,x,I,C,A,R,P="middle";if(s==="top")D=this.bottom-v,E=this._getXAxisLabelAlignment();else if(s==="bottom")D=this.top+v,E=this._getXAxisLabelAlignment();else if(s==="left"){const le=this._getYAxisLabelAlignment(m);E=le.textAlign,j=le.x}else if(s==="right"){const le=this._getYAxisLabelAlignment(m);E=le.textAlign,j=le.x}else if(n==="x"){if(s==="center")D=(e.top+e.bottom)/2+g;else if(ye(s)){const le=Object.keys(s)[0],X=s[le];D=this.chart.scales[le].getPixelForValue(X)+g}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")j=(e.left+e.right)/2-g;else if(ye(s)){const le=Object.keys(s)[0],X=s[le];j=this.chart.scales[le].getPixelForValue(X)}E=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const fe=this._getLabelSizes();for(b=0,k=a.length;b<k;++b){_=a[b],N=_.label;const le=i.setContext(this.getContext(b));x=this.getPixelForTick(b)+i.labelOffset,I=this._resolveTickFontOptions(b),C=I.lineHeight,A=et(N)?N.length:1;const X=A/2,ce=le.color,z=le.textStrokeColor,Y=le.textStrokeWidth;let L=E;o?(j=x,E==="inner"&&(b===k-1?L=this.options.reverse?"left":"right":b===0?L=this.options.reverse?"right":"left":L="center"),s==="top"?u==="near"||w!==0?R=-A*C+C/2:u==="center"?R=-fe.highest.height/2-X*C+C:R=-fe.highest.height+C/2:u==="near"||w!==0?R=C/2:u==="center"?R=fe.highest.height/2-X*C:R=fe.highest.height-A*C,f&&(R*=-1),w!==0&&!le.showLabelBackdrop&&(j+=C/2*Math.sin(w))):(D=x,R=(1-A)*C/2);let H;if(le.showLabelBackdrop){const Q=pn(le.backdropPadding),te=fe.heights[b],Ie=fe.widths[b];let V=R-Q.top,Z=0-Q.left;switch(P){case"middle":V-=te/2;break;case"bottom":V-=te;break}switch(E){case"center":Z-=Ie/2;break;case"right":Z-=Ie;break;case"inner":b===k-1?Z-=Ie:b>0&&(Z-=Ie/2);break}H={left:Z,top:V,width:Ie+Q.width,height:te+Q.height,color:le.backdropColor}}S.push({label:N,font:I,textOffset:R,options:{rotation:w,color:ce,strokeColor:z,strokeWidth:Y,textAlign:L,textBaseline:P,translation:[j,D],backdrop:H}})}return S}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Vs(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let u,h;return n==="left"?s?(h=this.right+i,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?s?(h=this.left+i,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,u,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,f,m;this.isHorizontal()?(u=Is(e,this.left,o)-o/2,h=Is(e,this.right,a)+a/2,f=m=l):(f=Is(e,this.top,o)-o/2,m=Is(e,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,f),n.lineTo(h,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Og(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,u=o.label,h=o.textOffset;al(r,u,0,h,l,a)}s&&Vg(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=St(r.font),o=pn(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||ye(n)?(l+=o.bottom,et(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:f,rotation:m}=QL(this,l,n,a);al(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:m,textAlign:YL(a,n,s),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=be(e.grid&&e.grid.z,-1),s=be(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Eo.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return St(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ec{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;JL(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,XL(e,o,r),this.override&&$e.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in $e[s]&&(delete $e[s][r],this.override&&delete Js[r])}}function XL(t,e,n){const r=il(Object.create(null),[n?$e.get(n):{},$e.get(e),t.defaults]);$e.set(e,r),t.defaultRoutes&&ZL(e,t.defaultRoutes),t.descriptors&&$e.describe(e,t.descriptors)}function ZL(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");$e.route(i,s,l,a)})}function JL(t){return"id"in t&&"defaults"in t}class e3{constructor(){this.controllers=new Ec(Aa,"datasets",!0),this.elements=new Ec(fs,"elements"),this.plugins=new Ec(Object,"plugins"),this.scales=new Ec(Eo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):we(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Dg(e);Pe(r["before"+s],[],r),n[e](r),Pe(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var On=new e3;class t3{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Pe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=be(r.options&&r.options.plugins,{}),i=n3(r);return s===!1&&!n?[]:s3(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function n3(t){const e={},n=[],r=Object.keys(On.plugins.items);for(let i=0;i<r.length;i++)n.push(On.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function r3(t,e){return!e&&t===!1?null:t===!0?{}:t}function s3(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,u=r3(r[l],s);u!==null&&i.push({plugin:a,options:i3(t.config,{plugin:a,local:n[l]},u,o)})}return i}function i3(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cm(t,e){const n=$e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function o3(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function a3(t,e){return t===e?"_index_":"_value_"}function y_(t){if(t==="x"||t==="y"||t==="r")return t}function l3(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Nm(t,...e){if(y_(t))return t;for(const n of e){const r=n.axis||l3(n.position)||t.length>1&&y_(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function v_(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function c3(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return v_(t,"x",n[0])||v_(t,"y",n[0])}return{}}function u3(t,e){const n=Js[t.type]||{scales:{}},r=e.scales||{},s=Cm(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ye(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Nm(o,a,c3(o,t),$e.scales[a.type]),u=a3(l,s),h=n.scales||{};i[o]=Ia(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Cm(a,e),h=(Js[a]||{}).scales||{};Object.keys(h).forEach(f=>{const m=o3(f,l),g=o[m+"AxisID"]||m;i[g]=i[g]||Object.create(null),Ia(i[g],[{axis:m},r[g],h[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];Ia(a,[$e.scales[a.type],$e.scale])}),i}function yk(t){const e=t.options||(t.options={});e.plugins=be(e.plugins,{}),e.scales=u3(t,e)}function vk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function d3(t){return t=t||{},t.data=vk(t.data),yk(t),t}const x_=new Map,xk=new Set;function kc(t,e){let n=x_.get(t);return n||(n=e(),x_.set(t,n),xk.add(n)),n}const Yo=(t,e,n)=>{const r=lo(e,n);r!==void 0&&t.add(r)};class h3{constructor(e){this._config=d3(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=vk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return kc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return kc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return kc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return kc(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(f=>Yo(l,e,f))),h.forEach(f=>Yo(l,s,f)),h.forEach(f=>Yo(l,Js[i]||{},f)),h.forEach(f=>Yo(l,$e,f)),h.forEach(f=>Yo(l,Im,f))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),xk.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,Js[n]||{},$e.datasets[n]||{},{type:n},$e,Im]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=__(this._resolverCache,e,s);let l=o;if(m3(o,n)){i.$shared=!1,r=hs(r)?r():r;const u=this.createResolver(e,r,a);l=co(o,r,u)}for(const u of n)i[u]=l[u];return i}createResolver(e,n,r=[""],s){const{resolver:i}=__(this._resolverCache,e,r);return ye(n)?co(i,n,void 0,s):i}}function __(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Fg(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const f3=t=>ye(t)&&Object.getOwnPropertyNames(t).some(e=>hs(t[e]));function m3(t,e){const{isScriptable:n,isIndexable:r}=rk(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(hs(a)||f3(a))||o&&et(a))return!0}return!1}var p3="4.4.9";const g3=["top","bottom","left","right","chartArea"];function w_(t,e){return t==="top"||t==="bottom"||g3.indexOf(t)===-1&&e==="x"}function b_(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function E_(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Pe(n&&n.onComplete,[t],e)}function y3(t){const e=t.chart,n=e.options.animation;Pe(n&&n.onProgress,[t],e)}function _k(t){return zg()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Zc={},k_=t=>{const e=_k(t);return Object.values(Zc).filter(n=>n.canvas===e).pop()};function v3(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function x3(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Ir;let Fd=(Ir=class{static register(...e){On.add(...e),T_()}static unregister(...e){On.remove(...e),T_()}constructor(e,n){const r=this.config=new h3(n),s=_k(e),i=k_(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||OL(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=MD(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new t3,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=tM(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Zc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Zn.listen(this,"complete",E_),Zn.listen(this,"progress",y3),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Se(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return On}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Qx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qx(this.canvas,this.ctx),this}stop(){return Zn.stop(this),this}resize(e,n){Zn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Qx(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Pe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};we(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Nm(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),we(i,o=>{const a=o.options,l=a.id,u=Nm(l,a),h=be(a.type,o.dtype);(a.position===void 0||w_(a.position,u)!==w_(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===h)f=r[l];else{const m=On.getScale(h);f=new m({id:l,type:h,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),we(s,(o,a)=>{o||delete r[a]}),we(r,o=>{un.configure(this,o,o.options),un.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(b_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||Cm(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=On.getController(a),{datasetElementType:u,dataElementType:h}=$e.datasets[a];Object.assign(l,{dataElementType:On.getElement(h),datasetElementType:u&&On.getElement(u)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){we(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:f}=this.getDatasetMeta(u),m=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||we(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(b_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){we(this.scales,e=>{un.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Lx(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;v3(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Lx(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;un.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],we(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,hs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Zn.has(this)?this.attached&&!Zn.running(this)&&Zn.start(this):(this.draw(),E_({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=UM(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Og(n,s),e.controller.draw(),s&&Vg(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return ek(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=gL.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=bo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);ol(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Zn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),qx(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Zc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};we(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},s=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},i=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){we(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},we(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!$u(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,u)=>l.filter(h=>!u.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=BD(e),u=x3(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Pe(i.onHover,[e,a,this],this),l&&Pe(i.onClick,[e,a,this],this));const h=!$u(a,s);return(h||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=u,h}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},me(Ir,"defaults",$e),me(Ir,"instances",Zc),me(Ir,"overrides",Js),me(Ir,"registry",On),me(Ir,"version",p3),me(Ir,"getChart",k_),Ir);function T_(){return we(Fd.instances,t=>t._plugins.invalidate())}function wk(t,e){const{x:n,y:r,base:s,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,u,h,f;return t.horizontal?(f=o/2,a=Math.min(n,s),l=Math.max(n,s),u=r-f,h=r+f):(f=i/2,a=n-f,l=n+f,u=Math.min(r,s),h=Math.max(r,s)),{left:a,top:u,right:l,bottom:h}}function Br(t,e,n,r){return t?0:Tn(e,n,r)}function _3(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=nk(r);return{t:Br(s.top,i.top,0,n),r:Br(s.right,i.right,0,e),b:Br(s.bottom,i.bottom,0,n),l:Br(s.left,i.left,0,e)}}function w3(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=$i(s),o=Math.min(e,n),a=t.borderSkipped,l=r||ye(s);return{topLeft:Br(!l||a.top||a.left,i.topLeft,0,o),topRight:Br(!l||a.top||a.right,i.topRight,0,o),bottomLeft:Br(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:Br(!l||a.bottom||a.right,i.bottomRight,0,o)}}function b3(t){const e=wk(t),n=e.right-e.left,r=e.bottom-e.top,s=_3(t,n/2,r/2),i=w3(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function ef(t,e,n,r){const s=e===null,i=n===null,a=t&&!(s&&i)&&wk(t,r);return a&&(s||ji(e,a.left,a.right))&&(i||ji(n,a.top,a.bottom))}function E3(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function k3(t,e){t.rect(e.x,e.y,e.w,e.h)}function tf(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+o,radius:t.radius}}class Jc extends fs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=b3(this),a=E3(o.radius)?Gu:k3;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,tf(o,n,i)),e.clip(),a(e,tf(i,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,tf(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return ef(this,e,n,r)}inXRange(e,n){return ef(this,e,null,n)}inYRange(e,n){return ef(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}me(Jc,"id","bar"),me(Jc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),me(Jc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const S_=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},T3=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class I_ extends fs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Pe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=St(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=S_(r,i);let u,h;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,i,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,s,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let m=-1,g=-h;return this.legendItems.forEach((v,w)=>{const S=r+n/2+i.measureText(v.text).width;(w===0||u[u.length-1]+S+2*a>o)&&(f+=h,u[u.length-(w>0?0:1)]=0,g+=h,m++),l[w]={left:0,top:g,row:m,width:S,height:s},u[u.length-1]+=S+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let f=a,m=0,g=0,v=0,w=0;return this.legendItems.forEach((S,b)=>{const{itemWidth:k,itemHeight:_}=S3(r,n,i,S,s);b>0&&g+_+2*a>h&&(f+=m+a,u.push({width:m,height:g}),v+=m+a,w++,m=g=0),l[b]={left:v,top:g,col:w,width:k,height:_},m=Math.max(m,k),g+=_+a}),f+=m,u.push({width:m,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Hi(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=wt(r,this.left+s,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=wt(r,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+s}else{let a=0,l=wt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=wt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Og(e,this),this._draw(),Vg(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=$e.color,l=Hi(e.rtl,this.left,this.width),u=St(o.font),{padding:h}=o,f=u.size,m=f/2;let g;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:v,boxHeight:w,itemHeight:S}=S_(o,f),b=function(D,E,x){if(isNaN(v)||v<=0||isNaN(w)||w<0)return;s.save();const I=be(x.lineWidth,1);if(s.fillStyle=be(x.fillStyle,a),s.lineCap=be(x.lineCap,"butt"),s.lineDashOffset=be(x.lineDashOffset,0),s.lineJoin=be(x.lineJoin,"miter"),s.lineWidth=I,s.strokeStyle=be(x.strokeStyle,a),s.setLineDash(be(x.lineDash,[])),o.usePointStyle){const C={radius:w*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:I},A=l.xPlus(D,v/2),R=E+m;JE(s,C,A,R,o.pointStyleWidth&&v)}else{const C=E+Math.max((f-w)/2,0),A=l.leftForLtr(D,v),R=$i(x.borderRadius);s.beginPath(),Object.values(R).some(P=>P!==0)?Gu(s,{x:A,y:C,w:v,h:w,radius:R}):s.rect(A,C,v,w),s.fill(),I!==0&&s.stroke()}s.restore()},k=function(D,E,x){al(s,x.text,D,E+S/2,u,{strikethrough:x.hidden,textAlign:l.textAlign(x.textAlign)})},_=this.isHorizontal(),N=this._computeTitleHeight();_?g={x:wt(i,this.left+h,this.right-r[0]),y:this.top+h+N,line:0}:g={x:this.left+h,y:wt(i,this.top+N+h,this.bottom-n[0].height),line:0},ak(this.ctx,e.textDirection);const j=S+h;this.legendItems.forEach((D,E)=>{s.strokeStyle=D.fontColor,s.fillStyle=D.fontColor;const x=s.measureText(D.text).width,I=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),C=v+m+x;let A=g.x,R=g.y;l.setWidth(this.width),_?E>0&&A+C+h>this.right&&(R=g.y+=j,g.line++,A=g.x=wt(i,this.left+h,this.right-r[g.line])):E>0&&R+j>this.bottom&&(A=g.x=A+n[g.line].width+h,g.line++,R=g.y=wt(i,this.top+N+h,this.bottom-n[g.line].height));const P=l.x(A);if(b(P,R,D),A=nM(I,A+v+m,_?A+C:this.right,e.rtl),k(l.x(A),R,D),_)g.x+=C+h;else if(typeof D.text!="string"){const fe=u.lineHeight;g.y+=bk(D,fe)+h}else g.y+=j}),lk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=St(n.font),s=pn(n.padding);if(!n.display)return;const i=Hi(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,u=s.top+l;let h,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+u,f=wt(e.align,f,this.right-m);else{const v=this.columnSizes.reduce((w,S)=>Math.max(w,S.height),0);h=u+wt(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=wt(a,f,f+m);o.textAlign=i.textAlign(Lg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,al(o,n.text,g,h,r)}_computeTitleHeight(){const e=this.options.title,n=St(e.font),r=pn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(ji(e,this.left,this.right)&&ji(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],ji(e,s.left,s.left+s.width)&&ji(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!N3(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=T3(s,r);s&&!i&&Pe(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Pe(n.onHover,[e,r,this],this)}else r&&Pe(n.onClick,[e,r,this],this)}}function S3(t,e,n,r,s){const i=I3(r,t,e,n),o=C3(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function I3(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function C3(t,e,n){let r=t;return typeof e.text!="string"&&(r=bk(e,n)),r}function bk(t,e){const n=t.text?t.text.length:0;return e*n}function N3(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var A3={id:"legend",_element:I_,start(t,e,n){const r=t.legend=new I_({ctx:t.ctx,options:n,chart:t});un.configure(t,r,n),un.addBox(t,r)},stop(t){un.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;un.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=pn(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Ek extends fs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=et(r.text)?r.text.length:1;this._padding=pn(r.padding);const i=s*St(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,u,h,f;return this.isHorizontal()?(h=wt(a,r,i),f=n+e,u=i-r):(o.position==="left"?(h=r+e,f=wt(a,s,n),l=It*-.5):(h=i-e,f=wt(a,n,s),l=It*.5),u=s-n),{titleX:h,titleY:f,maxWidth:u,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=St(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(i);al(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:u,textAlign:Lg(n.align),textBaseline:"middle",translation:[o,a]})}}function P3(t,e){const n=new Ek({ctx:t.ctx,options:e,chart:t});un.configure(t,n,e),un.addBox(t,n),t.titleBlock=n}var j3={id:"title",_element:Ek,start(t,e,n){P3(t,n)},stop(t){const e=t.titleBlock;un.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;un.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const da={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=YD(e,u);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Mn(t,e){return e&&(et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Jn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function R3(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function C_(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=St(e.bodyFont),u=St(e.titleFont),h=St(e.footerFont),f=i.length,m=s.length,g=r.length,v=pn(e.padding);let w=v.height,S=0,b=r.reduce((N,j)=>N+j.before.length+j.lines.length+j.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,f&&(w+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),b){const N=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=g*N+(b-g)*l.lineHeight+(b-1)*e.bodySpacing}m&&(w+=e.footerMarginTop+m*h.lineHeight+(m-1)*e.footerSpacing);let k=0;const _=function(N){S=Math.max(S,n.measureText(N).width+k)};return n.save(),n.font=u.string,we(t.title,_),n.font=l.string,we(t.beforeBody.concat(t.afterBody),_),k=e.displayColors?o+2+e.boxPadding:0,we(r,N=>{we(N.before,_),we(N.lines,_),we(N.after,_)}),k=0,n.font=h.string,we(t.footer,_),n.restore(),S+=v.width,{width:S,height:w}}function D3(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function M3(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function L3(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return r==="center"?u=s<=(a+l)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),M3(u,t,e,n)&&(u="center"),u}function N_(t,e,n){const r=n.yAlign||e.yAlign||D3(t,n);return{xAlign:n.xAlign||e.xAlign||L3(t,e,n,r),yAlign:r}}function O3(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function V3(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function A_(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=s+i,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:g}=$i(o);let v=O3(e,a);const w=V3(e,l,u);return l==="center"?a==="left"?v+=u:a==="right"&&(v-=u):a==="left"?v-=Math.max(h,m)+s:a==="right"&&(v+=Math.max(f,g)+s),{x:Tn(v,0,r.width-e.width),y:Tn(w,0,r.height-e.height)}}function Tc(t,e,n){const r=pn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function P_(t){return Mn([],Jn(t))}function F3(t,e,n){return bo(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function j_(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const kk={beforeTitle:Xn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Xn,beforeBody:Xn,beforeLabel:Xn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Se(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Xn,afterBody:Xn,beforeFooter:Xn,footer:Xn,afterFooter:Xn};function Ft(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?kk[e].call(n,r):s}class Am extends fs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new ck(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=F3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Ft(r,"beforeTitle",this,e),i=Ft(r,"title",this,e),o=Ft(r,"afterTitle",this,e);let a=[];return a=Mn(a,Jn(s)),a=Mn(a,Jn(i)),a=Mn(a,Jn(o)),a}getBeforeBody(e,n){return P_(Ft(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return we(e,i=>{const o={before:[],lines:[],after:[]},a=j_(r,i);Mn(o.before,Jn(Ft(a,"beforeLabel",this,i))),Mn(o.lines,Ft(a,"label",this,i)),Mn(o.after,Jn(Ft(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return P_(Ft(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Ft(r,"beforeFooter",this,e),i=Ft(r,"footer",this,e),o=Ft(r,"afterFooter",this,e);let a=[];return a=Mn(a,Jn(s)),a=Mn(a,Jn(i)),a=Mn(a,Jn(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(R3(this.chart,n[l]));return e.filter&&(a=a.filter((h,f,m)=>e.filter(h,f,m,r))),e.itemSort&&(a=a.sort((h,f)=>e.itemSort(h,f,r))),we(a,h=>{const f=j_(e.callbacks,h);s.push(Ft(f,"labelColor",this,h)),i.push(Ft(f,"labelPointStyle",this,h)),o.push(Ft(f,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=da[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=C_(this,r),u=Object.assign({},a,l),h=N_(this.chart,r,u),f=A_(r,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:f}=$i(a),{x:m,y:g}=e,{width:v,height:w}=n;let S,b,k,_,N,j;return i==="center"?(N=g+w/2,s==="left"?(S=m,b=S-o,_=N+o,j=N-o):(S=m+v,b=S+o,_=N-o,j=N+o),k=S):(s==="left"?b=m+Math.max(l,h)+o:s==="right"?b=m+v-Math.max(u,f)-o:b=this.caretX,i==="top"?(_=g,N=_-o,S=b-o,k=b+o):(_=g+w,N=_+o,S=b+o,k=b-o),j=_),{x1:S,x2:b,x3:k,y1:_,y2:N,y3:j}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const u=Hi(r.rtl,this.x,this.width);for(e.x=Tc(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=St(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=i,h=St(i.bodyFont),f=Tc(this,"left",i),m=s.x(f),g=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+g;if(i.usePointStyle){const w={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},S=s.leftForLtr(m,u)+u/2,b=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Kx(e,w,S,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Kx(e,w,S,b)}else{e.lineWidth=ye(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=s.leftForLtr(m,u),S=s.leftForLtr(s.xPlus(m,1),u-2),b=$i(o.borderRadius);Object.values(b).some(k=>k!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Gu(e,{x:w,y:v,w:u,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Gu(e,{x:S,y:v+1,w:u-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(w,v,u,l),e.strokeRect(w,v,u,l),e.fillStyle=o.backgroundColor,e.fillRect(S,v+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=r,f=St(r.bodyFont);let m=f.lineHeight,g=0;const v=Hi(r.rtl,this.x,this.width),w=function(x){n.fillText(x,v.x(e.x+g),e.y+m/2),e.y+=m+i},S=v.textAlign(o);let b,k,_,N,j,D,E;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Tc(this,S,r),n.fillStyle=r.bodyColor,we(this.beforeBody,w),g=a&&S!=="right"?o==="center"?u/2+h:u+2+h:0,N=0,D=s.length;N<D;++N){for(b=s[N],k=this.labelTextColors[N],n.fillStyle=k,we(b.before,w),_=b.lines,a&&_.length&&(this._drawColorBox(n,e,N,v,r),m=Math.max(f.lineHeight,l)),j=0,E=_.length;j<E;++j)w(_[j]),m=f.lineHeight;we(b.after,w)}g=0,m=f.lineHeight,we(this.afterBody,w),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Hi(r.rtl,this.x,this.width);for(e.x=Tc(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=St(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=r,{topLeft:f,topRight:m,bottomLeft:g,bottomRight:v}=$i(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+u-m,l),n.quadraticCurveTo(a+u,l,a+u,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+u,l+h-v),n.quadraticCurveTo(a+u,l+h,a+u-v,l+h),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=da[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=C_(this,e),l=Object.assign({},o,this._size),u=N_(n,e,l),h=A_(e,l,u,n);(s._to!==h.x||i._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=pn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),ak(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),lk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),i=!$u(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!$u(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=da[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}me(Am,"positioners",da);var U3={id:"tooltip",_element:Am,positioners:da,afterInit(t,e,n){n&&(t.tooltip=new Am({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:kk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const B3=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function z3(t,e,n,r){const s=t.indexOf(e);if(s===-1)return B3(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const W3=(t,e)=>t===null?null:Tn(Math.round(t),0,e);function R_(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Pm extends Eo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Se(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:z3(r,e,be(n,e),this._addedLabels),W3(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return R_.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}me(Pm,"id","category"),me(Pm,"defaults",{ticks:{callback:R_}});function $3(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:f,includeBounds:m}=t,g=i||1,v=h-1,{min:w,max:S}=e,b=!Se(o),k=!Se(a),_=!Se(u),N=(S-w)/(f+1);let j=Vx((S-w)/v/g)*g,D,E,x,I;if(j<1e-14&&!b&&!k)return[{value:w},{value:S}];I=Math.ceil(S/j)-Math.floor(w/j),I>v&&(j=Vx(I*j/v/g)*g),Se(l)||(D=Math.pow(10,l),j=Math.ceil(j*D)/D),s==="ticks"?(E=Math.floor(w/j)*j,x=Math.ceil(S/j)*j):(E=w,x=S),b&&k&&i&&HD((a-o)/i,j/1e3)?(I=Math.round(Math.min((a-o)/j,h)),j=(a-o)/I,E=o,x=a):_?(E=b?o:E,x=k?a:x,I=u-1,j=(x-E)/I):(I=(x-E)/j,Yc(I,Math.round(I),j/1e3)?I=Math.round(I):I=Math.ceil(I));const C=Math.max(Fx(j),Fx(E));D=Math.pow(10,Se(l)?C:l),E=Math.round(E*D)/D,x=Math.round(x*D)/D;let A=0;for(b&&(m&&E!==o?(n.push({value:o}),E<o&&A++,Yc(Math.round((E+A*j)*D)/D,o,D_(o,N,t))&&A++):E<o&&A++);A<I;++A){const R=Math.round((E+A*j)*D)/D;if(k&&R>a)break;n.push({value:R})}return k&&m&&x!==a?n.length&&Yc(n[n.length-1].value,a,D_(a,N,t))?n[n.length-1].value=a:n.push({value:a}):(!k||x===a)&&n.push({value:x}),n}function D_(t,e,{horizontal:n,minRotation:r}){const s=Vs(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class H3 extends Eo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Se(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=rs(s),u=rs(i);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=$3(s,i);return e.bounds==="ticks"&&qD(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return XE(e,this.chart.options.locale,this.options.ticks.format)}}class jm extends H3{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=mn(e)?e:0,this.max=mn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Vs(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}me(jm,"id","linear"),me(jm,"defaults",{ticks:{callback:ZE.formatters.numeric}});const Ud={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wt=Object.keys(Ud);function M_(t,e){return t-e}function L_(t,e){if(Se(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),mn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Ku(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function O_(t,e,n,r){const s=Wt.length;for(let i=Wt.indexOf(t);i<s-1;++i){const o=Ud[Wt[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Wt[i]}return Wt[s-1]}function q3(t,e,n,r,s){for(let i=Wt.length-1;i>=Wt.indexOf(n);i--){const o=Wt[i];if(Ud[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Wt[n?Wt.indexOf(n):0]}function K3(t){for(let e=Wt.indexOf(t)+1,n=Wt.length;e<n;++e)if(Ud[Wt[e]].common)return Wt[e]}function V_(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Mg(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function G3(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function F_(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:G3(t,r,s,n)}class Xu extends Eo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new dL._date(e.adapters.date);s.init(n),Ia(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:L_(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=mn(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=mn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=JD(s,i,o);return this._unit=n.unit||(r.autoSkip?O_(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):q3(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:K3(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),F_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Tn(n,0,o),r=Tn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||O_(i.minUnit,n,r,this._getLabelCapacity(n)),a=be(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,u=Ku(l)||l===!0,h={};let f=n,m,g;if(u&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,u?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(m=f,g=0;m<r;m=+e.add(m,a,o),g++)V_(h,m,v);return(m===r||s.bounds==="ticks"||g===1)&&V_(h,m,v),Object.keys(h).sort(M_).map(w=>+w)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Pe(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],f=u&&a[u],m=r[n],g=u&&f&&m&&m.major;return this._adapter.format(e,s||(g?f:h))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Vs(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,F_(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(L_(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return KE(e.sort(M_))}}me(Xu,"id","time"),me(Xu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Sc(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Sm(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Sm(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const u=o-i;return u?a+(l-a)*(e-i)/u:a}class U_ extends Xu{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Sc(n,this.min),this._tableRange=Sc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],u=s[o],Math.round((h+l)/2)!==u&&i.push({time:u,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Sc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Sc(this._table,r*this._tableRange+this._minPos,!0)}}me(U_,"id","timeseries"),me(U_,"defaults",Xu.defaults);const Tk="label";function B_(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Y3(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Sk(t,e){t.labels=e}function Ik(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Tk;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function Q3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tk;const n={labels:[],datasets:[]};return Sk(n,t.labels),Ik(n,t.datasets,e),n}function X3(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:f,...m}=t,g=$.useRef(null),v=$.useRef(null),w=()=>{g.current&&(v.current=new Fd(g.current,{type:o,data:Q3(a,i),options:l&&{...l},plugins:u}),B_(e,v.current))},S=()=>{B_(e,null),v.current&&(v.current.destroy(),v.current=null)};return $.useEffect(()=>{!s&&v.current&&l&&Y3(v.current,l)},[s,l]),$.useEffect(()=>{!s&&v.current&&Sk(v.current.config.data,a.labels)},[s,a.labels]),$.useEffect(()=>{!s&&v.current&&a.datasets&&Ik(v.current.config.data,a.datasets,i)},[s,a.datasets]),$.useEffect(()=>{v.current&&(s?(S(),setTimeout(w)):v.current.update(f))},[s,l,a.labels,a.datasets,f]),$.useEffect(()=>{v.current&&(S(),setTimeout(w))},[o]),$.useEffect(()=>(w(),()=>S()),[]),zm.createElement("canvas",{ref:g,role:"img",height:n,width:r,...m},h)}const Z3=$.forwardRef(X3);function J3(t,e){return Fd.register(e),$.forwardRef((n,r)=>zm.createElement(Z3,{...n,ref:r,type:t}))}const eO=J3("bar",Qc),bn={BLUE:"blue",GREEN:"green",PURPLE:"purple",RED:"red",INDIGO:"indigo"},cl={[bn.BLUE]:{name:"Blue",primary:"#3b82f6",primaryDark:"#2563eb",primaryLight:"#60a5fa"},[bn.GREEN]:{name:"Green",primary:"#22c55e",primaryDark:"#16a34a",primaryLight:"#4ade80"},[bn.PURPLE]:{name:"Purple",primary:"#a855f7",primaryDark:"#9333ea",primaryLight:"#c084fc"},[bn.RED]:{name:"Red",primary:"#ef4444",primaryDark:"#dc2626",primaryLight:"#f87171"},[bn.INDIGO]:{name:"Indigo",primary:"#6366f1",primaryDark:"#4f46e5",primaryLight:"#818cf8"}},Rm=t=>((!t||!Object.values(bn).includes(t))&&(t=bn.BLUE),document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),window.dispatchEvent(new CustomEvent("themeChanged",{detail:{theme:t,colors:cl[t]}})),t),Ck=()=>{const t=localStorage.getItem("theme"),e=document.documentElement.getAttribute("data-theme");return t||e||bn.BLUE},tO=()=>{const t=localStorage.getItem("theme")||bn.BLUE;return Rm(t)},nO=t=>cl[t]||cl[bn.BLUE],z_=(t=null)=>{const e=t||Ck(),n=nO(e);return{primary:n.primary,primaryWithAlpha:n.primary+"80",primaryLight:n.primaryLight,primaryDark:n.primaryDark,gradient:[n.primaryLight,n.primary,n.primaryDark]}},rO=()=>Object.entries(bn).map(([t,e])=>({key:t,value:e,name:cl[e].name,colors:cl[e]}));Fd.register(Pm,jm,Jc,j3,U3,A3);const Dm=({data:t,options:e,title:n,loading:r=!1,error:s=null,sheetName:i="",rawData:o=[]})=>{var N,j,D,E,x,I,C,A,R,P,fe,le,X,ce,z,Y,L,H,Q,te,Ie;const[a,l]=$.useState(null),[u,h]=$.useState(r),[f,m]=$.useState(null),g=$.useRef(null),[v,w]=$.useState(z_()),S=["issuesPost0710","vehicleBreakdown","fuelStation","post06AMOpenIssues"].includes(i);$.useEffect(()=>{const V=()=>{w(z_())};return window.addEventListener("themeChanged",V),()=>window.removeEventListener("themeChanged",V)},[]),$.useEffect(()=>{h(r)},[r]);const k={...e,onClick:(V,Z)=>{if(Z.length>0){const Me=Z[0].index,Ye=Z[0].datasetIndex,Vt=t.datasets[Ye],Qe=t.labels[Me],He=Vt.data[Me];if(S&&Vt.issueBreakdowns&&Vt.issueBreakdowns[Qe])l({type:"issue",zone:Qe,title:n,sheetName:i,breakdown:Vt.issueBreakdowns[Qe],total:He,details:Vt.vehicleDetails?Vt.vehicleDetails[Qe]:null});else{const Xe=o.filter(ve=>String(ve.Zone)===String(Qe));if(i==="glitchPercentage"){let ve=0;typeof He=="object"&&He!==null&&He.y!==void 0?ve=He.y:typeof He=="number"?ve=He:Xe.length>0&&(ve=Xe[0].Percentage||Xe[0].Count||0),l({type:"percentage",zone:Qe,title:n,sheetName:i,total:typeof ve=="number"?ve:parseFloat(ve)||0,rawData:Xe,details:null})}else if(i==="vehicleNumbers")l({type:"vehicleNumbers",zone:Qe,title:n,sheetName:i,total:He,rawData:Xe,details:null});else if(i==="sphereWorkshopExit"){const ve=Qe;l({type:"workshop",ward:ve,title:n,sheetName:i,total:He,rawData:o.filter(ee=>ee.Ward===ve),details:Vt.vehicleDetails?Vt.vehicleDetails[Qe]:null})}else if(i==="vehicleBreakdown"){let ve=null;const gn=Xe.find(ee=>ee.Details&&Array.isArray(ee.Details)&&ee.Details.length>0);gn?ve=gn.Details.map(ee=>({vehicleNo:ee.vehicleNo,breakdownTime:ee.breakdownTime,issue:ee.issue,spareStatus:ee.spareStatus,spareTime:ee.spareTime,ward:ee.ward,date:gn.Date})):ve=Xe.map(ee=>({vehicleNo:ee["Vehicle No."]||`Vehicle ${Math.random().toString(36).substr(2,5)}`,breakdownTime:ee["Breakdown Time"]||"Time not specified",issue:ee.Issue||"Unknown Issue",spareStatus:ee["Spare/OK"]||"Unknown",spareTime:ee["Spare/OK Time"]||"",ward:ee.Ward||"",date:ee.Date||""})).filter(ee=>ee.vehicleNo),l({type:"vehicleBreakdown",zone:Qe,title:n,sheetName:i,total:He,rawData:Xe,details:ve&&ve.length>0?ve:null})}else if(i==="fuelStation"||i==="issuesPost0710"||i==="post06AMOpenIssues"){let ve=null;const gn=Xe.find(ee=>ee.Details&&Array.isArray(ee.Details)&&ee.Details.length>0);gn?ve=gn.Details:ve=Xe.map(ee=>({vehicleNo:ee["Vehicle No."]||ee["Vehicle Number"]||ee.Vehicle||`Vehicle ${Math.random().toString(36).substr(2,5)}`,time:ee.Time||ee["Late Time"]||ee["Arrival Time"]||ee["Departure Time"]||ee["Fuel Station Time"]||"Time not specified",issue:ee.Issue||ee.Reason||ee.Type||(i==="fuelStation"?"Fuel Station Visit":"Late Vehicle"),status:ee.Status||ee["Spare/OK"]||"Unknown",breakdownTime:ee["Breakdown Time"]||"",spareTime:ee["Spare/OK Time"]||ee["Spare Time"]||"",spareStatus:ee["Spare Status"]||"",remarks:ee.Remarks||ee.Notes||""})).filter(ee=>ee.vehicleNo&&ee.time),l({type:"timing",zone:Qe,title:n,sheetName:i,total:He,rawData:Xe,details:ve&&ve.length>0?ve:null})}else l({type:"general",zone:Qe,title:n,sheetName:i,total:He,rawData:Xe,details:null})}}},onHover:(V,Z)=>{m(Z.length>0?Z[0].index:null)},plugins:{...e==null?void 0:e.plugins,legend:{...(N=e==null?void 0:e.plugins)==null?void 0:N.legend,labels:{...(D=(j=e==null?void 0:e.plugins)==null?void 0:j.legend)==null?void 0:D.labels,usePointStyle:!0,pointStyle:"circle",font:{size:12,weight:"500"},color:"#374151"}},tooltip:{...(E=e==null?void 0:e.plugins)==null?void 0:E.tooltip,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#1f2937",bodyColor:"#374151",borderColor:v.primary,borderWidth:1,cornerRadius:12,displayColors:!0,usePointStyle:!0,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{...(I=(x=e==null?void 0:e.plugins)==null?void 0:x.tooltip)==null?void 0:I.callbacks,title:V=>i==="sphereWorkshopExit"?`Zone ${V[0].label}`:`Zone ${V[0].label}`,label:V=>{const Z=V.parsed.y,Me=i==="glitchPercentage"?"%":"";if(i==="vehicleBreakdown")return`${Z} ${Z===1?"Vehicle":"Vehicles"} Breakdown`;if(i==="sphereWorkshopExit"){const Ye=V.label,Vt=V.dataset;if(Vt.vehicleDetails&&Vt.vehicleDetails[Ye]){const Qe=Vt.vehicleDetails[Ye],He=[`Vehicles: ${Z}`],Xe=[...new Set(Qe.map(ve=>ve.zone||ve.zones).filter(Boolean))];return Xe.length>0&&He.push(`Zones: ${Xe.join(", ")}`),He}return[`Vehicles: ${Z}`]}return`${V.dataset.label}: ${Z}${Me}`}}}},scales:{...e==null?void 0:e.scales,x:{...(C=e==null?void 0:e.scales)==null?void 0:C.x,grid:{...(R=(A=e==null?void 0:e.scales)==null?void 0:A.x)==null?void 0:R.grid,color:"rgba(156, 163, 175, 0.2)",borderColor:"rgba(156, 163, 175, 0.3)"},ticks:{...(fe=(P=e==null?void 0:e.scales)==null?void 0:P.x)==null?void 0:fe.ticks,color:"#6b7280",font:{size:11,weight:"500"}}},y:{...(le=e==null?void 0:e.scales)==null?void 0:le.y,grid:{...(ce=(X=e==null?void 0:e.scales)==null?void 0:X.y)==null?void 0:ce.grid,color:"rgba(156, 163, 175, 0.2)",borderColor:"rgba(156, 163, 175, 0.3)"},ticks:{...(Y=(z=e==null?void 0:e.scales)==null?void 0:z.y)==null?void 0:Y.ticks,color:"#6b7280",font:{size:11,weight:"500"}}}},animation:{duration:1e3,easing:"easeInOutQuart"},interaction:{intersect:!1,mode:"index"}};if(u)return c.jsxs("div",{className:"uniform-chart-card group",children:[c.jsxs("div",{className:"card-header",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon",children:c.jsx("svg",{className:"w-5 h-5 text-white animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"card-title",children:n}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator warning"}),c.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"Loading chart data..."})]})]})]}),c.jsxs("div",{className:"chart-metric-badge",children:[c.jsx("svg",{className:"w-3 h-3 mr-1 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Loading..."]})]}),c.jsx("div",{className:"chart-container",children:c.jsx("div",{className:"chart-area chart-loading",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"chart-loading-spinner mb-4"}),c.jsx("p",{className:"text-gray-600 font-medium",children:"Loading Chart..."}),c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Preparing visualization"})]})})})]});if(s)return c.jsxs("div",{className:"uniform-chart-card group",children:[c.jsxs("div",{className:"card-header",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon bg-gradient-to-br from-red-500 to-red-600",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"card-title",children:n}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator error"}),c.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"Error loading data"})]})]})]}),c.jsxs("div",{className:"chart-metric-badge bg-red-50 text-red-700 border-red-200",children:[c.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Error"]})]}),c.jsx("div",{className:"chart-container",children:c.jsx("div",{className:"chart-area flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-red-500 mb-4",children:c.jsx("svg",{className:"w-16 h-16 mx-auto opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("p",{className:"text-red-600 font-semibold text-lg",children:"Error Loading Chart"}),c.jsx("p",{className:"text-gray-500 text-sm mt-2 max-w-md mx-auto",children:s}),c.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Retry"})]})})})]});if(!t||!t.labels||t.labels.length===0)return c.jsxs("div",{className:"uniform-chart-card group",children:[c.jsx("div",{className:"card-header",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon bg-gradient-to-br from-gray-400 to-gray-500",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"card-title mobile-title-truncate",title:n,children:n}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator error"}),c.jsx("span",{className:"responsive-text-xs text-gray-500 ml-2",children:"No data available"})]})]})]})}),c.jsx("div",{className:"chart-container",children:c.jsx("div",{className:"chart-area flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 mb-4",children:c.jsx("svg",{className:"w-20 h-20 mx-auto opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsx("p",{className:"text-gray-600 font-semibold text-lg",children:"No Data Available"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Chart will appear when data is loaded"}),c.jsx("div",{className:"mt-4",children:c.jsx("span",{className:"chart-metric-badge bg-gray-50 text-gray-600 border-gray-200",children:"Waiting for data..."})})]})})})]});const _=((L=t==null?void 0:t.labels)==null?void 0:L.length)||0;return(Q=(H=t==null?void 0:t.datasets)==null?void 0:H[0])!=null&&Q.data&&Math.max(...t.datasets[0].data),(Ie=(te=t==null?void 0:t.datasets)==null?void 0:te[0])!=null&&Ie.data&&t.datasets[0].data.reduce((V,Z)=>V+Z,0),c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"uniform-chart-card group",children:[c.jsxs("div",{className:"card-header",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"card-title mobile-title-truncate",title:n,children:n}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator success"}),c.jsxs("span",{className:"responsive-text-xs text-gray-500 ml-2",children:[_," zones "]})]})]})]}),c.jsx("div",{className:"flex items-center space-x-2 md:space-x-3"})]}),c.jsxs("div",{className:"chart-container mobile-chart-wrapper",children:[c.jsx("div",{className:"chart-area",children:c.jsx(eO,{ref:g,data:t,options:k})}),c.jsxs("div",{className:"click-instruction mobile-click-instruction md:click-instruction",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.121 2.122"})}),c.jsx("span",{className:"hidden sm:inline",children:"Click bars for detailed view"}),c.jsx("span",{className:"sm:hidden",children:"Tap for details"})]})]})]}),a&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:c.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-2xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center p-3 sm:p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 flex items-center",children:[c.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg mr-2 sm:mr-3 flex items-center justify-center",children:c.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsx("span",{className:"truncate",children:a.type==="workshop"?`Ward ${a.ward} - ${a.title}`:`Zone ${a.zone} - ${a.title}`})]}),c.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Detailed breakdown and information"})]}),c.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-lg transition-colors touch-manipulation mt-2 sm:mt-0",children:c.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-3 sm:p-6 overflow-y-auto max-h-[calc(95vh-120px)] sm:max-h-[calc(90vh-120px)]",children:[c.jsx("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg sm:rounded-xl border border-blue-200",children:c.jsxs("div",{children:[c.jsx("h4",{className:"text-base sm:text-lg font-semibold text-blue-800",children:"Summary"}),c.jsx("p",{className:"text-xs sm:text-sm text-blue-600",children:a.type==="workshop"?`Ward ${a.ward} overview`:`Zone ${a.zone} overview`})]})}),a.type==="percentage"&&a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Route Coverage Details (",a.rawData.length," records)"]}),c.jsx("div",{className:"space-y-4",children:a.rawData.map((V,Z)=>c.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200 hover:shadow-md transition-shadow",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Route Coverage"}),c.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[V.Percentage||V.Count,"%"]})]}),c.jsxs("div",{className:"w-16 h-16 relative",children:[c.jsxs("svg",{className:"w-16 h-16 transform -rotate-90",viewBox:"0 0 36 36",children:[c.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),c.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:`${V.Percentage||V.Count}, 100`})]}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("span",{className:"text-xs font-semibold text-purple-600",children:[Math.round(V.Percentage||V.Count),"%"]})})]})]}),c.jsxs("div",{className:"space-y-2",children:[V.SoftwarePercentage!==null&&V.SoftwarePercentage!==void 0&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Software %:"}),c.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[V.SoftwarePercentage,"%"]})]}),V.ActualPercentage!==null&&V.ActualPercentage!==void 0&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Actual %:"}),c.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[V.ActualPercentage,"%"]})]}),V.Date&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Date:"}),c.jsx("span",{className:"text-sm text-gray-600",children:new Date(V.Date).toLocaleDateString()})]})]})]}),V.Remarks&&c.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Remarks:"}),c.jsx("p",{className:"mt-1 text-sm text-gray-600",children:V.Remarks})]})]},Z))})]}),a.type==="vehicleNumbers"&&a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Vehicle Numbers Details (",a.rawData.length," records)"]}),c.jsx("div",{className:"space-y-4",children:a.rawData.map((V,Z)=>c.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Date:"}),c.jsx("span",{className:"text-sm text-gray-600",children:new Date(V.Date).toLocaleDateString()})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Vehicles:"}),c.jsx("span",{className:"text-sm font-semibold text-green-600",children:V.TotalVehicles})]})]}),c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Vehicle Numbers:"}),c.jsx("div",{className:"mt-1 p-2 bg-white rounded border text-sm text-gray-600 break-words",children:V.VehicleNumbers||"Not specified"})]})})]})},Z))})]}),a.type==="vehicleBreakdown"&&a.details&&a.details.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Vehicle Breakdown Details (",a.details.length," vehicles)"]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.details.map((V,Z)=>c.jsx("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-semibold text-gray-800",children:V.vehicleNo})]}),V.spareStatus&&c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${V.spareStatus.toLowerCase().includes("ok")||V.spareStatus.toLowerCase().includes("resolved")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:V.spareStatus})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[V.breakdownTime&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Breakdown Time:"}),c.jsx("span",{className:"ml-2 text-red-600 font-semibold",children:V.breakdownTime})]}),V.issue&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Issue:"}),c.jsx("span",{className:"ml-2 text-orange-600",children:V.issue})]}),V.spareTime&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Spare/OK Time:"}),c.jsx("span",{className:"ml-2 text-blue-600 font-semibold",children:V.spareTime})]}),V.ward&&c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-3 h-3 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{className:"font-medium text-gray-700",children:"Ward:"}),c.jsx("span",{className:"ml-2 text-purple-600",children:V.ward})]}),V.date&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Date:"}),c.jsx("span",{className:"ml-2 text-gray-600",children:new Date(V.date).toLocaleDateString()})]})]})]})},Z))})]}),a.type==="issue"&&a.breakdown&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Issue Breakdown"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(a.breakdown).map(([V,Z])=>Z>0&&c.jsxs("div",{className:"flex justify-between items-center p-4 bg-red-50 rounded-lg border border-red-200",children:[c.jsx("span",{className:"font-medium text-gray-700",children:V}),c.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold",children:Z})]},V))})]}),a.type==="timing"&&a.details&&a.details.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.sheetName==="fuelStation"?"Fuel Station Visit Details":"Late Vehicle Timing Details"," (",a.details.length," vehicles)"]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.details.map((V,Z)=>c.jsx("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-semibold text-gray-800",children:V.vehicleNo||`Vehicle #${Z+1}`})]}),V.status&&c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${V.status.toLowerCase().includes("ok")||V.status.toLowerCase().includes("resolved")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:V.status})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[V.time&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:a.sheetName==="fuelStation"?"Fuel Station Time:":"Late Time:"}),c.jsx("span",{className:"ml-2 text-orange-600 font-semibold",children:V.time})]}),V.breakdownTime&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Breakdown Time:"}),c.jsx("span",{className:"ml-2 text-red-600 font-semibold",children:V.breakdownTime})]}),V.spareTime&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Spare Time:"}),c.jsx("span",{className:"ml-2 text-blue-600 font-semibold",children:V.spareTime})]})]}),V.issue&&c.jsxs("div",{className:"pt-2 border-t border-orange-200",children:[c.jsx("span",{className:"font-medium text-gray-700",children:a.sheetName==="fuelStation"?"Reason:":"Issue:"}),c.jsx("span",{className:"ml-2 text-gray-600",children:V.issue})]}),V.spareStatus&&V.spareStatus!==V.status&&c.jsxs("div",{className:"pt-1",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Spare Status:"}),c.jsx("span",{className:"ml-2 text-gray-600",children:V.spareStatus})]}),V.remarks&&c.jsxs("div",{className:"pt-2 border-t border-orange-200",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Remarks:"}),c.jsx("p",{className:"mt-1 text-gray-600 text-sm",children:V.remarks})]})]})},Z))})]}),a.type==="general"&&a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Detailed Records (",a.rawData.length," entries)"]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:Object.keys(a.rawData[0]).map(V=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:V},V))})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:a.rawData.map((V,Z)=>c.jsx("tr",{className:"hover:bg-gray-50",children:Object.entries(V).map(([Me,Ye])=>c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 border-b",children:Ye||"-"},Me))},Z))})]})})]}),a.type==="workshop"&&a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Ward ",a.ward," Vehicle Details (",a.rawData.length," vehicles)"]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.rawData.map((V,Z)=>c.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("span",{className:"font-semibold text-gray-800",children:["Vehicle #",Z+1]})]}),c.jsx("div",{className:"text-xs text-gray-500",children:V.Date&&new Date(V.Date).toLocaleDateString()})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[V.Ward&&c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-3 h-3 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{className:"font-medium text-gray-700",children:"Ward:"}),c.jsx("span",{className:"ml-2 text-purple-600 font-semibold",children:V.Ward})]}),V["Permanent Vehicle Number"]&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Permanent Vehicle:"}),c.jsx("span",{className:"ml-2 text-blue-600 font-semibold",children:V["Permanent Vehicle Number"]})]}),V["Spare Vehicle Number"]&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Spare Vehicle:"}),c.jsx("span",{className:"ml-2 text-green-600 font-semibold",children:V["Spare Vehicle Number"]})]}),V["Workshop Departure Time"]&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Workshop Departure:"}),c.jsx("span",{className:"ml-2 text-orange-600 font-semibold",children:V["Workshop Departure Time"]})]}),V.Zone&&c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-3 h-3 mr-2 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{className:"font-medium text-gray-700",children:"Zone:"}),c.jsx("span",{className:"ml-2 text-indigo-600 font-semibold",children:V.Zone})]})]})]})},Z))})]}),a.details&&a.details.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Vehicle Details"]}),c.jsx("div",{className:"space-y-3",children:a.details.map((V,Z)=>c.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:Object.entries(V).map(([Me,Ye])=>Ye&&c.jsxs("div",{children:[c.jsxs("span",{className:"font-medium text-gray-700 capitalize",children:[Me.replace(/([A-Z])/g," $1").trim(),":"]}),c.jsx("span",{className:"ml-2 text-gray-600",children:Ye})]},Me))})},Z))})]}),a.type==="timing"&&(!a.details||a.details.length===0)&&a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.sheetName==="fuelStation"?"Fuel Station Records":"Late Vehicle Records"," (",a.rawData.length," entries)"]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[c.jsx("thead",{className:"bg-orange-50",children:c.jsx("tr",{children:Object.keys(a.rawData[0]).map(V=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-700 uppercase tracking-wider border-b",children:V},V))})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:a.rawData.map((V,Z)=>c.jsx("tr",{className:"hover:bg-orange-50",children:Object.entries(V).map(([Me,Ye])=>c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 border-b",children:typeof Ye=="object"&&Ye!==null?JSON.stringify(Ye):Ye||"-"},Me))},Z))})]})})]}),(a.type==="general"&&(!a.rawData||a.rawData.length===0)||a.type==="timing"&&(!a.details||a.details.length===0)&&(!a.rawData||a.rawData.length===0)||a.type==="percentage"&&(!a.rawData||a.rawData.length===0))&&c.jsxs("div",{className:"text-center text-gray-500 py-8",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("p",{className:"text-lg font-medium",children:"No detailed data available"}),c.jsxs("p",{className:"text-sm",children:["No records found for Zone ",a.zone]})]})]}),c.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between items-center",children:[c.jsxs("div",{className:"text-sm text-gray-500",children:["Data for Zone ",a.zone,"  ",a.title]}),c.jsx("button",{onClick:()=>l(null),className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg",children:"Close"})]})]})})]})},sO=({selectedDate:t,setSelectedDate:e,selectedZone:n,setSelectedZone:r,availableZones:s,tripCountFilter:i,setTripCountFilter:o,showTripCountFilter:a=!1,onRefresh:l,dateRange:u,setDateRange:h,quickDate:f,setQuickDate:m})=>c.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-3 sm:p-4 lg:p-6 mb-4 sm:mb-6 lg:mb-8 backdrop-blur-sm bg-white/90",children:[c.jsxs("div",{className:"flex items-center mb-3 sm:mb-4",children:[c.jsx("div",{className:"flex items-center justify-center w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg mr-2 sm:mr-3",children:c.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),c.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800",children:"Filters & Controls"})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3 lg:gap-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full lg:w-auto",children:[c.jsx("label",{htmlFor:"quick-date",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Date:"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[c.jsx("input",{id:"quick-date",type:"date",value:f||"",onChange:g=>{m(g.target.value),g.target.value&&h({from:"",to:""})},className:"border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm w-full sm:w-40 min-h-[44px] touch-manipulation"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>{const g=new Date().toISOString().split("T")[0];m(g),h({from:"",to:""})},className:"px-3 py-2 text-xs font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100 transition-colors min-h-[44px] touch-manipulation flex-1 sm:flex-none",children:"Today"}),c.jsx("button",{onClick:()=>{const g=new Date;g.setDate(g.getDate()-1);const v=g.toISOString().split("T")[0];m(v),h({from:"",to:""})},className:"px-3 py-2 text-xs font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100 transition-colors min-h-[44px] touch-manipulation flex-1 sm:flex-none",children:"Yesterday"})]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full lg:w-auto",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Range:"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[c.jsx("input",{id:"from-date",type:"date",value:(u==null?void 0:u.from)||"",onChange:g=>{h(v=>({...v,from:g.target.value})),g.target.value&&m("")},className:"border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm w-full sm:w-36 min-h-[44px] touch-manipulation",placeholder:"From"}),c.jsx("span",{className:"text-gray-500 text-center sm:text-left",children:"to"}),c.jsx("input",{id:"to-date",type:"date",value:(u==null?void 0:u.to)||"",onChange:g=>{h(v=>({...v,to:g.target.value})),g.target.value&&m("")},className:"border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm w-full sm:w-36 min-h-[44px] touch-manipulation",placeholder:"To"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full lg:w-auto",children:[c.jsx("label",{htmlFor:"zone-select",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Zone:"}),c.jsxs("select",{id:"zone-select",value:n,onChange:g=>r(g.target.value),className:"border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm w-full sm:w-32 min-h-[44px] touch-manipulation",children:[c.jsx("option",{value:"",children:"All Zones"}),s.map(g=>c.jsxs("option",{value:g,children:["Zone ",g]},g))]})]}),a&&c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full lg:w-auto",children:[c.jsx("label",{htmlFor:"trip-count-select",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Trips:"}),c.jsxs("select",{id:"trip-count-select",value:i||"all",onChange:g=>o(g.target.value),className:"border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm w-full sm:w-28 min-h-[44px] touch-manipulation",children:[c.jsx("option",{value:"all",children:"All Trips"}),c.jsx("option",{value:"0",children:"0 Trips"}),c.jsx("option",{value:"1",children:"1 Trip"}),c.jsx("option",{value:"2",children:"2 Trips"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full lg:w-auto lg:ml-auto",children:[c.jsxs("button",{onClick:l,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-2 min-h-[44px] touch-manipulation",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),((u==null?void 0:u.from)||(u==null?void 0:u.to)||f||n||a&&i&&i!=="all")&&c.jsxs("button",{onClick:()=>{h({from:"",to:""}),m(""),r(""),a&&o&&o("all")},className:"bg-gray-100 hover:bg-red-100 text-gray-700 hover:text-red-600 font-medium py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-2 min-h-[44px] touch-manipulation",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear All"]})]})]}),((u==null?void 0:u.from)||(u==null?void 0:u.to)||f||n||a&&i&&i!=="all")&&c.jsx("div",{className:"mt-3 sm:mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 text-sm",children:[c.jsx("span",{className:"font-medium text-blue-800 whitespace-nowrap",children:"Active Filters:"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[((u==null?void 0:u.from)||(u==null?void 0:u.to))&&c.jsxs("span",{className:"px-2 py-1 bg-white text-blue-700 rounded text-xs border border-blue-200 break-all",children:["Range: ",u!=null&&u.from?new Date(u.from).toLocaleDateString():"Start"," - ",u!=null&&u.to?new Date(u.to).toLocaleDateString():"End"]}),f&&c.jsxs("span",{className:"px-2 py-1 bg-white text-blue-700 rounded text-xs border border-blue-200",children:["Date: ",new Date(f).toLocaleDateString()]}),n&&c.jsxs("span",{className:"px-2 py-1 bg-white text-blue-700 rounded text-xs border border-blue-200",children:["Zone: ",n]}),a&&i&&i!=="all"&&c.jsxs("span",{className:"px-2 py-1 bg-white text-blue-700 rounded text-xs border border-blue-200",children:["Trips: ",i]})]})]})})]}),iO="/vehicleReportDashboard/assets/apricity-spabbHhS.png",oO="/vehicleReportDashboard/assets/imc1-BJsiSDh7.png",aO=({isOpen:t,onClose:e,user:n,onLogin:r,onLogout:s,onShowAdminPanel:i,availableZones:o=[]})=>{if($.useEffect(()=>{const l=u=>{u.key==="Escape"&&e()};return t&&(document.addEventListener("keydown",l),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",l),document.body.style.overflow="unset"}},[t,e]),!t)return null;const a=l=>{l.target===l.currentTarget&&e()};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mobile-nav-overlay",onClick:a,"aria-hidden":"true"}),c.jsxs("nav",{className:`mobile-nav-menu ${t?"open":"closed"}`,children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-blue-700",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-bold text-lg",children:"Menu"}),c.jsx("p",{className:"text-blue-200 text-sm",children:"Navigation"})]})]}),c.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-lg bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors duration-200 touch-manipulation","aria-label":"Close menu",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto mobile-scroll",children:[n&&c.jsxs("div",{className:"p-6 border-b border-blue-700",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-white font-semibold",children:n.name}),c.jsx("p",{className:"text-blue-200 text-sm capitalize",children:n.role}),c.jsx("p",{className:"text-blue-300 text-xs",children:n.email})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),c.jsx("span",{className:"text-green-300 text-sm",children:"Active Session"})]})]}),c.jsxs("div",{className:"py-4",children:[c.jsx("button",{onClick:e,className:"mobile-nav-item",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"})]}),"Dashboard"]})}),c.jsx("button",{onClick:e,className:"mobile-nav-item",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Vehicle Reports"]})}),o.length>0&&c.jsxs("div",{className:"px-6 py-3 border-b border-blue-700",children:[c.jsx("h5",{className:"text-blue-200 text-sm font-medium mb-2",children:"Available Zones"}),c.jsxs("div",{className:"text-white text-sm",children:[o.slice(0,3).join(", "),o.length>3&&` +${o.length-3} more`]})]}),(n==null?void 0:n.role)==="admin"&&c.jsx("button",{onClick:()=>{i(),e()},className:"mobile-nav-item",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Admin Panel"]})})]})]}),c.jsxs("div",{className:"p-6 border-t border-blue-700",children:[n?c.jsxs("button",{onClick:()=>{s(),e()},className:"w-full flex items-center justify-center px-4 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors duration-200 touch-manipulation",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]}):c.jsxs("button",{onClick:()=>{r(),e()},className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors duration-200 touch-manipulation",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign In"]}),c.jsxs("div",{className:"mt-4 text-center",children:[c.jsx("p",{className:"text-blue-300 text-xs",children:"IMC ICCC Dashboard"}),c.jsx("p",{className:"text-blue-400 text-xs",children:"Version 1.0.0"})]})]})]})]})},lO=({availableZones:t=[],user:e=null,onLogin:n,onLogout:r,onShowAdminPanel:s})=>{const[i,o]=$.useState(!1),a=()=>{o(!i)},l=()=>{o(!1)};return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"iccc-header shadow-2xl relative z-30",children:[c.jsx("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-2 sm:py-3 lg:py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3 lg:space-x-6",children:[c.jsxs("div",{className:"relative imc-logo-enhanced",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-xl blur-sm opacity-30 animate-pulse"}),c.jsx("div",{className:"relative logo-container w-10 h-10 sm:w-14 sm:h-14 lg:w-20 lg:h-20 bg-gradient-to-br from-white to-blue-50 rounded-lg sm:rounded-xl flex items-center justify-center shadow-lg sm:shadow-xl p-1.5 sm:p-2.5 lg:p-3 border border-blue-300 sm:border-2 hover:scale-105 transition-all duration-300",children:c.jsx("img",{src:oO,alt:"IMC Logo - Primary Organization",className:"w-full h-full object-contain drop-shadow-lg"})}),c.jsx("div",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 w-3 h-3 sm:w-4 sm:h-4 lg:w-5 lg:h-5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 lg:w-3 lg:h-3 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),c.jsxs("div",{className:"text-white min-w-0 flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 mb-0.5 sm:mb-1",children:[c.jsx("h1",{className:"text-base sm:text-lg lg:text-2xl font-bold imc-text-glow tracking-wide",children:"IMC"}),c.jsx("div",{className:"imc-divider w-0.5 sm:w-1 h-3 sm:h-4 lg:h-6 bg-gradient-to-b from-blue-300 to-blue-500 rounded-full"}),c.jsx("h2",{className:"iccc-title text-sm sm:text-base lg:text-xl font-bold tracking-wide",children:"ICCC"})]}),c.jsx("p",{className:"text-blue-200 text-xs sm:text-sm font-medium hidden sm:block truncate",children:"Indore Municipal Corporation"}),c.jsx("p",{className:"text-blue-300 text-xs hidden lg:block truncate",children:"Integrated Command and Control Center"})]}),c.jsx("div",{className:"logo-container w-6 h-6 sm:w-8 sm:h-8 lg:w-12 lg:h-12 bg-white rounded-lg flex items-center justify-center shadow-md p-1 sm:p-1.5 opacity-75 hover:opacity-100 transition-opacity duration-300 hidden sm:flex",children:c.jsx("img",{src:iO,alt:"Apricity Logo",className:"w-full h-full object-contain"})})]}),c.jsxs("div",{className:"text-center text-white hidden lg:block flex-1 px-4",children:[c.jsx("h2",{className:"iccc-title text-lg xl:text-xl font-bold mobile-text-wrap",children:"Daily Vehicle Report Dashboard"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-1",children:[c.jsx("div",{className:"status-indicator w-2 h-2 bg-green-400 rounded-full"}),c.jsx("span",{className:"text-xs text-green-300",children:"Live System"})]})]}),c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 lg:space-x-3",children:[c.jsxs("div",{className:"text-right text-white text-sm hidden md:block",children:[c.jsx("div",{className:"time-display text-blue-100 text-xs lg:text-sm",children:new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}),c.jsx("div",{className:"text-blue-300 text-xs hidden xl:block",children:new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short"})})]}),c.jsx("div",{className:"hidden lg:flex items-center space-x-2",children:e?c.jsxs("div",{className:"flex items-center space-x-2",children:[e.role==="admin"&&s&&c.jsxs("button",{onClick:s,className:"px-2 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-lg transition-colors duration-200 flex items-center space-x-1 touch-manipulation min-h-[36px]",title:"Admin Dashboard",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsx("span",{className:"hidden xl:inline",children:"Admin"})]}),c.jsxs("div",{className:"text-right text-white hidden xl:block",children:[c.jsx("div",{className:"text-sm font-medium truncate max-w-24",children:e.name||"User"}),c.jsx("div",{className:"text-xs text-blue-200 capitalize",children:e.role||"Operator"})]}),c.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-4 h-4 text-blue-900",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("button",{onClick:r,className:"px-2 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs rounded-lg transition-colors duration-200 flex items-center space-x-1 touch-manipulation min-h-[36px]",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{className:"hidden xl:inline",children:"Logout"})]})]}):c.jsxs("button",{onClick:n,className:"px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-xs rounded-lg transition-colors duration-200 flex items-center space-x-1 touch-manipulation min-h-[36px]",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),c.jsx("span",{children:"Login"})]})}),e&&c.jsx("div",{className:"lg:hidden w-7 h-7 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),c.jsxs("button",{onClick:a,className:`lg:hidden hamburger-menu ${i?"active":""} touch-manipulation w-8 h-8 flex flex-col justify-center items-center space-y-1 rounded-md hover:bg-white hover:bg-opacity-10 transition-colors`,"aria-label":"Toggle navigation menu","aria-expanded":i,children:[c.jsx("div",{className:`hamburger-line w-5 h-0.5 bg-white transition-all duration-300 ${i?"rotate-45 translate-y-1.5":""}`}),c.jsx("div",{className:`hamburger-line w-5 h-0.5 bg-white transition-all duration-300 ${i?"opacity-0":""}`}),c.jsx("div",{className:`hamburger-line w-5 h-0.5 bg-white transition-all duration-300 ${i?"-rotate-45 -translate-y-1.5":""}`})]})]})]})}),c.jsx("div",{className:"nav-breadcrumb border-t border-blue-700",children:c.jsx("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-1.5 sm:py-2",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("nav",{className:"flex items-center space-x-1 sm:space-x-2 text-blue-200 text-xs sm:text-sm min-w-0 flex-1",children:[c.jsx("span",{className:"hidden sm:inline",children:"Dashboard"}),c.jsx("svg",{className:"w-3 h-3 hidden sm:block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),c.jsx("span",{className:"text-white font-medium truncate",children:"Vehicle Reports"}),c.jsxs("div",{className:"lg:hidden ml-2 flex items-center space-x-1",children:[c.jsx("div",{className:"status-indicator w-1.5 h-1.5 bg-green-400 rounded-full"}),c.jsx("span",{className:"text-green-300 text-xs",children:"Live"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 text-blue-200 text-xs sm:text-sm",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsx("span",{className:"hidden md:inline",children:"Zones: "}),c.jsx("span",{className:"text-white font-semibold",children:t.length})]}),c.jsxs("div",{className:"flex items-center space-x-1 hidden md:flex",children:[c.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),c.jsx("span",{className:"text-green-300",children:"Live"})]})]})]})})})]}),c.jsx(aO,{isOpen:i,onClose:l,user:e,onLogin:n,onLogout:r,onShowAdminPanel:s,availableZones:t})]})},cO=({currentUser:t,stats:e,setStats:n})=>{const[r,s]=$.useState([]),[i,o]=$.useState([]),[a,l]=$.useState(!0),[u,h]=$.useState([]),[f,m]=$.useState({status:"all",role:"all",search:""}),[g,v]=$.useState({}),[w,S]=$.useState(!1),[b,k]=$.useState(null),[_,N]=$.useState(!1),[j,D]=$.useState(null),[E,x]=$.useState("");$.useEffect(()=>{I()},[]),$.useEffect(()=>{C()},[r,f]);const I=async()=>{l(!0);try{const L=await Wu();s(L);const H={totalUsers:L.length,pendingUsers:L.filter(Q=>Q.status===Te.PENDING).length,approvedUsers:L.filter(Q=>Q.status===Te.APPROVED).length,suspendedUsers:L.filter(Q=>Q.status===Te.SUSPENDED).length};n(H)}catch(L){console.error("Error loading users:",L)}finally{l(!1)}},C=()=>{let L=[...r];if(f.status!=="all"&&(L=L.filter(H=>H.status===f.status)),f.role!=="all"&&(L=L.filter(H=>H.role===f.role)),f.search){const H=f.search.toLowerCase();L=L.filter(Q=>{var te,Ie,V;return((te=Q.name)==null?void 0:te.toLowerCase().includes(H))||((Ie=Q.email)==null?void 0:Ie.toLowerCase().includes(H))||((V=Q.department)==null?void 0:V.toLowerCase().includes(H))})}o(L)},A=async(L,H,Q={})=>{v({...g,[H]:L});try{let te;switch(L){case"approve":te=await LE(H,t.uid);break;case"reject":te=await OE(H,t.uid);break;case"suspend":te=await oD(H,t.uid,Q.reason);break;case"reactivate":te=await aD(H,t.uid);break;case"updateRole":te=await iD(H,Q.role,t.uid);break;case"delete":te=await VE(H,t.uid,Q.reason);break}te.success?(await I(),L==="delete"&&alert(`User ${te.deletedUser.name} (${te.deletedUser.email}) has been permanently deleted.`)):alert(`Error: ${te.message}`)}catch(te){console.error(`Error ${L} user:`,te),alert(`Error ${L} user: ${te.message}`)}finally{v({...g,[H]:null})}},R=async L=>{if(u.length!==0){if(L==="delete"){const H=` DANGER: You are about to permanently delete ${u.length} users. This action cannot be undone.

Type "DELETE" to confirm:`;if(prompt(H)!=="DELETE"){alert("Bulk delete cancelled.");return}}try{let H;if(L==="approve")H=await cD(u,t.uid);else if(L==="reject")H=await uD(u,t.uid);else if(L==="delete"){const Q=prompt("Please provide a reason for bulk deletion:")||"Bulk admin action";H=await lD(u,t.uid,Q)}H.success?(h([]),await I(),L==="delete"&&alert(`Successfully deleted ${H.deletedUsers.length} users.${H.errors.length>0?` ${H.errors.length} deletions failed.`:""}`)):alert(`Error: ${H.message}`)}catch(H){console.error(`Error bulk ${L}:`,H),alert(`Error bulk ${L}: ${H.message}`)}}},P=L=>{h(H=>H.includes(L)?H.filter(Q=>Q!==L):[...H,L])},fe=L=>{D(L),x(""),N(!0)},le=async()=>{if(!j||!E.trim()){alert("Please provide a reason for deletion.");return}await A("delete",j.id,{reason:E}),N(!1),D(null),x("")},X=()=>{N(!1),D(null),x("")},ce=L=>L?new Date(L.seconds*1e3).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",z=L=>({[Te.PENDING]:"bg-yellow-100 text-yellow-800",[Te.APPROVED]:"bg-green-100 text-green-800",[Te.REJECTED]:"bg-red-100 text-red-800",[Te.SUSPENDED]:"bg-gray-100 text-gray-800"})[L]||"bg-gray-100 text-gray-800",Y=L=>({[bt.ADMIN]:"bg-purple-100 text-purple-800",[bt.OPERATOR]:"bg-blue-100 text-blue-800",[bt.VIEWER]:"bg-gray-100 text-gray-800"})[L]||"bg-gray-100 text-gray-800";return a?c.jsxs("div",{className:"flex items-center justify-center h-64",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Loading users..."})]}):c.jsxs("div",{className:"p-4 sm:p-6 h-full overflow-y-auto",children:[c.jsxs("div",{className:"mb-6 space-y-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"text",placeholder:"Search users...",value:f.search,onChange:L=>m({...f,search:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),c.jsxs("select",{value:f.status,onChange:L=>m({...f,status:L.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Status"}),c.jsx("option",{value:Te.PENDING,children:"Pending"}),c.jsx("option",{value:Te.APPROVED,children:"Approved"}),c.jsx("option",{value:Te.REJECTED,children:"Rejected"}),c.jsx("option",{value:Te.SUSPENDED,children:"Suspended"})]}),c.jsxs("select",{value:f.role,onChange:L=>m({...f,role:L.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Roles"}),c.jsx("option",{value:bt.ADMIN,children:"Admin"}),c.jsx("option",{value:bt.OPERATOR,children:"Operator"}),c.jsx("option",{value:bt.VIEWER,children:"Viewer"})]})]}),u.length>0&&c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 p-4 bg-blue-50 rounded-lg",children:[c.jsxs("span",{className:"text-sm text-blue-800 font-medium",children:[u.length," user(s) selected"]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("button",{onClick:()=>R("approve"),className:"admin-button px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[c.jsx("svg",{className:"w-4 h-4 mr-1 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Bulk Approve"]}),c.jsxs("button",{onClick:()=>R("reject"),className:"admin-button px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:[c.jsx("svg",{className:"w-4 h-4 mr-1 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Bulk Reject"]}),c.jsxs("button",{onClick:()=>R("delete"),className:"admin-button px-3 py-1 bg-gray-800 text-white rounded text-sm hover:bg-gray-900 border-2 border-red-500",children:[c.jsx("svg",{className:"w-4 h-4 mr-1 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Bulk Delete"]}),c.jsxs("button",{onClick:()=>h([]),className:"admin-button px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:[c.jsx("svg",{className:"w-4 h-4 mr-1 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Selection"]})]})]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden admin-card-hover",children:c.jsx("div",{className:"overflow-x-auto admin-scrollbar",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 admin-table",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:c.jsx("input",{type:"checkbox",onChange:L=>{L.target.checked?h(i.map(H=>H.id)):h([])},checked:u.length===i.length&&i.length>0})}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(L=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("input",{type:"checkbox",checked:u.includes(L.id),onChange:()=>P(L.id)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.name}),c.jsx("div",{className:"text-sm text-gray-500",children:L.email})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`status-badge ${Y(L.role)}`,children:L.role})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`status-badge ${z(L.status)}`,children:L.status})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.department}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ce(L.createdAt)}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[L.status===Te.PENDING&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>A("approve",L.id),disabled:g[L.id],className:"admin-button px-3 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700 disabled:opacity-50",children:"Approve"}),c.jsx("button",{onClick:()=>A("reject",L.id),disabled:g[L.id],className:"admin-button px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 disabled:opacity-50",children:"Reject"})]}),L.status===Te.APPROVED&&c.jsx("button",{onClick:()=>A("suspend",L.id,{reason:"Admin action"}),disabled:g[L.id],className:"admin-button px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700 disabled:opacity-50",children:"Suspend"}),L.status===Te.SUSPENDED&&c.jsx("button",{onClick:()=>A("reactivate",L.id),disabled:g[L.id],className:"admin-button px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 disabled:opacity-50",children:"Reactivate"}),c.jsx("button",{onClick:()=>{k(L),S(!0)},className:"admin-button px-3 py-1 bg-indigo-600 text-white rounded text-xs hover:bg-indigo-700",children:"Edit"}),c.jsx("button",{onClick:()=>fe(L),disabled:g[L.id],className:"admin-button px-3 py-1 bg-gray-800 text-white rounded text-xs hover:bg-gray-900 border border-red-500 disabled:opacity-50",title:"Delete User (Permanent)",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},L.id))})]})})}),i.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Users Found"}),c.jsx("p",{className:"text-gray-600",children:"No users match your current filters."})]}),w&&b&&c.jsx("div",{className:"fixed inset-0 admin-modal-backdrop flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"User Details"}),c.jsx("button",{onClick:()=>S(!1),className:"text-white hover:text-gray-200",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] admin-scrollbar",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:b.name}),c.jsx("p",{className:"text-gray-600",children:b.email})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),c.jsxs("select",{value:b.role,onChange:L=>{k(H=>({...H,role:L.target.value})),A("updateRole",b.id,{role:L.target.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:bt.ADMIN,children:"Admin"}),c.jsx("option",{value:bt.OPERATOR,children:"Operator"}),c.jsx("option",{value:bt.VIEWER,children:"Viewer"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),c.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${z(b.status)}`,children:b.status})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),c.jsx("p",{className:"text-gray-900",children:b.department})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),c.jsx("p",{className:"text-gray-900",children:b.phone||"Not provided"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Created Date"}),c.jsx("p",{className:"text-gray-900",children:ce(b.createdAt)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Updated"}),c.jsx("p",{className:"text-gray-900",children:ce(b.updatedAt)})]})]}),b.approvedBy&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved By"}),c.jsxs("p",{className:"text-gray-900",children:[b.approvedBy," on ",ce(b.approvedAt)]})]}),b.suspensionReason&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Suspension Reason"}),c.jsx("p",{className:"text-gray-900",children:b.suspensionReason})]})]})})]})}),_&&j&&c.jsx("div",{className:"fixed inset-0 admin-modal-backdrop flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[c.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-2 mr-3",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:" Delete User"}),c.jsx("p",{className:"text-red-100 text-sm",children:"This action cannot be undone"})]})]})}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:j.name}),c.jsx("p",{className:"text-gray-600 text-sm",children:j.email}),c.jsxs("p",{className:"text-gray-500 text-xs",children:[j.department,"  ",j.role]})]})]}),c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-red-800 font-medium text-sm",children:"Warning: Permanent Deletion"}),c.jsxs("ul",{className:"text-red-700 text-xs mt-1 space-y-1",children:[c.jsx("li",{children:" User account will be permanently deleted"}),c.jsx("li",{children:" All user data will be removed from the system"}),c.jsx("li",{children:" User will lose access immediately"}),c.jsx("li",{children:" This action cannot be undone"})]})]})]})}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason for deletion ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{value:E,onChange:L=>x(L.target.value),placeholder:"Please provide a detailed reason for deleting this user...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none",rows:"3",required:!0})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:X,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:le,disabled:!E.trim(),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Delete User"})]})]})]})})]})},uO=()=>{var n,r,s,i,o,a;const t={hasAuth:!!Ze,hasDb:!!Gt,authConfig:{apiKey:!!((r=(n=Ze==null?void 0:Ze.app)==null?void 0:n.options)!=null&&r.apiKey),authDomain:!!((i=(s=Ze==null?void 0:Ze.app)==null?void 0:s.options)!=null&&i.authDomain),projectId:!!((a=(o=Ze==null?void 0:Ze.app)==null?void 0:o.options)!=null&&a.projectId)}},e=t.hasAuth&&t.hasDb&&t.authConfig.apiKey&&t.authConfig.authDomain&&t.authConfig.projectId;return{isValid:e,config:t,issues:e?[]:[!t.hasAuth&&"Firebase Auth not initialized",!t.hasDb&&"Firestore not initialized",!t.authConfig.apiKey&&"Missing API key",!t.authConfig.authDomain&&"Missing auth domain",!t.authConfig.projectId&&"Missing project ID"].filter(Boolean)}},dO=({currentUser:t})=>{const[e,n]=$.useState({appName:localStorage.getItem("appName")||"IMC ICCC Dashboard",appDescription:localStorage.getItem("appDescription")||"Daily Vehicle Report Dashboard",theme:Ck(),enableNotifications:localStorage.getItem("enableNotifications")==="true",maintenanceMode:localStorage.getItem("maintenanceMode")==="true",maxLoginAttempts:localStorage.getItem("maxLoginAttempts")||"5",sessionTimeout:localStorage.getItem("sessionTimeout")||"3600000",enableAuditLog:localStorage.getItem("enableAuditLog")==="true"}),[r,s]=$.useState(null),[i,o]=$.useState(!1);$.useEffect(()=>{a()},[]);const a=()=>{const m=uO();s(m)},l=(m,g)=>{n(v=>({...v,[m]:g})),m==="theme"&&Rm(g)},u=()=>{o(!0);try{Object.entries(e).forEach(([m,g])=>{localStorage.setItem(m,g.toString())}),Rm(e.theme),alert("Settings saved successfully!")}catch(m){console.error("Error saving settings:",m),alert("Error saving settings. Please try again.")}finally{o(!1)}},h=()=>{if(confirm("Are you sure you want to reset all settings to default values?")){const m={appName:"IMC ICCC Dashboard",appDescription:"Daily Vehicle Report Dashboard",theme:"blue",enableNotifications:!1,maintenanceMode:!1,maxLoginAttempts:"5",sessionTimeout:"3600000",enableAuditLog:!1};n(m),Object.entries(m).forEach(([g,v])=>{localStorage.setItem(g,v.toString())}),alert("Settings reset to default values!")}},f=rO().map(m=>({value:m.value,label:`${m.name}${m.value==="blue"?" (Default)":""}`,color:`bg-${m.value}-500`}));return c.jsx("div",{className:"p-4 sm:p-6 h-full overflow-y-auto",children:c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Application Settings"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Name"}),c.jsx("input",{type:"text",value:e.appName,onChange:m=>l("appName",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Description"}),c.jsx("input",{type:"text",value:e.appDescription,onChange:m=>l("appDescription",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme Color"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:f.map(m=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx("input",{type:"radio",name:"theme",value:m.value,checked:e.theme===m.value,onChange:g=>l("theme",g.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),c.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[c.jsx("div",{className:`w-6 h-6 rounded-full ${m.color} shadow-sm`}),c.jsxs("div",{className:"flex-1",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900",children:m.label}),e.theme===m.value&&c.jsx("div",{className:"text-xs text-primary-600 mt-1",children:"Currently Active"})]})]})]},m.value))}),c.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Theme Preview"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg text-sm hover:bg-primary-700 transition-colors",children:"Primary Button"}),c.jsx("button",{className:"px-4 py-2 border border-primary-600 text-primary-600 rounded-lg text-sm hover:bg-primary-50 transition-colors",children:"Secondary Button"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-4 h-4 bg-primary-500 rounded-full"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Primary Color"})]}),c.jsx("div",{className:"text-xs text-gray-500",children:'Changes are applied immediately for preview. Click "Save Settings" to persist changes.'})]})]})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Settings"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Login Attempts"}),c.jsxs("select",{value:e.maxLoginAttempts,onChange:m=>l("maxLoginAttempts",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"3",children:"3 attempts"}),c.jsx("option",{value:"5",children:"5 attempts"}),c.jsx("option",{value:"10",children:"10 attempts"}),c.jsx("option",{value:"unlimited",children:"Unlimited"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout"}),c.jsxs("select",{value:e.sessionTimeout,onChange:m=>l("sessionTimeout",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"1800000",children:"30 minutes"}),c.jsx("option",{value:"3600000",children:"1 hour"}),c.jsx("option",{value:"7200000",children:"2 hours"}),c.jsx("option",{value:"14400000",children:"4 hours"}),c.jsx("option",{value:"28800000",children:"8 hours"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"enableAuditLog",checked:e.enableAuditLog,onChange:m=>l("enableAuditLog",m.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"enableAuditLog",className:"ml-2 block text-sm text-gray-700",children:"Enable Audit Logging"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Features"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Notifications"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Enable system notifications for users"})]}),c.jsx("input",{type:"checkbox",checked:e.enableNotifications,onChange:m=>l("enableNotifications",m.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Maintenance Mode"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Temporarily disable user access for maintenance"})]}),c.jsx("input",{type:"checkbox",checked:e.maintenanceMode,onChange:m=>l("maintenanceMode",m.target.checked),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Firebase Configuration Status"}),r&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:`p-4 rounded-lg ${r.isValid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${r.isValid?"bg-green-500":"bg-red-500"}`}),c.jsxs("p",{className:`font-medium ${r.isValid?"text-green-800":"text-red-800"}`,children:["Firebase Configuration: ",r.isValid?"Valid":"Invalid"]})]}),!r.isValid&&r.issues.length>0&&c.jsx("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:r.issues.map((m,g)=>c.jsx("li",{children:m},g))})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Authentication"}),c.jsx("p",{className:`text-sm ${r.config.hasAuth?"text-green-600":"text-red-600"}`,children:r.config.hasAuth?"Initialized":"Not Initialized"})]}),c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Firestore"}),c.jsx("p",{className:`text-sm ${r.config.hasDb?"text-green-600":"text-red-600"}`,children:r.config.hasDb?"Connected":"Not Connected"})]})]}),c.jsx("button",{onClick:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Refresh Status"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("button",{onClick:u,disabled:i,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":"Save Settings"}),c.jsx("button",{onClick:h,className:"flex-1 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Reset to Defaults"})]})]})})},hO=({currentUser:t,stats:e})=>{const[n,r]=$.useState({userGrowth:[],roleDistribution:{},statusDistribution:{},departmentDistribution:{},recentActivity:[]}),[s,i]=$.useState(!0),[o,a]=$.useState("30");$.useEffect(()=>{l()},[o]);const l=async()=>{i(!0);try{const f=await Wu(),m=f.reduce((_,N)=>(_[N.role]=(_[N.role]||0)+1,_),{}),g=f.reduce((_,N)=>(_[N.status]=(_[N.status]||0)+1,_),{}),v=f.reduce((_,N)=>{const j=N.department||"Unknown";return _[j]=(_[j]||0)+1,_},{}),w=new Date,S=parseInt(o),b=[];for(let _=S;_>=0;_--){const N=new Date(w);N.setDate(N.getDate()-_);const j=N.toISOString().split("T")[0],D=f.filter(E=>E.createdAt?new Date(E.createdAt.seconds*1e3).toISOString().split("T")[0]===j:!1).length;b.push({date:j,count:D,cumulative:f.filter(E=>E.createdAt?new Date(E.createdAt.seconds*1e3)<=N:!1).length})}const k=f.sort((_,N)=>{var E,x;const j=((E=_.createdAt)==null?void 0:E.seconds)||0;return(((x=N.createdAt)==null?void 0:x.seconds)||0)-j}).slice(0,10);r({userGrowth:b,roleDistribution:m,statusDistribution:g,departmentDistribution:v,recentActivity:k})}catch(f){console.error("Error loading analytics data:",f)}finally{i(!1)}},u=f=>f?new Date(f.seconds*1e3).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"N/A",h=(f,m)=>m>0?(f/m*100).toFixed(1):0;return s?c.jsxs("div",{className:"flex items-center justify-center h-64",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Loading analytics..."})]}):c.jsxs("div",{className:"p-4 sm:p-6 h-full overflow-y-auto",children:[c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Time Range:"}),c.jsxs("select",{value:o,onChange:f=>a(f.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"7",children:"Last 7 days"}),c.jsx("option",{value:"30",children:"Last 30 days"}),c.jsx("option",{value:"90",children:"Last 90 days"}),c.jsx("option",{value:"365",children:"Last year"})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalUsers})]})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:c.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Approval"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.pendingUsers})]})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:c.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.approvedUsers})]})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:c.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"})})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.suspendedUsers})]})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Role Distribution"}),c.jsx("div",{className:"space-y-3",children:Object.entries(n.roleDistribution).map(([f,m])=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${f===bt.ADMIN?"bg-purple-500":f===bt.OPERATOR?"bg-blue-500":"bg-gray-500"}`}),c.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:f})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:m}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",h(m,e.totalUsers),"%)"]})]})]},f))})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status Distribution"}),c.jsx("div",{className:"space-y-3",children:Object.entries(n.statusDistribution).map(([f,m])=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${f===Te.APPROVED?"bg-green-500":f===Te.PENDING?"bg-yellow-500":f===Te.REJECTED?"bg-red-500":"bg-gray-500"}`}),c.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:f})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:m}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",h(m,e.totalUsers),"%)"]})]})]},f))})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Department Distribution"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(n.departmentDistribution).sort(([,f],[,m])=>m-f).map(([f,m])=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:f}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:m}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",h(m,e.totalUsers),"%)"]})]})]},f))})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent User Registrations"}),c.jsx("div",{className:"space-y-3",children:n.recentActivity.map(f=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.name}),c.jsx("p",{className:"text-xs text-gray-500",children:f.email})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm text-gray-600",children:f.department}),c.jsx("p",{className:"text-xs text-gray-500",children:u(f.createdAt)})]})]},f.id))})]})]})},fO=({currentUser:t})=>{const[e,n]=$.useState(!1),[r,s]=$.useState(null),[i,o]=$.useState({dataSources:JSON.parse(localStorage.getItem("dataSources")||JSON.stringify([{id:1,name:"Primary Source",url:"",priority:1,status:"active",description:"Main live data source"}])),refreshInterval:localStorage.getItem("refreshInterval")||"300000",autoRefresh:localStorage.getItem("autoRefresh")==="true",enableFailover:localStorage.getItem("enableFailover")==="true",failoverTimeout:localStorage.getItem("failoverTimeout")||"10000"}),[a,l]=$.useState({lastBackup:localStorage.getItem("lastBackup")||null,autoBackup:localStorage.getItem("autoBackup")==="true"}),u=async(_="json")=>{n(!0);try{const N=await Wu();if(_==="json"){const j=JSON.stringify(N,null,2),D=new Blob([j],{type:"application/json"}),E=URL.createObjectURL(D),x=document.createElement("a");x.href=E,x.download=`users_export_${new Date().toISOString().split("T")[0]}.json`,x.click(),URL.revokeObjectURL(E)}else if(_==="csv"){const j=["Name","Email","Role","Status","Department","Phone","Created Date"],D=N.map(A=>[A.name||"",A.email||"",A.role||"",A.status||"",A.department||"",A.phone||"",A.createdAt?new Date(A.createdAt.seconds*1e3).toLocaleDateString():""]),E=[j,...D].map(A=>A.map(R=>`"${R}"`).join(",")).join(`
`),x=new Blob([E],{type:"text/csv"}),I=URL.createObjectURL(x),C=document.createElement("a");C.href=I,C.download=`users_export_${new Date().toISOString().split("T")[0]}.csv`,C.click(),URL.revokeObjectURL(I)}s({timestamp:new Date().toISOString(),recordCount:N.length,format:_})}catch(N){console.error("Error exporting users:",N),alert("Error exporting users. Please try again.")}finally{n(!1)}},h=()=>{const _={id:Date.now(),name:`Backup Source ${i.dataSources.length}`,url:"",priority:i.dataSources.length+1,status:"inactive",description:"Backup data source"};o(N=>({...N,dataSources:[...N.dataSources,_]}))},f=_=>{if(i.dataSources.length<=1){alert("Cannot remove the last data source!");return}o(N=>({...N,dataSources:N.dataSources.filter(j=>j.id!==_)}))},m=(_,N,j)=>{o(D=>({...D,dataSources:D.dataSources.map(E=>E.id===_?{...E,[N]:j}:E)}))},g=(_,N)=>{const j=[...i.dataSources],D=j.findIndex(E=>E.id===_);N==="up"&&D>0?[j[D],j[D-1]]=[j[D-1],j[D]]:N==="down"&&D<j.length-1&&([j[D],j[D+1]]=[j[D+1],j[D]]),j.forEach((E,x)=>{E.priority=x+1}),o(E=>({...E,dataSources:j}))},v=async _=>{if(!_){alert("Please enter a URL first");return}try{return n(!0),(await fetch(_)).ok?(alert(" Data source is accessible!"),!0):(alert(" Data source is not accessible"),!1)}catch(N){return alert(" Error testing data source: "+N.message),!1}finally{n(!1)}},w=()=>{localStorage.setItem("dataSources",JSON.stringify(i.dataSources)),localStorage.setItem("refreshInterval",i.refreshInterval),localStorage.setItem("autoRefresh",i.autoRefresh.toString()),localStorage.setItem("enableFailover",i.enableFailover.toString()),localStorage.setItem("failoverTimeout",i.failoverTimeout),alert("Multi-source data configuration updated successfully!")},S=()=>{localStorage.setItem("autoBackup",a.autoBackup.toString()),a.autoBackup&&(localStorage.setItem("lastBackup",new Date().toISOString()),l(_=>({..._,lastBackup:new Date().toISOString()}))),alert("Backup settings updated successfully!")},b=async()=>{n(!0);try{const _=await Wu(),N={timestamp:new Date().toISOString(),version:"1.0",users:_,metadata:{totalUsers:_.length,exportedBy:t.email,exportedAt:new Date().toISOString()}},j=JSON.stringify(N,null,2),D=new Blob([j],{type:"application/json"}),E=URL.createObjectURL(D),x=document.createElement("a");x.href=E,x.download=`backup_${new Date().toISOString().split("T")[0]}.json`,x.click(),URL.revokeObjectURL(E),localStorage.setItem("lastBackup",new Date().toISOString()),l(I=>({...I,lastBackup:new Date().toISOString()}))}catch(_){console.error("Error creating backup:",_),alert("Error creating backup. Please try again.")}finally{n(!1)}},k=_=>_?new Date(_).toLocaleString("en-IN"):"Never";return c.jsx("div",{className:"p-4 sm:p-6 h-full overflow-y-auto",children:c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Export"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Export user data for backup or analysis purposes."}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[c.jsxs("button",{onClick:()=>u("json"),disabled:e,className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export as JSON"]}),c.jsxs("button",{onClick:()=>u("csv"),disabled:e,className:"flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export as CSV"]})]}),r&&c.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-green-800 font-medium",children:"Export Completed"}),c.jsxs("p",{className:"text-green-700 text-sm",children:[r.recordCount," records exported as ",r.format.toUpperCase()," on ",k(r.timestamp)]})]})]})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Multi-Source Data Configuration"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Configure multiple Google Sheets with automatic failover"})]}),c.jsxs("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Source"]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[c.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Failover Settings"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"enableFailover",checked:i.enableFailover,onChange:_=>o(N=>({...N,enableFailover:_.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"enableFailover",className:"ml-2 block text-sm text-blue-800",children:"Enable Automatic Failover"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-1",children:"Failover Timeout"}),c.jsxs("select",{value:i.failoverTimeout,onChange:_=>o(N=>({...N,failoverTimeout:_.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[c.jsx("option",{value:"5000",children:"5 seconds"}),c.jsx("option",{value:"10000",children:"10 seconds"}),c.jsx("option",{value:"15000",children:"15 seconds"}),c.jsx("option",{value:"30000",children:"30 seconds"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-1",children:"Refresh Interval"}),c.jsxs("select",{value:i.refreshInterval,onChange:_=>o(N=>({...N,refreshInterval:_.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[c.jsx("option",{value:"60000",children:"1 minute"}),c.jsx("option",{value:"300000",children:"5 minutes"}),c.jsx("option",{value:"600000",children:"10 minutes"}),c.jsx("option",{value:"1800000",children:"30 minutes"}),c.jsx("option",{value:"3600000",children:"1 hour"})]})]})]})]}),c.jsx("div",{className:"space-y-4 mb-6",children:i.dataSources.map((_,N)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${_.status==="active"?"bg-green-500":"bg-gray-400"}`}),c.jsxs("span",{className:"font-medium text-gray-900",children:["Priority ",_.priority]}),N===0&&c.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"Primary"}),N>0&&c.jsx("span",{className:"ml-2 px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:"Backup"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>g(_.id,"up"),disabled:N===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50",title:"Move Up",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),c.jsx("button",{onClick:()=>g(_.id,"down"),disabled:N===i.dataSources.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50",title:"Move Down",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),c.jsx("button",{onClick:()=>f(_.id),disabled:i.dataSources.length<=1,className:"p-1 text-red-400 hover:text-red-600 disabled:opacity-50",title:"Remove Source",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source Name"}),c.jsx("input",{type:"text",value:_.name,onChange:j=>m(_.id,"name",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("input",{type:"text",value:_.description,onChange:j=>m(_.id,"description",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]})]}),c.jsxs("div",{className:"mt-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Google Sheets URL"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"url",value:_.url,onChange:j=>m(_.id,"url",j.target.value),placeholder:"https://docs.google.com/spreadsheets/d/...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"}),c.jsx("button",{onClick:()=>v(_.url),disabled:e||!_.url,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm",children:"Test"})]})]})]},_.id))}),c.jsx("div",{className:"border-t pt-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"autoRefresh",checked:i.autoRefresh,onChange:_=>o(N=>({...N,autoRefresh:_.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"autoRefresh",className:"ml-2 block text-sm text-gray-700",children:"Enable Auto Refresh"})]}),c.jsx("button",{onClick:w,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Configuration"})]})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Backup Management"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Manage system backups and data recovery."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Last Backup"}),c.jsx("p",{className:"text-sm text-gray-600",children:k(a.lastBackup)})]}),c.jsx("button",{onClick:b,disabled:e,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:e?"Creating...":"Create Backup"})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Automatic Backup"}),c.jsx("p",{className:"text-sm text-gray-600",children:a.autoBackup?"Enabled - Daily backups":"Disabled"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("input",{type:"checkbox",id:"autoBackup",checked:a.autoBackup,onChange:_=>l(N=>({...N,autoBackup:_.target.checked})),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"autoBackup",className:"text-sm text-gray-700",children:"Enable Auto Backup"}),c.jsx("button",{onClick:S,className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Save"})]})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Health"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-green-800",children:"Database"}),c.jsx("p",{className:"text-sm text-green-600",children:"Connected"})]})]})}),c.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-green-800",children:"Authentication"}),c.jsx("p",{className:"text-sm text-green-600",children:"Active"})]})]})}),c.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-yellow-800",children:"Data Sync"}),c.jsx("p",{className:"text-sm text-yellow-600",children:"Checking..."})]})]})})]})]})]})})},mO=({currentUser:t,onClose:e})=>{var l;const[n,r]=$.useState("users"),[s,i]=$.useState({totalUsers:0,pendingUsers:0,approvedUsers:0,suspendedUsers:0}),o=[{id:"users",name:"User Management",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),component:cO},{id:"analytics",name:"Analytics",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),component:hO},{id:"data",name:"Data Management",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),component:fO},{id:"settings",name:"System Settings",icon:c.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),component:dO}],a=(l=o.find(u=>u.id===n))==null?void 0:l.component;return c.jsx("div",{className:"fixed inset-0 admin-modal-backdrop flex items-center justify-center p-2 sm:p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-2xl w-full max-w-7xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4 sm:p-6 flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold",children:"Admin Dashboard"}),c.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:"Comprehensive system administration"})]}),c.jsx("button",{onClick:e,className:"text-white hover:text-gray-200 transition-colors p-1 touch-manipulation",children:c.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mt-4",children:[c.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"text-lg sm:text-xl font-bold",children:s.totalUsers}),c.jsx("div",{className:"text-xs sm:text-sm text-blue-100",children:"Total Users"})]}),c.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"text-lg sm:text-xl font-bold text-yellow-300",children:s.pendingUsers}),c.jsx("div",{className:"text-xs sm:text-sm text-blue-100",children:"Pending"})]}),c.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"text-lg sm:text-xl font-bold text-green-300",children:s.approvedUsers}),c.jsx("div",{className:"text-xs sm:text-sm text-blue-100",children:"Approved"})]}),c.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"text-lg sm:text-xl font-bold text-red-300",children:s.suspendedUsers}),c.jsx("div",{className:"text-xs sm:text-sm text-blue-100",children:"Suspended"})]})]})]}),c.jsx("div",{className:"bg-gray-50 border-b border-gray-200 flex-shrink-0",children:c.jsx("div",{className:"flex overflow-x-auto",children:o.map(u=>c.jsxs("button",{onClick:()=>r(u.id),className:`flex items-center space-x-2 px-4 sm:px-6 py-3 sm:py-4 text-sm font-medium whitespace-nowrap transition-colors ${n===u.id?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[u.icon,c.jsx("span",{className:"hidden sm:inline",children:u.name})]},u.id))})}),c.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-gray-50 admin-scrollbar",children:c.jsx("div",{className:"h-full",children:a&&c.jsx(a,{currentUser:t,stats:s,setStats:i})})})]})})};function Zu(t){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zu(t)}function ei(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ot(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Gn(t){Ot(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Zu(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function pO(t,e){Ot(2,arguments);var n=Gn(t).getTime(),r=ei(e);return new Date(n+r)}var gO={};function Bd(){return gO}function yO(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function vO(t){return Ot(1,arguments),t instanceof Date||Zu(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function xO(t){if(Ot(1,arguments),!vO(t)&&typeof t!="number")return!1;var e=Gn(t);return!isNaN(Number(e))}function _O(t,e){Ot(2,arguments);var n=ei(e);return pO(t,-n)}var wO=864e5;function bO(t){Ot(1,arguments);var e=Gn(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/wO)+1}function Ju(t){Ot(1,arguments);var e=1,n=Gn(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function Nk(t){Ot(1,arguments);var e=Gn(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=Ju(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=Ju(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function EO(t){Ot(1,arguments);var e=Nk(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Ju(n);return r}var kO=6048e5;function TO(t){Ot(1,arguments);var e=Gn(t),n=Ju(e).getTime()-EO(e).getTime();return Math.round(n/kO)+1}function ed(t,e){var n,r,s,i,o,a,l,u;Ot(1,arguments);var h=Bd(),f=ei((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=Gn(t),g=m.getUTCDay(),v=(g<f?7:0)+g-f;return m.setUTCDate(m.getUTCDate()-v),m.setUTCHours(0,0,0,0),m}function Ak(t,e){var n,r,s,i,o,a,l,u;Ot(1,arguments);var h=Gn(t),f=h.getUTCFullYear(),m=Bd(),g=ei((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&r!==void 0?r:(l=m.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setUTCFullYear(f+1,0,g),v.setUTCHours(0,0,0,0);var w=ed(v,e),S=new Date(0);S.setUTCFullYear(f,0,g),S.setUTCHours(0,0,0,0);var b=ed(S,e);return h.getTime()>=w.getTime()?f+1:h.getTime()>=b.getTime()?f:f-1}function SO(t,e){var n,r,s,i,o,a,l,u;Ot(1,arguments);var h=Bd(),f=ei((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:h.firstWeekContainsDate)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),m=Ak(t,e),g=new Date(0);g.setUTCFullYear(m,0,f),g.setUTCHours(0,0,0,0);var v=ed(g,e);return v}var IO=6048e5;function CO(t,e){Ot(1,arguments);var n=Gn(t),r=ed(n,e).getTime()-SO(n,e).getTime();return Math.round(r/IO)+1}function _e(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Sr={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return _e(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):_e(r+1,2)},d:function(e,n){return _e(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return _e(e.getUTCHours()%12||12,n.length)},H:function(e,n){return _e(e.getUTCHours(),n.length)},m:function(e,n){return _e(e.getUTCMinutes(),n.length)},s:function(e,n){return _e(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return _e(i,n.length)}},fi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},NO={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return Sr.y(e,n)},Y:function(e,n,r,s){var i=Ak(e,s),o=i>0?i:1-i;if(n==="YY"){var a=o%100;return _e(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):_e(o,n.length)},R:function(e,n){var r=Nk(e);return _e(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return _e(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return _e(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return _e(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return Sr.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return _e(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=CO(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):_e(i,n.length)},I:function(e,n,r){var s=TO(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):_e(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Sr.d(e,n)},D:function(e,n,r){var s=bO(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):_e(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return _e(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return _e(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return _e(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=fi.noon:s===0?i=fi.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=fi.evening:s>=12?i=fi.afternoon:s>=4?i=fi.morning:i=fi.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Sr.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Sr.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):_e(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):_e(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Sr.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Sr.s(e,n)},S:function(e,n){return Sr.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return $_(o);case"XXXX":case"XX":return Rs(o);case"XXXXX":case"XXX":default:return Rs(o,":")}},x:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"x":return $_(o);case"xxxx":case"xx":return Rs(o);case"xxxxx":case"xxx":default:return Rs(o,":")}},O:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+W_(o,":");case"OOOO":default:return"GMT"+Rs(o,":")}},z:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+W_(o,":");case"zzzz":default:return"GMT"+Rs(o,":")}},t:function(e,n,r,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return _e(o,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,o=i.getTime();return _e(o,n.length)}};function W_(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e;return n+String(s)+o+_e(i,2)}function $_(t,e){if(t%60===0){var n=t>0?"-":"+";return n+_e(Math.abs(t)/60,2)}return Rs(t,e)}function Rs(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=_e(Math.floor(s/60),2),o=_e(s%60,2);return r+i+n+o}var H_=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Pk=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},AO=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return H_(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",H_(s,n)).replace("{{time}}",Pk(i,n))},PO={p:Pk,P:AO},jO=["D","DD"],RO=["YY","YYYY"];function DO(t){return jO.indexOf(t)!==-1}function MO(t){return RO.indexOf(t)!==-1}function q_(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var LO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},OO=function(e,n,r){var s,i=LO[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function nf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var VO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},FO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},UO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},BO={date:nf({formats:VO,defaultWidth:"full"}),time:nf({formats:FO,defaultWidth:"full"}),dateTime:nf({formats:UO,defaultWidth:"full"})},zO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},WO=function(e,n,r,s){return zO[e]};function Qo(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return s[u]}}var $O={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},HO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},KO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},GO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},YO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},QO=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},XO={ordinalNumber:QO,era:Qo({values:$O,defaultWidth:"wide"}),quarter:Qo({values:HO,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Qo({values:qO,defaultWidth:"wide"}),day:Qo({values:KO,defaultWidth:"wide"}),dayPeriod:Qo({values:GO,defaultWidth:"wide",formattingValues:YO,defaultFormattingWidth:"wide"})};function Xo(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?JO(a,function(f){return f.test(o)}):ZO(a,function(f){return f.test(o)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var h=e.slice(o.length);return{value:u,rest:h}}}function ZO(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function JO(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function e5(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var t5=/^(\d+)(th|st|nd|rd)?/i,n5=/\d+/i,r5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},s5={any:[/^b/i,/^(a|c)/i]},i5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},o5={any:[/1/i,/2/i,/3/i,/4/i]},a5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},l5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},c5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},u5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},d5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},h5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},f5={ordinalNumber:e5({matchPattern:t5,parsePattern:n5,valueCallback:function(e){return parseInt(e,10)}}),era:Xo({matchPatterns:r5,defaultMatchWidth:"wide",parsePatterns:s5,defaultParseWidth:"any"}),quarter:Xo({matchPatterns:i5,defaultMatchWidth:"wide",parsePatterns:o5,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Xo({matchPatterns:a5,defaultMatchWidth:"wide",parsePatterns:l5,defaultParseWidth:"any"}),day:Xo({matchPatterns:c5,defaultMatchWidth:"wide",parsePatterns:u5,defaultParseWidth:"any"}),dayPeriod:Xo({matchPatterns:d5,defaultMatchWidth:"any",parsePatterns:h5,defaultParseWidth:"any"})},m5={code:"en-US",formatDistance:OO,formatLong:BO,formatRelative:WO,localize:XO,match:f5,options:{weekStartsOn:0,firstWeekContainsDate:1}},p5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,g5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,y5=/^'([^]*?)'?$/,v5=/''/g,x5=/[a-zA-Z]/;function Hg(t,e,n){var r,s,i,o,a,l,u,h,f,m,g,v,w,S;Ot(2,arguments);var b=String(e),k=Bd(),_=(r=(s=void 0)!==null&&s!==void 0?s:k.locale)!==null&&r!==void 0?r:m5,N=ei((i=(o=(a=(l=void 0)!==null&&l!==void 0?l:void 0)!==null&&a!==void 0?a:k.firstWeekContainsDate)!==null&&o!==void 0?o:(u=k.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=ei((f=(m=(g=(v=void 0)!==null&&v!==void 0?v:void 0)!==null&&g!==void 0?g:k.weekStartsOn)!==null&&m!==void 0?m:(w=k.locale)===null||w===void 0||(S=w.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&f!==void 0?f:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!_.localize)throw new RangeError("locale must contain localize property");if(!_.formatLong)throw new RangeError("locale must contain formatLong property");var D=Gn(t);if(!xO(D))throw new RangeError("Invalid time value");var E=yO(D),x=_O(D,E),I={firstWeekContainsDate:N,weekStartsOn:j,locale:_,_originalDate:D},C=b.match(g5).map(function(A){var R=A[0];if(R==="p"||R==="P"){var P=PO[R];return P(A,_.formatLong)}return A}).join("").match(p5).map(function(A){if(A==="''")return"'";var R=A[0];if(R==="'")return _5(A);var P=NO[R];if(P)return MO(A)&&q_(A,e,String(t)),DO(A)&&q_(A,e,String(t)),P(x,A,_.localize,I);if(R.match(x5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return A}).join("");return C}function _5(t){var e=t.match(y5);return e?e[1].replace(v5,"'"):t}const Ri=t=>{if(!t)return"";try{const e=new Date(t);return isNaN(e.getTime())?t:Hg(e,"yyyy-MM-dd")}catch(e){return console.warn("Date normalization error:",e),t}},w5=(t,e)=>{if(!e)return!1;const n=Ri(e);return t===n},b5=(t,e,n)=>{if(!e&&!n)return!1;let r=!1;if(e&&n){const s=Ri(e),i=Ri(n);r=t>=s&&t<=i}else if(e){const s=Ri(e);r=t>=s}else if(n){const s=Ri(n);r=t<=s}return r},E5=(t,e,n,r)=>{const s=Ri(t);if(!e&&!n&&!r)return!0;const i=w5(s,e),o=b5(s,n,r);return i||o},k5=(t,e)=>e?String(t)===String(e):!0,T5=(t,e)=>{if(!e||e==="all"||!(t.TripCount0!==void 0||t.TripCount1!==void 0||t.TripCount2!==void 0))return!0;switch(e){case"0":return(t.TripCount0||0)>0;case"1":return(t.TripCount1||0)>0;case"2":return(t.TripCount2||0)>0;default:return(t.TripCount0||0)+(t.TripCount1||0)+(t.TripCount2||0)>=0}},S5=(t,e)=>{const{selectedDate:n,startDate:r,endDate:s,selectedZone:i,tripCountFilter:o}=e,a=E5(t.Date,n,r,s),l=k5(t.Zone,i);let u=!0;return o&&o!=="all"&&(u=T5(t,o)),a&&l&&u},K_=()=>Hg(new Date,"yyyy-MM-dd"),Mm=(t,e,n,r=null,s="",i="")=>{if(!t||t.length===0)return[];let o="",a="",l="";i?o=i:e&&typeof e=="object"&&(e.from||e.to)?(a=e.from||"",l=e.to||""):e&&typeof e=="string"&&(o=e);const u={selectedDate:o,startDate:a,endDate:l,selectedZone:n,tripCountFilter:r};return t.filter(f=>S5(f,u))},Zo=t=>({onRouteVehicles:"Vehicles On Route",onBoardAfter3PM:"Vehicles On Board",lessThan3Trips:"Underutilized Vehicles",glitchPercentage:"Software Route Coverage",issuesPost0710:"Late Arrivals",fuelStation:"Fuel Visits",post06AMOpenIssues:"Late Departures",vehicleBreakdown:"Breakdowns",vehicleNumbers:"Vehicle Numbers",sphereWorkshopExit:"Workshop Exit Vehicles"})[t]||"Vehicle Count",mi=t=>({onRouteVehicles:{backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",hoverBackgroundColor:"rgba(34, 197, 94, 0.9)"},onBoardAfter3PM:{backgroundColor:"rgba(251, 191, 36, 0.8)",borderColor:"rgba(251, 191, 36, 1)",hoverBackgroundColor:"rgba(251, 191, 36, 0.9)"},lessThan3Trips:{backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgba(239, 68, 68, 1)",hoverBackgroundColor:"rgba(239, 68, 68, 0.9)"},glitchPercentage:{backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgba(168, 85, 247, 1)",hoverBackgroundColor:"rgba(168, 85, 247, 0.9)"},issuesPost0710:{backgroundColor:"rgba(245, 101, 101, 0.8)",borderColor:"rgba(245, 101, 101, 1)",hoverBackgroundColor:"rgba(245, 101, 101, 0.9)"},fuelStation:{backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",hoverBackgroundColor:"rgba(59, 130, 246, 0.9)"},post06AMOpenIssues:{backgroundColor:"rgba(249, 115, 22, 0.8)",borderColor:"rgba(249, 115, 22, 1)",hoverBackgroundColor:"rgba(249, 115, 22, 0.9)"},vehicleBreakdown:{backgroundColor:"rgba(220, 38, 38, 0.8)",borderColor:"rgba(220, 38, 38, 1)",hoverBackgroundColor:"rgba(220, 38, 38, 0.9)"},vehicleNumbers:{backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgba(16, 185, 129, 1)",hoverBackgroundColor:"rgba(16, 185, 129, 0.9)"},sphereWorkshopExit:{backgroundColor:"rgba(147, 51, 234, 0.8)",borderColor:"rgba(147, 51, 234, 1)",hoverBackgroundColor:"rgba(147, 51, 234, 0.9)"}})[t]||{backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",hoverBackgroundColor:"rgba(59, 130, 246, 0.9)"},Lm=(t,e,n="Zone",r="",s=null)=>{if(!t||t.length===0){const v=mi(r);return{labels:[],datasets:[{label:Zo(r),data:[],...v,borderWidth:2,borderRadius:4,borderSkipped:!1}]}}const i=r==="glitchPercentage",o=r==="lessThan3Trips",a=["issuesPost0710","vehicleBreakdown","fuelStation","post06AMOpenIssues"].includes(r),l=r==="sphereWorkshopExit";if(o){const v={},w={};t.forEach(N=>{const j=N[n]||"Unknown",D=Number(j);if(!isNaN(D)&&D<=0)return;let E=0;if(s==="all"||!s)E=(N.TripCount0||0)+(N.TripCount1||0)+(N.TripCount2||0);else switch(s){case"0":E=N.TripCount0||0;break;case"1":E=N.TripCount1||0;break;case"2":E=N.TripCount2||0;break}const x=N.Remarks||"";v[j]?(v[j]+=E,x&&!w[j].includes(x)&&(w[j]+="; "+x)):(v[j]=E,w[j]=x)});const S=Object.keys(v).sort((N,j)=>{const D=parseInt(N),E=parseInt(j);return!isNaN(D)&&!isNaN(E)?D-E:N.localeCompare(j)}),b=S.map(N=>v[N]),k=mi(r);let _="Underutilized Vehicles";return s&&s!=="all"&&(_=`Vehicles with ${s} Trip${s==="1"?"":"s"}`),{labels:S,datasets:[{label:_,data:b,...k,borderWidth:2,borderRadius:4,borderSkipped:!1}]}}else if(a){const v={},w={},S={};t.forEach(N=>{const j=N[n],D=parseFloat(N[e])||0,E=Number(j);!isNaN(E)&&E<=0||(v[j]?v[j]+=D:v[j]=D,N.IssueBreakdown&&(w[j]||(w[j]={}),Object.keys(N.IssueBreakdown).forEach(x=>{w[j][x]||(w[j][x]=0),w[j][x]+=N.IssueBreakdown[x]||0})),N.Details&&N.Details.length>0&&(S[j]||(S[j]=[]),S[j]=S[j].concat(N.Details)))});const b=Object.keys(v).sort((N,j)=>{const D=parseInt(N),E=parseInt(j);return!isNaN(D)&&!isNaN(E)?D-E:N.localeCompare(j)}),k=b.map(N=>v[N]),_=mi(r);return{labels:b,datasets:[{label:Zo(r),data:k,..._,borderWidth:2,borderRadius:4,borderSkipped:!1,issueBreakdowns:w,vehicleDetails:S}]}}else if(l){const v={},w={};t.forEach(_=>{const N=_.Ward||"Unknown",j=_.Count||0;N!=="Unknown"&&(v[N]||(v[N]=0,w[N]=[]),v[N]+=j,_.VehicleDetails&&Array.isArray(_.VehicleDetails)?w[N]=w[N].concat(_.VehicleDetails):w[N].push({ward:_.Ward,zone:_.Zone||"Unknown",permanentVehicleNumber:_["Permanent Vehicle Number"]||"",spareVehicleNumber:_["Spare Vehicle Number"]||"",workshopDepartureTime:_["Workshop Departure Time"]||"",date:_.Date,zones:_.Zones||_.Zone||"Unknown"}))});const S=Object.keys(v).sort((_,N)=>{const j=Number(_),D=Number(N);return!isNaN(j)&&!isNaN(D)?j-D:_.localeCompare(N)}),b=S.map(_=>v[_]),k=mi(r);return{labels:S,datasets:[{label:Zo(r),data:b,...k,borderWidth:2,borderRadius:4,borderSkipped:!1,vehicleDetails:w}]}}else if(i){const v={},w={},S={};t.forEach(j=>{const D=j[n]||"Unknown",E=Number(D);if(!isNaN(E)&&E<=0)return;const x=j.SoftwarePercentage||0,I=j.ActualPercentage||0,C=j.Remarks||"";v[D]?(v[D]=x,w[D]=I,C&&!S[D].includes(C)&&(S[D]+="; "+C)):(v[D]=x,w[D]=I,S[D]=C)});const b=Object.keys(v).sort((j,D)=>{const E=parseInt(j),x=parseInt(D);return!isNaN(E)&&!isNaN(x)?E-x:j.localeCompare(D)}),k=b.map(j=>({x:j,y:v[j],remarks:S[j]})),_=b.map(j=>({x:j,y:w[j],remarks:S[j]}));if(t.some(j=>j.SoftwarePercentage&&j.ActualPercentage))return{labels:b,datasets:[{label:"Software Route Coverage",data:k,backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgba(168, 85, 247, 1)",hoverBackgroundColor:"rgba(168, 85, 247, 0.9)",borderWidth:2,borderRadius:4,borderSkipped:!1},{label:"Actual Route Coverage",data:_,backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",hoverBackgroundColor:"rgba(34, 197, 94, 0.9)",borderWidth:2,borderRadius:4,borderSkipped:!1}]};{const j=mi(r);return{labels:b,datasets:[{label:Zo(r),data:k,...j,borderWidth:2,borderRadius:4,borderSkipped:!1}]}}}const u={},h={};t.forEach(v=>{const w=v[n]||"Unknown",S=Number(w);if(!isNaN(S)&&S<=0)return;const b=v[e],k=parseInt(b)||0,_=v.Remarks||"";u[w]?(u[w]+=k,_&&!h[w].includes(_)&&(h[w]+="; "+_)):(u[w]=k,h[w]=_)});const f=Object.keys(u).sort((v,w)=>{const S=parseInt(v),b=parseInt(w);return!isNaN(S)&&!isNaN(b)?S-b:v.localeCompare(w)}),m=f.map(v=>u[v]),g=mi(r);return{labels:f,datasets:[{label:Zo(r),data:m,...g,borderWidth:2,borderRadius:4,borderSkipped:!1}]}},I5=t=>t==="glitchPercentage"?{xLabel:"Zones",yLabel:"Route Coverage (%)"}:t==="sphereWorkshopExit"?{xLabel:"Ward Number",yLabel:"Number of Vehicles"}:{xLabel:"Zones",yLabel:"Number of Vehicles"},jk=(t,e)=>{const n=I5(e),r=e==="glitchPercentage",s=["issuesPost0710","vehicleBreakdown","fuelStation","post06AMOpenIssues"].includes(e),i=e==="sphereWorkshopExit";return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:12,family:"Inter, system-ui, sans-serif"},padding:20,usePointStyle:!0,pointStyle:"rect"}},title:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#f9fafb",bodyColor:"#f9fafb",borderColor:"#374151",borderWidth:1,cornerRadius:8,displayColors:!0,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},padding:12,callbacks:{title:function(o){return i?`Ward: ${o[0].label}`:`Zone ${o[0].label}`},label:function(o){const a=o.dataset.label||"",l=o.parsed.y;if(r)return`${a}: ${l.toFixed(1)}%`;if(i){const u=o.label,h=o.dataset;if(h.vehicleDetails&&h.vehicleDetails[u]){const f=h.vehicleDetails[u],m=[`Vehicles: ${l}`],g=[...new Set(f.map(v=>v.zone||v.zones).filter(Boolean))];return g.length>0&&m.push(`Zones: ${g.join(", ")}`),m}return[`Vehicles: ${l}`]}return`${a}: ${l}`},afterLabel:function(o){return r&&o.raw&&typeof o.raw=="object"&&o.raw.remarks?`Note: ${o.raw.remarks}`:""},afterBody:function(o){if(s&&o.length>0){const a=o[0].datasetIndex,l=o[0].chart.data.datasets[a],u=o[0].label;if(l.issueBreakdowns&&l.issueBreakdowns[u]){const h=l.issueBreakdowns[u],f=["","Issue Breakdown:"];return Object.keys(h).forEach(m=>{const g=h[m];g>0&&f.push(`${m}: ${g}`)}),f.length>2?f:[]}}return[]}}}},scales:{y:{beginAtZero:!0,max:r?100:void 0,ticks:{stepSize:r?10:1,font:{size:11,family:"Inter, system-ui, sans-serif"},color:"#6b7280",callback:function(o){return r?o+"%":o}},title:{display:!0,text:n.yLabel,font:{size:12,weight:"bold",family:"Inter, system-ui, sans-serif"},color:"#374151",padding:{bottom:10}},grid:{color:"#f3f4f6",lineWidth:1},border:{color:"#e5e7eb"}},x:{title:{display:!0,text:n.xLabel,font:{size:12,weight:"bold",family:"Inter, system-ui, sans-serif"},color:"#374151",padding:{top:10}},ticks:{font:{size:11,family:"Inter, system-ui, sans-serif"},color:"#6b7280"},grid:{display:!1},border:{color:"#e5e7eb"}}},interaction:{intersect:!1,mode:"index"},animation:{duration:750,easing:"easeInOutQuart"},layout:{padding:{top:10,bottom:10,left:10,right:10}}}},Lr={onRouteVehicles:"On Route Vehicles After 3:00 PM",lessThan3Trips:"Vehicles with Less than 3 Trips",glitchPercentage:"Route Coverage Percent",issuesPost0710:"Vehicles Arriving At First Point After 7:10 AM",fuelStation:"Vehicles Going to Fuel Station On Route",post06AMOpenIssues:"Open Tipper Leaving Zones Parking After 6:00 AM",vehicleBreakdown:"On Route Vehicles Breakdown Information",vehicleNumbers:"Zone Wise Breakdown Vehicle Count",sphereWorkshopExit:"Spare Vehicles Leaving Workshops Late"},Om=()=>"Count",C5=({isOpen:t,onClose:e,allData:n,dateRange:r,quickDate:s,selectedZone:i,loading:o,error:a})=>{var E,x,I;const[l,u]=$.useState("all"),[h,f]=$.useState("chart");if(!t)return null;const m="lessThan3Trips",g=n[m]||[],v=Mm(g,r,i,l,m,s),w=Om(),S=Lm(v,w,"Zone",m,l),b=jk(Lr[m],m),k=((x=(E=S.datasets[0])==null?void 0:E.data)==null?void 0:x.reduce((C,A)=>C+A,0))||0,_=Math.max(...((I=S.datasets[0])==null?void 0:I.data)||[0]),N=k>0?(k/S.labels.length).toFixed(1):0;let j=S;S.labels.length===0&&g.length===0&&(j={labels:["Zone 1","Zone 2","Zone 3","Zone 4","Zone 5"],datasets:[{label:"Test Vehicles",data:[12,8,15,6,10],backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgba(239, 68, 68, 1)",hoverBackgroundColor:"rgba(239, 68, 68, 0.9)",borderWidth:2,borderRadius:4,borderSkipped:!1}]});const D=C=>{C.target===C.currentTarget&&e()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-1 sm:p-4",onClick:D,children:c.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl lg:rounded-2xl shadow-2xl w-full max-w-7xl max-h-[98vh] sm:max-h-[95vh] overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white p-3 sm:p-4 lg:p-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[c.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[c.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-2 mr-3 flex-shrink-0",children:c.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-8 lg:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold truncate",children:Lr[m]}),c.jsx("p",{className:"text-red-100 mt-1 text-xs sm:text-sm lg:text-base",children:"Detailed analysis and navigation"})]})]}),c.jsx("button",{onClick:e,className:"bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg p-2 transition-all duration-200 touch-manipulation mt-2 sm:mt-0 self-end sm:self-auto",children:c.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsxs("div",{className:"p-3 sm:p-4 lg:p-6 overflow-y-auto mobile-scroll max-h-[calc(98vh-120px)] sm:max-h-[calc(95vh-140px)]",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[c.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border border-red-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-red-600 text-sm font-medium",children:"Total Vehicles"}),c.jsx("p",{className:"text-2xl font-bold text-red-700",children:k})]}),c.jsx("div",{className:"bg-red-500 rounded-lg p-2",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),c.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-orange-600 text-sm font-medium",children:"Max per Zone"}),c.jsx("p",{className:"text-2xl font-bold text-orange-700",children:_===-1/0?"0":_})]}),c.jsx("div",{className:"bg-orange-500 rounded-lg p-2",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})})]})}),c.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4 border border-yellow-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-yellow-600 text-sm font-medium",children:"Average"}),c.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:N})]}),c.jsx("div",{className:"bg-yellow-500 rounded-lg p-2",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]})}),c.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-green-600 text-sm font-medium",children:"Active Zones"}),c.jsx("p",{className:"text-2xl font-bold text-green-700",children:S.labels.length})]}),c.jsx("div",{className:"bg-green-500 rounded-lg p-2",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})})})]})})]}),c.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[c.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Count Filter:"}),c.jsxs("select",{value:l,onChange:C=>u(C.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200",children:[c.jsx("option",{value:"all",children:"All Vehicles (<3 trips)"}),c.jsx("option",{value:"0",children:"0 Trips Only"}),c.jsx("option",{value:"1",children:"1 Trip Only"}),c.jsx("option",{value:"2",children:"2 Trips Only"})]})]})}),c.jsxs("div",{className:"flex bg-white rounded-lg border border-gray-200 p-1",children:[c.jsxs("button",{onClick:()=>f("chart"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${h==="chart"?"bg-red-500 text-white shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[c.jsx("svg",{className:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Chart View"]}),c.jsxs("button",{onClick:()=>f("table"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${h==="table"?"bg-red-500 text-white shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[c.jsx("svg",{className:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Table View"]})]})]})}),h==="chart"?c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:c.jsx("div",{className:"h-96",children:o?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading chart data..."})]})}):a?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center",children:[c.jsx("svg",{className:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Error Loading Data"}),c.jsx("p",{className:"text-gray-500",children:a})]})}):c.jsx(Dm,{data:j,options:b,title:Lr[m],loading:o,error:a,sheetName:m,rawData:v})})}):c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zone"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle Count"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.labels.map((C,A)=>{var fe;const R=((fe=j.datasets[0])==null?void 0:fe.data[A])||0,P=k>0?(R/k*100).toFixed(1):0;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[P,"%"]})]},C)})})]})})})]})]})})},N5="1DsDk17Vyf2zj5kxr86JPVhYZ04ZstY0IAH7La4UeVa0",Rk={onRouteVehicles:"0",onBoardAfter3PM:"1335240771",lessThan3Trips:"1474814226",glitchPercentage:"1163492617",issuesPost0710:"203626227",fuelStation:"431461673",post06AMOpenIssues:"291765477",vehicleBreakdown:"213524255",vehicleNumbers:"510665731",sphereWorkshopExit:"1903869379"},A5=t=>`https://docs.google.com/spreadsheets/d/${N5}/export?format=csv&gid=${t}`,P5=t=>{let e=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`);if(!e.includes(`
`)&&e.includes("2025-")){console.log("  Detected single-line CSV format - applying fix"),console.log(" Raw CSV text:",e);const o=e.match(/(\d{4}-\d{2}-\d{2})/);if(o){const a=e.indexOf(o[0]),l=e.substring(0,a).trim(),u=e.substring(a).trim();console.log(" Extracted header:",l),console.log(" Data part preview:",u.substring(0,100)+"...");const h=u.split(/(?=\d{4}-\d{2}-\d{2})/).filter(m=>m.trim());console.log(" Found data rows:",h.length),console.log(" Sample data row:",h[0]);const f=h.map(m=>{const g=m.trim(),v=g.match(/^(\d{4}-\d{2}-\d{2}),(.+?),(.+)$/);if(v){const w=v[1],S=v[2],b=v[3].replace(/\s+/g,",");return`${w},${S},${b}`}return g});e=l+`
`+f.join(`
`),console.log(" Fixed CSV format - new line count:",e.split(`
`).length),console.log(" Sample fixed row:",e.split(`
`)[1])}}const n=e.split(`
`);if(n.length===0)return[];const r=o=>{const a=[];let l="",u=!1;for(let h=0;h<o.length;h++){const f=o[h];f==='"'?u=!u:f===","&&!u?(a.push(l.trim()),l=""):l+=f}return a.push(l.trim()),a},s=r(n[0]).map(o=>o.replace(/"/g,"").trim()),i=[];for(let o=1;o<n.length;o++)if(n[o].trim()){const a=r(n[o]).map(u=>u.replace(/"/g,"").trim()),l={};s.forEach((u,h)=>{l[u]=a[h]||""}),i.push(l)}return console.log("Parsed Data:",i),i},j5=t=>{const e=[];return console.log("Transforming wide format data to long format..."),t.forEach(n=>{const r=_s(n.Date);Object.keys(n).forEach(s=>{if(s!=="Date"&&s.startsWith("Zone ")){const i=s.replace("Zone ",""),o=parseInt(n[s])||0;e.push({Date:r,Zone:i,Count:o})}})}),e},R5=t=>{const e=[];return t.forEach(n=>{const r=n.Date;let s=n.Zone;if(s){const o=s.match(/Zone\s*(-?\d+)/);o&&(s=o[1])}let i=0;Object.keys(n).forEach(o=>{o!=="Date"&&o!=="Zone"&&!isNaN(parseInt(n[o]))&&(i+=parseInt(n[o])||0)}),i>0&&e.push({Date:r,Zone:s,Count:i})}),e},D5=t=>{const e=[],n={};return console.log("Starting vehicle breakdown transformation..."),t.forEach(r=>{console.log("Row data:",r);const s=_s(r.Date);let i=r.Zone;const o=r.Issue||"",a=r["Vehicle No."]||"",l=r["Breakdown Time"]||"",u=r["Spare/OK"]||"",h=r["Spare/OK Time"]||"";if(!s||!i||!o){console.log("Skipping row due to missing data:",r);return}console.log("Processing breakdown for Zone:",i,"Issue:",o,"Date:",s),i=String(i);const f=`${i}_${s}`;n[f]||(n[f]={Date:s,Zone:i,Count:0,IssueBreakdown:{},Details:[]}),n[f].Count+=1,n[f].IssueBreakdown[o]||(n[f].IssueBreakdown[o]=0),n[f].IssueBreakdown[o]+=1,n[f].Details.push({vehicleNo:a,issue:o,breakdownTime:l,spareStatus:u,spareTime:h,date:s})}),Object.values(n).forEach(r=>{r.Count>0&&e.push(r)}),console.log("Transformed vehicle breakdown data:",e),e},M5=t=>{const e=[];return t.forEach(n=>{const r=_s(n.Date);let s=n.Zone;const i=n["Fuel Station Times"]||"",o=parseInt(n["Count of Vehicles"])||0;if(!r||!s||o===0)return;if(s){const u=s.match(/Zone\s*(-?\d+)/);u&&(s=Math.abs(parseInt(u[1])))}const a=i.split(",").map(u=>u.trim()).filter(u=>u),l=[];a.forEach((u,h)=>{l.push({vehicleNo:`Vehicle ${h+1}`,time:u,issue:"Fuel Station Visit",status:"Completed",remarks:`Fuel station visit at ${u}`})});for(let u=a.length;u<o;u++)l.push({vehicleNo:`Vehicle ${u+1}`,time:"Time not specified",issue:"Fuel Station Visit",status:"Completed",remarks:"Fuel station visit - time not recorded"});e.push({Date:r,Zone:String(s),Count:o,FuelStationTimes:i,Details:l})}),e},L5=t=>{console.log("Transforming issue data..."),console.log("Sample row before transformation:",t[0]);const e=[],n={};return t.forEach(r=>{const s=_s(r.Date);let i=r.Zone;if(!s||!i){console.log("Skipping row due to missing date or zone:",r);return}if(i){const w=i.match(/ZONE\s*(-?\d+)|Zone\s*(-?\d+)/i);if(w){const S=w[1]||w[2];i=Math.abs(parseInt(S)).toString()}}console.log("Processing issue data for Zone:",i,"Date:",s);const o=parseInt(r["Driver Issue"])||0,a=parseInt(r["Helper Issue"])||0,l=parseInt(r["Breakdown Issue"])||0,u=parseInt(r["Workshop Issue"])||0,h=parseInt(r["Other Issue"])||0,f=o+a+l+u+h;console.log("Issue counts for zone",i,":",{driverIssue:o,helperIssue:a,breakdownIssue:l,workshopIssue:u,otherIssue:h,totalCount:f});const m=`${i}_${s}`;n[m]||(n[m]={Date:s,Zone:i,Count:0,DriverIssue:0,HelperIssue:0,BreakdownIssue:0,WorkshopIssue:0,OtherIssue:0,IssueBreakdown:{},Details:[]}),n[m].Count+=f,n[m].DriverIssue+=o,n[m].HelperIssue+=a,n[m].BreakdownIssue+=l,n[m].WorkshopIssue+=u,n[m].OtherIssue+=h,n[m].IssueBreakdown={"Driver Issue":n[m].DriverIssue,"Helper Issue":n[m].HelperIssue,"Breakdown Issue":n[m].BreakdownIssue,"Workshop Issue":n[m].WorkshopIssue,"Other Issue":n[m].OtherIssue};const g="After 6:00 AM",v="left zone parking";if(o>0)for(let w=0;w<o;w++)n[m].Details.push({vehicleNo:`Vehicle ${n[m].Details.length+1}`,issue:"Driver Issue",time:g,status:"Reported",remarks:`Open tipper ${v} ${g} due to driver issue`});if(a>0)for(let w=0;w<a;w++)n[m].Details.push({vehicleNo:`Vehicle ${n[m].Details.length+1}`,issue:"Helper Issue",time:g,status:"Reported",remarks:`Open tipper ${v} ${g} due to helper issue`});if(l>0)for(let w=0;w<l;w++)n[m].Details.push({vehicleNo:`Vehicle ${n[m].Details.length+1}`,issue:"Breakdown Issue",time:g,status:"Reported",remarks:`Open tipper ${v} ${g} due to breakdown`});if(u>0)for(let w=0;w<u;w++)n[m].Details.push({vehicleNo:`Vehicle ${n[m].Details.length+1}`,issue:"Workshop Issue",time:g,status:"Reported",remarks:`Open tipper ${v} ${g} due to workshop issue`});if(h>0)for(let w=0;w<h;w++)n[m].Details.push({vehicleNo:`Vehicle ${n[m].Details.length+1}`,issue:"Other Issue",time:g,status:"Reported",remarks:`Open tipper ${v} ${g} due to other issue`})}),Object.values(n).forEach(r=>{r.Count>0&&e.push(r)}),console.log("Transformed issue data:",e),e},O5=t=>{const e=[];return t.forEach(n=>{const r=n.Date;let s=n.Zone;if(s){const u=s.match(/Zone\s*(-?\d+)/);u&&(s=u[1])}const i=parseInt(n["0 Trip Count Vehicles"])||0,o=parseInt(n["1 Trip Count Vehicles"])||0,a=parseInt(n["2 Trip Count Vehicles"])||0,l=i+o+a;l>0&&e.push({Date:r,Zone:s,Count:l,TripCount0:i,TripCount1:o,TripCount2:a})}),e},V5=t=>{const e=[];return t.forEach(n=>{const r=n.Date;let s=n.Zone;if(s){const a=s.match(/Zone\s*(-?\d+)/);a&&(s=a[1])}let i=0,o=n.Remarks||"";n["Software %"]?i=parseFloat(n["Software %"].replace("%",""))||0:n["Actual %"]&&(i=parseFloat(n["Actual %"].replace("%",""))||0),i>0&&e.push({Date:r,Zone:s,Count:i,Percentage:i,SoftwarePercentage:n["Software %"]?parseFloat(n["Software %"].replace("%","")):null,ActualPercentage:n["Actual %"]?parseFloat(n["Actual %"].replace("%","")):null,Remarks:o})}),e},F5=t=>{const e=[];return t.forEach(n=>{const r=n.Date,s=_s(r);let i=n.Zone;const o=n["Vehicle Numbers"]||"",a=parseInt(n["Total Vehicles"])||1;if(!s||!i)return;i=String(i).trim();const l=o.replace(/\s*OPEN\s*/gi,"").split(/[\/,]/).map(h=>h.trim()).filter(h=>h),u=l.length||a;e.push({Date:s,Zone:i,Count:u,VehicleNumbers:l.join(", "),TotalVehicles:u})}),e},U5=t=>{const e=[],n={};return console.log("Starting workshop data transformation..."),t.forEach(r=>{console.log("Workshop row data:",r);const s=_s(r.Date),i=r.Zone,o=r.Ward||"",a=r["Permanent Vehicle Number"]||"",l=r["Spare Vehicle Number"]||"",u=r["Workshop Departure Time"]||"";if(!s||!i||!o){console.log("Skipping workshop row due to missing data:",r);return}console.log("Processing workshop for Ward:",o,"Zone:",i,"Date:",s);const h=String(o),f=`${h}_${s}`;n[f]||(n[f]={Date:s,Ward:h,Count:0,VehicleDetails:[],Zones:new Set}),n[f].Count+=1,n[f].Zones.add(i),n[f].VehicleDetails.push({zone:i,permanentVehicleNumber:a,spareVehicleNumber:l,workshopDepartureTime:u,date:s})}),Object.values(n).forEach(r=>{if(r.Count>0){const s=Array.from(r.Zones);e.push({Date:r.Date,Ward:r.Ward,Count:r.Count,Zones:s.join(", "),ZoneList:s,VehicleDetails:r.VehicleDetails})}}),console.log("Transformed workshop data:",e),e},B5=async t=>{try{const e=Rk[t];if(!e)throw new Error(`Unknown sheet: ${t}`);const n=A5(e);console.log(`Fetching data for sheet: ${t} from URL:`,n);const r=await fetch(n);if(console.log("Response status:",r.status),!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.text();console.log(`Raw CSV Data for sheet ${t}:`,s);let i=P5(s);if(i.length>0){const o=Object.keys(i[0]),a=o.some(f=>f.startsWith("Zone ")),l=o.includes("Zone"),u=o.some(f=>f.includes("Driver Issue")||f.includes("Helper Issue")||f.includes("Breakdown Issue")||f.includes("Workshop Issue")),h=o.includes("Issue")&&o.includes("Vehicle No.");console.log("Parsed headers:",o);try{return t==="vehicleBreakdown"&&h?i=D5(i):a?i=j5(i):t==="glitchPercentage"?i=V5(i):t==="lessThan3Trips"?i=O5(i):t==="fuelStation"?i=M5(i):t==="vehicleNumbers"?i=F5(i):t==="sphereWorkshopExit"?i=U5(i):(t==="issuesPost0710"||t==="post06AMOpenIssues")&&u?i=L5(i):l?i=R5(i):i=i.map(f=>({...f,Date:_s(f.Date),Count:f.Count||1})).filter(f=>f.Date&&f.Zone),i}catch(f){return console.error(`Error fetching data for ${t}:`,f),[]}}else return[]}catch(e){return console.error(`Error fetching data for ${t}:`,e),[]}},z5=async()=>{const t=Object.keys(Rk).map(async r=>{const s=await B5(r);return{sheetName:r,data:s}}),e=await Promise.all(t),n={};return e.forEach(({sheetName:r,data:s})=>{n[r]=s}),n},W5=t=>{const e=new Set;return Object.values(t).forEach(n=>{n.forEach(r=>{if(r.Zone){const s=Number(r.Zone);!isNaN(s)&&s>0&&e.add(r.Zone)}})}),Array.from(e).sort((n,r)=>Number(n)-Number(r))},_s=t=>{if(!t)return"";try{const e=new Date(t);return isNaN(e.getTime())?t:Hg(e,"yyyy-MM-dd")}catch(e){return console.warn("Date normalization error:",e),t}},$5=t=>{const e=new Set;return Object.values(t).forEach(n=>{n.forEach(r=>{if(r.Date){const s=_s(r.Date);s&&e.add(s)}})}),Array.from(e).sort()},H5=()=>{const{user:t,logout:e}=UE(),[n,r]=$.useState({}),[s,i]=$.useState(!0),[o,a]=$.useState(null),[l,u]=$.useState(K_()),[h,f]=$.useState({from:"",to:""}),[m,g]=$.useState(K_()),[v,w]=$.useState(""),[S,b]=$.useState("all"),[k,_]=$.useState([]),[N,j]=$.useState([]),[D,E]=$.useState(!1),[x,I]=$.useState(!1),C=()=>{console.log("Login should be handled by AuthPage")},A=async()=>{await e()},R=async()=>{try{i(!0),a(null);const X=await z5();r(X);const ce=$5(X),z=W5(X);_(ce),j(z)}catch(X){a(X.message),console.error("Error loading data:",X)}finally{i(!1)}};$.useEffect(()=>{R()},[]);const P=()=>{R()},fe=X=>{var Ie,V,Z;const ce=n[X]||[],z=Mm(ce,h,v,S,X,m),Y=Om(),L=Lm(z,Y,"Zone",X,S),H=((V=(Ie=L.datasets[0])==null?void 0:Ie.data)==null?void 0:V.reduce((Me,Ye)=>Me+Ye,0))||0,Q=Math.max(...((Z=L.datasets[0])==null?void 0:Z.data)||[0]),te=L.labels.length;return c.jsxs("div",{className:"uniform-chart-card group cursor-pointer transform transition-all duration-300 hover:scale-105 hover:shadow-2xl",onClick:()=>I(!0),children:[c.jsxs("div",{className:"card-header",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon bg-gradient-to-br from-red-500 to-orange-500",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"card-title",children:Lr[X]}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator success"}),c.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"Click to open detailed view"})]})]})]}),c.jsx("div",{className:"flex items-center",children:c.jsx("svg",{className:"w-6 h-6 text-gray-400 group-hover:text-red-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]}),c.jsx("div",{className:"chart-container",children:c.jsxs("div",{className:"chart-area flex flex-col items-center justify-center bg-gradient-to-br from-red-50 to-orange-50",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-md mb-6",children:[c.jsxs("div",{className:"text-center bg-white bg-opacity-70 rounded-lg p-3 backdrop-blur-sm",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:H}),c.jsx("div",{className:"text-xs text-gray-600",children:"Total Vehicles"})]}),c.jsxs("div",{className:"text-center bg-white bg-opacity-70 rounded-lg p-3 backdrop-blur-sm",children:[c.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Q===-1/0?"0":Q}),c.jsx("div",{className:"text-xs text-gray-600",children:"Max per Zone"})]}),c.jsxs("div",{className:"text-center bg-white bg-opacity-70 rounded-lg p-3 backdrop-blur-sm",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:te}),c.jsx("div",{className:"text-xs text-gray-600",children:"Active Zones"})]})]}),c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-full px-6 py-3 font-semibold shadow-lg group-hover:shadow-xl transition-all duration-200 flex items-center",children:[c.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Detailed Analysis"]})})]})})]})},le=X=>{const ce=n[X]||[],Y=X==="lessThan3Trips"?S:null,L=Mm(ce,h,v,Y,X,m),H=Om(),Q=Lm(L,H,"Zone",X,Y),te=jk(Lr[X],X);return X==="sphereWorkshopExit"?c.jsx(Dm,{data:Q,options:te,title:Lr[X],loading:s,error:o,sheetName:X,rawData:L},`${X}-${h==null?void 0:h.from}-${h==null?void 0:h.to}-${m}-${v}-${Y}`):c.jsx(Dm,{data:Q,options:te,title:Lr[X],loading:s,error:o,sheetName:X,rawData:L},`${X}-${h==null?void 0:h.from}-${h==null?void 0:h.to}-${m}-${v}-${Y}`)};return s&&Object.keys(n).length===0?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),c.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Loading Dashboard..."})]})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(lO,{availableZones:N,user:t,onLogin:C,onLogout:A,onShowAdminPanel:()=>E(!0)}),D&&(t==null?void 0:t.role)==="admin"&&c.jsx(mO,{currentUser:t,onClose:()=>E(!1)}),c.jsx(C5,{isOpen:x,onClose:()=>I(!1),allData:n,dateRange:h,quickDate:m,selectedZone:v,loading:s,error:o}),c.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-4 lg:py-6 max-w-full overflow-x-hidden",children:[c.jsx(sO,{selectedDate:l,setSelectedDate:u,dateRange:h,setDateRange:f,quickDate:m,setQuickDate:g,selectedZone:v,setSelectedZone:w,availableZones:N,onRefresh:P}),o&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),c.jsx("p",{className:"mt-1 text-sm text-red-700",children:o})]})]})}),c.jsx("div",{className:"charts-grid grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 lg:gap-8 auto-rows-fr",children:Object.keys(Lr).map(X=>c.jsx("div",{className:"chart-container",children:X==="lessThan3Trips"?fe(X):le(X)},X))}),!s&&!o&&c.jsx("div",{className:"mt-8 md:mt-12"})]})]})},q5=({onSuccess:t,onSwitchToSignup:e})=>{const[n,r]=$.useState({email:"",password:""}),[s,i]=$.useState(!1),[o,a]=$.useState(""),l=h=>{r({...n,[h.target.name]:h.target.value}),a("")},u=async h=>{h.preventDefault(),i(!0),a("");try{const f=await rD(n.email,n.password);f.success?t(f.user):a(f.message)}catch{a("An unexpected error occurred. Please try again.")}finally{i(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-3 sm:p-4 lg:p-6",children:c.jsxs("div",{className:"w-full max-w-sm sm:max-w-md lg:max-w-lg",children:[c.jsx("div",{className:"text-center mb-6 sm:mb-8",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-3 sm:space-y-0 sm:space-x-4 mb-4 sm:mb-6",children:[c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-white rounded-lg flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-blue-900",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),c.jsxs("div",{className:"text-white text-center sm:text-left",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"IMC ICCC"}),c.jsx("p",{className:"text-blue-200 text-xs sm:text-sm",children:"Vehicle Management System"})]})]})}),c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl mobile-form tablet-optimized p-4 sm:p-6 lg:p-8",children:[c.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),c.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Sign in to access the dashboard"})]}),o&&c.jsx("div",{className:"mb-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"text-red-700 text-sm leading-relaxed",children:o})]})}),c.jsxs("form",{onSubmit:u,className:"space-y-4 sm:space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:l,required:!0,className:"w-full px-3 sm:px-4 py-3 sm:py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Enter your email"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),c.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:l,required:!0,className:"w-full px-3 sm:px-4 py-3 sm:py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Enter your password"})]}),c.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 sm:py-4 px-4 rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed text-base touch-manipulation min-h-[48px]",children:s?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing In..."]}):"Sign In"})]}),c.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:c.jsxs("p",{className:"text-gray-600 text-sm",children:["Don't have an account?"," ",c.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-700 font-medium touch-manipulation",children:"Request Access"})]})}),c.jsx("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-gray-200",children:c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Secure access to IMC Vehicle Management System"}),c.jsx("p",{className:"text-xs text-gray-400",children:"All access requests require admin approval"})]})})]})]})})},K5=({onSuccess:t,onSwitchToLogin:e})=>{const[n,r]=$.useState({name:"",email:"",password:"",confirmPassword:"",department:"",phone:"",role:bt.VIEWER}),[s,i]=$.useState(!1),[o,a]=$.useState(""),[l,u]=$.useState(""),h=["Traffic Management","Public Transport","Emergency Services","Municipal Operations","IT Department","Administration","Other"],f=v=>{r({...n,[v.target.name]:v.target.value}),a(""),u("")},m=()=>n.password!==n.confirmPassword?(a("Passwords do not match"),!1):n.password.length<6?(a("Password must be at least 6 characters long"),!1):!0,g=async v=>{if(v.preventDefault(),i(!0),a(""),u(""),!m()){i(!1);return}try{console.log(" Starting signup process from component...",{email:n.email});const w=await nD(n);console.log(" Signup result:",w),w.success?(u(w.message),console.log(" Signup successful, resetting form..."),r({name:"",email:"",password:"",confirmPassword:"",department:"",phone:"",role:bt.VIEWER})):(console.log(" Signup failed:",w.message),a(w.message))}catch(w){console.error(" Signup error in component:",w),a("An unexpected error occurred. Please try again.")}finally{console.log(" Signup process completed, setting loading to false"),i(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-3 sm:p-4 lg:p-6",children:c.jsxs("div",{className:"w-full max-w-sm sm:max-w-md lg:max-w-lg",children:[c.jsx("div",{className:"text-center mb-6 sm:mb-8",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-3 sm:space-y-0 sm:space-x-4 mb-4 sm:mb-6",children:[c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-white rounded-lg flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-blue-900",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),c.jsxs("div",{className:"text-white text-center sm:text-left",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"IMC ICCC"}),c.jsx("p",{className:"text-blue-200 text-xs sm:text-sm",children:"Vehicle Management System"})]})]})}),c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl mobile-form tablet-optimized p-4 sm:p-6 lg:p-8",children:[c.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:"Request Access"}),c.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Submit your details for admin approval"})]}),o&&c.jsx("div",{className:"mb-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"text-red-700 text-sm leading-relaxed",children:o})]})}),l&&c.jsx("div",{className:"mb-4 p-3 sm:p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c.jsx("span",{className:"text-green-700 text-sm leading-relaxed",children:l})]})}),c.jsxs("form",{onSubmit:g,className:"space-y-3 sm:space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),c.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:f,required:!0,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Enter your full name"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:f,required:!0,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Enter your email"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),c.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:f,required:!0,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Password"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"}),c.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:f,required:!0,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Confirm"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department *"}),c.jsxs("select",{id:"department",name:"department",value:n.department,onChange:f,required:!0,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",children:[c.jsx("option",{value:"",children:"Select Department"}),h.map(v=>c.jsx("option",{value:v,children:v},v))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),c.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:f,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Enter your phone number"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Requested Role"}),c.jsxs("select",{id:"role",name:"role",value:n.role,onChange:f,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",children:[c.jsx("option",{value:bt.VIEWER,children:"Viewer (Read Only)"}),c.jsx("option",{value:bt.OPERATOR,children:"Operator (Limited Access)"})]})]}),c.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 sm:py-4 px-4 rounded-lg hover:from-green-700 hover:to-emerald-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed text-base touch-manipulation min-h-[48px]",children:s?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Submitting Request..."]}):"Submit Access Request"})]}),c.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:c.jsxs("p",{className:"text-gray-600 text-sm",children:["Already have an account?"," ",c.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-700 font-medium touch-manipulation",children:"Sign In"})]})}),c.jsx("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-gray-200",children:c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Your request will be reviewed by an administrator"}),c.jsx("p",{className:"text-xs text-gray-400",children:"You will be notified once your access is approved"})]})})]})]})})},G5=({onAuthSuccess:t})=>{const[e,n]=$.useState(!0),r=o=>{t(o)},s=()=>{n(!1)},i=()=>{n(!0)};return c.jsx(c.Fragment,{children:e?c.jsx(q5,{onSuccess:r,onSwitchToSignup:s}):c.jsx(K5,{onSuccess:r,onSwitchToLogin:i})})},Y5=()=>{const{user:t,loading:e,authChecked:n}=UE();return e||!n?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),c.jsx("p",{className:"text-white text-lg",children:"Loading IMC ICCC System..."})]})}):t?c.jsx(H5,{}):c.jsx(G5,{onAuthSuccess:()=>{}})};function Q5(){return $.useEffect(()=>{tO()},[]),c.jsx(hD,{children:c.jsx("div",{className:"App",children:c.jsx(Y5,{})})})}rf.createRoot(document.getElementById("root")).render(c.jsx(zm.StrictMode,{children:c.jsx(Q5,{})}));
