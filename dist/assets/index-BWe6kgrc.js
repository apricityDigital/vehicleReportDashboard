var NT=Object.defineProperty;var AT=(t,e,n)=>e in t?NT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>AT(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o1={exports:{}},md={},a1={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=Symbol.for("react.element"),PT=Symbol.for("react.portal"),RT=Symbol.for("react.fragment"),DT=Symbol.for("react.strict_mode"),MT=Symbol.for("react.profiler"),LT=Symbol.for("react.provider"),OT=Symbol.for("react.context"),VT=Symbol.for("react.forward_ref"),FT=Symbol.for("react.suspense"),BT=Symbol.for("react.memo"),zT=Symbol.for("react.lazy"),tv=Symbol.iterator;function UT(t){return t===null||typeof t!="object"?null:(t=tv&&t[tv]||t["@@iterator"],typeof t=="function"?t:null)}var l1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c1=Object.assign,u1={};function vo(t,e,n){this.props=t,this.context=e,this.refs=u1,this.updater=n||l1}vo.prototype.isReactComponent={};vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d1(){}d1.prototype=vo.prototype;function Ym(t,e,n){this.props=t,this.context=e,this.refs=u1,this.updater=n||l1}var Qm=Ym.prototype=new d1;Qm.constructor=Ym;c1(Qm,vo.prototype);Qm.isPureReactComponent=!0;var nv=Array.isArray,h1=Object.prototype.hasOwnProperty,Xm={current:null},f1={key:!0,ref:!0,__self:!0,__source:!0};function m1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)h1.call(e,r)&&!f1.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:yl,type:t,key:i,ref:o,props:s,_owner:Xm.current}}function WT(t,e){return{$$typeof:yl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zm(t){return typeof t=="object"&&t!==null&&t.$$typeof===yl}function $T(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rv=/\/+/g;function xh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$T(""+t.key):e.toString(36)}function Oc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yl:case PT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+xh(o,0):r,nv(s)?(n="",t!=null&&(n=t.replace(rv,"$&/")+"/"),Oc(s,e,n,"",function(u){return u})):s!=null&&(Zm(s)&&(s=WT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(rv,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",nv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+xh(i,a);o+=Oc(i,e,n,l,s)}else if(l=UT(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+xh(i,a++),o+=Oc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ec(t,e,n){if(t==null)return t;var r=[],s=0;return Oc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function HT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Vc={transition:null},qT={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Vc,ReactCurrentOwner:Xm};function p1(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:ec,forEach:function(t,e,n){ec(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ec(t,function(){e++}),e},toArray:function(t){return ec(t,function(e){return e})||[]},only:function(t){if(!Zm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=vo;oe.Fragment=RT;oe.Profiler=MT;oe.PureComponent=Ym;oe.StrictMode=DT;oe.Suspense=FT;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qT;oe.act=p1;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=c1({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)h1.call(e,l)&&!f1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:yl,type:t.type,key:s,ref:i,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:OT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LT,_context:t},t.Consumer=t};oe.createElement=m1;oe.createFactory=function(t){var e=m1.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:VT,render:t}};oe.isValidElement=Zm;oe.lazy=function(t){return{$$typeof:zT,_payload:{_status:-1,_result:t},_init:HT}};oe.memo=function(t,e){return{$$typeof:BT,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Vc.transition;Vc.transition={};try{t()}finally{Vc.transition=e}};oe.unstable_act=p1;oe.useCallback=function(t,e){return Mt.current.useCallback(t,e)};oe.useContext=function(t){return Mt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return Mt.current.useEffect(t,e)};oe.useId=function(){return Mt.current.useId()};oe.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Mt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};oe.useRef=function(t){return Mt.current.useRef(t)};oe.useState=function(t){return Mt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Mt.current.useTransition()};oe.version="18.3.1";a1.exports=oe;var W=a1.exports;const Jm=jT(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT=W,KT=Symbol.for("react.element"),YT=Symbol.for("react.fragment"),QT=Object.prototype.hasOwnProperty,XT=GT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZT={key:!0,ref:!0,__self:!0,__source:!0};function g1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QT.call(e,r)&&!ZT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:KT,type:t,key:i,ref:o,props:s,_owner:XT.current}}md.Fragment=YT;md.jsx=g1;md.jsxs=g1;o1.exports=md;var c=o1.exports,gf={},v1={exports:{}},on={},y1={exports:{}},x1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Y){var L=U.length;U.push(Y);e:for(;0<L;){var H=L-1>>>1,Q=U[H];if(0<s(Q,Y))U[H]=Y,U[L]=Q,L=H;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Y=U[0],L=U.pop();if(L!==Y){U[0]=L;e:for(var H=0,Q=U.length,Z=Q>>>1;H<Z;){var Ie=2*(H+1)-1,Be=U[Ie],He=Ie+1,z=U[He];if(0>s(Be,L))He<Q&&0>s(z,Be)?(U[H]=z,U[He]=L,H=He):(U[H]=Be,U[Ie]=L,H=Ie);else if(He<Q&&0>s(z,L))U[H]=z,U[He]=L,H=He;else break e}}return Y}function s(U,Y){var L=U.sortIndex-Y.sortIndex;return L!==0?L:U.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,m=3,g=!1,y=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=U)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function C(U){if(w=!1,b(U),!y)if(n(l)!==null)y=!0,ae(A);else{var Y=n(u);Y!==null&&de(C,Y.startTime-U)}}function A(U,Y){y=!1,w&&(w=!1,_(x),x=-1),g=!0;var L=m;try{for(b(Y),f=n(l);f!==null&&(!(f.expirationTime>Y)||U&&!j());){var H=f.callback;if(typeof H=="function"){f.callback=null,m=f.priorityLevel;var Q=H(f.expirationTime<=Y);Y=t.unstable_now(),typeof Q=="function"?f.callback=Q:f===n(l)&&r(l),b(Y)}else r(l);f=n(l)}if(f!==null)var Z=!0;else{var Ie=n(u);Ie!==null&&de(C,Ie.startTime-Y),Z=!1}return Z}finally{f=null,m=L,g=!1}}var D=!1,E=null,x=-1,I=5,N=-1;function j(){return!(t.unstable_now()-N<I)}function R(){if(E!==null){var U=t.unstable_now();N=U;var Y=!0;try{Y=E(!0,U)}finally{Y?P():(D=!1,E=null)}}else D=!1}var P;if(typeof k=="function")P=function(){k(R)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,se=fe.port2;fe.port1.onmessage=R,P=function(){se.postMessage(null)}}else P=function(){T(R,0)};function ae(U){E=U,D||(D=!0,P())}function de(U,Y){x=T(function(){U(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,ae(A))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var L=m;m=Y;try{return U()}finally{m=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var L=m;m=U;try{return Y()}finally{m=L}},t.unstable_scheduleCallback=function(U,Y,L){var H=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?H+L:H):L=H,U){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=L+Q,U={id:h++,callback:Y,priorityLevel:U,startTime:L,expirationTime:Q,sortIndex:-1},L>H?(U.sortIndex=L,e(u,U),n(l)===null&&U===n(u)&&(w?(_(x),x=-1):w=!0,de(C,L-H))):(U.sortIndex=Q,e(l,U),y||g||(y=!0,ae(A))),U},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(U){var Y=m;return function(){var L=m;m=Y;try{return U.apply(this,arguments)}finally{m=L}}}})(x1);y1.exports=x1;var JT=y1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS=W,rn=JT;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _1=new Set,Oa={};function ii(t,e){Xi(t,e),Xi(t+"Capture",e)}function Xi(t,e){for(Oa[t]=e,t=0;t<e.length;t++)_1.add(e[t])}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vf=Object.prototype.hasOwnProperty,tS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sv={},iv={};function nS(t){return vf.call(iv,t)?!0:vf.call(sv,t)?!1:tS.test(t)?iv[t]=!0:(sv[t]=!0,!1)}function rS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sS(t,e,n,r){if(e===null||typeof e>"u"||rS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ep=/[\-:]([a-z])/g;function tp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ep,tp);dt[e]=new Lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ep,tp);dt[e]=new Lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ep,tp);dt[e]=new Lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function np(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sS(e,n,s,r)&&(n=null),r||s===null?nS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kr=eS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tc=Symbol.for("react.element"),Ti=Symbol.for("react.portal"),Si=Symbol.for("react.fragment"),rp=Symbol.for("react.strict_mode"),yf=Symbol.for("react.profiler"),w1=Symbol.for("react.provider"),b1=Symbol.for("react.context"),sp=Symbol.for("react.forward_ref"),xf=Symbol.for("react.suspense"),_f=Symbol.for("react.suspense_list"),ip=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),k1=Symbol.for("react.offscreen"),ov=Symbol.iterator;function Uo(t){return t===null||typeof t!="object"?null:(t=ov&&t[ov]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,_h;function sa(t){if(_h===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_h=e&&e[1]||""}return`
`+_h+t}var wh=!1;function bh(t,e){if(!t||wh)return"";wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{wh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sa(t):""}function iS(t){switch(t.tag){case 5:return sa(t.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return t=bh(t.type,!1),t;case 11:return t=bh(t.type.render,!1),t;case 1:return t=bh(t.type,!0),t;default:return""}}function wf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Si:return"Fragment";case Ti:return"Portal";case yf:return"Profiler";case rp:return"StrictMode";case xf:return"Suspense";case _f:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case b1:return(t.displayName||"Context")+".Consumer";case w1:return(t._context.displayName||"Context")+".Provider";case sp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ip:return e=t.displayName||null,e!==null?e:wf(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return wf(t(e))}catch{}}return null}function oS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wf(e);case 8:return e===rp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aS(t){var e=E1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nc(t){t._valueTracker||(t._valueTracker=aS(t))}function T1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=E1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function du(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bf(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function av(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S1(t,e){e=e.checked,e!=null&&np(t,"checked",e,!1)}function kf(t,e){S1(t,e);var n=ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ef(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ef(t,e.type,ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ef(t,e,n){(e!=="number"||du(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ia=Array.isArray;function Vi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ls(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Tf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(ia(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ls(n)}}function I1(t,e){var n=ls(e.value),r=ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function uv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function C1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?C1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rc,N1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rc=rc||document.createElement("div"),rc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Va(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lS=["Webkit","ms","Moz","O"];Object.keys(ya).forEach(function(t){lS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ya[e]=ya[t]})});function A1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ya.hasOwnProperty(t)&&ya[t]?(""+e).trim():e+"px"}function j1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=A1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var cS=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function If(t,e){if(e){if(cS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Cf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nf=null;function op(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Af=null,Fi=null,Bi=null;function dv(t){if(t=wl(t)){if(typeof Af!="function")throw Error(B(280));var e=t.stateNode;e&&(e=xd(e),Af(t.stateNode,t.type,e))}}function P1(t){Fi?Bi?Bi.push(t):Bi=[t]:Fi=t}function R1(){if(Fi){var t=Fi,e=Bi;if(Bi=Fi=null,dv(t),e)for(t=0;t<e.length;t++)dv(e[t])}}function D1(t,e){return t(e)}function M1(){}var kh=!1;function L1(t,e,n){if(kh)return t(e,n);kh=!0;try{return D1(t,e,n)}finally{kh=!1,(Fi!==null||Bi!==null)&&(M1(),R1())}}function Fa(t,e){var n=t.stateNode;if(n===null)return null;var r=xd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var jf=!1;if(pr)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){jf=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{jf=!1}function uS(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var xa=!1,hu=null,fu=!1,Pf=null,dS={onError:function(t){xa=!0,hu=t}};function hS(t,e,n,r,s,i,o,a,l){xa=!1,hu=null,uS.apply(dS,arguments)}function fS(t,e,n,r,s,i,o,a,l){if(hS.apply(this,arguments),xa){if(xa){var u=hu;xa=!1,hu=null}else throw Error(B(198));fu||(fu=!0,Pf=u)}}function oi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function O1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hv(t){if(oi(t)!==t)throw Error(B(188))}function mS(t){var e=t.alternate;if(!e){if(e=oi(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return hv(s),t;if(i===r)return hv(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function V1(t){return t=mS(t),t!==null?F1(t):null}function F1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=F1(t);if(e!==null)return e;t=t.sibling}return null}var B1=rn.unstable_scheduleCallback,fv=rn.unstable_cancelCallback,pS=rn.unstable_shouldYield,gS=rn.unstable_requestPaint,We=rn.unstable_now,vS=rn.unstable_getCurrentPriorityLevel,ap=rn.unstable_ImmediatePriority,z1=rn.unstable_UserBlockingPriority,mu=rn.unstable_NormalPriority,yS=rn.unstable_LowPriority,U1=rn.unstable_IdlePriority,pd=null,Un=null;function xS(t){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(pd,t,void 0,(t.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:bS,_S=Math.log,wS=Math.LN2;function bS(t){return t>>>=0,t===0?32:31-(_S(t)/wS|0)|0}var sc=64,ic=4194304;function oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=oa(a):(i&=o,i!==0&&(r=oa(i)))}else o=n&~s,o!==0?r=oa(o):i!==0&&(r=oa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-In(e),s=1<<n,r|=t[n],e&=~s;return r}function kS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ES(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-In(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=kS(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Rf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function W1(){var t=sc;return sc<<=1,!(sc&4194240)&&(sc=64),t}function Eh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-In(e),t[e]=n}function TS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-In(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-In(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ke=0;function $1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var H1,cp,q1,G1,K1,Df=!1,oc=[],Kr=null,Yr=null,Qr=null,Ba=new Map,za=new Map,Lr=[],SS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mv(t,e){switch(t){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":za.delete(e.pointerId)}}function $o(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=wl(e),e!==null&&cp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function IS(t,e,n,r,s){switch(e){case"focusin":return Kr=$o(Kr,t,e,n,r,s),!0;case"dragenter":return Yr=$o(Yr,t,e,n,r,s),!0;case"mouseover":return Qr=$o(Qr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ba.set(i,$o(Ba.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,za.set(i,$o(za.get(i)||null,t,e,n,r,s)),!0}return!1}function Y1(t){var e=Ls(t.target);if(e!==null){var n=oi(e);if(n!==null){if(e=n.tag,e===13){if(e=O1(n),e!==null){t.blockedOn=e,K1(t.priority,function(){q1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nf=r,n.target.dispatchEvent(r),Nf=null}else return e=wl(n),e!==null&&cp(e),t.blockedOn=n,!1;e.shift()}return!0}function pv(t,e,n){Fc(t)&&n.delete(e)}function CS(){Df=!1,Kr!==null&&Fc(Kr)&&(Kr=null),Yr!==null&&Fc(Yr)&&(Yr=null),Qr!==null&&Fc(Qr)&&(Qr=null),Ba.forEach(pv),za.forEach(pv)}function Ho(t,e){t.blockedOn===e&&(t.blockedOn=null,Df||(Df=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,CS)))}function Ua(t){function e(s){return Ho(s,t)}if(0<oc.length){Ho(oc[0],t);for(var n=1;n<oc.length;n++){var r=oc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kr!==null&&Ho(Kr,t),Yr!==null&&Ho(Yr,t),Qr!==null&&Ho(Qr,t),Ba.forEach(e),za.forEach(e),n=0;n<Lr.length;n++)r=Lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lr.length&&(n=Lr[0],n.blockedOn===null);)Y1(n),n.blockedOn===null&&Lr.shift()}var zi=kr.ReactCurrentBatchConfig,gu=!0;function NS(t,e,n,r){var s=ke,i=zi.transition;zi.transition=null;try{ke=1,up(t,e,n,r)}finally{ke=s,zi.transition=i}}function AS(t,e,n,r){var s=ke,i=zi.transition;zi.transition=null;try{ke=4,up(t,e,n,r)}finally{ke=s,zi.transition=i}}function up(t,e,n,r){if(gu){var s=Mf(t,e,n,r);if(s===null)Dh(t,e,r,vu,n),mv(t,r);else if(IS(s,t,e,n,r))r.stopPropagation();else if(mv(t,r),e&4&&-1<SS.indexOf(t)){for(;s!==null;){var i=wl(s);if(i!==null&&H1(i),i=Mf(t,e,n,r),i===null&&Dh(t,e,r,vu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Dh(t,e,r,null,n)}}var vu=null;function Mf(t,e,n,r){if(vu=null,t=op(r),t=Ls(t),t!==null)if(e=oi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=O1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vu=t,null}function Q1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vS()){case ap:return 1;case z1:return 4;case mu:case yS:return 16;case U1:return 536870912;default:return 16}default:return 16}}var Wr=null,dp=null,Bc=null;function X1(){if(Bc)return Bc;var t,e=dp,n=e.length,r,s="value"in Wr?Wr.value:Wr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Bc=s.slice(t,1<r?1-r:void 0)}function zc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ac(){return!0}function gv(){return!1}function an(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ac:gv,this.isPropagationStopped=gv,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),e}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hp=an(yo),_l=Le({},yo,{view:0,detail:0}),jS=an(_l),Th,Sh,qo,gd=Le({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qo&&(qo&&t.type==="mousemove"?(Th=t.screenX-qo.screenX,Sh=t.screenY-qo.screenY):Sh=Th=0,qo=t),Th)},movementY:function(t){return"movementY"in t?t.movementY:Sh}}),vv=an(gd),PS=Le({},gd,{dataTransfer:0}),RS=an(PS),DS=Le({},_l,{relatedTarget:0}),Ih=an(DS),MS=Le({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),LS=an(MS),OS=Le({},yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VS=an(OS),FS=Le({},yo,{data:0}),yv=an(FS),BS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},US={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=US[t])?!!e[t]:!1}function fp(){return WS}var $S=Le({},_l,{key:function(t){if(t.key){var e=BS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fp,charCode:function(t){return t.type==="keypress"?zc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HS=an($S),qS=Le({},gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xv=an(qS),GS=Le({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fp}),KS=an(GS),YS=Le({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),QS=an(YS),XS=Le({},gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZS=an(XS),JS=[9,13,27,32],mp=pr&&"CompositionEvent"in window,_a=null;pr&&"documentMode"in document&&(_a=document.documentMode);var eI=pr&&"TextEvent"in window&&!_a,Z1=pr&&(!mp||_a&&8<_a&&11>=_a),_v=" ",wv=!1;function J1(t,e){switch(t){case"keyup":return JS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ii=!1;function tI(t,e){switch(t){case"compositionend":return e2(e);case"keypress":return e.which!==32?null:(wv=!0,_v);case"textInput":return t=e.data,t===_v&&wv?null:t;default:return null}}function nI(t,e){if(Ii)return t==="compositionend"||!mp&&J1(t,e)?(t=X1(),Bc=dp=Wr=null,Ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Z1&&e.locale!=="ko"?null:e.data;default:return null}}var rI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rI[t.type]:e==="textarea"}function t2(t,e,n,r){P1(r),e=yu(e,"onChange"),0<e.length&&(n=new hp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wa=null,Wa=null;function sI(t){h2(t,0)}function vd(t){var e=Ai(t);if(T1(e))return t}function iI(t,e){if(t==="change")return e}var n2=!1;if(pr){var Ch;if(pr){var Nh="oninput"in document;if(!Nh){var kv=document.createElement("div");kv.setAttribute("oninput","return;"),Nh=typeof kv.oninput=="function"}Ch=Nh}else Ch=!1;n2=Ch&&(!document.documentMode||9<document.documentMode)}function Ev(){wa&&(wa.detachEvent("onpropertychange",r2),Wa=wa=null)}function r2(t){if(t.propertyName==="value"&&vd(Wa)){var e=[];t2(e,Wa,t,op(t)),L1(sI,e)}}function oI(t,e,n){t==="focusin"?(Ev(),wa=e,Wa=n,wa.attachEvent("onpropertychange",r2)):t==="focusout"&&Ev()}function aI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vd(Wa)}function lI(t,e){if(t==="click")return vd(e)}function cI(t,e){if(t==="input"||t==="change")return vd(e)}function uI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pn=typeof Object.is=="function"?Object.is:uI;function $a(t,e){if(Pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vf.call(e,s)||!Pn(t[s],e[s]))return!1}return!0}function Tv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sv(t,e){var n=Tv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tv(n)}}function s2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i2(){for(var t=window,e=du();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=du(t.document)}return e}function pp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dI(t){var e=i2(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&s2(n.ownerDocument.documentElement,n)){if(r!==null&&pp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Sv(n,i);var o=Sv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hI=pr&&"documentMode"in document&&11>=document.documentMode,Ci=null,Lf=null,ba=null,Of=!1;function Iv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Of||Ci==null||Ci!==du(r)||(r=Ci,"selectionStart"in r&&pp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ba&&$a(ba,r)||(ba=r,r=yu(Lf,"onSelect"),0<r.length&&(e=new hp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ci)))}function lc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ni={animationend:lc("Animation","AnimationEnd"),animationiteration:lc("Animation","AnimationIteration"),animationstart:lc("Animation","AnimationStart"),transitionend:lc("Transition","TransitionEnd")},Ah={},o2={};pr&&(o2=document.createElement("div").style,"AnimationEvent"in window||(delete Ni.animationend.animation,delete Ni.animationiteration.animation,delete Ni.animationstart.animation),"TransitionEvent"in window||delete Ni.transitionend.transition);function yd(t){if(Ah[t])return Ah[t];if(!Ni[t])return t;var e=Ni[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in o2)return Ah[t]=e[n];return t}var a2=yd("animationend"),l2=yd("animationiteration"),c2=yd("animationstart"),u2=yd("transitionend"),d2=new Map,Cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(t,e){d2.set(t,e),ii(e,[t])}for(var jh=0;jh<Cv.length;jh++){var Ph=Cv[jh],fI=Ph.toLowerCase(),mI=Ph[0].toUpperCase()+Ph.slice(1);vs(fI,"on"+mI)}vs(a2,"onAnimationEnd");vs(l2,"onAnimationIteration");vs(c2,"onAnimationStart");vs("dblclick","onDoubleClick");vs("focusin","onFocus");vs("focusout","onBlur");vs(u2,"onTransitionEnd");Xi("onMouseEnter",["mouseout","mouseover"]);Xi("onMouseLeave",["mouseout","mouseover"]);Xi("onPointerEnter",["pointerout","pointerover"]);Xi("onPointerLeave",["pointerout","pointerover"]);ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pI=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function Nv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fS(r,e,void 0,t),t.currentTarget=null}function h2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Nv(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Nv(s,a,u),i=l}}}if(fu)throw t=Pf,fu=!1,Pf=null,t}function Ne(t,e){var n=e[Uf];n===void 0&&(n=e[Uf]=new Set);var r=t+"__bubble";n.has(r)||(f2(e,t,2,!1),n.add(r))}function Rh(t,e,n){var r=0;e&&(r|=4),f2(n,t,r,e)}var cc="_reactListening"+Math.random().toString(36).slice(2);function Ha(t){if(!t[cc]){t[cc]=!0,_1.forEach(function(n){n!=="selectionchange"&&(pI.has(n)||Rh(n,!1,t),Rh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cc]||(e[cc]=!0,Rh("selectionchange",!1,e))}}function f2(t,e,n,r){switch(Q1(e)){case 1:var s=NS;break;case 4:s=AS;break;default:s=up}n=s.bind(null,e,n,t),s=void 0,!jf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Dh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ls(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}L1(function(){var u=i,h=op(n),f=[];e:{var m=d2.get(t);if(m!==void 0){var g=hp,y=t;switch(t){case"keypress":if(zc(n)===0)break e;case"keydown":case"keyup":g=HS;break;case"focusin":y="focus",g=Ih;break;case"focusout":y="blur",g=Ih;break;case"beforeblur":case"afterblur":g=Ih;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=vv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=RS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=KS;break;case a2:case l2:case c2:g=LS;break;case u2:g=QS;break;case"scroll":g=jS;break;case"wheel":g=ZS;break;case"copy":case"cut":case"paste":g=VS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=xv}var w=(e&4)!==0,T=!w&&t==="scroll",_=w?m!==null?m+"Capture":null:m;w=[];for(var k=u,b;k!==null;){b=k;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,_!==null&&(C=Fa(k,_),C!=null&&w.push(qa(k,C,b)))),T)break;k=k.return}0<w.length&&(m=new g(m,y,null,n,h),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Nf&&(y=n.relatedTarget||n.fromElement)&&(Ls(y)||y[gr]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?Ls(y):null,y!==null&&(T=oi(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(w=vv,C="onMouseLeave",_="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(w=xv,C="onPointerLeave",_="onPointerEnter",k="pointer"),T=g==null?m:Ai(g),b=y==null?m:Ai(y),m=new w(C,k+"leave",g,n,h),m.target=T,m.relatedTarget=b,C=null,Ls(h)===u&&(w=new w(_,k+"enter",y,n,h),w.target=b,w.relatedTarget=T,C=w),T=C,g&&y)t:{for(w=g,_=y,k=0,b=w;b;b=vi(b))k++;for(b=0,C=_;C;C=vi(C))b++;for(;0<k-b;)w=vi(w),k--;for(;0<b-k;)_=vi(_),b--;for(;k--;){if(w===_||_!==null&&w===_.alternate)break t;w=vi(w),_=vi(_)}w=null}else w=null;g!==null&&Av(f,m,g,w,!1),y!==null&&T!==null&&Av(f,T,y,w,!0)}}e:{if(m=u?Ai(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var A=iI;else if(bv(m))if(n2)A=cI;else{A=aI;var D=oI}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=lI);if(A&&(A=A(t,u))){t2(f,A,n,h);break e}D&&D(t,m,u),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&Ef(m,"number",m.value)}switch(D=u?Ai(u):window,t){case"focusin":(bv(D)||D.contentEditable==="true")&&(Ci=D,Lf=u,ba=null);break;case"focusout":ba=Lf=Ci=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,Iv(f,n,h);break;case"selectionchange":if(hI)break;case"keydown":case"keyup":Iv(f,n,h)}var E;if(mp)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ii?J1(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Z1&&n.locale!=="ko"&&(Ii||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ii&&(E=X1()):(Wr=h,dp="value"in Wr?Wr.value:Wr.textContent,Ii=!0)),D=yu(u,x),0<D.length&&(x=new yv(x,t,null,n,h),f.push({event:x,listeners:D}),E?x.data=E:(E=e2(n),E!==null&&(x.data=E)))),(E=eI?tI(t,n):nI(t,n))&&(u=yu(u,"onBeforeInput"),0<u.length&&(h=new yv("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=E))}h2(f,e)})}function qa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fa(t,n),i!=null&&r.unshift(qa(t,i,s)),i=Fa(t,e),i!=null&&r.push(qa(t,i,s))),t=t.return}return r}function vi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Av(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Fa(n,i),l!=null&&o.unshift(qa(n,l,a))):s||(l=Fa(n,i),l!=null&&o.push(qa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gI=/\r\n?/g,vI=/\u0000|\uFFFD/g;function jv(t){return(typeof t=="string"?t:""+t).replace(gI,`
`).replace(vI,"")}function uc(t,e,n){if(e=jv(e),jv(t)!==e&&n)throw Error(B(425))}function xu(){}var Vf=null,Ff=null;function Bf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zf=typeof setTimeout=="function"?setTimeout:void 0,yI=typeof clearTimeout=="function"?clearTimeout:void 0,Pv=typeof Promise=="function"?Promise:void 0,xI=typeof queueMicrotask=="function"?queueMicrotask:typeof Pv<"u"?function(t){return Pv.resolve(null).then(t).catch(_I)}:zf;function _I(t){setTimeout(function(){throw t})}function Mh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ua(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ua(e)}function Xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xo=Math.random().toString(36).slice(2),zn="__reactFiber$"+xo,Ga="__reactProps$"+xo,gr="__reactContainer$"+xo,Uf="__reactEvents$"+xo,wI="__reactListeners$"+xo,bI="__reactHandles$"+xo;function Ls(t){var e=t[zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gr]||n[zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rv(t);t!==null;){if(n=t[zn])return n;t=Rv(t)}return e}t=n,n=t.parentNode}return null}function wl(t){return t=t[zn]||t[gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function xd(t){return t[Ga]||null}var Wf=[],ji=-1;function ys(t){return{current:t}}function Pe(t){0>ji||(t.current=Wf[ji],Wf[ji]=null,ji--)}function Se(t,e){ji++,Wf[ji]=t.current,t.current=e}var cs={},It=ys(cs),$t=ys(!1),qs=cs;function Zi(t,e){var n=t.type.contextTypes;if(!n)return cs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ht(t){return t=t.childContextTypes,t!=null}function _u(){Pe($t),Pe(It)}function Dv(t,e,n){if(It.current!==cs)throw Error(B(168));Se(It,e),Se($t,n)}function m2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,oS(t)||"Unknown",s));return Le({},n,r)}function wu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cs,qs=It.current,Se(It,t),Se($t,$t.current),!0}function Mv(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=m2(t,e,qs),r.__reactInternalMemoizedMergedChildContext=t,Pe($t),Pe(It),Se(It,t)):Pe($t),Se($t,n)}var or=null,_d=!1,Lh=!1;function p2(t){or===null?or=[t]:or.push(t)}function kI(t){_d=!0,p2(t)}function xs(){if(!Lh&&or!==null){Lh=!0;var t=0,e=ke;try{var n=or;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}or=null,_d=!1}catch(s){throw or!==null&&(or=or.slice(t+1)),B1(ap,xs),s}finally{ke=e,Lh=!1}}return null}var Pi=[],Ri=0,bu=null,ku=0,cn=[],un=0,Gs=null,lr=1,cr="";function As(t,e){Pi[Ri++]=ku,Pi[Ri++]=bu,bu=t,ku=e}function g2(t,e,n){cn[un++]=lr,cn[un++]=cr,cn[un++]=Gs,Gs=t;var r=lr;t=cr;var s=32-In(r)-1;r&=~(1<<s),n+=1;var i=32-In(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,lr=1<<32-In(e)+s|n<<s|r,cr=i+t}else lr=1<<i|n<<s|r,cr=t}function gp(t){t.return!==null&&(As(t,1),g2(t,1,0))}function vp(t){for(;t===bu;)bu=Pi[--Ri],Pi[Ri]=null,ku=Pi[--Ri],Pi[Ri]=null;for(;t===Gs;)Gs=cn[--un],cn[un]=null,cr=cn[--un],cn[un]=null,lr=cn[--un],cn[un]=null}var nn=null,Jt=null,Re=!1,kn=null;function v2(t,e){var n=hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,Jt=Xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gs!==null?{id:lr,overflow:cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nn=t,Jt=null,!0):!1;default:return!1}}function $f(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hf(t){if(Re){var e=Jt;if(e){var n=e;if(!Lv(t,e)){if($f(t))throw Error(B(418));e=Xr(n.nextSibling);var r=nn;e&&Lv(t,e)?v2(r,n):(t.flags=t.flags&-4097|2,Re=!1,nn=t)}}else{if($f(t))throw Error(B(418));t.flags=t.flags&-4097|2,Re=!1,nn=t}}}function Ov(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function dc(t){if(t!==nn)return!1;if(!Re)return Ov(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bf(t.type,t.memoizedProps)),e&&(e=Jt)){if($f(t))throw y2(),Error(B(418));for(;e;)v2(t,e),e=Xr(e.nextSibling)}if(Ov(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=Xr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=nn?Xr(t.stateNode.nextSibling):null;return!0}function y2(){for(var t=Jt;t;)t=Xr(t.nextSibling)}function Ji(){Jt=nn=null,Re=!1}function yp(t){kn===null?kn=[t]:kn.push(t)}var EI=kr.ReactCurrentBatchConfig;function Go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function hc(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vv(t){var e=t._init;return e(t._payload)}function x2(t){function e(_,k){if(t){var b=_.deletions;b===null?(_.deletions=[k],_.flags|=16):b.push(k)}}function n(_,k){if(!t)return null;for(;k!==null;)e(_,k),k=k.sibling;return null}function r(_,k){for(_=new Map;k!==null;)k.key!==null?_.set(k.key,k):_.set(k.index,k),k=k.sibling;return _}function s(_,k){return _=ts(_,k),_.index=0,_.sibling=null,_}function i(_,k,b){return _.index=b,t?(b=_.alternate,b!==null?(b=b.index,b<k?(_.flags|=2,k):b):(_.flags|=2,k)):(_.flags|=1048576,k)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,k,b,C){return k===null||k.tag!==6?(k=Wh(b,_.mode,C),k.return=_,k):(k=s(k,b),k.return=_,k)}function l(_,k,b,C){var A=b.type;return A===Si?h(_,k,b.props.children,C,b.key):k!==null&&(k.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Dr&&Vv(A)===k.type)?(C=s(k,b.props),C.ref=Go(_,k,b),C.return=_,C):(C=Kc(b.type,b.key,b.props,null,_.mode,C),C.ref=Go(_,k,b),C.return=_,C)}function u(_,k,b,C){return k===null||k.tag!==4||k.stateNode.containerInfo!==b.containerInfo||k.stateNode.implementation!==b.implementation?(k=$h(b,_.mode,C),k.return=_,k):(k=s(k,b.children||[]),k.return=_,k)}function h(_,k,b,C,A){return k===null||k.tag!==7?(k=$s(b,_.mode,C,A),k.return=_,k):(k=s(k,b),k.return=_,k)}function f(_,k,b){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Wh(""+k,_.mode,b),k.return=_,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case tc:return b=Kc(k.type,k.key,k.props,null,_.mode,b),b.ref=Go(_,null,k),b.return=_,b;case Ti:return k=$h(k,_.mode,b),k.return=_,k;case Dr:var C=k._init;return f(_,C(k._payload),b)}if(ia(k)||Uo(k))return k=$s(k,_.mode,b,null),k.return=_,k;hc(_,k)}return null}function m(_,k,b,C){var A=k!==null?k.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return A!==null?null:a(_,k,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case tc:return b.key===A?l(_,k,b,C):null;case Ti:return b.key===A?u(_,k,b,C):null;case Dr:return A=b._init,m(_,k,A(b._payload),C)}if(ia(b)||Uo(b))return A!==null?null:h(_,k,b,C,null);hc(_,b)}return null}function g(_,k,b,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return _=_.get(b)||null,a(k,_,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case tc:return _=_.get(C.key===null?b:C.key)||null,l(k,_,C,A);case Ti:return _=_.get(C.key===null?b:C.key)||null,u(k,_,C,A);case Dr:var D=C._init;return g(_,k,b,D(C._payload),A)}if(ia(C)||Uo(C))return _=_.get(b)||null,h(k,_,C,A,null);hc(k,C)}return null}function y(_,k,b,C){for(var A=null,D=null,E=k,x=k=0,I=null;E!==null&&x<b.length;x++){E.index>x?(I=E,E=null):I=E.sibling;var N=m(_,E,b[x],C);if(N===null){E===null&&(E=I);break}t&&E&&N.alternate===null&&e(_,E),k=i(N,k,x),D===null?A=N:D.sibling=N,D=N,E=I}if(x===b.length)return n(_,E),Re&&As(_,x),A;if(E===null){for(;x<b.length;x++)E=f(_,b[x],C),E!==null&&(k=i(E,k,x),D===null?A=E:D.sibling=E,D=E);return Re&&As(_,x),A}for(E=r(_,E);x<b.length;x++)I=g(E,_,x,b[x],C),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?x:I.key),k=i(I,k,x),D===null?A=I:D.sibling=I,D=I);return t&&E.forEach(function(j){return e(_,j)}),Re&&As(_,x),A}function w(_,k,b,C){var A=Uo(b);if(typeof A!="function")throw Error(B(150));if(b=A.call(b),b==null)throw Error(B(151));for(var D=A=null,E=k,x=k=0,I=null,N=b.next();E!==null&&!N.done;x++,N=b.next()){E.index>x?(I=E,E=null):I=E.sibling;var j=m(_,E,N.value,C);if(j===null){E===null&&(E=I);break}t&&E&&j.alternate===null&&e(_,E),k=i(j,k,x),D===null?A=j:D.sibling=j,D=j,E=I}if(N.done)return n(_,E),Re&&As(_,x),A;if(E===null){for(;!N.done;x++,N=b.next())N=f(_,N.value,C),N!==null&&(k=i(N,k,x),D===null?A=N:D.sibling=N,D=N);return Re&&As(_,x),A}for(E=r(_,E);!N.done;x++,N=b.next())N=g(E,_,x,N.value,C),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?x:N.key),k=i(N,k,x),D===null?A=N:D.sibling=N,D=N);return t&&E.forEach(function(R){return e(_,R)}),Re&&As(_,x),A}function T(_,k,b,C){if(typeof b=="object"&&b!==null&&b.type===Si&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case tc:e:{for(var A=b.key,D=k;D!==null;){if(D.key===A){if(A=b.type,A===Si){if(D.tag===7){n(_,D.sibling),k=s(D,b.props.children),k.return=_,_=k;break e}}else if(D.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Dr&&Vv(A)===D.type){n(_,D.sibling),k=s(D,b.props),k.ref=Go(_,D,b),k.return=_,_=k;break e}n(_,D);break}else e(_,D);D=D.sibling}b.type===Si?(k=$s(b.props.children,_.mode,C,b.key),k.return=_,_=k):(C=Kc(b.type,b.key,b.props,null,_.mode,C),C.ref=Go(_,k,b),C.return=_,_=C)}return o(_);case Ti:e:{for(D=b.key;k!==null;){if(k.key===D)if(k.tag===4&&k.stateNode.containerInfo===b.containerInfo&&k.stateNode.implementation===b.implementation){n(_,k.sibling),k=s(k,b.children||[]),k.return=_,_=k;break e}else{n(_,k);break}else e(_,k);k=k.sibling}k=$h(b,_.mode,C),k.return=_,_=k}return o(_);case Dr:return D=b._init,T(_,k,D(b._payload),C)}if(ia(b))return y(_,k,b,C);if(Uo(b))return w(_,k,b,C);hc(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,k!==null&&k.tag===6?(n(_,k.sibling),k=s(k,b),k.return=_,_=k):(n(_,k),k=Wh(b,_.mode,C),k.return=_,_=k),o(_)):n(_,k)}return T}var eo=x2(!0),_2=x2(!1),Eu=ys(null),Tu=null,Di=null,xp=null;function _p(){xp=Di=Tu=null}function wp(t){var e=Eu.current;Pe(Eu),t._currentValue=e}function qf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ui(t,e){Tu=t,xp=Di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wt=!0),t.firstContext=null)}function pn(t){var e=t._currentValue;if(xp!==t)if(t={context:t,memoizedValue:e,next:null},Di===null){if(Tu===null)throw Error(B(308));Di=t,Tu.dependencies={lanes:0,firstContext:t}}else Di=Di.next=t;return e}var Os=null;function bp(t){Os===null?Os=[t]:Os.push(t)}function w2(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,bp(e)):(n.next=s.next,s.next=n),e.interleaved=n,vr(t,r)}function vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mr=!1;function kp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,vr(t,n)}return s=r.interleaved,s===null?(e.next=e,bp(r)):(e.next=s.next,s.next=e),r.interleaved=e,vr(t,n)}function Uc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lp(t,n)}}function Fv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Su(t,e,n,r){var s=t.updateQueue;Mr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=u=l=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(m=e,g=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(g,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,m=typeof y=="function"?y.call(g,f,m):y,m==null)break e;f=Le({},f,m);break e;case 2:Mr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=f):h=h.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ys|=o,t.lanes=o,t.memoizedState=f}}function Bv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var bl={},Wn=ys(bl),Ka=ys(bl),Ya=ys(bl);function Vs(t){if(t===bl)throw Error(B(174));return t}function Ep(t,e){switch(Se(Ya,e),Se(Ka,t),Se(Wn,bl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sf(e,t)}Pe(Wn),Se(Wn,e)}function to(){Pe(Wn),Pe(Ka),Pe(Ya)}function k2(t){Vs(Ya.current);var e=Vs(Wn.current),n=Sf(e,t.type);e!==n&&(Se(Ka,t),Se(Wn,n))}function Tp(t){Ka.current===t&&(Pe(Wn),Pe(Ka))}var De=ys(0);function Iu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Oh=[];function Sp(){for(var t=0;t<Oh.length;t++)Oh[t]._workInProgressVersionPrimary=null;Oh.length=0}var Wc=kr.ReactCurrentDispatcher,Vh=kr.ReactCurrentBatchConfig,Ks=0,Me=null,Qe=null,rt=null,Cu=!1,ka=!1,Qa=0,TI=0;function yt(){throw Error(B(321))}function Ip(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pn(t[n],e[n]))return!1;return!0}function Cp(t,e,n,r,s,i){if(Ks=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wc.current=t===null||t.memoizedState===null?NI:AI,t=n(r,s),ka){i=0;do{if(ka=!1,Qa=0,25<=i)throw Error(B(301));i+=1,rt=Qe=null,e.updateQueue=null,Wc.current=jI,t=n(r,s)}while(ka)}if(Wc.current=Nu,e=Qe!==null&&Qe.next!==null,Ks=0,rt=Qe=Me=null,Cu=!1,e)throw Error(B(300));return t}function Np(){var t=Qa!==0;return Qa=0,t}function Vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Me.memoizedState=rt=t:rt=rt.next=t,rt}function gn(){if(Qe===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=rt===null?Me.memoizedState:rt.next;if(e!==null)rt=e,Qe=t;else{if(t===null)throw Error(B(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},rt===null?Me.memoizedState=rt=t:rt=rt.next=t}return rt}function Xa(t,e){return typeof e=="function"?e(t):e}function Fh(t){var e=gn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var h=u.lane;if((Ks&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Me.lanes|=h,Ys|=h}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Pn(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,Ys|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bh(t){var e=gn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Pn(i,e.memoizedState)||(Wt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function E2(){}function T2(t,e){var n=Me,r=gn(),s=e(),i=!Pn(r.memoizedState,s);if(i&&(r.memoizedState=s,Wt=!0),r=r.queue,Ap(C2.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Za(9,I2.bind(null,n,r,s,e),void 0,null),st===null)throw Error(B(349));Ks&30||S2(n,e,s)}return s}function S2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function I2(t,e,n,r){e.value=n,e.getSnapshot=r,N2(e)&&A2(t)}function C2(t,e,n){return n(function(){N2(e)&&A2(t)})}function N2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pn(t,n)}catch{return!0}}function A2(t){var e=vr(t,1);e!==null&&Cn(e,t,1,-1)}function zv(t){var e=Vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:t},e.queue=t,t=t.dispatch=CI.bind(null,Me,t),[e.memoizedState,t]}function Za(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function j2(){return gn().memoizedState}function $c(t,e,n,r){var s=Vn();Me.flags|=t,s.memoizedState=Za(1|e,n,void 0,r===void 0?null:r)}function wd(t,e,n,r){var s=gn();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&Ip(r,o.deps)){s.memoizedState=Za(e,n,i,r);return}}Me.flags|=t,s.memoizedState=Za(1|e,n,i,r)}function Uv(t,e){return $c(8390656,8,t,e)}function Ap(t,e){return wd(2048,8,t,e)}function P2(t,e){return wd(4,2,t,e)}function R2(t,e){return wd(4,4,t,e)}function D2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function M2(t,e,n){return n=n!=null?n.concat([t]):null,wd(4,4,D2.bind(null,e,t),n)}function jp(){}function L2(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ip(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function O2(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ip(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function V2(t,e,n){return Ks&21?(Pn(n,e)||(n=W1(),Me.lanes|=n,Ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=n)}function SI(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Vh.transition;Vh.transition={};try{t(!1),e()}finally{ke=n,Vh.transition=r}}function F2(){return gn().memoizedState}function II(t,e,n){var r=es(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},B2(t))z2(e,n);else if(n=w2(t,e,n,r),n!==null){var s=Rt();Cn(n,t,r,s),U2(n,e,r)}}function CI(t,e,n){var r=es(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(B2(t))z2(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Pn(a,o)){var l=e.interleaved;l===null?(s.next=s,bp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=w2(t,e,s,r),n!==null&&(s=Rt(),Cn(n,t,r,s),U2(n,e,r))}}function B2(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function z2(t,e){ka=Cu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function U2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lp(t,n)}}var Nu={readContext:pn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},NI={readContext:pn,useCallback:function(t,e){return Vn().memoizedState=[t,e===void 0?null:e],t},useContext:pn,useEffect:Uv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$c(4194308,4,D2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $c(4194308,4,t,e)},useInsertionEffect:function(t,e){return $c(4,2,t,e)},useMemo:function(t,e){var n=Vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=II.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Vn();return t={current:t},e.memoizedState=t},useState:zv,useDebugValue:jp,useDeferredValue:function(t){return Vn().memoizedState=t},useTransition:function(){var t=zv(!1),e=t[0];return t=SI.bind(null,t[1]),Vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=Vn();if(Re){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),st===null)throw Error(B(349));Ks&30||S2(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Uv(C2.bind(null,r,i,t),[t]),r.flags|=2048,Za(9,I2.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Vn(),e=st.identifierPrefix;if(Re){var n=cr,r=lr;n=(r&~(1<<32-In(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AI={readContext:pn,useCallback:L2,useContext:pn,useEffect:Ap,useImperativeHandle:M2,useInsertionEffect:P2,useLayoutEffect:R2,useMemo:O2,useReducer:Fh,useRef:j2,useState:function(){return Fh(Xa)},useDebugValue:jp,useDeferredValue:function(t){var e=gn();return V2(e,Qe.memoizedState,t)},useTransition:function(){var t=Fh(Xa)[0],e=gn().memoizedState;return[t,e]},useMutableSource:E2,useSyncExternalStore:T2,useId:F2,unstable_isNewReconciler:!1},jI={readContext:pn,useCallback:L2,useContext:pn,useEffect:Ap,useImperativeHandle:M2,useInsertionEffect:P2,useLayoutEffect:R2,useMemo:O2,useReducer:Bh,useRef:j2,useState:function(){return Bh(Xa)},useDebugValue:jp,useDeferredValue:function(t){var e=gn();return Qe===null?e.memoizedState=t:V2(e,Qe.memoizedState,t)},useTransition:function(){var t=Bh(Xa)[0],e=gn().memoizedState;return[t,e]},useMutableSource:E2,useSyncExternalStore:T2,useId:F2,unstable_isNewReconciler:!1};function wn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bd={isMounted:function(t){return(t=t._reactInternals)?oi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rt(),s=es(t),i=hr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Zr(t,i,s),e!==null&&(Cn(e,t,s,r),Uc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rt(),s=es(t),i=hr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zr(t,i,s),e!==null&&(Cn(e,t,s,r),Uc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),r=es(t),s=hr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Zr(t,s,r),e!==null&&(Cn(e,t,r,n),Uc(e,t,r))}};function Wv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!$a(n,r)||!$a(s,i):!0}function W2(t,e,n){var r=!1,s=cs,i=e.contextType;return typeof i=="object"&&i!==null?i=pn(i):(s=Ht(e)?qs:It.current,r=e.contextTypes,i=(r=r!=null)?Zi(t,s):cs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $v(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bd.enqueueReplaceState(e,e.state,null)}function Kf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},kp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=pn(i):(i=Ht(e)?qs:It.current,s.context=Zi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Gf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bd.enqueueReplaceState(s,s.state,null),Su(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function no(t,e){try{var n="",r=e;do n+=iS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function zh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PI=typeof WeakMap=="function"?WeakMap:Map;function $2(t,e,n){n=hr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ju||(ju=!0,im=r),Yf(t,e)},n}function H2(t,e,n){n=hr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Yf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Yf(t,e),typeof r!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qI.bind(null,t,e,n),e.then(t,t))}function qv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hr(-1,1),e.tag=2,Zr(n,e,1))),n.lanes|=1),t)}var RI=kr.ReactCurrentOwner,Wt=!1;function Pt(t,e,n,r){e.child=t===null?_2(e,null,n,r):eo(e,t.child,n,r)}function Kv(t,e,n,r,s){n=n.render;var i=e.ref;return Ui(e,s),r=Cp(t,e,n,r,i,s),n=Np(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,yr(t,e,s)):(Re&&n&&gp(e),e.flags|=1,Pt(t,e,r,s),e.child)}function Yv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Fp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,q2(t,e,i,r,s)):(t=Kc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:$a,n(o,r)&&t.ref===e.ref)return yr(t,e,s)}return e.flags|=1,t=ts(i,r),t.ref=e.ref,t.return=e,e.child=t}function q2(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if($a(i,r)&&t.ref===e.ref)if(Wt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Wt=!0);else return e.lanes=t.lanes,yr(t,e,s)}return Qf(t,e,n,r,s)}function G2(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Li,Zt),Zt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(Li,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Se(Li,Zt),Zt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Se(Li,Zt),Zt|=r;return Pt(t,e,s,n),e.child}function K2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qf(t,e,n,r,s){var i=Ht(n)?qs:It.current;return i=Zi(e,i),Ui(e,s),n=Cp(t,e,n,r,i,s),r=Np(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,yr(t,e,s)):(Re&&r&&gp(e),e.flags|=1,Pt(t,e,n,s),e.child)}function Qv(t,e,n,r,s){if(Ht(n)){var i=!0;wu(e)}else i=!1;if(Ui(e,s),e.stateNode===null)Hc(t,e),W2(e,n,r),Kf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=pn(u):(u=Ht(n)?qs:It.current,u=Zi(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&$v(e,o,r,u),Mr=!1;var m=e.memoizedState;o.state=m,Su(e,r,o,s),l=e.memoizedState,a!==r||m!==l||$t.current||Mr?(typeof h=="function"&&(Gf(e,n,h,r),l=e.memoizedState),(a=Mr||Wv(e,n,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,b2(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:wn(e.type,a),o.props=u,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=pn(l):(l=Ht(n)?qs:It.current,l=Zi(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&$v(e,o,r,l),Mr=!1,m=e.memoizedState,o.state=m,Su(e,r,o,s);var y=e.memoizedState;a!==f||m!==y||$t.current||Mr?(typeof g=="function"&&(Gf(e,n,g,r),y=e.memoizedState),(u=Mr||Wv(e,n,u,r,m,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Xf(t,e,n,r,i,s)}function Xf(t,e,n,r,s,i){K2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Mv(e,n,!1),yr(t,e,i);r=e.stateNode,RI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=eo(e,t.child,null,i),e.child=eo(e,null,a,i)):Pt(t,e,a,i),e.memoizedState=r.state,s&&Mv(e,n,!0),e.child}function Y2(t){var e=t.stateNode;e.pendingContext?Dv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dv(t,e.context,!1),Ep(t,e.containerInfo)}function Xv(t,e,n,r,s){return Ji(),yp(s),e.flags|=256,Pt(t,e,n,r),e.child}var Zf={dehydrated:null,treeContext:null,retryLane:0};function Jf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q2(t,e,n){var r=e.pendingProps,s=De.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Se(De,s&1),t===null)return Hf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Td(o,r,0,null),t=$s(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Jf(n),e.memoizedState=Zf,t):Pp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return DI(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ts(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ts(a,i):(i=$s(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Jf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Zf,r}return i=t.child,t=i.sibling,r=ts(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pp(t,e){return e=Td({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fc(t,e,n,r){return r!==null&&yp(r),eo(e,t.child,null,n),t=Pp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=zh(Error(B(422))),fc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Td({mode:"visible",children:r.children},s,0,null),i=$s(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&eo(e,t.child,null,o),e.child.memoizedState=Jf(o),e.memoizedState=Zf,i);if(!(e.mode&1))return fc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(B(419)),r=zh(i,r,void 0),fc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Wt||a){if(r=st,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vr(t,s),Cn(r,t,s,-1))}return Vp(),r=zh(Error(B(421))),fc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=GI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Jt=Xr(s.nextSibling),nn=e,Re=!0,kn=null,t!==null&&(cn[un++]=lr,cn[un++]=cr,cn[un++]=Gs,lr=t.id,cr=t.overflow,Gs=e),e=Pp(e,r.children),e.flags|=4096,e)}function Zv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qf(t.return,e,n)}function Uh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function X2(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Pt(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zv(t,n,e);else if(t.tag===19)Zv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(De,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Iu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Uh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Iu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Uh(e,!0,n,null,i);break;case"together":Uh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ts(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ts(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MI(t,e,n){switch(e.tag){case 3:Y2(e),Ji();break;case 5:k2(e);break;case 1:Ht(e.type)&&wu(e);break;case 4:Ep(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Se(Eu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?Q2(t,e,n):(Se(De,De.current&1),t=yr(t,e,n),t!==null?t.sibling:null);Se(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return X2(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,G2(t,e,n)}return yr(t,e,n)}var Z2,em,J2,ew;Z2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};em=function(){};J2=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vs(Wn.current);var i=null;switch(n){case"input":s=bf(t,s),r=bf(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=Tf(t,s),r=Tf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xu)}If(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Oa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Oa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ne("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};ew=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ko(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LI(t,e,n){var r=e.pendingProps;switch(vp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return Ht(e.type)&&_u(),xt(e),null;case 3:return r=e.stateNode,to(),Pe($t),Pe(It),Sp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(lm(kn),kn=null))),em(t,e),xt(e),null;case 5:Tp(e);var s=Vs(Ya.current);if(n=e.type,t!==null&&e.stateNode!=null)J2(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return xt(e),null}if(t=Vs(Wn.current),dc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[zn]=e,r[Ga]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<aa.length;s++)Ne(aa[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":av(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":cv(r,i),Ne("invalid",r)}If(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&uc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&uc(r.textContent,a,t),s=["children",""+a]):Oa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":nc(r),lv(r,i,!0);break;case"textarea":nc(r),uv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=C1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zn]=e,t[Ga]=r,Z2(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cf(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<aa.length;s++)Ne(aa[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":av(t,r),s=bf(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":cv(t,r),s=Tf(t,r),Ne("invalid",t);break;default:s=r}If(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?j1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&N1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Va(t,l):typeof l=="number"&&Va(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Oa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ne("scroll",t):l!=null&&np(t,i,l,o))}switch(n){case"input":nc(t),lv(t,r,!1);break;case"textarea":nc(t),uv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ls(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Vi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Vi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)ew(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Vs(Ya.current),Vs(Wn.current),dc(e)){if(r=e.stateNode,n=e.memoizedProps,r[zn]=e,(i=r.nodeValue!==n)&&(t=nn,t!==null))switch(t.tag){case 3:uc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zn]=e,e.stateNode=r}return xt(e),null;case 13:if(Pe(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Jt!==null&&e.mode&1&&!(e.flags&128))y2(),Ji(),e.flags|=98560,i=!1;else if(i=dc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[zn]=e}else Ji(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),i=!1}else kn!==null&&(lm(kn),kn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ze===0&&(Ze=3):Vp())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return to(),em(t,e),t===null&&Ha(e.stateNode.containerInfo),xt(e),null;case 10:return wp(e.type._context),xt(e),null;case 17:return Ht(e.type)&&_u(),xt(e),null;case 19:if(Pe(De),i=e.memoizedState,i===null)return xt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ko(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Iu(t),o!==null){for(e.flags|=128,Ko(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(De,De.current&1|2),e.child}t=t.sibling}i.tail!==null&&We()>ro&&(e.flags|=128,r=!0,Ko(i,!1),e.lanes=4194304)}else{if(!r)if(t=Iu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ko(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return xt(e),null}else 2*We()-i.renderingStartTime>ro&&n!==1073741824&&(e.flags|=128,r=!0,Ko(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=We(),e.sibling=null,n=De.current,Se(De,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return Op(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function OI(t,e){switch(vp(e),e.tag){case 1:return Ht(e.type)&&_u(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return to(),Pe($t),Pe(It),Sp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tp(e),null;case 13:if(Pe(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Ji()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(De),null;case 4:return to(),null;case 10:return wp(e.type._context),null;case 22:case 23:return Op(),null;case 24:return null;default:return null}}var mc=!1,Et=!1,VI=typeof WeakSet=="function"?WeakSet:Set,K=null;function Mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function tm(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Jv=!1;function FI(t,e){if(Vf=gu,t=i2(),pp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(l=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ff={focusedElem:t,selectionRange:n},gu=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,T=y.memoizedState,_=e.stateNode,k=_.getSnapshotBeforeUpdate(e.elementType===e.type?w:wn(e.type,w),T);_.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(C){Fe(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return y=Jv,Jv=!1,y}function Ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&tm(e,n,i)}s=s.next}while(s!==r)}}function kd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tw(t){var e=t.alternate;e!==null&&(t.alternate=null,tw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zn],delete e[Ga],delete e[Uf],delete e[wI],delete e[bI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nw(t){return t.tag===5||t.tag===3||t.tag===4}function ey(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xu));else if(r!==4&&(t=t.child,t!==null))for(rm(t,e,n),t=t.sibling;t!==null;)rm(t,e,n),t=t.sibling}function sm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sm(t,e,n),t=t.sibling;t!==null;)sm(t,e,n),t=t.sibling}var at=null,bn=!1;function Nr(t,e,n){for(n=n.child;n!==null;)rw(t,e,n),n=n.sibling}function rw(t,e,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(pd,n)}catch{}switch(n.tag){case 5:Et||Mi(n,e);case 6:var r=at,s=bn;at=null,Nr(t,e,n),at=r,bn=s,at!==null&&(bn?(t=at,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(bn?(t=at,n=n.stateNode,t.nodeType===8?Mh(t.parentNode,n):t.nodeType===1&&Mh(t,n),Ua(t)):Mh(at,n.stateNode));break;case 4:r=at,s=bn,at=n.stateNode.containerInfo,bn=!0,Nr(t,e,n),at=r,bn=s;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&tm(n,e,o),s=s.next}while(s!==r)}Nr(t,e,n);break;case 1:if(!Et&&(Mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fe(n,e,a)}Nr(t,e,n);break;case 21:Nr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,Nr(t,e,n),Et=r):Nr(t,e,n);break;default:Nr(t,e,n)}}function ty(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VI),e.forEach(function(r){var s=KI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function _n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:at=a.stateNode,bn=!1;break e;case 3:at=a.stateNode.containerInfo,bn=!0;break e;case 4:at=a.stateNode.containerInfo,bn=!0;break e}a=a.return}if(at===null)throw Error(B(160));rw(i,o,s),at=null,bn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Fe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sw(e,t),e=e.sibling}function sw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_n(e,t),Mn(t),r&4){try{Ea(3,t,t.return),kd(3,t)}catch(w){Fe(t,t.return,w)}try{Ea(5,t,t.return)}catch(w){Fe(t,t.return,w)}}break;case 1:_n(e,t),Mn(t),r&512&&n!==null&&Mi(n,n.return);break;case 5:if(_n(e,t),Mn(t),r&512&&n!==null&&Mi(n,n.return),t.flags&32){var s=t.stateNode;try{Va(s,"")}catch(w){Fe(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&S1(s,i),Cf(a,o);var u=Cf(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?j1(s,f):h==="dangerouslySetInnerHTML"?N1(s,f):h==="children"?Va(s,f):np(s,h,f,u)}switch(a){case"input":kf(s,i);break;case"textarea":I1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Vi(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Vi(s,!!i.multiple,i.defaultValue,!0):Vi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ga]=i}catch(w){Fe(t,t.return,w)}}break;case 6:if(_n(e,t),Mn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Fe(t,t.return,w)}}break;case 3:if(_n(e,t),Mn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ua(e.containerInfo)}catch(w){Fe(t,t.return,w)}break;case 4:_n(e,t),Mn(t);break;case 13:_n(e,t),Mn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Mp=We())),r&4&&ty(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(u=Et)||h,_n(e,t),Et=u):_n(e,t),Mn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(f=K=h;K!==null;){switch(m=K,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ea(4,m,m.return);break;case 1:Mi(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Fe(r,n,w)}}break;case 5:Mi(m,m.return);break;case 22:if(m.memoizedState!==null){ry(f);continue}}g!==null?(g.return=m,K=g):ry(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=A1("display",o))}catch(w){Fe(t,t.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Fe(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_n(e,t),Mn(t),r&4&&ty(t);break;case 21:break;default:_n(e,t),Mn(t)}}function Mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nw(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Va(s,""),r.flags&=-33);var i=ey(t);sm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ey(t);rm(t,a,o);break;default:throw Error(B(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BI(t,e,n){K=t,iw(t)}function iw(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Et;a=mc;var u=Et;if(mc=o,(Et=l)&&!u)for(K=s;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?sy(s):l!==null?(l.return=o,K=l):sy(s);for(;i!==null;)K=i,iw(i),i=i.sibling;K=s,mc=a,Et=u}ny(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):ny(t)}}function ny(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||kd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:wn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Bv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ua(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Et||e.flags&512&&nm(e)}catch(m){Fe(e,e.return,m)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function ry(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function sy(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kd(4,e)}catch(l){Fe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Fe(e,s,l)}}var i=e.return;try{nm(e)}catch(l){Fe(e,i,l)}break;case 5:var o=e.return;try{nm(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var zI=Math.ceil,Au=kr.ReactCurrentDispatcher,Rp=kr.ReactCurrentOwner,mn=kr.ReactCurrentBatchConfig,me=0,st=null,Ge=null,ut=0,Zt=0,Li=ys(0),Ze=0,Ja=null,Ys=0,Ed=0,Dp=0,Ta=null,Bt=null,Mp=0,ro=1/0,ir=null,ju=!1,im=null,Jr=null,pc=!1,$r=null,Pu=0,Sa=0,om=null,qc=-1,Gc=0;function Rt(){return me&6?We():qc!==-1?qc:qc=We()}function es(t){return t.mode&1?me&2&&ut!==0?ut&-ut:EI.transition!==null?(Gc===0&&(Gc=W1()),Gc):(t=ke,t!==0||(t=window.event,t=t===void 0?16:Q1(t.type)),t):1}function Cn(t,e,n,r){if(50<Sa)throw Sa=0,om=null,Error(B(185));xl(t,n,r),(!(me&2)||t!==st)&&(t===st&&(!(me&2)&&(Ed|=n),Ze===4&&Or(t,ut)),qt(t,r),n===1&&me===0&&!(e.mode&1)&&(ro=We()+500,_d&&xs()))}function qt(t,e){var n=t.callbackNode;ES(t,e);var r=pu(t,t===st?ut:0);if(r===0)n!==null&&fv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fv(n),e===1)t.tag===0?kI(iy.bind(null,t)):p2(iy.bind(null,t)),xI(function(){!(me&6)&&xs()}),n=null;else{switch($1(r)){case 1:n=ap;break;case 4:n=z1;break;case 16:n=mu;break;case 536870912:n=U1;break;default:n=mu}n=fw(n,ow.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ow(t,e){if(qc=-1,Gc=0,me&6)throw Error(B(327));var n=t.callbackNode;if(Wi()&&t.callbackNode!==n)return null;var r=pu(t,t===st?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ru(t,r);else{e=r;var s=me;me|=2;var i=lw();(st!==t||ut!==e)&&(ir=null,ro=We()+500,Ws(t,e));do try{$I();break}catch(a){aw(t,a)}while(!0);_p(),Au.current=i,me=s,Ge!==null?e=0:(st=null,ut=0,e=Ze)}if(e!==0){if(e===2&&(s=Rf(t),s!==0&&(r=s,e=am(t,s))),e===1)throw n=Ja,Ws(t,0),Or(t,r),qt(t,We()),n;if(e===6)Or(t,r);else{if(s=t.current.alternate,!(r&30)&&!UI(s)&&(e=Ru(t,r),e===2&&(i=Rf(t),i!==0&&(r=i,e=am(t,i))),e===1))throw n=Ja,Ws(t,0),Or(t,r),qt(t,We()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:js(t,Bt,ir);break;case 3:if(Or(t,r),(r&130023424)===r&&(e=Mp+500-We(),10<e)){if(pu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Rt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=zf(js.bind(null,t,Bt,ir),e);break}js(t,Bt,ir);break;case 4:if(Or(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-In(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zI(r/1960))-r,10<r){t.timeoutHandle=zf(js.bind(null,t,Bt,ir),r);break}js(t,Bt,ir);break;case 5:js(t,Bt,ir);break;default:throw Error(B(329))}}}return qt(t,We()),t.callbackNode===n?ow.bind(null,t):null}function am(t,e){var n=Ta;return t.current.memoizedState.isDehydrated&&(Ws(t,e).flags|=256),t=Ru(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&lm(e)),t}function lm(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function UI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Or(t,e){for(e&=~Dp,e&=~Ed,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-In(e),r=1<<n;t[n]=-1,e&=~r}}function iy(t){if(me&6)throw Error(B(327));Wi();var e=pu(t,0);if(!(e&1))return qt(t,We()),null;var n=Ru(t,e);if(t.tag!==0&&n===2){var r=Rf(t);r!==0&&(e=r,n=am(t,r))}if(n===1)throw n=Ja,Ws(t,0),Or(t,e),qt(t,We()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,js(t,Bt,ir),qt(t,We()),null}function Lp(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(ro=We()+500,_d&&xs())}}function Qs(t){$r!==null&&$r.tag===0&&!(me&6)&&Wi();var e=me;me|=1;var n=mn.transition,r=ke;try{if(mn.transition=null,ke=1,t)return t()}finally{ke=r,mn.transition=n,me=e,!(me&6)&&xs()}}function Op(){Zt=Li.current,Pe(Li)}function Ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yI(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(vp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_u();break;case 3:to(),Pe($t),Pe(It),Sp();break;case 5:Tp(r);break;case 4:to();break;case 13:Pe(De);break;case 19:Pe(De);break;case 10:wp(r.type._context);break;case 22:case 23:Op()}n=n.return}if(st=t,Ge=t=ts(t.current,null),ut=Zt=e,Ze=0,Ja=null,Dp=Ed=Ys=0,Bt=Ta=null,Os!==null){for(e=0;e<Os.length;e++)if(n=Os[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Os=null}return t}function aw(t,e){do{var n=Ge;try{if(_p(),Wc.current=Nu,Cu){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cu=!1}if(Ks=0,rt=Qe=Me=null,ka=!1,Qa=0,Rp.current=null,n===null||n.return===null){Ze=1,Ja=e,Ge=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=qv(o);if(g!==null){g.flags&=-257,Gv(g,o,a,i,e),g.mode&1&&Hv(i,u,e),e=g,l=u;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){Hv(i,u,e),Vp();break e}l=Error(B(426))}}else if(Re&&a.mode&1){var T=qv(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Gv(T,o,a,i,e),yp(no(l,a));break e}}i=l=no(l,a),Ze!==4&&(Ze=2),Ta===null?Ta=[i]:Ta.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=$2(i,l,e);Fv(i,_);break e;case 1:a=l;var k=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof k.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Jr===null||!Jr.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=H2(i,a,e);Fv(i,C);break e}}i=i.return}while(i!==null)}uw(n)}catch(A){e=A,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function lw(){var t=Au.current;return Au.current=Nu,t===null?Nu:t}function Vp(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),st===null||!(Ys&268435455)&&!(Ed&268435455)||Or(st,ut)}function Ru(t,e){var n=me;me|=2;var r=lw();(st!==t||ut!==e)&&(ir=null,Ws(t,e));do try{WI();break}catch(s){aw(t,s)}while(!0);if(_p(),me=n,Au.current=r,Ge!==null)throw Error(B(261));return st=null,ut=0,Ze}function WI(){for(;Ge!==null;)cw(Ge)}function $I(){for(;Ge!==null&&!pS();)cw(Ge)}function cw(t){var e=hw(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?uw(t):Ge=e,Rp.current=null}function uw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OI(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Ge=null;return}}else if(n=LI(n,e,Zt),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Ze===0&&(Ze=5)}function js(t,e,n){var r=ke,s=mn.transition;try{mn.transition=null,ke=1,HI(t,e,n,r)}finally{mn.transition=s,ke=r}return null}function HI(t,e,n,r){do Wi();while($r!==null);if(me&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(TS(t,i),t===st&&(Ge=st=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pc||(pc=!0,fw(mu,function(){return Wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mn.transition,mn.transition=null;var o=ke;ke=1;var a=me;me|=4,Rp.current=null,FI(t,n),sw(n,t),dI(Ff),gu=!!Vf,Ff=Vf=null,t.current=n,BI(n),gS(),me=a,ke=o,mn.transition=i}else t.current=n;if(pc&&(pc=!1,$r=t,Pu=s),i=t.pendingLanes,i===0&&(Jr=null),xS(n.stateNode),qt(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ju)throw ju=!1,t=im,im=null,t;return Pu&1&&t.tag!==0&&Wi(),i=t.pendingLanes,i&1?t===om?Sa++:(Sa=0,om=t):Sa=0,xs(),null}function Wi(){if($r!==null){var t=$1(Pu),e=mn.transition,n=ke;try{if(mn.transition=null,ke=16>t?16:t,$r===null)var r=!1;else{if(t=$r,$r=null,Pu=0,me&6)throw Error(B(331));var s=me;for(me|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(K=u;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Ea(8,h,i)}var f=h.child;if(f!==null)f.return=h,K=f;else for(;K!==null;){h=K;var m=h.sibling,g=h.return;if(tw(h),h===u){K=null;break}if(m!==null){m.return=g,K=m;break}K=g}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var T=w.sibling;w.sibling=null,w=T}while(w!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ea(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,K=_;break e}K=i.return}}var k=t.current;for(K=k;K!==null;){o=K;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,K=b;else e:for(o=k;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:kd(9,a)}}catch(A){Fe(a,a.return,A)}if(a===o){K=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,K=C;break e}K=a.return}}if(me=s,xs(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(pd,t)}catch{}r=!0}return r}finally{ke=n,mn.transition=e}}return!1}function oy(t,e,n){e=no(n,e),e=$2(t,e,1),t=Zr(t,e,1),e=Rt(),t!==null&&(xl(t,1,e),qt(t,e))}function Fe(t,e,n){if(t.tag===3)oy(t,t,n);else for(;e!==null;){if(e.tag===3){oy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jr===null||!Jr.has(r))){t=no(n,t),t=H2(e,t,1),e=Zr(e,t,1),t=Rt(),e!==null&&(xl(e,1,t),qt(e,t));break}}e=e.return}}function qI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ut&n)===n&&(Ze===4||Ze===3&&(ut&130023424)===ut&&500>We()-Mp?Ws(t,0):Dp|=n),qt(t,e)}function dw(t,e){e===0&&(t.mode&1?(e=ic,ic<<=1,!(ic&130023424)&&(ic=4194304)):e=1);var n=Rt();t=vr(t,e),t!==null&&(xl(t,e,n),qt(t,n))}function GI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dw(t,n)}function KI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),dw(t,n)}var hw;hw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)Wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wt=!1,MI(t,e,n);Wt=!!(t.flags&131072)}else Wt=!1,Re&&e.flags&1048576&&g2(e,ku,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hc(t,e),t=e.pendingProps;var s=Zi(e,It.current);Ui(e,n),s=Cp(null,e,r,t,s,n);var i=Np();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(i=!0,wu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kp(e),s.updater=bd,e.stateNode=s,s._reactInternals=e,Kf(e,r,t,n),e=Xf(null,e,r,!0,i,n)):(e.tag=0,Re&&i&&gp(e),Pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=QI(r),t=wn(r,t),s){case 0:e=Qf(null,e,r,t,n);break e;case 1:e=Qv(null,e,r,t,n);break e;case 11:e=Kv(null,e,r,t,n);break e;case 14:e=Yv(null,e,r,wn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),Qf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),Qv(t,e,r,s,n);case 3:e:{if(Y2(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,b2(t,e),Su(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=no(Error(B(423)),e),e=Xv(t,e,r,n,s);break e}else if(r!==s){s=no(Error(B(424)),e),e=Xv(t,e,r,n,s);break e}else for(Jt=Xr(e.stateNode.containerInfo.firstChild),nn=e,Re=!0,kn=null,n=_2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ji(),r===s){e=yr(t,e,n);break e}Pt(t,e,r,n)}e=e.child}return e;case 5:return k2(e),t===null&&Hf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Bf(r,s)?o=null:i!==null&&Bf(r,i)&&(e.flags|=32),K2(t,e),Pt(t,e,o,n),e.child;case 6:return t===null&&Hf(e),null;case 13:return Q2(t,e,n);case 4:return Ep(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=eo(e,null,r,n):Pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),Kv(t,e,r,s,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Se(Eu,r._currentValue),r._currentValue=o,i!==null)if(Pn(i.value,o)){if(i.children===s.children&&!$t.current){e=yr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=hr(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),qf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ui(e,n),s=pn(s),r=r(s),e.flags|=1,Pt(t,e,r,n),e.child;case 14:return r=e.type,s=wn(r,e.pendingProps),s=wn(r.type,s),Yv(t,e,r,s,n);case 15:return q2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),Hc(t,e),e.tag=1,Ht(r)?(t=!0,wu(e)):t=!1,Ui(e,n),W2(e,r,s),Kf(e,r,s,n),Xf(null,e,r,!0,t,n);case 19:return X2(t,e,n);case 22:return G2(t,e,n)}throw Error(B(156,e.tag))};function fw(t,e){return B1(t,e)}function YI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,e,n,r){return new YI(t,e,n,r)}function Fp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QI(t){if(typeof t=="function")return Fp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sp)return 11;if(t===ip)return 14}return 2}function ts(t,e){var n=t.alternate;return n===null?(n=hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Fp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Si:return $s(n.children,s,i,e);case rp:o=8,s|=8;break;case yf:return t=hn(12,n,e,s|2),t.elementType=yf,t.lanes=i,t;case xf:return t=hn(13,n,e,s),t.elementType=xf,t.lanes=i,t;case _f:return t=hn(19,n,e,s),t.elementType=_f,t.lanes=i,t;case k1:return Td(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w1:o=10;break e;case b1:o=9;break e;case sp:o=11;break e;case ip:o=14;break e;case Dr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=hn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function $s(t,e,n,r){return t=hn(7,t,r,e),t.lanes=n,t}function Td(t,e,n,r){return t=hn(22,t,r,e),t.elementType=k1,t.lanes=n,t.stateNode={isHidden:!1},t}function Wh(t,e,n){return t=hn(6,t,null,e),t.lanes=n,t}function $h(t,e,n){return e=hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eh(0),this.expirationTimes=Eh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bp(t,e,n,r,s,i,o,a,l){return t=new XI(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=hn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kp(i),t}function ZI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mw(t){if(!t)return cs;t=t._reactInternals;e:{if(oi(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Ht(n))return m2(t,n,e)}return e}function pw(t,e,n,r,s,i,o,a,l){return t=Bp(n,r,!0,t,s,i,o,a,l),t.context=mw(null),n=t.current,r=Rt(),s=es(n),i=hr(r,s),i.callback=e??null,Zr(n,i,s),t.current.lanes=s,xl(t,s,r),qt(t,r),t}function Sd(t,e,n,r){var s=e.current,i=Rt(),o=es(s);return n=mw(n),e.context===null?e.context=n:e.pendingContext=n,e=hr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zr(s,e,o),t!==null&&(Cn(t,s,o,i),Uc(t,s,o)),o}function Du(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ay(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zp(t,e){ay(t,e),(t=t.alternate)&&ay(t,e)}function JI(){return null}var gw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Up(t){this._internalRoot=t}Id.prototype.render=Up.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Sd(t,e,null,null)};Id.prototype.unmount=Up.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qs(function(){Sd(null,t,null,null)}),e[gr]=null}};function Id(t){this._internalRoot=t}Id.prototype.unstable_scheduleHydration=function(t){if(t){var e=G1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lr.length&&e!==0&&e<Lr[n].priority;n++);Lr.splice(n,0,t),n===0&&Y1(t)}};function Wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ly(){}function eC(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Du(o);i.call(u)}}var o=pw(e,r,t,0,null,!1,!1,"",ly);return t._reactRootContainer=o,t[gr]=o.current,Ha(t.nodeType===8?t.parentNode:t),Qs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Du(l);a.call(u)}}var l=Bp(t,0,!1,null,null,!1,!1,"",ly);return t._reactRootContainer=l,t[gr]=l.current,Ha(t.nodeType===8?t.parentNode:t),Qs(function(){Sd(e,l,n,r)}),l}function Nd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Du(o);a.call(l)}}Sd(e,o,t,s)}else o=eC(n,e,t,s,r);return Du(o)}H1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oa(e.pendingLanes);n!==0&&(lp(e,n|1),qt(e,We()),!(me&6)&&(ro=We()+500,xs()))}break;case 13:Qs(function(){var r=vr(t,1);if(r!==null){var s=Rt();Cn(r,t,1,s)}}),zp(t,1)}};cp=function(t){if(t.tag===13){var e=vr(t,134217728);if(e!==null){var n=Rt();Cn(e,t,134217728,n)}zp(t,134217728)}};q1=function(t){if(t.tag===13){var e=es(t),n=vr(t,e);if(n!==null){var r=Rt();Cn(n,t,e,r)}zp(t,e)}};G1=function(){return ke};K1=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Af=function(t,e,n){switch(e){case"input":if(kf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xd(r);if(!s)throw Error(B(90));T1(r),kf(r,s)}}}break;case"textarea":I1(t,n);break;case"select":e=n.value,e!=null&&Vi(t,!!n.multiple,e,!1)}};D1=Lp;M1=Qs;var tC={usingClientEntryPoint:!1,Events:[wl,Ai,xd,P1,R1,Lp]},Yo={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nC={bundleType:Yo.bundleType,version:Yo.version,rendererPackageName:Yo.rendererPackageName,rendererConfig:Yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V1(t),t===null?null:t.stateNode},findFiberByHostInstance:Yo.findFiberByHostInstance||JI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{pd=gc.inject(nC),Un=gc}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tC;on.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wp(e))throw Error(B(200));return ZI(t,e,null,n)};on.createRoot=function(t,e){if(!Wp(t))throw Error(B(299));var n=!1,r="",s=gw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bp(t,1,!1,null,null,n,!1,r,s),t[gr]=e.current,Ha(t.nodeType===8?t.parentNode:t),new Up(e)};on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=V1(e),t=t===null?null:t.stateNode,t};on.flushSync=function(t){return Qs(t)};on.hydrate=function(t,e,n){if(!Cd(e))throw Error(B(200));return Nd(null,t,e,!0,n)};on.hydrateRoot=function(t,e,n){if(!Wp(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=gw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pw(e,null,t,1,n??null,s,!1,i,o),t[gr]=e.current,Ha(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Id(e)};on.render=function(t,e,n){if(!Cd(e))throw Error(B(200));return Nd(null,t,e,!1,n)};on.unmountComponentAtNode=function(t){if(!Cd(t))throw Error(B(40));return t._reactRootContainer?(Qs(function(){Nd(null,null,t,!1,function(){t._reactRootContainer=null,t[gr]=null})}),!0):!1};on.unstable_batchedUpdates=Lp;on.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cd(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Nd(t,e,n,!1,r)};on.version="18.3.1-next-f1338f8080-20240426";function vw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vw)}catch(t){console.error(t)}}vw(),v1.exports=on;var rC=v1.exports,cy=rC;gf.createRoot=cy.createRoot,gf.hydrateRoot=cy.hydrateRoot;const sC=()=>{};var uy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},iC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},xw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(m=64)),r.push(n[h],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new oC;const m=i<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const y=u<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aC=function(t){const e=yw(t);return xw.encodeByteArray(e,!0)},Mu=function(t){return aC(t).replace(/\./g,"")},_w=function(t){try{return xw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=()=>lC().__FIREBASE_DEFAULTS__,uC=()=>{if(typeof process>"u"||typeof uy>"u")return;const t=uy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_w(t[1]);return e&&JSON.parse(e)},Ad=()=>{try{return sC()||cC()||uC()||dC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ww=t=>{var e,n;return(n=(e=Ad())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hC=t=>{const e=ww(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bw=()=>{var t;return(t=Ad())===null||t===void 0?void 0:t.config},kw=t=>{var e;return(e=Ad())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){return t.endsWith(".cloudworkstations.dev")}async function Ew(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Mu(JSON.stringify(n)),Mu(JSON.stringify(o)),""].join(".")}const Ia={};function pC(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ia))Ia[e]?t.emulator.push(e):t.prod.push(e);return t}function gC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let dy=!1;function Tw(t,e){if(typeof window>"u"||typeof document>"u"||!kl(window.location.host)||Ia[t]===e||Ia[t]||dy)return;Ia[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=pC().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{dy=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=gC(r),g=n("text"),y=document.getElementById(g)||document.createElement("span"),w=n("learnmore"),T=document.getElementById(w)||document.createElement("a"),_=n("preprendIcon"),k=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const b=m.element;a(b),h(T,w);const C=u();l(k,_),b.append(k,y,T,C),document.body.appendChild(b)}i?(y.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function yC(){var t;const e=(t=Ad())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _C(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bC(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kC(){return!yC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EC(){try{return typeof indexedDB=="object"}catch{return!1}}function TC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="FirebaseError";class Er extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SC,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,El.prototype.create)}}class El{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?IC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Er(s,a,r)}}function IC(t,e){return t.replace(CC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const CC=/\{\$([^}]+)}/g;function NC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(hy(i)&&hy(o)){if(!Xs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function hy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function la(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ca(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function AC(t,e){const n=new jC(t,e);return n.subscribe.bind(n)}class jC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Hh),s.error===void 0&&(s.error=Hh),s.complete===void 0&&(s.complete=Hh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){return t&&t._delegate?t._delegate:t}class Zs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MC(e))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ps){return this.instances.has(e)}getOptions(e=Ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ps){return this.component?this.component.multipleInstances?e:Ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DC(t){return t===Ps?void 0:t}function MC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const OC={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},VC=le.INFO,FC={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},BC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=FC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $p{constructor(e){this.name=e,this._logLevel=VC,this._logHandler=BC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const zC=(t,e)=>e.some(n=>t instanceof n);let fy,my;function UC(){return fy||(fy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WC(){return my||(my=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sw=new WeakMap,cm=new WeakMap,Iw=new WeakMap,qh=new WeakMap,Hp=new WeakMap;function $C(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ns(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Sw.set(n,t)}).catch(()=>{}),Hp.set(e,t),e}function HC(t){if(cm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});cm.set(t,e)}let um={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Iw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qC(t){um=t(um)}function GC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gh(this),e,...n);return Iw.set(r,e.sort?e.sort():[e]),ns(r)}:WC().includes(t)?function(...e){return t.apply(Gh(this),e),ns(Sw.get(this))}:function(...e){return ns(t.apply(Gh(this),e))}}function KC(t){return typeof t=="function"?GC(t):(t instanceof IDBTransaction&&HC(t),zC(t,UC())?new Proxy(t,um):t)}function ns(t){if(t instanceof IDBRequest)return $C(t);if(qh.has(t))return qh.get(t);const e=KC(t);return e!==t&&(qh.set(t,e),Hp.set(e,t)),e}const Gh=t=>Hp.get(t);function YC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ns(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ns(o.result),l.oldVersion,l.newVersion,ns(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const QC=["get","getKey","getAll","getAllKeys","count"],XC=["put","add","delete","clear"],Kh=new Map;function py(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kh.get(e))return Kh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=XC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||QC.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Kh.set(e,i),i}qC(t=>({...t,get:(e,n,r)=>py(e,n)||t.get(e,n,r),has:(e,n)=>!!py(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dm="@firebase/app",gy="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new $p("@firebase/app"),eN="@firebase/app-compat",tN="@firebase/analytics-compat",nN="@firebase/analytics",rN="@firebase/app-check-compat",sN="@firebase/app-check",iN="@firebase/auth",oN="@firebase/auth-compat",aN="@firebase/database",lN="@firebase/data-connect",cN="@firebase/database-compat",uN="@firebase/functions",dN="@firebase/functions-compat",hN="@firebase/installations",fN="@firebase/installations-compat",mN="@firebase/messaging",pN="@firebase/messaging-compat",gN="@firebase/performance",vN="@firebase/performance-compat",yN="@firebase/remote-config",xN="@firebase/remote-config-compat",_N="@firebase/storage",wN="@firebase/storage-compat",bN="@firebase/firestore",kN="@firebase/ai",EN="@firebase/firestore-compat",TN="firebase",SN="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="[DEFAULT]",IN={[dm]:"fire-core",[eN]:"fire-core-compat",[nN]:"fire-analytics",[tN]:"fire-analytics-compat",[sN]:"fire-app-check",[rN]:"fire-app-check-compat",[iN]:"fire-auth",[oN]:"fire-auth-compat",[aN]:"fire-rtdb",[lN]:"fire-data-connect",[cN]:"fire-rtdb-compat",[uN]:"fire-fn",[dN]:"fire-fn-compat",[hN]:"fire-iid",[fN]:"fire-iid-compat",[mN]:"fire-fcm",[pN]:"fire-fcm-compat",[gN]:"fire-perf",[vN]:"fire-perf-compat",[yN]:"fire-rc",[xN]:"fire-rc-compat",[_N]:"fire-gcs",[wN]:"fire-gcs-compat",[bN]:"fire-fst",[EN]:"fire-fst-compat",[kN]:"fire-vertex","fire-js":"fire-js",[TN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new Map,CN=new Map,fm=new Map;function vy(t,e){try{t.container.addComponent(e)}catch(n){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function so(t){const e=t.name;if(fm.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;fm.set(e,t);for(const n of Lu.values())vy(n,t);for(const n of CN.values())vy(n,t);return!0}function qp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new El("app","Firebase",NN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=SN;function Cw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hm,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw rs.create("bad-app-name",{appName:String(s)});if(n||(n=bw()),!n)throw rs.create("no-options");const i=Lu.get(s);if(i){if(Xs(n,i.options)&&Xs(r,i.config))return i;throw rs.create("duplicate-app",{appName:s})}const o=new LC(s);for(const l of fm.values())o.addComponent(l);const a=new AN(n,r,o);return Lu.set(s,a),a}function Nw(t=hm){const e=Lu.get(t);if(!e&&t===hm&&bw())return Cw();if(!e)throw rs.create("no-app",{appName:t});return e}function ss(t,e,n){var r;let s=(r=IN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(a.join(" "));return}so(new Zs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="firebase-heartbeat-database",PN=1,el="firebase-heartbeat-store";let Yh=null;function Aw(){return Yh||(Yh=YC(jN,PN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(el)}catch(n){console.warn(n)}}}}).catch(t=>{throw rs.create("idb-open",{originalErrorMessage:t.message})})),Yh}async function RN(t){try{const n=(await Aw()).transaction(el),r=await n.objectStore(el).get(jw(t));return await n.done,r}catch(e){if(e instanceof Er)xr.warn(e.message);else{const n=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xr.warn(n.message)}}}async function yy(t,e){try{const r=(await Aw()).transaction(el,"readwrite");await r.objectStore(el).put(e,jw(t)),await r.done}catch(n){if(n instanceof Er)xr.warn(n.message);else{const r=rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xr.warn(r.message)}}}function jw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=1024,MN=30;class LN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>MN){const o=FN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xy(),{heartbeatsToSend:r,unsentEntries:s}=ON(this._heartbeatsCache.heartbeats),i=Mu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return xr.warn(n),""}}}function xy(){return new Date().toISOString().substring(0,10)}function ON(t,e=DN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),_y(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_y(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EC()?TC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _y(t){return Mu(JSON.stringify({version:2,heartbeats:t})).length}function FN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){so(new Zs("platform-logger",e=>new ZC(e),"PRIVATE")),so(new Zs("heartbeat",e=>new LN(e),"PRIVATE")),ss(dm,gy,t),ss(dm,gy,"esm2017"),ss("fire-js","")}BN("");function Gp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Pw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zN=Pw,Rw=new El("auth","Firebase",Pw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=new $p("@firebase/auth");function UN(t,...e){Ou.logLevel<=le.WARN&&Ou.warn(`Auth (${_o}): ${t}`,...e)}function Yc(t,...e){Ou.logLevel<=le.ERROR&&Ou.error(`Auth (${_o}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw Kp(t,...e)}function $n(t,...e){return Kp(t,...e)}function Dw(t,e,n){const r=Object.assign(Object.assign({},zN()),{[e]:n});return new El("auth","Firebase",r).create(e,{appName:t.name})}function fr(t){return Dw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Rw.create(t,...e)}function J(t,e,...n){if(!t)throw Kp(e,...n)}function ur(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yc(e),new Error(e)}function _r(t,e){t||ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WN(){return wy()==="http:"||wy()==="https:"}function wy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WN()||_C()||"connection"in navigator)?navigator.onLine:!0}function HN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n){this.shortDelay=e,this.longDelay=n,_r(n>e,"Short delay should be less than long delay!"),this.isMobile=vC()||wC()}get(){return $N()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t,e){_r(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KN=new Sl(3e4,6e4);function _s(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Tr(t,e,n,r,s={}){return Lw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Tl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return xC()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&kl(t.emulatorConfig.host)&&(u.credentials="include"),Mw.fetch()(await Ow(t,t.config.apiHost,n,a),u)})}async function Lw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},qN),e);try{const s=new QN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw vc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw vc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw vc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Dw(t,h,u);Rn(t,h)}}catch(s){if(s instanceof Er)throw s;Rn(t,"network-request-failed",{message:String(s)})}}async function Il(t,e,n,r,s={}){const i=await Tr(t,e,n,r,s);return"mfaPendingCredential"in i&&Rn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Ow(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Yp(t.config,s):`${t.config.apiScheme}://${s}`;return GN.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function YN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),KN.get())})}}function vc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=$n(t,e,r);return s.customData._tokenResponse=n,s}function by(t){return t!==void 0&&t.enterprise!==void 0}class XN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return YN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ZN(t,e){return Tr(t,"GET","/v2/recaptchaConfig",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e){return Tr(t,"POST","/v1/accounts:delete",e)}async function Vu(t,e){return Tr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eA(t,e=!1){const n=tt(t),r=await n.getIdToken(e),s=Qp(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ca(Qh(s.auth_time)),issuedAtTime:Ca(Qh(s.iat)),expirationTime:Ca(Qh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Qh(t){return Number(t)*1e3}function Qp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yc("JWT malformed, contained fewer than 3 sections"),null;try{const s=_w(n);return s?JSON.parse(s):(Yc("Failed to decode base64 JWT payload"),null)}catch(s){return Yc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ky(t){const e=Qp(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Er&&tA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ca(this.lastLoginAt),this.creationTime=Ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await io(t,Vu(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Vw(i.providerUserInfo):[],a=sA(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new pm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function rA(t){const e=tt(t);await Fu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Vw(t){return t.map(e=>{var{providerId:n}=e,r=Gp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t,e){const n=await Lw(t,{},async()=>{const r=Tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Ow(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Mw.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oA(t,e){return Tr(t,"POST","/v2/accounts:revokeToken",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ky(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=ky(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await iA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $i;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $i,this.toJSON())}_performRefresh(){return ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Gp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new pm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await io(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eA(this,e)}reload(){return rA(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(fr(this.auth));const e=await this.getIdToken();return await io(this,JN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,k=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:C,isAnonymous:A,providerData:D,stsTokenManager:E}=n;J(b&&E,e,"internal-error");const x=$i.fromJSON(this.name,E);J(typeof b=="string",e,"internal-error"),Ar(f,e.name),Ar(m,e.name),J(typeof C=="boolean",e,"internal-error"),J(typeof A=="boolean",e,"internal-error"),Ar(g,e.name),Ar(y,e.name),Ar(w,e.name),Ar(T,e.name),Ar(_,e.name),Ar(k,e.name);const I=new Tn({uid:b,auth:e,email:m,emailVerified:C,displayName:f,isAnonymous:A,photoURL:y,phoneNumber:g,tenantId:w,stsTokenManager:x,createdAt:_,lastLoginAt:k});return D&&Array.isArray(D)&&(I.providerData=D.map(N=>Object.assign({},N))),T&&(I._redirectEventId=T),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new $i;s.updateFromServerResponse(n);const i=new Tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Vw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new $i;a.updateFromIdToken(r);const l=new Tn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new pm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;function dr(t){_r(t instanceof Function,"Expected a class definition");let e=Ey.get(t);return e?(_r(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ey.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Fw.type="NONE";const Ty=Fw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t,e,n){return`firebase:${t}:${e}:${n}`}class Hi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Qc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Qc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vu(this.auth,{idToken:e}).catch(()=>{});return n?Tn._fromGetAccountInfoResponse(this.auth,n,e):null}return Tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hi(dr(Ty),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||dr(Ty);const o=Qc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Vu(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Tn._fromGetAccountInfoResponse(e,m,h)}else f=Tn._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Hi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Hi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ww(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hw(e))return"Blackberry";if(qw(e))return"Webos";if(zw(e))return"Safari";if((e.includes("chrome/")||Uw(e))&&!e.includes("edge/"))return"Chrome";if($w(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Bw(t=Ct()){return/firefox\//i.test(t)}function zw(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Uw(t=Ct()){return/crios\//i.test(t)}function Ww(t=Ct()){return/iemobile/i.test(t)}function $w(t=Ct()){return/android/i.test(t)}function Hw(t=Ct()){return/blackberry/i.test(t)}function qw(t=Ct()){return/webos/i.test(t)}function Xp(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aA(t=Ct()){var e;return Xp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lA(){return bC()&&document.documentMode===10}function Gw(t=Ct()){return Xp(t)||$w(t)||qw(t)||Hw(t)||/windows phone/i.test(t)||Ww(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t,e=[]){let n;switch(t){case"Browser":n=Sy(Ct());break;case"Worker":n=`${Sy(Ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_o}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(t,e={}){return Tr(t,"GET","/v2/passwordPolicy",_s(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=6;class hA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iy(this),this.idTokenSubscription=new Iy(this),this.beforeStateQueue=new cA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Hi.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vu(this,{idToken:e}),r=await Tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(dn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dn(this.app))return Promise.reject(fr(this));const n=e?tt(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dn(this.app)?Promise.reject(fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uA(this),n=new hA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new El("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dr(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Hi.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&UN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ai(t){return tt(t)}class Iy{constructor(e){this.auth=e,this.observer=null,this.addObserver=AC(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mA(t){jd=t}function Yw(t){return jd.loadJS(t)}function pA(){return jd.recaptchaEnterpriseScript}function gA(){return jd.gapiScript}function vA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class yA{constructor(){this.enterprise=new xA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const _A="recaptcha-enterprise",Qw="NO_RECAPTCHA";class wA{constructor(e){this.type=_A,this.auth=ai(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{ZN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new XN(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;by(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Qw)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&by(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=pA();l.length!==0&&(l+=a),Yw(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Cy(t,e,n,r=!1,s=!1){const i=new wA(t);let o;if(s)o=Qw;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function gm(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Cy(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Cy(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t,e){const n=qp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Xs(i,e??{}))return s;Rn(s,"already-initialized")}return n.initialize({options:e})}function kA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function EA(t,e,n){const r=ai(t);J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Xw(e),{host:o,port:a}=TA(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(Xs(u,r.config.emulator)&&Xs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,kl(o)?(Ew(`${i}//${o}${l}`),Tw("Auth",!0)):SA()}function Xw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TA(t){const e=Xw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ny(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ny(o)}}}function Ny(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function SA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ur("not implemented")}_getIdTokenResponse(e){return ur("not implemented")}_linkToIdToken(e,n){return ur("not implemented")}_getReauthenticationResolver(e){return ur("not implemented")}}async function IA(t,e){return Tr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e){return Il(t,"POST","/v1/accounts:signInWithPassword",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(t,e){return Il(t,"POST","/v1/accounts:signInWithEmailLink",_s(t,e))}async function AA(t,e){return Il(t,"POST","/v1/accounts:signInWithEmailLink",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends Zp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new tl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gm(e,n,"signInWithPassword",CA);case"emailLink":return NA(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gm(e,r,"signUpPassword",IA);case"emailLink":return AA(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t,e){return Il(t,"POST","/v1/accounts:signInWithIdp",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="http://localhost";class Js extends Zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Gp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Js(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qi(e,n)}buildRequest(){const e={requestUri:jA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RA(t){const e=la(ca(t)).link,n=e?la(ca(e)).deep_link_id:null,r=la(ca(t)).deep_link_id;return(r?la(ca(r)).link:null)||r||n||e||t}class Jp{constructor(e){var n,r,s,i,o,a;const l=la(ca(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=PA((s=l.mode)!==null&&s!==void 0?s:null);J(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=RA(e);try{return new Jp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.providerId=wo.PROVIDER_ID}static credential(e,n){return tl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jp.parseLink(n);return J(r,"argument-error"),tl._fromEmailAndCode(e,r.code,r.tenantId)}}wo.PROVIDER_ID="password";wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends Zw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Cl{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Js._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fr.credential(n,r)}catch{return null}}}Fr.GOOGLE_SIGN_IN_METHOD="google.com";Fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Cl{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.GITHUB_SIGN_IN_METHOD="github.com";Br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Cl{constructor(){super("twitter.com")}static credential(e,n){return Js._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zr.credential(n,r)}catch{return null}}}zr.TWITTER_SIGN_IN_METHOD="twitter.com";zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e){return Il(t,"POST","/v1/accounts:signUp",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Tn._fromIdTokenResponse(e,r,s),o=Ay(r);return new ei({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ay(r);return new ei({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ay(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends Er{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Bu(e,n,r,s)}}function Jw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Bu._fromErrorAndOperation(t,i,e,r):i})}async function MA(t,e,n=!1){const r=await io(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ei._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t,e,n=!1){const{auth:r}=t;if(dn(r.app))return Promise.reject(fr(r));const s="reauthenticate";try{const i=await io(t,Jw(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=Qp(i.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),ei._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Rn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eb(t,e,n=!1){if(dn(t.app))return Promise.reject(fr(t));const r="signIn",s=await Jw(t,r,e),i=await ei._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function OA(t,e){return eb(ai(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(t){const e=ai(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VA(t,e,n){if(dn(t.app))return Promise.reject(fr(t));const r=ai(t),o=await gm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DA).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&tb(t),l}),a=await ei._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function FA(t,e,n){return dn(t.app)?Promise.reject(fr(t)):OA(tt(t),wo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tb(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(t,e){return Tr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=tt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await io(r,BA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function UA(t,e,n,r){return tt(t).onIdTokenChanged(e,n,r)}function WA(t,e,n){return tt(t).beforeAuthStateChanged(e,n)}function $A(t,e,n,r){return tt(t).onAuthStateChanged(e,n,r)}function zu(t){return tt(t).signOut()}const Uu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uu,"1"),this.storage.removeItem(Uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=1e3,qA=10;class rb extends nb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);lA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},HA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rb.type="LOCAL";const GA=rb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb extends nb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sb.type="SESSION";const ib=sb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Pd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await KA(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=eg("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return window}function QA(t){Hn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){return typeof Hn().WorkerGlobalScope<"u"&&typeof Hn().importScripts=="function"}async function XA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function JA(){return ob()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="firebaseLocalStorageDb",ej=1,Wu="firebaseLocalStorage",lb="fbase_key";class Nl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rd(t,e){return t.transaction([Wu],e?"readwrite":"readonly").objectStore(Wu)}function tj(){const t=indexedDB.deleteDatabase(ab);return new Nl(t).toPromise()}function vm(){const t=indexedDB.open(ab,ej);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wu,{keyPath:lb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wu)?e(r):(r.close(),await tj(),e(await vm()))})})}async function jy(t,e,n){const r=Rd(t,!0).put({[lb]:e,value:n});return new Nl(r).toPromise()}async function nj(t,e){const n=Rd(t,!1).get(e),r=await new Nl(n).toPromise();return r===void 0?null:r.value}function Py(t,e){const n=Rd(t,!0).delete(e);return new Nl(n).toPromise()}const rj=800,sj=3;class cb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ob()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pd._getInstance(JA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XA(),!this.activeServiceWorker)return;this.sender=new YA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vm();return await jy(e,Uu,"1"),await Py(e,Uu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Py(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Rd(s,!1).getAll();return new Nl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cb.type="LOCAL";const ij=cb;new Sl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t,e){return e?dr(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends Zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aj(t){return eb(t.auth,new tg(t),t.bypassAuthState)}function lj(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),LA(n,new tg(t),t.bypassAuthState)}async function cj(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),MA(n,new tg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aj;case"linkViaPopup":case"linkViaRedirect":return cj;case"reauthViaPopup":case"reauthViaRedirect":return lj;default:Rn(this.auth,"internal-error")}}resolve(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new Sl(2e3,1e4);class Oi extends ub{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Oi.currentPopupAction&&Oi.currentPopupAction.cancel(),Oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){_r(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uj.get())};e()}}Oi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj="pendingRedirect",Xc=new Map;class hj extends ub{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xc.get(this.auth._key());if(!e){try{const r=await fj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xc.set(this.auth._key(),e)}return this.bypassAuthState||Xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fj(t,e){const n=gj(e),r=pj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function mj(t,e){Xc.set(t._key(),e)}function pj(t){return dr(t._redirectPersistence)}function gj(t){return Qc(dj,t.config.apiKey,t.name)}async function vj(t,e,n=!1){if(dn(t.app))return Promise.reject(fr(t));const r=ai(t),s=oj(r,e),o=await new hj(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=10*60*1e3;class xj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_j(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!db(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($n(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yj&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ry(e))}saveEventToCache(e){this.cachedEventUids.add(Ry(e)),this.lastProcessedEventTime=Date.now()}}function Ry(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function db({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _j(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return db(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wj(t,e={}){return Tr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kj=/^https?/;async function Ej(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wj(t);for(const n of e)try{if(Tj(n))return}catch{}Rn(t,"unauthorized-domain")}function Tj(t){const e=mm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kj.test(n))return!1;if(bj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=new Sl(3e4,6e4);function Dy(){const t=Hn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ij(t){return new Promise((e,n)=>{var r,s,i;function o(){Dy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dy(),n($n(t,"network-request-failed"))},timeout:Sj.get()})}if(!((s=(r=Hn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Hn().gapi)===null||i===void 0)&&i.load)o();else{const a=vA("iframefcb");return Hn()[a]=()=>{gapi.load?o():n($n(t,"network-request-failed"))},Yw(`${gA()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Zc=null,e})}let Zc=null;function Cj(t){return Zc=Zc||Ij(t),Zc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=new Sl(5e3,15e3),Aj="__/auth/iframe",jj="emulator/auth/iframe",Pj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dj(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yp(e,jj):`https://${t.config.authDomain}/${Aj}`,r={apiKey:e.apiKey,appName:t.name,v:_o},s=Rj.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Tl(r).slice(1)}`}async function Mj(t){const e=await Cj(t),n=Hn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:Dj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pj,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=$n(t,"network-request-failed"),a=Hn().setTimeout(()=>{i(o)},Nj.get());function l(){Hn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Oj=500,Vj=600,Fj="_blank",Bj="http://localhost";class My{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zj(t,e,n,r=Oj,s=Vj){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Lj),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Ct().toLowerCase();n&&(a=Uw(u)?Fj:n),Bw(u)&&(e=e||Bj,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[g,y])=>`${m}${g}=${y},`,"");if(aA(u)&&a!=="_self")return Uj(e||"",a),new My(null);const f=window.open(e||"",a,h);J(f,t,"popup-blocked");try{f.focus()}catch{}return new My(f)}function Uj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj="__/auth/handler",$j="emulator/auth/handler",Hj=encodeURIComponent("fac");async function Ly(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_o,eventId:s};if(e instanceof Zw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",NC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Cl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${Hj}=${encodeURIComponent(l)}`:"";return`${qj(t)}?${Tl(a).slice(1)}${u}`}function qj({config:t}){return t.emulator?Yp(t,$j):`https://${t.authDomain}/${Wj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="webStorageSupport";class Gj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ib,this._completeRedirectFn=vj,this._overrideRedirectResult=mj}async _openPopup(e,n,r,s){var i;_r((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Ly(e,n,r,mm(),s);return zj(e,o,eg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Ly(e,n,r,mm(),s);return QA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(_r(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Mj(e),r=new xj(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xh,{type:Xh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Xh];o!==void 0&&n(!!o),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ej(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gw()||zw()||Xp()}}const Kj=Gj;var Oy="@firebase/auth",Vy="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xj(t){so(new Zs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kw(t)},u=new fA(r,s,i,l);return kA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),so(new Zs("auth-internal",e=>{const n=ai(e.getProvider("auth").getImmediate());return(r=>new Yj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ss(Oy,Vy,Qj(t)),ss(Oy,Vy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=5*60,Jj=kw("authIdTokenMaxAge")||Zj;let Fy=null;const eP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Jj)return;const s=n==null?void 0:n.token;Fy!==s&&(Fy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tP(t=Nw()){const e=qp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bA(t,{popupRedirectResolver:Kj,persistence:[ij,GA,ib]}),r=kw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=eP(i.toString());WA(n,o,()=>o(n.currentUser)),UA(n,a=>o(a))}}const s=ww("auth");return s&&EA(n,`http://${s}`),n}function nP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=$n("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",nP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xj("Browser");var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,hb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,x){function I(){}I.prototype=x.prototype,E.D=x.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(N,j,R){for(var P=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)P[fe-2]=arguments[fe];return x.prototype[j].apply(N,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,x,I){I||(I=0);var N=Array(16);if(typeof x=="string")for(var j=0;16>j;++j)N[j]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(j=0;16>j;++j)N[j]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=E.g[0],I=E.g[1],j=E.g[2];var R=E.g[3],P=x+(R^I&(j^R))+N[0]+3614090360&4294967295;x=I+(P<<7&4294967295|P>>>25),P=R+(j^x&(I^j))+N[1]+3905402710&4294967295,R=x+(P<<12&4294967295|P>>>20),P=j+(I^R&(x^I))+N[2]+606105819&4294967295,j=R+(P<<17&4294967295|P>>>15),P=I+(x^j&(R^x))+N[3]+3250441966&4294967295,I=j+(P<<22&4294967295|P>>>10),P=x+(R^I&(j^R))+N[4]+4118548399&4294967295,x=I+(P<<7&4294967295|P>>>25),P=R+(j^x&(I^j))+N[5]+1200080426&4294967295,R=x+(P<<12&4294967295|P>>>20),P=j+(I^R&(x^I))+N[6]+2821735955&4294967295,j=R+(P<<17&4294967295|P>>>15),P=I+(x^j&(R^x))+N[7]+4249261313&4294967295,I=j+(P<<22&4294967295|P>>>10),P=x+(R^I&(j^R))+N[8]+1770035416&4294967295,x=I+(P<<7&4294967295|P>>>25),P=R+(j^x&(I^j))+N[9]+2336552879&4294967295,R=x+(P<<12&4294967295|P>>>20),P=j+(I^R&(x^I))+N[10]+4294925233&4294967295,j=R+(P<<17&4294967295|P>>>15),P=I+(x^j&(R^x))+N[11]+2304563134&4294967295,I=j+(P<<22&4294967295|P>>>10),P=x+(R^I&(j^R))+N[12]+1804603682&4294967295,x=I+(P<<7&4294967295|P>>>25),P=R+(j^x&(I^j))+N[13]+4254626195&4294967295,R=x+(P<<12&4294967295|P>>>20),P=j+(I^R&(x^I))+N[14]+2792965006&4294967295,j=R+(P<<17&4294967295|P>>>15),P=I+(x^j&(R^x))+N[15]+1236535329&4294967295,I=j+(P<<22&4294967295|P>>>10),P=x+(j^R&(I^j))+N[1]+4129170786&4294967295,x=I+(P<<5&4294967295|P>>>27),P=R+(I^j&(x^I))+N[6]+3225465664&4294967295,R=x+(P<<9&4294967295|P>>>23),P=j+(x^I&(R^x))+N[11]+643717713&4294967295,j=R+(P<<14&4294967295|P>>>18),P=I+(R^x&(j^R))+N[0]+3921069994&4294967295,I=j+(P<<20&4294967295|P>>>12),P=x+(j^R&(I^j))+N[5]+3593408605&4294967295,x=I+(P<<5&4294967295|P>>>27),P=R+(I^j&(x^I))+N[10]+38016083&4294967295,R=x+(P<<9&4294967295|P>>>23),P=j+(x^I&(R^x))+N[15]+3634488961&4294967295,j=R+(P<<14&4294967295|P>>>18),P=I+(R^x&(j^R))+N[4]+3889429448&4294967295,I=j+(P<<20&4294967295|P>>>12),P=x+(j^R&(I^j))+N[9]+568446438&4294967295,x=I+(P<<5&4294967295|P>>>27),P=R+(I^j&(x^I))+N[14]+3275163606&4294967295,R=x+(P<<9&4294967295|P>>>23),P=j+(x^I&(R^x))+N[3]+4107603335&4294967295,j=R+(P<<14&4294967295|P>>>18),P=I+(R^x&(j^R))+N[8]+1163531501&4294967295,I=j+(P<<20&4294967295|P>>>12),P=x+(j^R&(I^j))+N[13]+2850285829&4294967295,x=I+(P<<5&4294967295|P>>>27),P=R+(I^j&(x^I))+N[2]+4243563512&4294967295,R=x+(P<<9&4294967295|P>>>23),P=j+(x^I&(R^x))+N[7]+1735328473&4294967295,j=R+(P<<14&4294967295|P>>>18),P=I+(R^x&(j^R))+N[12]+2368359562&4294967295,I=j+(P<<20&4294967295|P>>>12),P=x+(I^j^R)+N[5]+4294588738&4294967295,x=I+(P<<4&4294967295|P>>>28),P=R+(x^I^j)+N[8]+2272392833&4294967295,R=x+(P<<11&4294967295|P>>>21),P=j+(R^x^I)+N[11]+1839030562&4294967295,j=R+(P<<16&4294967295|P>>>16),P=I+(j^R^x)+N[14]+4259657740&4294967295,I=j+(P<<23&4294967295|P>>>9),P=x+(I^j^R)+N[1]+2763975236&4294967295,x=I+(P<<4&4294967295|P>>>28),P=R+(x^I^j)+N[4]+1272893353&4294967295,R=x+(P<<11&4294967295|P>>>21),P=j+(R^x^I)+N[7]+4139469664&4294967295,j=R+(P<<16&4294967295|P>>>16),P=I+(j^R^x)+N[10]+3200236656&4294967295,I=j+(P<<23&4294967295|P>>>9),P=x+(I^j^R)+N[13]+681279174&4294967295,x=I+(P<<4&4294967295|P>>>28),P=R+(x^I^j)+N[0]+3936430074&4294967295,R=x+(P<<11&4294967295|P>>>21),P=j+(R^x^I)+N[3]+3572445317&4294967295,j=R+(P<<16&4294967295|P>>>16),P=I+(j^R^x)+N[6]+76029189&4294967295,I=j+(P<<23&4294967295|P>>>9),P=x+(I^j^R)+N[9]+3654602809&4294967295,x=I+(P<<4&4294967295|P>>>28),P=R+(x^I^j)+N[12]+3873151461&4294967295,R=x+(P<<11&4294967295|P>>>21),P=j+(R^x^I)+N[15]+530742520&4294967295,j=R+(P<<16&4294967295|P>>>16),P=I+(j^R^x)+N[2]+3299628645&4294967295,I=j+(P<<23&4294967295|P>>>9),P=x+(j^(I|~R))+N[0]+4096336452&4294967295,x=I+(P<<6&4294967295|P>>>26),P=R+(I^(x|~j))+N[7]+1126891415&4294967295,R=x+(P<<10&4294967295|P>>>22),P=j+(x^(R|~I))+N[14]+2878612391&4294967295,j=R+(P<<15&4294967295|P>>>17),P=I+(R^(j|~x))+N[5]+4237533241&4294967295,I=j+(P<<21&4294967295|P>>>11),P=x+(j^(I|~R))+N[12]+1700485571&4294967295,x=I+(P<<6&4294967295|P>>>26),P=R+(I^(x|~j))+N[3]+2399980690&4294967295,R=x+(P<<10&4294967295|P>>>22),P=j+(x^(R|~I))+N[10]+4293915773&4294967295,j=R+(P<<15&4294967295|P>>>17),P=I+(R^(j|~x))+N[1]+2240044497&4294967295,I=j+(P<<21&4294967295|P>>>11),P=x+(j^(I|~R))+N[8]+1873313359&4294967295,x=I+(P<<6&4294967295|P>>>26),P=R+(I^(x|~j))+N[15]+4264355552&4294967295,R=x+(P<<10&4294967295|P>>>22),P=j+(x^(R|~I))+N[6]+2734768916&4294967295,j=R+(P<<15&4294967295|P>>>17),P=I+(R^(j|~x))+N[13]+1309151649&4294967295,I=j+(P<<21&4294967295|P>>>11),P=x+(j^(I|~R))+N[4]+4149444226&4294967295,x=I+(P<<6&4294967295|P>>>26),P=R+(I^(x|~j))+N[11]+3174756917&4294967295,R=x+(P<<10&4294967295|P>>>22),P=j+(x^(R|~I))+N[2]+718787259&4294967295,j=R+(P<<15&4294967295|P>>>17),P=I+(R^(j|~x))+N[9]+3951481745&4294967295,E.g[0]=E.g[0]+x&4294967295,E.g[1]=E.g[1]+(j+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+j&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.u=function(E,x){x===void 0&&(x=E.length);for(var I=x-this.blockSize,N=this.B,j=this.h,R=0;R<x;){if(j==0)for(;R<=I;)s(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<x;)if(N[j++]=E.charCodeAt(R++),j==this.blockSize){s(this,N),j=0;break}}else for(;R<x;)if(N[j++]=E[R++],j==this.blockSize){s(this,N),j=0;break}}this.h=j,this.o+=x},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var x=1;x<E.length-8;++x)E[x]=0;var I=8*this.o;for(x=E.length-8;x<E.length;++x)E[x]=I&255,I/=256;for(this.u(E),E=Array(16),x=I=0;4>x;++x)for(var N=0;32>N;N+=8)E[I++]=this.g[x]>>>N&255;return E};function i(E,x){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=x(E)}function o(E,x){this.h=x;for(var I=[],N=!0,j=E.length-1;0<=j;j--){var R=E[j]|0;N&&R==x||(I[j]=R,N=!1)}this.g=I}var a={};function l(E){return-128<=E&&128>E?i(E,function(x){return new o([x|0],0>x?-1:0)}):new o([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return T(u(-E));for(var x=[],I=1,N=0;E>=I;N++)x[N]=E/I|0,I*=4294967296;return new o(x,0)}function h(E,x){if(E.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(E.charAt(0)=="-")return T(h(E.substring(1),x));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(x,8)),N=f,j=0;j<E.length;j+=8){var R=Math.min(8,E.length-j),P=parseInt(E.substring(j,j+R),x);8>R?(R=u(Math.pow(x,R)),N=N.j(R).add(u(P))):(N=N.j(I),N=N.add(u(P)))}return N}var f=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-T(this).m();for(var E=0,x=1,I=0;I<this.g.length;I++){var N=this.i(I);E+=(0<=N?N:4294967296+N)*x,x*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(y(this))return"0";if(w(this))return"-"+T(this).toString(E);for(var x=u(Math.pow(E,6)),I=this,N="";;){var j=C(I,x).g;I=_(I,j.j(x));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=j,y(I))return R+N;for(;6>R.length;)R="0"+R;N=R+N}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function y(E){if(E.h!=0)return!1;for(var x=0;x<E.g.length;x++)if(E.g[x]!=0)return!1;return!0}function w(E){return E.h==-1}t.l=function(E){return E=_(this,E),w(E)?-1:y(E)?0:1};function T(E){for(var x=E.g.length,I=[],N=0;N<x;N++)I[N]=~E.g[N];return new o(I,~E.h).add(m)}t.abs=function(){return w(this)?T(this):this},t.add=function(E){for(var x=Math.max(this.g.length,E.g.length),I=[],N=0,j=0;j<=x;j++){var R=N+(this.i(j)&65535)+(E.i(j)&65535),P=(R>>>16)+(this.i(j)>>>16)+(E.i(j)>>>16);N=P>>>16,R&=65535,P&=65535,I[j]=P<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function _(E,x){return E.add(T(x))}t.j=function(E){if(y(this)||y(E))return f;if(w(this))return w(E)?T(this).j(T(E)):T(T(this).j(E));if(w(E))return T(this.j(T(E)));if(0>this.l(g)&&0>E.l(g))return u(this.m()*E.m());for(var x=this.g.length+E.g.length,I=[],N=0;N<2*x;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(var j=0;j<E.g.length;j++){var R=this.i(N)>>>16,P=this.i(N)&65535,fe=E.i(j)>>>16,se=E.i(j)&65535;I[2*N+2*j]+=P*se,k(I,2*N+2*j),I[2*N+2*j+1]+=R*se,k(I,2*N+2*j+1),I[2*N+2*j+1]+=P*fe,k(I,2*N+2*j+1),I[2*N+2*j+2]+=R*fe,k(I,2*N+2*j+2)}for(N=0;N<x;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=x;N<2*x;N++)I[N]=0;return new o(I,0)};function k(E,x){for(;(E[x]&65535)!=E[x];)E[x+1]+=E[x]>>>16,E[x]&=65535,x++}function b(E,x){this.g=E,this.h=x}function C(E,x){if(y(x))throw Error("division by zero");if(y(E))return new b(f,f);if(w(E))return x=C(T(E),x),new b(T(x.g),T(x.h));if(w(x))return x=C(E,T(x)),new b(T(x.g),x.h);if(30<E.g.length){if(w(E)||w(x))throw Error("slowDivide_ only works with positive integers.");for(var I=m,N=x;0>=N.l(E);)I=A(I),N=A(N);var j=D(I,1),R=D(N,1);for(N=D(N,2),I=D(I,2);!y(N);){var P=R.add(N);0>=P.l(E)&&(j=j.add(I),R=P),N=D(N,1),I=D(I,1)}return x=_(E,j.j(x)),new b(j,x)}for(j=f;0<=E.l(x);){for(I=Math.max(1,Math.floor(E.m()/x.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),R=u(I),P=R.j(x);w(P)||0<P.l(E);)I-=N,R=u(I),P=R.j(x);y(R)&&(R=m),j=j.add(R),E=_(E,P)}return new b(j,E)}t.A=function(E){return C(this,E).h},t.and=function(E){for(var x=Math.max(this.g.length,E.g.length),I=[],N=0;N<x;N++)I[N]=this.i(N)&E.i(N);return new o(I,this.h&E.h)},t.or=function(E){for(var x=Math.max(this.g.length,E.g.length),I=[],N=0;N<x;N++)I[N]=this.i(N)|E.i(N);return new o(I,this.h|E.h)},t.xor=function(E){for(var x=Math.max(this.g.length,E.g.length),I=[],N=0;N<x;N++)I[N]=this.i(N)^E.i(N);return new o(I,this.h^E.h)};function A(E){for(var x=E.g.length+1,I=[],N=0;N<x;N++)I[N]=E.i(N)<<1|E.i(N-1)>>>31;return new o(I,E.h)}function D(E,x){var I=x>>5;x%=32;for(var N=E.g.length-I,j=[],R=0;R<N;R++)j[R]=0<x?E.i(R+I)>>>x|E.i(R+I+1)<<32-x:E.i(R+I);return new o(j,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,is=o}).apply(typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{});var yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fb,ua,mb,Jc,ym,pb,gb,vb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,p,v){return d==Array.prototype||d==Object.prototype||(d[p]=v.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof yc=="object"&&yc];for(var p=0;p<d.length;++p){var v=d[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function s(d,p){if(p)e:{var v=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var M=d[S];if(!(M in v))break e;v=v[M]}d=d[d.length-1],S=v[d],p=p(S),p!=S&&p!=null&&e(v,d,{configurable:!0,writable:!0,value:p})}}function i(d,p){d instanceof String&&(d+="");var v=0,S=!1,M={next:function(){if(!S&&v<d.length){var O=v++;return{value:p(O,d[O]),done:!1}}return S=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(d){return d||function(){return i(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var p=typeof d;return p=p!="object"?p:d?Array.isArray(d)?"array":p:"null",p=="array"||p=="object"&&typeof d.length=="number"}function u(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function h(d,p,v){return d.call.apply(d.bind,arguments)}function f(d,p,v){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,S),d.apply(p,M)}}return function(){return d.apply(p,arguments)}}function m(d,p,v){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(d,p){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function y(d,p){function v(){}v.prototype=p.prototype,d.aa=p.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(S,M,O){for(var $=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)$[Ee-2]=arguments[Ee];return p.prototype[M].apply(S,$)}}function w(d){const p=d.length;if(0<p){const v=Array(p);for(let S=0;S<p;S++)v[S]=d[S];return v}return[]}function T(d,p){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(l(S)){const M=d.length||0,O=S.length||0;d.length=M+O;for(let $=0;$<O;$++)d[M+$]=S[$]}else d.push(S)}}class _{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function k(d){return/^[\s\xa0]*$/.test(d)}function b(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function C(d){return C[" "](d),d}C[" "]=function(){};var A=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function D(d,p,v){for(const S in d)p.call(v,d[S],S,d)}function E(d,p){for(const v in d)p.call(void 0,d[v],v,d)}function x(d){const p={};for(const v in d)p[v]=d[v];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(d,p){let v,S;for(let M=1;M<arguments.length;M++){S=arguments[M];for(v in S)d[v]=S[v];for(let O=0;O<I.length;O++)v=I[O],Object.prototype.hasOwnProperty.call(S,v)&&(d[v]=S[v])}}function j(d){var p=1;d=d.split(":");const v=[];for(;0<p&&d.length;)v.push(d.shift()),p--;return d.length&&v.push(d.join(":")),v}function R(d){a.setTimeout(()=>{throw d},0)}function P(){var d=Y;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class fe{constructor(){this.h=this.g=null}add(p,v){const S=se.get();S.set(p,v),this.h?this.h.next=S:this.g=S,this.h=S}}var se=new _(()=>new ae,d=>d.reset());class ae{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let de,U=!1,Y=new fe,L=()=>{const d=a.Promise.resolve(void 0);de=()=>{d.then(H)}};var H=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(v){R(v)}var p=se;p.j(d),100>p.h&&(p.h++,d.next=p.g,p.g=d)}U=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};a.addEventListener("test",v,p),a.removeEventListener("test",v,p)}catch{}return d}();function Be(d,p){if(Z.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget){if(A){e:{try{C(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else v=="mouseover"?p=d.fromElement:v=="mouseout"&&(p=d.toElement);this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:He[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Be.aa.h.call(this)}}y(Be,Z);var He={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),ve=0;function Kt(d,p,v,S,M){this.listener=d,this.proxy=null,this.src=p,this.type=v,this.capture=!!S,this.ha=M,this.key=++ve,this.da=this.fa=!1}function ft(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Yt(d){this.src=d,this.g={},this.h=0}Yt.prototype.add=function(d,p,v,S,M){var O=d.toString();d=this.g[O],d||(d=this.g[O]=[],this.h++);var $=mt(d,p,S,M);return-1<$?(p=d[$],v||(p.fa=!1)):(p=new Kt(p,this.src,O,!!S,M),p.fa=v,d.push(p)),p};function Nt(d,p){var v=p.type;if(v in d.g){var S=d.g[v],M=Array.prototype.indexOf.call(S,p,void 0),O;(O=0<=M)&&Array.prototype.splice.call(S,M,1),O&&(ft(p),d.g[v].length==0&&(delete d.g[v],d.h--))}}function mt(d,p,v,S){for(var M=0;M<d.length;++M){var O=d[M];if(!O.da&&O.listener==p&&O.capture==!!v&&O.ha==S)return M}return-1}var Qt="closure_lm_"+(1e6*Math.random()|0),ze={};function hi(d,p,v,S,M){if(Array.isArray(p)){for(var O=0;O<p.length;O++)hi(d,p[O],v,S,M);return null}return v=i0(v),d&&d[z]?d.K(p,v,u(S)?!!S.capture:!1,M):ye(d,p,v,!1,S,M)}function ye(d,p,v,S,M,O){if(!p)throw Error("Invalid event type");var $=u(M)?!!M.capture:!!M,Ee=th(d);if(Ee||(d[Qt]=Ee=new Yt(d)),v=Ee.add(p,v,S,$,O),v.proxy)return v;if(S=tT(),v.proxy=S,S.src=d,S.listener=v,d.addEventListener)Ie||(M=$),M===void 0&&(M=!1),d.addEventListener(p.toString(),S,M);else if(d.attachEvent)d.attachEvent(s0(p.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function tT(){function d(v){return p.call(d.src,d.listener,v)}const p=nT;return d}function r0(d,p,v,S,M){if(Array.isArray(p))for(var O=0;O<p.length;O++)r0(d,p[O],v,S,M);else S=u(S)?!!S.capture:!!S,v=i0(v),d&&d[z]?(d=d.i,p=String(p).toString(),p in d.g&&(O=d.g[p],v=mt(O,v,S,M),-1<v&&(ft(O[v]),Array.prototype.splice.call(O,v,1),O.length==0&&(delete d.g[p],d.h--)))):d&&(d=th(d))&&(p=d.g[p.toString()],d=-1,p&&(d=mt(p,v,S,M)),(v=-1<d?p[d]:null)&&eh(v))}function eh(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[z])Nt(p.i,d);else{var v=d.type,S=d.proxy;p.removeEventListener?p.removeEventListener(v,S,d.capture):p.detachEvent?p.detachEvent(s0(v),S):p.addListener&&p.removeListener&&p.removeListener(S),(v=th(p))?(Nt(v,d),v.h==0&&(v.src=null,p[Qt]=null)):ft(d)}}}function s0(d){return d in ze?ze[d]:ze[d]="on"+d}function nT(d,p){if(d.da)d=!0;else{p=new Be(p,this);var v=d.listener,S=d.ha||d.src;d.fa&&eh(d),d=v.call(S,p)}return d}function th(d){return d=d[Qt],d instanceof Yt?d:null}var nh="__closure_events_fn_"+(1e9*Math.random()>>>0);function i0(d){return typeof d=="function"?d:(d[nh]||(d[nh]=function(p){return d.handleEvent(p)}),d[nh])}function pt(){Q.call(this),this.i=new Yt(this),this.M=this,this.F=null}y(pt,Q),pt.prototype[z]=!0,pt.prototype.removeEventListener=function(d,p,v,S){r0(this,d,p,v,S)};function At(d,p){var v,S=d.F;if(S)for(v=[];S;S=S.F)v.push(S);if(d=d.M,S=p.type||p,typeof p=="string")p=new Z(p,d);else if(p instanceof Z)p.target=p.target||d;else{var M=p;p=new Z(S,d),N(p,M)}if(M=!0,v)for(var O=v.length-1;0<=O;O--){var $=p.g=v[O];M=Vl($,S,!0,p)&&M}if($=p.g=d,M=Vl($,S,!0,p)&&M,M=Vl($,S,!1,p)&&M,v)for(O=0;O<v.length;O++)$=p.g=v[O],M=Vl($,S,!1,p)&&M}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var d=this.i,p;for(p in d.g){for(var v=d.g[p],S=0;S<v.length;S++)ft(v[S]);delete d.g[p],d.h--}}this.F=null},pt.prototype.K=function(d,p,v,S){return this.i.add(String(d),p,!1,v,S)},pt.prototype.L=function(d,p,v,S){return this.i.add(String(d),p,!0,v,S)};function Vl(d,p,v,S){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,O=0;O<p.length;++O){var $=p[O];if($&&!$.da&&$.capture==v){var Ee=$.listener,ot=$.ha||$.src;$.fa&&Nt(d.i,$),M=Ee.call(ot,S)!==!1&&M}}return M&&!S.defaultPrevented}function o0(d,p,v){if(typeof d=="function")v&&(d=m(d,v));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(d,p||0)}function a0(d){d.g=o0(()=>{d.g=null,d.i&&(d.i=!1,a0(d))},d.l);const p=d.h;d.h=null,d.m.apply(null,p)}class rT extends Q{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:a0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function No(d){Q.call(this),this.h=d,this.g={}}y(No,Q);var l0=[];function c0(d){D(d.g,function(p,v){this.g.hasOwnProperty(v)&&eh(p)},d),d.g={}}No.prototype.N=function(){No.aa.N.call(this),c0(this)},No.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rh=a.JSON.stringify,sT=a.JSON.parse,iT=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function sh(){}sh.prototype.h=null;function u0(d){return d.h||(d.h=d.i())}function d0(){}var Ao={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ih(){Z.call(this,"d")}y(ih,Z);function oh(){Z.call(this,"c")}y(oh,Z);var ks={},h0=null;function Fl(){return h0=h0||new pt}ks.La="serverreachability";function f0(d){Z.call(this,ks.La,d)}y(f0,Z);function jo(d){const p=Fl();At(p,new f0(p))}ks.STAT_EVENT="statevent";function m0(d,p){Z.call(this,ks.STAT_EVENT,d),this.stat=p}y(m0,Z);function jt(d){const p=Fl();At(p,new m0(p,d))}ks.Ma="timingevent";function p0(d,p){Z.call(this,ks.Ma,d),this.size=p}y(p0,Z);function Po(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},p)}function Ro(){this.g=!0}Ro.prototype.xa=function(){this.g=!1};function oT(d,p,v,S,M,O){d.info(function(){if(d.g)if(O)for(var $="",Ee=O.split("&"),ot=0;ot<Ee.length;ot++){var pe=Ee[ot].split("=");if(1<pe.length){var gt=pe[0];pe=pe[1];var vt=gt.split("_");$=2<=vt.length&&vt[1]=="type"?$+(gt+"="+pe+"&"):$+(gt+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+S+") [attempt "+M+"]: "+p+`
`+v+`
`+$})}function aT(d,p,v,S,M,O,$){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+M+"]: "+p+`
`+v+`
`+O+" "+$})}function fi(d,p,v,S){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+cT(d,v)+(S?" "+S:"")})}function lT(d,p){d.info(function(){return"TIMEOUT: "+p})}Ro.prototype.info=function(){};function cT(d,p){if(!d.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var S=v[d];if(!(2>S.length)){var M=S[1];if(Array.isArray(M)&&!(1>M.length)){var O=M[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<M.length;$++)M[$]=""}}}}return rh(v)}catch{return p}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},g0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ah;function zl(){}y(zl,sh),zl.prototype.g=function(){return new XMLHttpRequest},zl.prototype.i=function(){return{}},ah=new zl;function Sr(d,p,v,S){this.j=d,this.i=p,this.l=v,this.R=S||1,this.U=new No(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new v0}function v0(){this.i=null,this.g="",this.h=!1}var y0={},lh={};function ch(d,p,v){d.L=1,d.v=Hl(er(p)),d.m=v,d.P=!0,x0(d,null)}function x0(d,p){d.F=Date.now(),Ul(d),d.A=er(d.v);var v=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),R0(v.i,"t",S),d.C=0,v=d.j.J,d.h=new v0,d.g=X0(d.j,v?p:null,!d.m),0<d.O&&(d.M=new rT(m(d.Y,d,d.g),d.O)),p=d.U,v=d.g,S=d.ca;var M="readystatechange";Array.isArray(M)||(M&&(l0[0]=M.toString()),M=l0);for(var O=0;O<M.length;O++){var $=hi(v,M[O],S||p.handleEvent,!1,p.h||p);if(!$)break;p.g[$.key]=$}p=d.H?x(d.H):{},d.m?(d.u||(d.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,p)):(d.u="GET",d.g.ea(d.A,d.u,null,p)),jo(),oT(d.i,d.u,d.A,d.l,d.R,d.m)}Sr.prototype.ca=function(d){d=d.target;const p=this.M;p&&tr(d)==3?p.j():this.Y(d)},Sr.prototype.Y=function(d){try{if(d==this.g)e:{const vt=tr(this.g);var p=this.g.Ba();const gi=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||B0(this.g)))){this.J||vt!=4||p==7||(p==8||0>=gi?jo(3):jo(2)),uh(this);var v=this.g.Z();this.X=v;t:if(_0(this)){var S=B0(this.g);d="";var M=S.length,O=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Es(this),Do(this);var $="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,d+=this.h.i.decode(S[p],{stream:!(O&&p==M-1)});S.length=0,this.h.g+=d,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=v==200,aT(this.i,this.u,this.A,this.l,this.R,vt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,ot=this.g;if((Ee=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Ee)){var pe=Ee;break t}}pe=null}if(v=pe)fi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dh(this,v);else{this.o=!1,this.s=3,jt(12),Es(this),Do(this);break e}}if(this.P){v=!0;let xn;for(;!this.J&&this.C<$.length;)if(xn=uT(this,$),xn==lh){vt==4&&(this.s=4,jt(14),v=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==y0){this.s=4,jt(15),fi(this.i,this.l,$,"[Invalid Chunk]"),v=!1;break}else fi(this.i,this.l,xn,null),dh(this,xn);if(_0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||$.length!=0||this.h.h||(this.s=1,jt(16),v=!1),this.o=this.o&&v,!v)fi(this.i,this.l,$,"[Invalid Chunked Response]"),Es(this),Do(this);else if(0<$.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),vh(gt),gt.M=!0,jt(11))}}else fi(this.i,this.l,$,null),dh(this,$);vt==4&&Es(this),this.o&&!this.J&&(vt==4?G0(this.j,this):(this.o=!1,Ul(this)))}else IT(this.g),v==400&&0<$.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),Es(this),Do(this)}}}catch{}finally{}};function _0(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function uT(d,p){var v=d.C,S=p.indexOf(`
`,v);return S==-1?lh:(v=Number(p.substring(v,S)),isNaN(v)?y0:(S+=1,S+v>p.length?lh:(p=p.slice(S,S+v),d.C=S+v,p)))}Sr.prototype.cancel=function(){this.J=!0,Es(this)};function Ul(d){d.S=Date.now()+d.I,w0(d,d.I)}function w0(d,p){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Po(m(d.ba,d),p)}function uh(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Sr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(lT(this.i,this.A),this.L!=2&&(jo(),jt(17)),Es(this),this.s=2,Do(this)):w0(this,this.S-d)};function Do(d){d.j.G==0||d.J||G0(d.j,d)}function Es(d){uh(d);var p=d.M;p&&typeof p.ma=="function"&&p.ma(),d.M=null,c0(d.U),d.g&&(p=d.g,d.g=null,p.abort(),p.ma())}function dh(d,p){try{var v=d.j;if(v.G!=0&&(v.g==d||hh(v.h,d))){if(!d.K&&hh(v.h,d)&&v.G==3){try{var S=v.Da.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var M=S;if(M[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)Xl(v),Yl(v);else break e;gh(v),jt(18)}}else v.za=M[1],0<v.za-v.T&&37500>M[2]&&v.F&&v.v==0&&!v.C&&(v.C=Po(m(v.Za,v),6e3));if(1>=E0(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ss(v,11)}else if((d.K||v.g==d)&&Xl(v),!k(p))for(M=v.Da.g.parse(p),p=0;p<M.length;p++){let pe=M[p];if(v.T=pe[0],pe=pe[1],v.G==2)if(pe[0]=="c"){v.K=pe[1],v.ia=pe[2];const gt=pe[3];gt!=null&&(v.la=gt,v.j.info("VER="+v.la));const vt=pe[4];vt!=null&&(v.Aa=vt,v.j.info("SVER="+v.Aa));const gi=pe[5];gi!=null&&typeof gi=="number"&&0<gi&&(S=1.5*gi,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const xn=d.g;if(xn){const Jl=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jl){var O=S.h;O.g||Jl.indexOf("spdy")==-1&&Jl.indexOf("quic")==-1&&Jl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(fh(O,O.h),O.h=null))}if(S.D){const yh=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;yh&&(S.ya=yh,Ce(S.I,S.D,yh))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var $=d;if(S.qa=Q0(S,S.J?S.ia:null,S.W),$.K){T0(S.h,$);var Ee=$,ot=S.L;ot&&(Ee.I=ot),Ee.B&&(uh(Ee),Ul(Ee)),S.g=$}else H0(S);0<v.i.length&&Ql(v)}else pe[0]!="stop"&&pe[0]!="close"||Ss(v,7);else v.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Ss(v,7):ph(v):pe[0]!="noop"&&v.l&&v.l.ta(pe),v.v=0)}}jo(4)}catch{}}var dT=class{constructor(d,p){this.g=d,this.map=p}};function b0(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function k0(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function E0(d){return d.h?1:d.g?d.g.size:0}function hh(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function fh(d,p){d.g?d.g.add(p):d.h=p}function T0(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}b0.prototype.cancel=function(){if(this.i=S0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function S0(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let p=d.i;for(const v of d.g.values())p=p.concat(v.D);return p}return w(d.i)}function hT(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var p=[],v=d.length,S=0;S<v;S++)p.push(d[S]);return p}p=[],v=0;for(S in d)p[v++]=d[S];return p}function fT(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var p=[];d=d.length;for(var v=0;v<d;v++)p.push(v);return p}p=[],v=0;for(const S in d)p[v++]=S;return p}}}function I0(d,p){if(d.forEach&&typeof d.forEach=="function")d.forEach(p,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,p,void 0);else for(var v=fT(d),S=hT(d),M=S.length,O=0;O<M;O++)p.call(void 0,S[O],v&&v[O],d)}var C0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mT(d,p){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var S=d[v].indexOf("="),M=null;if(0<=S){var O=d[v].substring(0,S);M=d[v].substring(S+1)}else O=d[v];p(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Ts(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ts){this.h=d.h,Wl(this,d.j),this.o=d.o,this.g=d.g,$l(this,d.s),this.l=d.l;var p=d.i,v=new Oo;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),N0(this,v),this.m=d.m}else d&&(p=String(d).match(C0))?(this.h=!1,Wl(this,p[1]||"",!0),this.o=Mo(p[2]||""),this.g=Mo(p[3]||"",!0),$l(this,p[4]),this.l=Mo(p[5]||"",!0),N0(this,p[6]||"",!0),this.m=Mo(p[7]||"")):(this.h=!1,this.i=new Oo(null,this.h))}Ts.prototype.toString=function(){var d=[],p=this.j;p&&d.push(Lo(p,A0,!0),":");var v=this.g;return(v||p=="file")&&(d.push("//"),(p=this.o)&&d.push(Lo(p,A0,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(Lo(v,v.charAt(0)=="/"?vT:gT,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",Lo(v,xT)),d.join("")};function er(d){return new Ts(d)}function Wl(d,p,v){d.j=v?Mo(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function $l(d,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);d.s=p}else d.s=null}function N0(d,p,v){p instanceof Oo?(d.i=p,_T(d.i,d.h)):(v||(p=Lo(p,yT)),d.i=new Oo(p,d.h))}function Ce(d,p,v){d.i.set(p,v)}function Hl(d){return Ce(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Mo(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Lo(d,p,v){return typeof d=="string"?(d=encodeURI(d).replace(p,pT),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function pT(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var A0=/[#\/\?@]/g,gT=/[#\?:]/g,vT=/[#\?]/g,yT=/[#\?@]/g,xT=/#/g;function Oo(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function Ir(d){d.g||(d.g=new Map,d.h=0,d.i&&mT(d.i,function(p,v){d.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}t=Oo.prototype,t.add=function(d,p){Ir(this),this.i=null,d=mi(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(p),this.h+=1,this};function j0(d,p){Ir(d),p=mi(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function P0(d,p){return Ir(d),p=mi(d,p),d.g.has(p)}t.forEach=function(d,p){Ir(this),this.g.forEach(function(v,S){v.forEach(function(M){d.call(p,M,S,this)},this)},this)},t.na=function(){Ir(this);const d=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let S=0;S<p.length;S++){const M=d[S];for(let O=0;O<M.length;O++)v.push(p[S])}return v},t.V=function(d){Ir(this);let p=[];if(typeof d=="string")P0(this,d)&&(p=p.concat(this.g.get(mi(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)p=p.concat(d[v])}return p},t.set=function(d,p){return Ir(this),this.i=null,d=mi(this,d),P0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},t.get=function(d,p){return d?(d=this.V(d),0<d.length?String(d[0]):p):p};function R0(d,p,v){j0(d,p),0<v.length&&(d.i=null,d.g.set(mi(d,p),w(v)),d.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var S=p[v];const O=encodeURIComponent(String(S)),$=this.V(S);for(S=0;S<$.length;S++){var M=O;$[S]!==""&&(M+="="+encodeURIComponent(String($[S]))),d.push(M)}}return this.i=d.join("&")};function mi(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function _T(d,p){p&&!d.j&&(Ir(d),d.i=null,d.g.forEach(function(v,S){var M=S.toLowerCase();S!=M&&(j0(this,S),R0(this,M,v))},d)),d.j=p}function wT(d,p){const v=new Ro;if(a.Image){const S=new Image;S.onload=g(Cr,v,"TestLoadImage: loaded",!0,p,S),S.onerror=g(Cr,v,"TestLoadImage: error",!1,p,S),S.onabort=g(Cr,v,"TestLoadImage: abort",!1,p,S),S.ontimeout=g(Cr,v,"TestLoadImage: timeout",!1,p,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else p(!1)}function bT(d,p){const v=new Ro,S=new AbortController,M=setTimeout(()=>{S.abort(),Cr(v,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:S.signal}).then(O=>{clearTimeout(M),O.ok?Cr(v,"TestPingServer: ok",!0,p):Cr(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Cr(v,"TestPingServer: error",!1,p)})}function Cr(d,p,v,S,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),S(v)}catch{}}function kT(){this.g=new iT}function ET(d,p,v){const S=v||"";try{I0(d,function(M,O){let $=M;u(M)&&($=rh(M)),p.push(S+O+"="+encodeURIComponent($))})}catch(M){throw p.push(S+"type="+encodeURIComponent("_badmap")),M}}function ql(d){this.l=d.Ub||null,this.j=d.eb||!1}y(ql,sh),ql.prototype.g=function(){return new Gl(this.l,this.j)},ql.prototype.i=function(d){return function(){return d}}({});function Gl(d,p){pt.call(this),this.D=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Gl,pt),t=Gl.prototype,t.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=p,this.readyState=1,Fo(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(p.body=d),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vo(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;D0(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function D0(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?Vo(this):Fo(this),this.readyState==3&&D0(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Vo(this))},t.Qa=function(d){this.g&&(this.response=d,Vo(this))},t.ga=function(){this.g&&Vo(this)};function Vo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Fo(d)}t.setRequestHeader=function(d,p){this.u.append(d,p)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=p.next();return d.join(`\r
`)};function Fo(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function M0(d){let p="";return D(d,function(v,S){p+=S,p+=":",p+=v,p+=`\r
`}),p}function mh(d,p,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=M0(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):Ce(d,p,v))}function Ve(d){pt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ve,pt);var TT=/^https?$/i,ST=["POST","PUT"];t=Ve.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,p,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ah.g(),this.v=this.o?u0(this.o):u0(ah),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(O){L0(this,O);return}if(d=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var M in S)v.set(M,S[M]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const O of S.keys())v.set(O,S.get(O));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(O=>O.toLowerCase()=="content-type"),M=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ST,p,void 0))||S||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of v)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{F0(this),this.u=!0,this.g.send(d),this.u=!1}catch(O){L0(this,O)}};function L0(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.m=5,O0(d),Kl(d)}function O0(d){d.A||(d.A=!0,At(d,"complete"),At(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,At(this,"complete"),At(this,"abort"),Kl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kl(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?V0(this):this.bb())},t.bb=function(){V0(this)};function V0(d){if(d.h&&typeof o<"u"&&(!d.v[1]||tr(d)!=4||d.Z()!=2)){if(d.u&&tr(d)==4)o0(d.Ea,0,d);else if(At(d,"readystatechange"),tr(d)==4){d.h=!1;try{const $=d.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var S;if(S=$===0){var M=String(d.D).match(C0)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),S=!TT.test(M?M.toLowerCase():"")}v=S}if(v)At(d,"complete"),At(d,"success");else{d.m=6;try{var O=2<tr(d)?d.g.statusText:""}catch{O=""}d.l=O+" ["+d.Z()+"]",O0(d)}}finally{Kl(d)}}}}function Kl(d,p){if(d.g){F0(d);const v=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,p||At(d,"ready");try{v.onreadystatechange=S}catch{}}}function F0(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function tr(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),sT(p)}};function B0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function IT(d){const p={};d=(d.g&&2<=tr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(k(d[S]))continue;var v=j(d[S]);const M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const O=p[M]||[];p[M]=O,O.push(v)}E(p,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bo(d,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||p}function z0(d){this.Aa=0,this.i=[],this.j=new Ro,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bo("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bo("baseRetryDelayMs",5e3,d),this.cb=Bo("retryDelaySeedMs",1e4,d),this.Wa=Bo("forwardChannelMaxRetries",2,d),this.wa=Bo("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new b0(d&&d.concurrentRequestLimit),this.Da=new kT,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=z0.prototype,t.la=8,t.G=1,t.connect=function(d,p,v,S){jt(0),this.W=d,this.H=p||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=Q0(this,null,this.W),Ql(this)};function ph(d){if(U0(d),d.G==3){var p=d.U++,v=er(d.I);if(Ce(v,"SID",d.K),Ce(v,"RID",p),Ce(v,"TYPE","terminate"),zo(d,v),p=new Sr(d,d.j,p),p.L=2,p.v=Hl(er(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=p.v,v=!0),v||(p.g=X0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ul(p)}Y0(d)}function Yl(d){d.g&&(vh(d),d.g.cancel(),d.g=null)}function U0(d){Yl(d),d.u&&(a.clearTimeout(d.u),d.u=null),Xl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Ql(d){if(!k0(d.h)&&!d.s){d.s=!0;var p=d.Ga;de||L(),U||(de(),U=!0),Y.add(p,d),d.B=0}}function CT(d,p){return E0(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=p.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Po(m(d.Ga,d,p),K0(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const M=new Sr(this,this.j,d);let O=this.o;if(this.S&&(O?(O=x(O),N(O,this.S)):O=this.S),this.m!==null||this.O||(M.H=O,O=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=$0(this,M,p),v=er(this.I),Ce(v,"RID",d),Ce(v,"CVER",22),this.D&&Ce(v,"X-HTTP-Session-Id",this.D),zo(this,v),O&&(this.O?p="headers="+encodeURIComponent(String(M0(O)))+"&"+p:this.m&&mh(v,this.m,O)),fh(this.h,M),this.Ua&&Ce(v,"TYPE","init"),this.P?(Ce(v,"$req",p),Ce(v,"SID","null"),M.T=!0,ch(M,v,null)):ch(M,v,p),this.G=2}}else this.G==3&&(d?W0(this,d):this.i.length==0||k0(this.h)||W0(this))};function W0(d,p){var v;p?v=p.l:v=d.U++;const S=er(d.I);Ce(S,"SID",d.K),Ce(S,"RID",v),Ce(S,"AID",d.T),zo(d,S),d.m&&d.o&&mh(S,d.m,d.o),v=new Sr(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),p&&(d.i=p.D.concat(d.i)),p=$0(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),fh(d.h,v),ch(v,S,p)}function zo(d,p){d.H&&D(d.H,function(v,S){Ce(p,S,v)}),d.l&&I0({},function(v,S){Ce(p,S,v)})}function $0(d,p,v){v=Math.min(d.i.length,v);var S=d.l?m(d.l.Na,d.l,d):null;e:{var M=d.i;let O=-1;for(;;){const $=["count="+v];O==-1?0<v?(O=M[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let Ee=!0;for(let ot=0;ot<v;ot++){let pe=M[ot].g;const gt=M[ot].map;if(pe-=O,0>pe)O=Math.max(0,M[ot].g-100),Ee=!1;else try{ET(gt,$,"req"+pe+"_")}catch{S&&S(gt)}}if(Ee){S=$.join("&");break e}}}return d=d.i.splice(0,v),p.D=d,S}function H0(d){if(!d.g&&!d.u){d.Y=1;var p=d.Fa;de||L(),U||(de(),U=!0),Y.add(p,d),d.v=0}}function gh(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Po(m(d.Fa,d),K0(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,q0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Po(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Yl(this),q0(this))};function vh(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function q0(d){d.g=new Sr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var p=er(d.qa);Ce(p,"RID","rpc"),Ce(p,"SID",d.K),Ce(p,"AID",d.T),Ce(p,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ce(p,"TO",d.ja),Ce(p,"TYPE","xmlhttp"),zo(d,p),d.m&&d.o&&mh(p,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=Hl(er(p)),v.m=null,v.P=!0,x0(v,d)}t.Za=function(){this.C!=null&&(this.C=null,Yl(this),gh(this),jt(19))};function Xl(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function G0(d,p){var v=null;if(d.g==p){Xl(d),vh(d),d.g=null;var S=2}else if(hh(d.h,p))v=p.D,T0(d.h,p),S=1;else return;if(d.G!=0){if(p.o)if(S==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var M=d.B;S=Fl(),At(S,new p0(S,v)),Ql(d)}else H0(d);else if(M=p.s,M==3||M==0&&0<p.X||!(S==1&&CT(d,p)||S==2&&gh(d)))switch(v&&0<v.length&&(p=d.h,p.i=p.i.concat(v)),M){case 1:Ss(d,5);break;case 4:Ss(d,10);break;case 3:Ss(d,6);break;default:Ss(d,2)}}}function K0(d,p){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*p}function Ss(d,p){if(d.j.info("Error code "+p),p==2){var v=m(d.fb,d),S=d.Xa;const M=!S;S=new Ts(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wl(S,"https"),Hl(S),M?wT(S.toString(),v):bT(S.toString(),v)}else jt(2);d.G=0,d.l&&d.l.sa(p),Y0(d),U0(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Y0(d){if(d.G=0,d.ka=[],d.l){const p=S0(d.h);(p.length!=0||d.i.length!=0)&&(T(d.ka,p),T(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function Q0(d,p,v){var S=v instanceof Ts?er(v):new Ts(v);if(S.g!="")p&&(S.g=p+"."+S.g),$l(S,S.s);else{var M=a.location;S=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var O=new Ts(null);S&&Wl(O,S),p&&(O.g=p),M&&$l(O,M),v&&(O.l=v),S=O}return v=d.D,p=d.ya,v&&p&&Ce(S,v,p),Ce(S,"VER",d.la),zo(d,S),S}function X0(d,p,v){if(p&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Ca&&!d.pa?new Ve(new ql({eb:v})):new Ve(d.pa),p.Ha(d.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Z0(){}t=Z0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zl(){}Zl.prototype.g=function(d,p){return new Xt(d,p)};function Xt(d,p){pt.call(this),this.g=new z0(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(d?d["X-WebChannel-Client-Profile"]=p.va:d={"X-WebChannel-Client-Profile":p.va}),this.g.S=d,(d=p&&p.Sb)&&!k(d)&&(this.g.m=d),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!k(p)&&(this.g.D=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new pi(this)}y(Xt,pt),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){ph(this.g)},Xt.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=rh(d),d=v);p.i.push(new dT(p.Ya++,d)),p.G==3&&Ql(p)},Xt.prototype.N=function(){this.g.l=null,delete this.j,ph(this.g),delete this.g,Xt.aa.N.call(this)};function J0(d){ih.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(const v in p){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}y(J0,ih);function ev(){oh.call(this),this.status=1}y(ev,oh);function pi(d){this.g=d}y(pi,Z0),pi.prototype.ua=function(){At(this.g,"a")},pi.prototype.ta=function(d){At(this.g,new J0(d))},pi.prototype.sa=function(d){At(this.g,new ev)},pi.prototype.ra=function(){At(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,vb=function(){return new Zl},gb=function(){return Fl()},pb=ks,ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,Jc=Bl,g0.COMPLETE="complete",mb=g0,d0.EventType=Ao,Ao.OPEN="a",Ao.CLOSE="b",Ao.ERROR="c",Ao.MESSAGE="d",pt.prototype.listen=pt.prototype.K,ua=d0,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,fb=Ve}).apply(typeof yc<"u"?yc:typeof self<"u"?self:typeof window<"u"?window:{});const zy="@firebase/firestore",Uy="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new $p("@firebase/firestore");function wi(){return ti.logLevel}function q(t,...e){if(ti.logLevel<=le.DEBUG){const n=e.map(ng);ti.debug(`Firestore (${bo}): ${t}`,...n)}}function wr(t,...e){if(ti.logLevel<=le.ERROR){const n=e.map(ng);ti.error(`Firestore (${bo}): ${t}`,...n)}}function oo(t,...e){if(ti.logLevel<=le.WARN){const n=e.map(ng);ti.warn(`Firestore (${bo}): ${t}`,...n)}}function ng(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,yb(t,r,n)}function yb(t,e,n){let r=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wr(r),new Error(r)}function _e(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||yb(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class sP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class iP{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new mr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new xb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new kt(e)}}class oP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=cP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function xm(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ie(r,s);{const i=_b(),o=uP(i.encode($y(t,n)),i.encode($y(e,n)));return o!==0?o:ie(r,s)}}n+=r>65535?2:1}return ie(t.length,e.length)}function $y(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function uP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ie(t[n],e[n]);return ie(t.length,e.length)}function ao(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=-62135596800,qy=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*qy);return new Je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Hy)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qy}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Je(0,0))}static max(){return new ne(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="__name__";class Bn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Bn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ie(e.length,n.length)}static compareSegments(e,n){const r=Bn.isNumericId(e),s=Bn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Bn.extractNumericId(e).compare(Bn.extractNumericId(n)):xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class je extends Bn{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const dP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends Bn{construct(e,n,r){return new ct(e,n,r)}static isValidIdentifier(e){return dP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gy}static keyField(){return new ct([Gy])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(je.fromString(e))}static fromName(e){return new X(je.fromString(e).popFirst(5))}static empty(){return new X(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=-1;function hP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new us(s,X.empty(),e)}function fP(t){return new us(t.readTime,t.key,nl)}class us{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new us(ne.min(),X.empty(),nl)}static max(){return new us(ne.max(),X.empty(),nl)}}function mP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==pP)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function vP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Dd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=-1;function Md(t){return t==null}function $u(t){return t===0&&1/t==-1/0}function yP(t){return typeof t=="number"&&Number.isInteger(t)&&!$u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="";function xP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ky(e)),e=_P(t.get(n),e);return Ky(e)}function _P(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case bb:n+="";break;default:n+=i}}return n}function Ky(t){return t+bb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||lt.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xc(this.root,e,this.comparator,!0)}}class xc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??lt.RED,this.left=s??lt.EMPTY,this.right=i??lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new lt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return lt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qy(this.data.getIterator())}getIteratorFrom(e){return new Qy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class Qy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new en([])}unionWith(e){let n=new et(ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Eb("Invalid base64 string: "+i):i}}(e);return new ht(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const wP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=wP.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hs(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="server_timestamp",Sb="__type__",Ib="__previous_value__",Cb="__local_write_time__";function sg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Sb])===null||n===void 0?void 0:n.stringValue)===Tb}function Ld(t){const e=t.mapValue.fields[Ib];return sg(e)?Ld(e):e}function rl(t){const e=ds(t.mapValue.fields[Cb].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Hu="(default)";class sl{constructor(e,n){this.projectId=e,this.database=n||Hu}static empty(){return new sl("","")}get isDefaultDatabase(){return this.database===Hu}isEqual(e){return e instanceof sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="__type__",kP="__max__",_c={mapValue:{}},Ab="__vector__",qu="value";function fs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sg(t)?4:TP(t)?9007199254740991:EP(t)?10:11:ee(28295,{value:t})}function Qn(t,e){if(t===e)return!0;const n=fs(t);if(n!==fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rl(t).isEqual(rl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ds(s.timestampValue),a=ds(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return hs(s.bytesValue).isEqual(hs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),a=Ue(i.doubleValue);return o===a?$u(o)===$u(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ao(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Yy(o)!==Yy(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Qn(o[l],a[l])))return!1;return!0}(t,e);default:return ee(52216,{left:t})}}function il(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function lo(t,e){if(t===e)return 0;const n=fs(t),r=fs(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ue(i.integerValue||i.doubleValue),l=Ue(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Xy(t.timestampValue,e.timestampValue);case 4:return Xy(rl(t),rl(e));case 5:return xm(t.stringValue,e.stringValue);case 6:return function(i,o){const a=hs(i),l=hs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ie(a[u],l[u]);if(h!==0)return h}return ie(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ie(Ue(i.latitude),Ue(o.latitude));return a!==0?a:ie(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,h;const f=i.fields||{},m=o.fields||{},g=(a=f[qu])===null||a===void 0?void 0:a.arrayValue,y=(l=m[qu])===null||l===void 0?void 0:l.arrayValue,w=ie(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:Zy(g,y)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===_c.mapValue&&o===_c.mapValue)return 0;if(i===_c.mapValue)return 1;if(o===_c.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=xm(l[f],h[f]);if(m!==0)return m;const g=lo(a[l[f]],u[h[f]]);if(g!==0)return g}return ie(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ee(23264,{Pe:n})}}function Xy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=ds(t),r=ds(e),s=ie(n.seconds,r.seconds);return s!==0?s:ie(n.nanos,r.nanos)}function Zy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=lo(n[s],r[s]);if(i)return i}return ie(n.length,r.length)}function co(t){return _m(t)}function _m(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ds(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=_m(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${_m(n.fields[o])}`;return s+"}"}(t.mapValue):ee(61005,{value:t})}function eu(t){switch(fs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ld(t);return e?16+eu(e):16;case 5:return 2*t.stringValue.length;case 6:return hs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+eu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ws(r.fields,(i,o)=>{s+=i.length+eu(o)}),s}(t.mapValue);default:throw ee(13486,{value:t})}}function Jy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wm(t){return!!t&&"integerValue"in t}function ig(t){return!!t&&"arrayValue"in t}function ex(t){return!!t&&"nullValue"in t}function tx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tu(t){return!!t&&"mapValue"in t}function EP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Nb])===null||n===void 0?void 0:n.stringValue)===Ab}function Na(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Na(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Na(t.arrayValue.values[n]);return e}return Object.assign({},t)}function TP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Na(n)}setAll(e){let n=ct.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Na(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];tu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ws(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new zt(Na(this.value))}}function jb(t){const e=[];return ws(t.fields,(n,r)=>{const s=new ct([n]);if(tu(r)){const i=jb(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Tt(e,0,ne.min(),ne.min(),ne.min(),zt.empty(),0)}static newFoundDocument(e,n,r,s){return new Tt(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new Tt(e,2,n,ne.min(),ne.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,ne.min(),ne.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.position=e,this.inclusive=n}}function nx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=lo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function rx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function SP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{}class Ke extends Pb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CP(e,n,r):n==="array-contains"?new jP(e,r):n==="in"?new PP(e,r):n==="not-in"?new RP(e,r):n==="array-contains-any"?new DP(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NP(e,r):new AP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(lo(n,this.value)):n!==null&&fs(this.value)===fs(n)&&this.matchesComparison(lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends Pb{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Dn(e,n)}matches(e){return Rb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Rb(t){return t.op==="and"}function Db(t){return IP(t)&&Rb(t)}function IP(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function bm(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+co(t.value);if(Db(t))return t.filters.map(e=>bm(e)).join(",");{const e=t.filters.map(n=>bm(n)).join(",");return`${t.op}(${e})`}}function Mb(t,e){return t instanceof Ke?function(r,s){return s instanceof Ke&&r.op===s.op&&r.field.isEqual(s.field)&&Qn(r.value,s.value)}(t,e):t instanceof Dn?function(r,s){return s instanceof Dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Mb(o,s.filters[a]),!0):!1}(t,e):void ee(19439)}function Lb(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(Lb).join(" ,")+"}"}(t):"Filter"}class CP extends Ke{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class NP extends Ke{constructor(e,n){super(e,"in",n),this.keys=Ob("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AP extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=Ob("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ob(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class jP extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ig(n)&&il(n.arrayValue,this.value)}}class PP extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&il(this.value.arrayValue,n)}}class RP extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!il(this.value.arrayValue,n)}}class DP extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ig(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>il(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function sx(t,e=null,n=[],r=[],s=null,i=null,o=null){return new MP(t,e,n,r,s,i,o)}function og(t){const e=re(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Md(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>co(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>co(r)).join(",")),e.Ie=n}return e.Ie}function ag(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rx(t.startAt,e.startAt)&&rx(t.endAt,e.endAt)}function km(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function LP(t,e,n,r,s,i,o,a){return new To(t,e,n,r,s,i,o,a)}function lg(t){return new To(t)}function ix(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Vb(t){return t.collectionGroup!==null}function Aa(t){const e=re(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new et(ct.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new ol(i,r))}),n.has(ct.keyField().canonicalString())||e.Ee.push(new ol(ct.keyField(),r))}return e.Ee}function qn(t){const e=re(t);return e.de||(e.de=OP(e,Aa(t))),e.de}function OP(t,e){if(t.limitType==="F")return sx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ol(s.field,i)});const n=t.endAt?new Gu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gu(t.startAt.position,t.startAt.inclusive):null;return sx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Em(t,e){const n=t.filters.concat([e]);return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tm(t,e,n){return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Od(t,e){return ag(qn(t),qn(e))&&t.limitType===e.limitType}function Fb(t){return`${og(qn(t))}|lt:${t.limitType}`}function bi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Lb(s)).join(", ")}]`),Md(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>co(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>co(s)).join(",")),`Target(${r})`}(qn(t))}; limitType=${t.limitType})`}function Vd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Aa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=nx(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Aa(r),s)||r.endAt&&!function(o,a,l){const u=nx(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Aa(r),s))}(t,e)}function VP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Bb(t){return(e,n)=>{let r=!1;for(const s of Aa(t)){const i=FP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function FP(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?lo(l,u):ee(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return kb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=new Oe(X.comparator);function br(){return BP}const zb=new Oe(X.comparator);function da(...t){let e=zb;for(const n of t)e=e.insert(n.key,n);return e}function Ub(t){let e=zb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fs(){return ja()}function Wb(){return ja()}function ja(){return new li(t=>t.toString(),(t,e)=>t.isEqual(e))}const zP=new Oe(X.comparator),UP=new et(X.comparator);function ce(...t){let e=UP;for(const n of t)e=e.add(n);return e}const WP=new et(ie);function $P(){return WP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"No data"};if(e===-1/0)return{doubleValue:"0"}}return{doubleValue:$u(e)?"-0":e}}function $b(t){return{integerValue:""+t}}function HP(t,e){return yP(e)?$b(e):cg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(){this._=void 0}}function qP(t,e,n){return t instanceof al?function(s,i){const o={fields:{[Sb]:{stringValue:Tb},[Cb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&sg(i)&&(i=Ld(i)),i&&(o.fields[Ib]=i),{mapValue:o}}(n,e):t instanceof ll?qb(t,e):t instanceof cl?Gb(t,e):function(s,i){const o=Hb(s,i),a=ox(o)+ox(s.Re);return wm(o)&&wm(s.Re)?$b(a):cg(s.serializer,a)}(t,e)}function GP(t,e,n){return t instanceof ll?qb(t,e):t instanceof cl?Gb(t,e):n}function Hb(t,e){return t instanceof Ku?function(r){return wm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class al extends Fd{}class ll extends Fd{constructor(e){super(),this.elements=e}}function qb(t,e){const n=Kb(e);for(const r of t.elements)n.some(s=>Qn(s,r))||n.push(r);return{arrayValue:{values:n}}}class cl extends Fd{constructor(e){super(),this.elements=e}}function Gb(t,e){let n=Kb(e);for(const r of t.elements)n=n.filter(s=>!Qn(s,r));return{arrayValue:{values:n}}}class Ku extends Fd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function ox(t){return Ue(t.integerValue||t.doubleValue)}function Kb(t){return ig(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n){this.field=e,this.transform=n}}function YP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ll&&s instanceof ll||r instanceof cl&&s instanceof cl?ao(r.elements,s.elements,Qn):r instanceof Ku&&s instanceof Ku?Qn(r.Re,s.Re):r instanceof al&&s instanceof al}(t.transform,e.transform)}class QP{constructor(e,n){this.version=e,this.transformResults=n}}class Nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bd{}function Yb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ug(t.key,Nn.none()):new Al(t.key,t.data,Nn.none());{const n=t.data,r=zt.empty();let s=new et(ct.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new bs(t.key,r,new en(s.toArray()),Nn.none())}}function XP(t,e,n){t instanceof Al?function(s,i,o){const a=s.value.clone(),l=lx(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof bs?function(s,i,o){if(!nu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=lx(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Qb(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pa(t,e,n,r){return t instanceof Al?function(i,o,a,l){if(!nu(i.precondition,o))return a;const u=i.value.clone(),h=cx(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof bs?function(i,o,a,l){if(!nu(i.precondition,o))return a;const u=cx(i.fieldTransforms,l,o),h=o.data;return h.setAll(Qb(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return nu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function ZP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Hb(r.transform,s||null);i!=null&&(n===null&&(n=zt.empty()),n.set(r.field,i))}return n||null}function ax(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ao(r,s,(i,o)=>YP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Al extends Bd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class bs extends Bd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Qb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lx(t,e,n){const r=new Map;_e(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,GP(o,a,n[s]))}return r}function cx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,qP(i,o,e))}return r}class ug extends Bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JP extends Bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&XP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Wb();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Yb(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,(n,r)=>ax(n,r))&&ao(this.baseMutations,e.baseMutations,(n,r)=>ax(n,r))}}class dg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return zP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new dg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,he;function r4(t){switch(t){case V.OK:return ee(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return ee(15467,{code:t})}}function Xb(t){if(t===void 0)return wr("GRPC error has no .code"),V.UNKNOWN;switch(t){case qe.OK:return V.OK;case qe.CANCELLED:return V.CANCELLED;case qe.UNKNOWN:return V.UNKNOWN;case qe.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case qe.INTERNAL:return V.INTERNAL;case qe.UNAVAILABLE:return V.UNAVAILABLE;case qe.UNAUTHENTICATED:return V.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case qe.NOT_FOUND:return V.NOT_FOUND;case qe.ALREADY_EXISTS:return V.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return V.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case qe.ABORTED:return V.ABORTED;case qe.OUT_OF_RANGE:return V.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return V.UNIMPLEMENTED;case qe.DATA_LOSS:return V.DATA_LOSS;default:return ee(39323,{code:t})}}(he=qe||(qe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=new is([4294967295,4294967295],0);function ux(t){const e=_b().encode(t),n=new hb;return n.update(e),new Uint8Array(n.digest())}function dx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new is([n,r],0),new is([s,i],0)]}class hg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ha(`Invalid padding: ${n}`);if(r<0)throw new ha(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ha(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ha(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=is.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(is.fromNumber(r)));return s.compare(s4)===1&&(s=new is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=ux(e),[r,s]=dx(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.Se(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hg(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=ux(e),[r,s]=dx(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zd(ne.min(),s,new Oe(ie),br(),ce())}}class jl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jl(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class Zb{constructor(e,n){this.targetId=e,this.Ce=n}}class Jb{constructor(e,n,r=ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hx{constructor(){this.Fe=0,this.Me=fx(),this.xe=ht.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ce(),n=ce(),r=ce();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee(38017,{changeType:i})}}),new jl(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=fx()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,_e(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class i4{constructor(e){this.ze=e,this.je=new Map,this.He=br(),this.Je=wc(),this.Ye=wc(),this.Ze=new Oe(ie)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(km(i))if(r===0){const o=new X(i.path);this.tt(n,o,Tt.newNoDocument(o,ne.min()))}else _e(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=hs(r).toUint8Array()}catch(l){if(l instanceof Eb)return oo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hg(o,s,i)}catch(l){return oo(l instanceof ha?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&km(a.target)){const l=new X(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,Tt.newNoDocument(l,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=ce();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new zd(e,n,this.Ze,this.He,r);return this.He=br(),this.Je=wc(),this.Ye=wc(),this.Ze=new Oe(ie),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new hx,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new et(ie),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new et(ie),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new hx),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function wc(){return new Oe(X.comparator)}function fx(){return new Oe(X.comparator)}const o4={asc:"ASCENDING",desc:"DESCENDING"},a4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l4={and:"AND",or:"OR"};class c4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sm(t,e){return t.useProto3Json||Md(e)?e:{value:e}}function Yu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ek(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u4(t,e){return Yu(t,e.toTimestamp())}function Gn(t){return _e(!!t,49232),ne.fromTimestamp(function(n){const r=ds(n);return new Je(r.seconds,r.nanos)}(t))}function fg(t,e){return Im(t,e).canonicalString()}function Im(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tk(t){const e=je.fromString(t);return _e(ok(e),10190,{key:e.toString()}),e}function Cm(t,e){return fg(t.databaseId,e.path)}function Zh(t,e){const n=tk(e);if(n.get(1)!==t.databaseId.projectId)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(rk(n))}function nk(t,e){return fg(t.databaseId,e)}function d4(t){const e=tk(t);return e.length===4?je.emptyPath():rk(e)}function Nm(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rk(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mx(t,e,n){return{name:Cm(t,e),fields:n.value.mapValue.fields}}function h4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ee(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(_e(h===void 0||typeof h=="string",58123),ht.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ht.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?V.UNKNOWN:Xb(u.code);return new G(h,u.message||"")}(o);n=new Jb(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zh(t,r.document.name),i=Gn(r.document.updateTime),o=r.document.createTime?Gn(r.document.createTime):ne.min(),a=new zt({mapValue:{fields:r.document.fields}}),l=Tt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new ru(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zh(t,r.document),i=r.readTime?Gn(r.readTime):ne.min(),o=Tt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ru([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zh(t,r.document),i=r.removedTargetIds||[];n=new ru([],i,s,null)}else{if(!("filter"in e))return ee(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new n4(s,i),a=r.targetId;n=new Zb(a,o)}}return n}function f4(t,e){let n;if(e instanceof Al)n={update:mx(t,e.key,e.value)};else if(e instanceof ug)n={delete:Cm(t,e.key)};else if(e instanceof bs)n={update:mx(t,e.key,e.data),updateMask:b4(e.fieldMask)};else{if(!(e instanceof JP))return ee(16599,{ft:e.type});n={verify:Cm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof al)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ku)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw ee(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:u4(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee(27497)}(t,e.precondition)),n}function m4(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Gn(s.updateTime):Gn(i);return o.isEqual(ne.min())&&(o=Gn(i)),new QP(o,s.transformResults||[])}(n,e))):[]}function p4(t,e){return{documents:[nk(t,e.path)]}}function g4(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nk(t,s);const i=function(u){if(u.length!==0)return ik(Dn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:ki(m.field),direction:x4(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:n,parent:s}}function v4(t){let e=d4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=sk(f);return m instanceof Dn&&Db(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(y){return new ol(Ei(y.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Md(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,g=f.values||[];return new Gu(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new Gu(g,m)}(n.endAt)),LP(e,s,o,i,a,"F",l,u)}function y4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ei(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ei(n.unaryFilter.field);return Ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ei(n.unaryFilter.field);return Ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ei(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(Ei(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>sk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(n.compositeFilter.op))}(t):ee(30097,{filter:t})}function x4(t){return o4[t]}function _4(t){return a4[t]}function w4(t){return l4[t]}function ki(t){return{fieldPath:t.canonicalString()}}function Ei(t){return ct.fromServerFormat(t.fieldPath)}function ik(t){return t instanceof Ke?function(n){if(n.op==="=="){if(tx(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NAN"}};if(ex(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tx(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NAN"}};if(ex(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ki(n.field),op:_4(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const r=n.getFilters().map(s=>ik(s));return r.length===1?r[0]:{compositeFilter:{op:w4(n.op),filters:r}}}(t):ee(54877,{filter:t})}function b4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ok(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r,s,i=ne.min(),o=ne.min(),a=ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.wt=e}}function E4(t){const e=v4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.Cn=new S4}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(us.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(us.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class S4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ak=41943040;class Ft{static withCacheSize(e){return new Ft(e,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(ak,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new uo(0)}static lr(){return new uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="LruGarbageCollector",I4=1048576;function vx([t,e],[n,r]){const s=ie(t,n);return s===0?ie(e,r):s}class C4{constructor(e){this.Er=e,this.buffer=new et(vx),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class N4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){q(gx,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?q(gx,"Ignoring IndexedDB error during garbage collection: ",n):await ko(n)}await this.mr(3e5)})}}class A4{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Dd.le);const r=new C4(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(px)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),px):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),wi()<=le.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function j4(t,e){return new A4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.changes=new li(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Pa(r.mutation,s,en.empty(),Je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Fs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=da();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=br();const o=ja(),a=function(){return ja()}();return n.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof bs)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Pa(h.mutation,u,h.mutation.getFieldMask(),Je.now())):o.set(u.key,en.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new R4(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ja();let s=new Oe((o,a)=>o-a),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||en.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(s.get(a.batchId)||ce()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=Wb();h.forEach(m=>{if(!i.has(m)){const g=Yb(n.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Vb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Fs());let a=nl,l=i;return o.next(u=>F.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,ce())).next(h=>({batchId:a,changes:Ub(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=da();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=da();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,l=>{const u=function(f,m){return new To(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Tt.newInvalidDocument(h)))});let a=da();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&Pa(h.mutation,u,en.empty(),Je.now()),Vd(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return F.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Gn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:E4(s.bundledQuery),readTime:Gn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.overlays=new Oe(X.comparator),this.Qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fs();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Fs(),i=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Fs(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Fs(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return F.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new t4(n,r));let i=this.Qr.get(n);i===void 0&&(i=ce(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.$r=new et(nt.Ur),this.Kr=new et(nt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new nt(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new nt(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new X(new je([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new X(new je([])),r=new nt(n,e),s=new nt(n,e+1);let i=ce();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new nt(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return X.comparator(e.key,n.key)||ie(e.Zr,n.Zr)}static Wr(e,n){return ie(e.Zr,n.Zr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new et(nt.Ur)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new e4(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Xr=this.Xr.add(new nt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?rg:this.nr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const a=this.ei(o.Zr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(ie);return n.forEach(s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{r=r.add(a.Zr)})}),F.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new nt(new X(i),0);let a=new et(ie);return this.Xr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Zr)),!0)},o),F.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return F.forEach(n.mutations,s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new nt(n,0),s=this.Xr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.ii=e,this.docs=function(){return new Oe(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=br();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Tt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=br();const o=n.path,a=new X(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||mP(fP(h),r)<=0||(s.has(h.key)||Vd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee(9500)}si(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new B4(this)}getSize(e){return F.resolve(this.size)}}class B4 extends P4{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.persistence=e,this.oi=new li(n=>og(n),ag),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this._i=0,this.ai=new mg,this.targetCount=0,this.ui=uo.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),F.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new uo(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Tr(n),F.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n){this.ci={},this.overlays={},this.li=new Dd(0),this.hi=!1,this.hi=!0,this.Pi=new O4,this.referenceDelegate=e(this),this.Ti=new z4(this),this.indexManager=new T4,this.remoteDocumentCache=function(s){return new F4(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new k4(n),this.Ei=new M4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new V4(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new U4(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return F.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class U4 extends gP{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Vi=new mg,this.mi=null}static fi(e){return new pg(e)}get gi(){if(this.mi)return this.mi;throw ee(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.gi,r=>{const s=X.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return F.or([()=>F.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Qu{constructor(e,n){this.persistence=e,this.yi=new li(r=>xP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=j4(this,n)}static fi(e,n){return new Qu(e,n)}di(){}Ai(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return F.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),F.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eu(e.data.value)),n}Dr(e,n,r){return F.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new gg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return kC()?8:vP(Ct())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Ss(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new W4;return this.bs(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(wi()<=le.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),F.resolve()):(wi()<=le.DEBUG&&q("QueryEngine","Query:",bi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(wi()<=le.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(n))):F.resolve())}ws(e,n){if(ix(n))return F.resolve(null);let r=qn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Tm(n,null,"F"),r=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.vs(n,a);return this.Cs(n,u,o,l.readTime)?this.ws(e,Tm(n,null,"F")):this.Fs(e,u,n,l)}))})))}Ss(e,n,r,s){return ix(n)||s.isEqual(ne.min())?F.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?F.resolve(null):(wi()<=le.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bi(n)),this.Fs(e,o,n,hP(s,nl)).next(a=>a))})}vs(e,n){let r=new et(Bb(e));return n.forEach((s,i)=>{Vd(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}bs(e,n,r){return wi()<=le.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",bi(n)),this.ys.getDocumentsMatchingQuery(e,n,us.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="LocalStore",H4=3e8;class q4{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Oe(ie),this.Os=new li(i=>og(i),ag),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D4(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function G4(t,e,n,r){return new q4(t,e,n,r)}async function ck(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ce();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({ks:u,removedBatchIds:o,addedBatchIds:a}))})})}function K4(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,m=f.keys();let g=F.resolve();return m.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(w=>{const T=u.docVersions.get(y);_e(T!==null,48541),w.version.compareTo(T)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function uk(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function Y4(t,e){const n=re(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ti.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ti.addMatchingKeys(i,h.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(ht.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(w,T,_){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=H4?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,g,h)&&a.push(n.Ti.updateTargetData(i,g))});let l=br(),u=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(Q4(i,o,e.documentUpdates).next(h=>{l=h.qs,u=h.Qs})),!r.isEqual(ne.min())){const h=n.Ti.getLastRemoteSnapshotVersion(i).next(f=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.xs=s,i))}function Q4(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=br();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q(vg,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{qs:o,Qs:s}})}function X4(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=rg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Z4(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new Hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Am(t,e,n){const r=re(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Eo(o))throw o;q(vg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function yx(t,e,n){const r=re(t);let s=ne.min(),i=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=re(l),m=f.Os.get(h);return m!==void 0?F.resolve(f.xs.get(m)):f.Ti.getTargetData(u,h)}(r,o,qn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:ce())).next(a=>(J4(r,VP(e),a),{documents:a,$s:i})))}function J4(t,e,n){let r=t.Ns.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class xx{constructor(){this.activeTargetIds=$P()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eR{constructor(){this.xo=new xx,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new xx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="ConnectivityMonitor";class wx{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){q(_x,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){q(_x,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc=null;function jm(){return bc===null?bc=function(){return 268435456+Math.round(2147483648*Math.random())}():bc++,"0x"+bc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="RestConnection",nR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rR{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Hu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=jm(),a=this.jo(e,n.toUriEncodedString());q(Jh,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,s,i);const{host:u}=new URL(a),h=kl(u);return this.Jo(e,a,l,r,h).then(f=>(q(Jh,`Received RPC '${e}' ${o}: `,f),f),f=>{throw oo(Jh,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=nR[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class iR extends rR{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=jm();return new Promise((a,l)=>{const u=new fb;u.setWithCredentials(!0),u.listenOnce(mb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Jc.NO_ERROR:const f=u.getResponseJson();q(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Jc.TIMEOUT:q(_t,`RPC '${e}' ${o} timed out`),l(new G(V.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:const m=u.getStatus();if(q(_t,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const w=function(_){const k=_.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(k)>=0?k:V.UNKNOWN}(y.status);l(new G(w,y.message))}else l(new G(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(V.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{q(_t,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);q(_t,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=jm(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vb(),a=gb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");q(_t,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);let m=!1,g=!1;const y=new sR({Zo:T=>{g?q(_t,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(m||(q(_t,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),q(_t,`RPC '${e}' stream ${s} sending:`,T),f.send(T))},Xo:()=>f.close()}),w=(T,_,k)=>{T.listen(_,b=>{try{k(b)}catch(C){setTimeout(()=>{throw C},0)}})};return w(f,ua.EventType.OPEN,()=>{g||(q(_t,`RPC '${e}' stream ${s} transport opened.`),y.__())}),w(f,ua.EventType.CLOSE,()=>{g||(g=!0,q(_t,`RPC '${e}' stream ${s} transport closed`),y.u_())}),w(f,ua.EventType.ERROR,T=>{g||(g=!0,oo(_t,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),y.u_(new G(V.UNAVAILABLE,"The operation could not be completed")))}),w(f,ua.EventType.MESSAGE,T=>{var _;if(!g){const k=T.data[0];_e(!!k,16349);const b=k,C=(b==null?void 0:b.error)||((_=b[0])===null||_===void 0?void 0:_.error);if(C){q(_t,`RPC '${e}' stream ${s} received error:`,C);const A=C.status;let D=function(I){const N=qe[I];if(N!==void 0)return Xb(N)}(A),E=C.message;D===void 0&&(D=V.INTERNAL,E="Unknown error status: "+A+" with message "+C.message),g=!0,y.u_(new G(D,E)),f.close()}else q(_t,`RPC '${e}' stream ${s} received:`,k),y.c_(k)}}),w(a,pb.STAT_EVENT,T=>{T.stat===ym.PROXY?q(_t,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===ym.NOPROXY&&q(_t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.a_()},0),y}}function ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t){return new c4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=s,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="PersistentStream";class hk{constructor(e,n,r,s,i,o,a,l){this.xi=e,this.y_=r,this.w_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new dk(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.S_===n&&this.K_(r,s)},r=>{e(()=>{const s=new G(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(s)})})}K_(e,n){const r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.W_(s))}),this.stream.onMessage(s=>{r(()=>++this.v_==1?this.z_(s):this.onNext(s))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return q(bx,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(q(bx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oR extends hk{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=h4(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?Gn(o.readTime):ne.min()}(e);return this.listener.j_(n,r)}H_(e){const n={};n.database=Nm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=km(l)?{documents:p4(i,l)}:{query:g4(i,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ek(i,o.resumeToken);const u=Sm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=Yu(i,o.snapshotVersion.toTimestamp());const u=Sm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=y4(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){const n={};n.database=Nm(this.serializer),n.removeTarget=e,this.L_(n)}}class aR extends hk{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=m4(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.ea(r,n)}ta(){const e={};e.database=Nm(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>f4(this.serializer,r))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{}class cR extends lR{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.na=!1}ra(){if(this.na)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,Im(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(V.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,Im(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(V.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class uR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(wr(n),this.oa=!1):q("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="RemoteStore";class dR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(o=>{r.enqueueAndForget(async()=>{ci(this)&&(q(ni,"Restarting streams for network reachability change."),await async function(l){const u=re(l);u.Ta.add(4),await Pl(u),u.da.set("Unknown"),u.Ta.delete(4),await Wd(u)}(this))})}),this.da=new uR(r,s)}}async function Wd(t){if(ci(t))for(const e of t.Ia)await e(!0)}async function Pl(t){for(const e of t.Ia)await e(!1)}function fk(t,e){const n=re(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),wg(n)?_g(n):So(n).M_()&&xg(n,e))}function yg(t,e){const n=re(t),r=So(n);n.Pa.delete(e),r.M_()&&mk(n,e),n.Pa.size===0&&(r.M_()?r.N_():ci(n)&&n.da.set("Unknown"))}function xg(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}So(t).H_(e)}function mk(t,e){t.Aa.Ke(e),So(t).J_(e)}function _g(t){t.Aa=new i4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),So(t).start(),t.da._a()}function wg(t){return ci(t)&&!So(t).F_()&&t.Pa.size>0}function ci(t){return re(t).Ta.size===0}function pk(t){t.Aa=void 0}async function hR(t){t.da.set("Online")}async function fR(t){t.Pa.forEach((e,n)=>{xg(t,e)})}async function mR(t,e){pk(t),wg(t)?(t.da.ca(e),_g(t)):t.da.set("Unknown")}async function pR(t,e,n){if(t.da.set("Online"),e instanceof Jb&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Pa.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Pa.delete(a),s.Aa.removeTarget(a))}(t,e)}catch(r){q(ni,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xu(t,r)}else if(e instanceof ru?t.Aa.Xe(e):e instanceof Zb?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(ne.min()))try{const r=await uk(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Aa.It(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Pa.get(u);h&&i.Pa.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.Pa.get(l);if(!h)return;i.Pa.set(l,h.withResumeToken(ht.EMPTY_BYTE_STRING,h.snapshotVersion)),mk(i,l);const f=new Hr(h.target,l,u,h.sequenceNumber);xg(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q(ni,"Failed to raise snapshot:",r),await Xu(t,r)}}async function Xu(t,e,n){if(!Eo(e))throw e;t.Ta.add(1),await Pl(t),t.da.set("Offline"),n||(n=()=>uk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(ni,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await Wd(t)})}function gk(t,e){return e().catch(n=>Xu(t,n,e))}async function $d(t){const e=re(t),n=ms(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:rg;for(;gR(e);)try{const s=await X4(e.localStore,r);if(s===null){e.ha.length===0&&n.N_();break}r=s.batchId,vR(e,s)}catch(s){await Xu(e,s)}vk(e)&&yk(e)}function gR(t){return ci(t)&&t.ha.length<10}function vR(t,e){t.ha.push(e);const n=ms(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function vk(t){return ci(t)&&!ms(t).F_()&&t.ha.length>0}function yk(t){ms(t).start()}async function yR(t){ms(t).ta()}async function xR(t){const e=ms(t);for(const n of t.ha)e.Z_(n.mutations)}async function _R(t,e,n){const r=t.ha.shift(),s=dg.from(r,e,n);await gk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $d(t)}async function wR(t,e){e&&ms(t).Y_&&await async function(r,s){if(function(o){return r4(o)&&o!==V.ABORTED}(s.code)){const i=r.ha.shift();ms(r).O_(),await gk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $d(r)}}(t,e),vk(t)&&yk(t)}async function kx(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),q(ni,"RemoteStore received new credentials");const r=ci(n);n.Ta.add(3),await Pl(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await Wd(n)}async function bR(t,e){const n=re(t);e?(n.Ta.delete(2),await Wd(n)):e||(n.Ta.add(2),await Pl(n),n.da.set("Unknown"))}function So(t){return t.Ra||(t.Ra=function(n,r,s){const i=re(n);return i.ra(),new oR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:hR.bind(null,t),n_:fR.bind(null,t),i_:mR.bind(null,t),j_:pR.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),wg(t)?_g(t):t.da.set("Unknown")):(await t.Ra.stop(),pk(t))})),t.Ra}function ms(t){return t.Va||(t.Va=function(n,r,s){const i=re(n);return i.ra(),new aR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:yR.bind(null,t),i_:wR.bind(null,t),X_:xR.bind(null,t),ea:_R.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await $d(t)):(await t.Va.stop(),t.ha.length>0&&(q(ni,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new bg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kg(t,e){if(wr("AsyncQueue",`${e}: ${t}`),Eo(t))return new G(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{static emptySet(e){return new Gi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=da(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.ma=new Oe(X.comparator)}track(e){const n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):ee(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}}class ho{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ho(e,n,Gi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class ER{constructor(){this.queries=Tx(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=Tx(),i.forEach((o,a)=>{for(const l of a.ya)l.onError(r)})})(this,new G(V.ABORTED,"Firestore shutting down"))}}function Tx(){return new li(t=>Fb(t),Od)}async function xk(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.wa()&&e.Sa()&&(r=2):(i=new kR,r=e.Sa()?0:1);try{switch(r){case 0:i.pa=await n.onListen(s,!0);break;case 1:i.pa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=kg(o,`Initialization of query '${bi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ya.push(e),e.Da(n.onlineState),i.pa&&e.va(i.pa)&&Eg(n)}async function _k(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ya.indexOf(e);o>=0&&(i.ya.splice(o,1),i.ya.length===0?s=e.Sa()?0:1:!i.wa()&&e.Sa()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TR(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ya)a.va(s)&&(r=!0);o.pa=s}}r&&Eg(n)}function SR(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.ya)i.onError(n);r.queries.delete(e)}function Eg(t){t.ba.forEach(e=>{e.next()})}var Pm,Sx;(Sx=Pm||(Pm={})).Ca="default",Sx.Cache="cache";class wk{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.key=e}}class kk{constructor(e){this.key=e}}class IR{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=ce(),this.mutatedKeys=ce(),this.Ha=Bb(e),this.Ja=new Gi(this.Ha)}get Ya(){return this.Ga}Za(e,n){const r=n?n.Xa:new Ex,s=n?n.Ja:this.Ja;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),g=Vd(this.query,f)?f:null,y=!!m&&this.mutatedKeys.has(m.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;m&&g?m.data.isEqual(g.data)?y!==w&&(r.track({type:3,doc:g}),T=!0):this.eu(m,g)||(r.track({type:2,doc:g}),T=!0,(l&&this.Ha(g,l)>0||u&&this.Ha(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),T=!0):m&&!g&&(r.track({type:1,doc:m}),T=!0,(l||u)&&(a=!0)),T&&(g?(o=o.add(g),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ja:o,Xa:r,Cs:a,mutatedKeys:i}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((h,f)=>function(g,y){const w=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{Vt:T})}};return w(g)-w(y)}(h.type,f.type)||this.Ha(h.doc,f.doc)),this.tu(r),s=s!=null&&s;const a=n&&!s?this.nu():[],l=this.ja.size===0&&this.current&&!s?1:0,u=l!==this.za;return this.za=l,o.length!==0||u?{snapshot:new ho(this.query,e.Ja,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Ex,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=ce(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new kk(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new bk(r))}),n}su(e){this.Ga=e.$s,this.ja=ce();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return ho.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Tg="SyncEngine";class CR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NR{constructor(e){this.key=e,this._u=!1}}class AR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new li(a=>Fb(a),Od),this.cu=new Map,this.lu=new Set,this.hu=new Oe(X.comparator),this.Pu=new Map,this.Tu=new mg,this.Iu={},this.Eu=new Map,this.du=uo.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function jR(t,e,n=!0){const r=Nk(t);let s;const i=r.uu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ou()):s=await Ek(r,e,n,!0),s}async function PR(t,e){const n=Nk(t);await Ek(n,e,!0,!1)}async function Ek(t,e,n,r){const s=await Z4(t.localStore,qn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await RR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&fk(t.remoteStore,s),a}async function RR(t,e,n,r,s){t.Ru=(f,m,g)=>async function(w,T,_,k){let b=T.view.Za(_);b.Cs&&(b=await yx(w.localStore,T.query,!1).then(({documents:E})=>T.view.Za(E,b)));const C=k&&k.targetChanges.get(T.targetId),A=k&&k.targetMismatches.get(T.targetId)!=null,D=T.view.applyChanges(b,w.isPrimaryClient,C,A);return Cx(w,T.targetId,D.ru),D.snapshot}(t,f,m,g);const i=await yx(t.localStore,e,!0),o=new IR(e,i.$s),a=o.Za(i.documents),l=jl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);Cx(t,n,u.ru);const h=new CR(e,n,o);return t.uu.set(e,h),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),u.snapshot}async function DR(t,e,n){const r=re(t),s=r.uu.get(e),i=r.cu.get(s.targetId);if(i.length>1)return r.cu.set(s.targetId,i.filter(o=>!Od(o,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Am(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yg(r.remoteStore,s.targetId),Rm(r,s.targetId)}).catch(ko)):(Rm(r,s.targetId),await Am(r.localStore,s.targetId,!0))}async function MR(t,e){const n=re(t),r=n.uu.get(e),s=n.cu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yg(n.remoteStore,r.targetId))}async function LR(t,e,n){const r=WR(t);try{const s=await function(o,a){const l=re(o),u=Je.now(),h=a.reduce((g,y)=>g.add(y.key),ce());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=br(),w=ce();return l.Bs.getEntries(g,h).next(T=>{y=T,y.forEach((_,k)=>{k.isValidDocument()||(w=w.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(T=>{f=T;const _=[];for(const k of a){const b=ZP(k,f.get(k.key).overlayedDocument);b!=null&&_.push(new bs(k.key,b,jb(b.value.mapValue),Nn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,_,a)}).next(T=>{m=T;const _=T.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(g,T.batchId,_)})}).then(()=>({batchId:m.batchId,changes:Ub(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Iu[o.currentUser.toKey()];u||(u=new Oe(ie)),u=u.insert(a,l),o.Iu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Rl(r,s.changes),await $d(r.remoteStore)}catch(s){const i=kg(s,"Failed to persist write");n.reject(i)}}async function Tk(t,e){const n=re(t);try{const r=await Y4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Pu.get(i);o&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o._u=!0:s.modifiedDocuments.size>0?_e(o._u,14607):s.removedDocuments.size>0&&(_e(o._u,42227),o._u=!1))}),await Rl(n,r,e)}catch(r){await ko(r)}}function Ix(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.uu.forEach((i,o)=>{const a=o.view.Da(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const m of f.ya)m.Da(a)&&(u=!0)}),u&&Eg(l)}(r.eventManager,e),s.length&&r.au.j_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function OR(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Pu.get(e),i=s&&s.key;if(i){let o=new Oe(X.comparator);o=o.insert(i,Tt.newNoDocument(i,ne.min()));const a=ce().add(i),l=new zd(ne.min(),new Map,new Oe(ie),o,a);await Tk(r,l),r.hu=r.hu.remove(i),r.Pu.delete(e),Sg(r)}else await Am(r.localStore,e,!1).then(()=>Rm(r,e,n)).catch(ko)}async function VR(t,e){const n=re(t),r=e.batch.batchId;try{const s=await K4(n.localStore,e);Ik(n,r,null),Sk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rl(n,s)}catch(s){await ko(s)}}async function FR(t,e,n){const r=re(t);try{const s=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(_e(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);Ik(r,e,n),Sk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Rl(r,s)}catch(s){await ko(s)}}function Sk(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function Ik(t,e,n){const r=re(t);let s=r.Iu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Iu[r.currentUser.toKey()]=s}}function Rm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.cu.get(e))t.uu.delete(r),n&&t.au.Vu(r,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(r=>{t.Tu.containsKey(r)||Ck(t,r)})}function Ck(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(yg(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),Sg(t))}function Cx(t,e,n){for(const r of n)r instanceof bk?(t.Tu.addReference(r.key,e),BR(t,r)):r instanceof kk?(q(Tg,"Document no longer in limbo: "+r.key),t.Tu.removeReference(r.key,e),t.Tu.containsKey(r.key)||Ck(t,r.key)):ee(19791,{mu:r})}function BR(t,e){const n=e.key,r=n.path.canonicalString();t.hu.get(n)||t.lu.has(r)||(q(Tg,"New document in limbo: "+n),t.lu.add(r),Sg(t))}function Sg(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new X(je.fromString(e)),r=t.du.next();t.Pu.set(r,new NR(n)),t.hu=t.hu.insert(n,r),fk(t.remoteStore,new Hr(qn(lg(n.path)),r,"TargetPurposeLimboResolution",Dd.le))}}async function Rl(t,e,n){const r=re(t),s=[],i=[],o=[];r.uu.isEmpty()||(r.uu.forEach((a,l)=>{o.push(r.Ru(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=gg.Rs(l.targetId,u);i.push(f)}}))}),await Promise.all(o),r.au.j_(s),await async function(l,u){const h=re(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(u,m=>F.forEach(m.ds,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>F.forEach(m.As,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Eo(f))throw f;q(vg,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.xs.get(m),y=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(y);h.xs=h.xs.insert(m,w)}}}(r.localStore,i))}async function zR(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){q(Tg,"User change. New user:",e.toKey());const r=await ck(n.localStore,e);n.currentUser=e,function(i,o){i.Eu.forEach(a=>{a.forEach(l=>{l.reject(new G(V.CANCELLED,o))})}),i.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rl(n,r.ks)}}function UR(t,e){const n=re(t),r=n.Pu.get(e);if(r&&r._u)return ce().add(r.key);{let s=ce();const i=n.cu.get(e);if(!i)return s;for(const o of i){const a=n.uu.get(o);s=s.unionWith(a.view.Ya)}return s}}function Nk(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OR.bind(null,e),e.au.j_=TR.bind(null,e.eventManager),e.au.Vu=SR.bind(null,e.eventManager),e}function WR(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FR.bind(null,e),e}class Zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ud(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return G4(this.persistence,new $4,e.initialUser,this.serializer)}yu(e){return new lk(pg.fi,this.serializer)}pu(e){return new eR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zu.provider={build:()=>new Zu};class $R extends Zu{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){_e(this.persistence.referenceDelegate instanceof Qu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new N4(r,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new lk(r=>Qu.fi(r,n),this.serializer)}}class Dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ix(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zR.bind(null,this.syncEngine),await bR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ER}()}createDatastore(e){const n=Ud(e.databaseInfo.databaseId),r=function(i){return new iR(i)}(e.databaseInfo);return function(i,o,a,l){return new cR(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new dR(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ix(this.syncEngine,n,0),function(){return wx.C()?new wx:new tR}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,h){const f=new AR(s,i,o,a,l,u);return h&&(f.Au=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);q(ni,"RemoteStore shutting down."),i.Ta.add(5),await Pl(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Dm.provider={build:()=>new Dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="FirestoreClient";class HR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=kt.UNAUTHENTICATED,this.clientId=wb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q(ps,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(ps,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function tf(t,e){t.asyncQueue.verifyOperationInProgress(),q(ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ck(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Nx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qR(t);q(ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>kx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>kx(e.remoteStore,s)),t._onlineComponents=e}async function qR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(ps,"Using user provided OfflineComponentProvider");try{await tf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await tf(t,new Zu)}}else q(ps,"Using default OfflineComponentProvider"),await tf(t,new $R(void 0));return t._offlineComponents}async function jk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(ps,"Using user provided OnlineComponentProvider"),await Nx(t,t._uninitializedComponentsProvider._online)):(q(ps,"Using default OnlineComponentProvider"),await Nx(t,new Dm))),t._onlineComponents}function GR(t){return jk(t).then(e=>e.syncEngine)}async function Pk(t){const e=await jk(t),n=e.eventManager;return n.onListen=jR.bind(null,e.syncEngine),n.onUnlisten=DR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MR.bind(null,e.syncEngine),n}function KR(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new Ak({next:m=>{h.Cu(),o.enqueueAndForget(()=>_k(i,f));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new G(V.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new G(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new wk(lg(a.path),h,{includeMetadataChanges:!0,La:!0});return xk(i,f)}(await Pk(t),t.asyncQueue,e,n,r)),r.promise}function YR(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new Ak({next:m=>{h.Cu(),o.enqueueAndForget(()=>_k(i,f)),m.fromCache&&l.source==="server"?u.reject(new G(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new wk(a,h,{includeMetadataChanges:!0,La:!0});return xk(i,f)}(await Pk(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t,e,n){if(!n)throw new G(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QR(t,e,n,r){if(e===!0&&r===!0)throw new G(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jx(t){if(!X.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Px(t){if(X.isDocumentKey(t))throw new G(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee(12329,{type:typeof t})}function Xn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hd(t);throw new G(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="firestore.googleapis.com",Rx=!0;class Dx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mk,this.ssl=Rx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Rx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ak;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I4)throw new G(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rP;switch(r.type){case"firstParty":return new aP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ax.get(n);r&&(q("ComponentProvider","Removing Datastore"),Ax.delete(n),r.terminate())}(this),Promise.resolve()}}function XR(t,e,n,r={}){var s;t=Xn(t,qd);const i=kl(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i&&(Ew(`https://${l}`),Tw("Firestore",!0)),o.host!==Mk&&o.host!==l&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:r});if(!Xs(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=kt.MOCK_USER;else{h=mC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new G(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new kt(m)}t._authCredentials=new sP(new xb(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ui(this.firestore,e,this._query)}}class Dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}}class os extends ui{constructor(e,n,r){super(e,n,lg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new X(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function ZR(t,e,...n){if(t=tt(t),Dk("collection","path",e),t instanceof qd){const r=je.fromString(e,...n);return Px(r),new os(t,null,r)}{if(!(t instanceof Dt||t instanceof os))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Px(r),new os(t.firestore,null,r)}}function An(t,e,...n){if(t=tt(t),arguments.length===1&&(e=wb.newId()),Dk("doc","path",e),t instanceof qd){const r=je.fromString(e,...n);return jx(r),new Dt(t,null,new X(r))}{if(!(t instanceof Dt||t instanceof os))throw new G(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return jx(r),new Dt(t.firestore,t instanceof os?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="AsyncQueue";class Lx{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new dk(this,"async_queue_retry"),this.ec=()=>{const r=ef();r&&q(Mx,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const n=ef();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new mr;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Eo(e))throw e;q(Mx,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,wr("INTERNAL UNHANDLED ERROR: ",Ox(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const s=bg.createAndSchedule(this,e,n,r,i=>this.oc(i));return this.Hu.push(s),s}nc(){this.Ju&&ee(47125,{_c:Ox(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function Ox(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Io extends qd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Lx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lx(e),this._firestoreClient=void 0,await e}}}function JR(t,e){const n=typeof t=="object"?t:Nw(),r=typeof t=="string"?t:Hu,s=qp(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=hC("firestore");i&&XR(s,...i)}return s}function Ig(t){if(t._terminated)throw new G(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eD(t),t._firestoreClient}function eD(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,h){return new bP(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Rk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new HR(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fo(ht.fromBase64String(e))}catch(n){throw new G(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fo(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=/^__.*__$/;class nD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Al(e,this.data,n,this.fieldTransforms)}}class Lk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ok(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{hc:t})}}class Ag{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Tc({path:r,Ec:!1});return s.dc(e),s}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Tc({path:r,Ec:!1});return s.Pc(),s}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Ju(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(Ok(this.hc)&&tD.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class rD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ud(e)}gc(e,n,r,s=!1){return new Ag({hc:e,methodName:n,fc:r,path:ct.emptyPath(),Ec:!1,mc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jg(t){const e=t._freezeSettings(),n=Ud(t._databaseId);return new rD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sD(t,e,n,r,s,i={}){const o=t.gc(i.merge||i.mergeFields?2:0,e,n,s);Rg("Data must be an object, but it was:",o,r);const a=Vk(r,o);let l,u;if(i.merge)l=new en(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Mm(e,f,n);if(!o.contains(m))throw new G(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Bk(h,m)||h.push(m)}l=new en(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new nD(new zt(a),l,u)}class Yd extends Kd{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yd}}class Pg extends Kd{_toFieldTransform(e){return new KP(e.path,new al)}isEqual(e){return e instanceof Pg}}function iD(t,e,n,r){const s=t.gc(1,e,n);Rg("Data must be an object, but it was:",s,r);const i=[],o=zt.empty();ws(r,(l,u)=>{const h=Dg(e,l,n);u=tt(u);const f=s.Ac(h);if(u instanceof Yd)i.push(h);else{const m=Dl(u,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new en(i);return new Lk(o,a,s.fieldTransforms)}function oD(t,e,n,r,s,i){const o=t.gc(1,e,n),a=[Mm(e,r,n)],l=[s];if(i.length%2!=0)throw new G(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Mm(e,i[m])),l.push(i[m+1]);const u=[],h=zt.empty();for(let m=a.length-1;m>=0;--m)if(!Bk(u,a[m])){const g=a[m];let y=l[m];y=tt(y);const w=o.Ac(g);if(y instanceof Yd)u.push(g);else{const T=Dl(y,w);T!=null&&(u.push(g),h.set(g,T))}}const f=new en(u);return new Lk(h,f,o.fieldTransforms)}function aD(t,e,n,r=!1){return Dl(n,t.gc(r?4:3,e))}function Dl(t,e){if(Fk(t=tt(t)))return Rg("Unsupported field value:",e,t),Vk(t,e);if(t instanceof Kd)return function(r,s){if(!Ok(s.hc))throw s.Vc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Vc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Dl(a,s.Rc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Je.fromDate(r);return{timestampValue:Yu(s.serializer,i)}}if(r instanceof Je){const i=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yu(s.serializer,i)}}if(r instanceof Cg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fo)return{bytesValue:ek(s.serializer,r._byteString)};if(r instanceof Dt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ng)return function(o,a){return{mapValue:{fields:{[Nb]:{stringValue:Ab},[qu]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Vc("VectorValues must only contain numeric values.");return cg(a.serializer,u)})}}}}}}(r,s);throw s.Vc(`Unsupported field value: ${Hd(r)}`)}(t,e)}function Vk(t,e){const n={};return kb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(t,(r,s)=>{const i=Dl(s,e.Ic(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Fk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof Cg||t instanceof fo||t instanceof Dt||t instanceof Kd||t instanceof Ng)}function Rg(t,e,n){if(!Fk(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Hd(n);throw r==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+r)}}function Mm(t,e,n){if((e=tt(e))instanceof Gd)return e._internalPath;if(typeof e=="string")return Dg(t,e);throw Ju("Field path arguments must be of type string or ",t,!1,void 0,n)}const lD=new RegExp("[~\\*/\\[\\]]");function Dg(t,e,n){if(e.search(lD)>=0)throw Ju(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gd(...e.split("."))._internalPath}catch{throw Ju(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ju(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(V.INVALID_ARGUMENT,a+t+l)}function Bk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cD extends zk{data(){return super.data()}}function Mg(t,e){return typeof e=="string"?Dg(t,e):e instanceof Gd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lg{}class Uk extends Lg{}function dD(t,e,...n){let r=[];e instanceof Lg&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Vg).length,a=i.filter(l=>l instanceof Og).length;if(o>1||o>0&&a>0)throw new G(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Og extends Uk{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Og(e,n,r)}_apply(e){const n=this._parse(e);return Wk(e._query,n),new ui(e.firestore,e.converter,Em(e._query,n))}_parse(e){const n=jg(e.firestore);return function(i,o,a,l,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Fx(f,h);const y=[];for(const w of f)y.push(Vx(l,i,w));m={arrayValue:{values:y}}}else m=Vx(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Fx(f,h),m=aD(a,o,f,h==="in"||h==="not-in");return Ke.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Vg extends Lg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Dn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Wk(o,l),o=Em(o,l)}(e._query,n),new ui(e.firestore,e.converter,Em(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fg extends Uk{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ol(i,o)}(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new To(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function hD(t,e="asc"){const n=e,r=Mg("orderBy",t);return Fg._create(r,n)}function Vx(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new G(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vb(e)&&n.indexOf("/")!==-1)throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!X.isDocumentKey(r))throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jy(t,new X(r))}if(n instanceof Dt)return Jy(t,n._key);throw new G(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hd(n)}.`)}function Fx(t,e){if(!Array.isArray(t)||t.length===0)throw new G(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Wk(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class fD{convertValue(e,n="none"){switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ws(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[qu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ue(o.doubleValue));return new Ng(i)}convertGeoPoint(e){return new Cg(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ld(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const n=ds(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);_e(ok(r),9688,{name:e});const s=new sl(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||wr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $k extends zk{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new su(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class su extends $k{data(e={}){return super.data(e)}}class pD{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new su(this._firestore,this._userDataWriter,r.key,r,new fa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new fa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new su(s._firestore,s._userDataWriter,a.doc.key,a.doc,new fa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:gD(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function gD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){t=Xn(t,Dt);const e=Xn(t.firestore,Io);return KR(Ig(e),t._key).then(n=>xD(e,t,n))}class Hk extends fD{constructor(e){super(),this.firestore=e}convertBytes(e){return new fo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function vD(t){t=Xn(t,ui);const e=Xn(t.firestore,Io),n=Ig(e),r=new Hk(e);return uD(t._query),YR(n,t._query).then(s=>new pD(e,r,t,s))}function qk(t,e,n){t=Xn(t,Dt);const r=Xn(t.firestore,Io),s=mD(t.converter,e);return zg(r,[sD(jg(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Nn.none())])}function Ml(t,e,n,...r){t=Xn(t,Dt);const s=Xn(t.firestore,Io),i=jg(s);let o;return o=typeof(e=tt(e))=="string"||e instanceof Gd?oD(i,"updateDoc",t._key,e,n,r):iD(i,"updateDoc",t._key,e),zg(s,[o.toMutation(t._key,Nn.exists(!0))])}function yD(t){return zg(Xn(t.firestore,Io),[new ug(t._key,Nn.none())])}function zg(t,e){return function(r,s){const i=new mr;return r.asyncQueue.enqueueAndForget(async()=>LR(await GR(r),s,i)),i.promise}(Ig(t),e)}function xD(t,e,n){const r=n.docs.get(e._key),s=new Hk(t);return new $k(t,s,e._key,r,new fa(n.hasPendingWrites,n.fromCache),e.converter)}function sn(){return new Pg("serverTimestamp")}(function(e,n=!0){(function(s){bo=s})(_o),so(new Zs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Io(new iP(r.getProvider("auth-internal")),new lP(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sl(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ss(zy,Uy,e),ss(zy,Uy,"esm2017")})();var _D="firebase",wD="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss(_D,wD,"app");const Lm={apiKey:"AIzaSyAA8WeKYlk_pZB_T-A0g2kosP8ixqf0GYU",authDomain:"vehicles-f1f63.firebaseapp.com",projectId:"vehicles-f1f63",storageBucket:"vehicles-f1f63.firebasestorage.app",messagingSenderId:"887499842648",appId:"1:887499842648:web:fe7df601e4041f1544d62d",measurementId:"G-HLXCDWXRY3"},Gk=Cw(Lm),Ye=tP(Gk),Gt=JR(Gk);Ye.settings={appVerificationDisabledForTesting:!1};console.log(" Firebase initialized:",{projectId:Lm.projectId,authDomain:Lm.authDomain,hasAuth:!!Ye,hasDb:!!Gt});const Te={PENDING:"pending",APPROVED:"approved",REJECTED:"rejected",SUSPENDED:"suspended"},bt={ADMIN:"admin",OPERATOR:"operator",VIEWER:"viewer"},bD=async t=>{console.log("Starting user signup process...",{email:t.email,name:t.name});try{const{email:e,password:n,name:r,department:s,phone:i,role:o=bt.VIEWER}=t;console.log("Step 1: Creating Firebase Auth user...");const l=(await VA(Ye,e,n)).user;console.log(" Firebase Auth user created:",l.uid),console.log("Step 2: Updating user profile..."),await zA(l,{displayName:r}),console.log(" User profile updated"),console.log("Step 3: Creating Firestore user document...");const u={uid:l.uid,email:e,name:r,department:s,phone:i,role:o,status:Te.PENDING,createdAt:sn(),updatedAt:sn(),approvedBy:null,approvedAt:null};return await qk(An(Gt,"users",l.uid),u),console.log(" Firestore user document created"),console.log("Step 4: Signing out user..."),await zu(Ye),console.log(" User signed out"),console.log(" Signup process completed successfully"),{success:!0,message:"Account created successfully. Please wait for admin approval.",user:{uid:l.uid,email:e,name:r,status:Te.PENDING}}}catch(e){console.error(" Error during signup process:",e),console.error("Error details:",{code:e.code,message:e.message,stack:e.stack});let n=e.message;return e.code==="auth/email-already-in-use"?n="An account with this email already exists. Please use a different email or try signing in.":e.code==="auth/weak-password"?n="Password is too weak. Please use a stronger password.":e.code==="auth/invalid-email"?n="Invalid email address. Please check your email and try again.":e.code==="auth/network-request-failed"&&(n="Network error. Please check your internet connection and try again."),{success:!1,message:n,errorCode:e.code}}},kD=async(t,e)=>{try{const r=(await FA(Ye,t,e)).user,s=await Bg(An(Gt,"users",r.uid));if(!s.exists())return await zu(Ye),{success:!1,message:"User data not found. Please contact administrator."};const i=s.data();if(i.status!==Te.APPROVED){await zu(Ye);let o="Account access denied.";switch(i.status){case Te.PENDING:o="Your account is pending approval. Please wait for admin approval.";break;case Te.REJECTED:o="Your account has been rejected. Please contact administrator.";break;case Te.SUSPENDED:o="Your account has been suspended. Please contact administrator.";break}return{success:!1,message:o}}return{success:!0,message:"Login successful",user:{uid:r.uid,email:r.email,name:i.name,role:i.role,department:i.department,status:i.status}}}catch(n){return console.error("Error signing in:",n),{success:!1,message:n.message}}},Bx=async()=>{try{return await zu(Ye),{success:!0,message:"Logged out successfully"}}catch(t){return console.error("Error signing out:",t),{success:!1,message:t.message}}},ED=async t=>{try{const e=await Bg(An(Gt,"users",t));return e.exists()?e.data():null}catch(e){return console.error("Error getting user data:",e),null}},Kk=async(t,e)=>{try{return await Ml(An(Gt,"users",t),{status:Te.APPROVED,approvedBy:e,approvedAt:sn(),updatedAt:sn()}),{success:!0,message:"User approved successfully"}}catch(n){return console.error("Error approving user:",n),{success:!1,message:n.message}}},Yk=async(t,e)=>{try{return await Ml(An(Gt,"users",t),{status:Te.REJECTED,rejectedBy:e,rejectedAt:sn(),updatedAt:sn()}),{success:!0,message:"User rejected successfully"}}catch(n){return console.error("Error rejecting user:",n),{success:!1,message:n.message}}},ed=async()=>{try{const t=ZR(Gt,"users"),e=dD(t,hD("createdAt","desc")),n=await vD(e),r=[];return n.forEach(s=>{r.push({id:s.id,...s.data()})}),r}catch(t){throw console.error("Error getting all users:",t),t}},TD=async(t,e,n)=>{try{return await Ml(An(Gt,"users",t),{role:e,updatedAt:sn(),roleUpdatedBy:n,roleUpdatedAt:sn()}),{success:!0,message:"User role updated successfully"}}catch(r){return console.error("Error updating user role:",r),{success:!1,message:r.message}}},SD=async(t,e,n="")=>{try{return await Ml(An(Gt,"users",t),{status:Te.SUSPENDED,suspendedBy:e,suspendedAt:sn(),suspensionReason:n,updatedAt:sn()}),{success:!0,message:"User suspended successfully"}}catch(r){return console.error("Error suspending user:",r),{success:!1,message:r.message}}},ID=async(t,e)=>{try{return await Ml(An(Gt,"users",t),{status:Te.APPROVED,reactivatedBy:e,reactivatedAt:sn(),suspensionReason:null,updatedAt:sn()}),{success:!0,message:"User reactivated successfully"}}catch(n){return console.error("Error reactivating user:",n),{success:!1,message:n.message}}},Qk=async(t,e,n="")=>{try{const r=await Bg(An(Gt,"users",t));if(!r.exists())return{success:!1,message:"User not found"};const s=r.data();console.warn(" USER DELETION:",{deletedUserId:t,deletedUserEmail:s.email,deletedUserName:s.name,deletedBy:e,reason:n,timestamp:new Date().toISOString()});try{await qk(An(Gt,"deletedUsers",t),{...s,deletedBy:e,deletedAt:sn(),deletionReason:n,originalId:t})}catch(i){console.warn("Could not create deletion log:",i)}return await yD(An(Gt,"users",t)),{success:!0,message:"User deleted successfully",deletedUser:{id:t,email:s.email,name:s.name}}}catch(r){return console.error("Error deleting user:",r),{success:!1,message:r.message}}},CD=async(t,e,n="")=>{try{const r=[],s=[];for(const i of t)try{const o=await Qk(i,e,n);o.success?r.push(o.deletedUser):s.push({userId:i,error:o.message})}catch(o){s.push({userId:i,error:o.message})}return{success:s.length===0,message:`Deleted ${r.length} users${s.length>0?`, ${s.length} failed`:""}`,deletedUsers:r,errors:s}}catch(r){return console.error("Error bulk deleting users:",r),{success:!1,message:r.message}}},ND=async(t,e)=>{try{const n=[];for(const r of t){const s=await Kk(r,e);n.push({userId:r,...s})}return{success:!0,results:n}}catch(n){return console.error("Error bulk approving users:",n),{success:!1,message:n.message}}},AD=async(t,e)=>{try{const n=[];for(const r of t){const s=await Yk(r,e);n.push({userId:r,...s})}return{success:!0,results:n}}catch(n){return console.error("Error bulk rejecting users:",n),{success:!1,message:n.message}}},jD=t=>$A(Ye,t),Xk=W.createContext(),Zk=()=>{const t=W.useContext(Xk);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},PD=({children:t})=>{const[e,n]=W.useState(null),[r,s]=W.useState(!0),[i,o]=W.useState(!1);W.useEffect(()=>{const u=jD(async h=>{if(h)try{const f=await ED(h.uid);f&&f.status==="approved"?n({uid:h.uid,email:h.email,name:f.name,role:f.role,department:f.department,status:f.status}):(await Bx(),n(null))}catch(f){console.error("Error getting user data:",f),n(null)}else n(null);s(!1),o(!0)});return()=>u()},[]);const l={user:e,loading:r,authChecked:i,logout:async()=>{try{await Bx(),n(null)}catch(u){console.error("Error signing out:",u)}}};return c.jsx(Xk.Provider,{value:l,children:t})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ll(t){return t+.5|0}const qr=(t,e,n)=>Math.max(Math.min(t,n),e);function ma(t){return qr(Ll(t*2.55),0,255)}function as(t){return qr(Ll(t*255),0,255)}function ar(t){return qr(Ll(t/2.55)/100,0,1)}function zx(t){return qr(Ll(t*100),0,100)}const ln={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Om=[..."0123456789ABCDEF"],RD=t=>Om[t&15],DD=t=>Om[(t&240)>>4]+Om[t&15],kc=t=>(t&240)>>4===(t&15),MD=t=>kc(t.r)&&kc(t.g)&&kc(t.b)&&kc(t.a);function LD(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ln[t[1]]*17,g:255&ln[t[2]]*17,b:255&ln[t[3]]*17,a:e===5?ln[t[4]]*17:255}:(e===7||e===9)&&(n={r:ln[t[1]]<<4|ln[t[2]],g:ln[t[3]]<<4|ln[t[4]],b:ln[t[5]]<<4|ln[t[6]],a:e===9?ln[t[7]]<<4|ln[t[8]]:255})),n}const OD=(t,e)=>t<255?e(t):"";function VD(t){var e=MD(t)?RD:DD;return t?"#"+e(t.r)+e(t.g)+e(t.b)+OD(t.a,e):void 0}const FD=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Jk(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function BD(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function zD(t,e,n){const r=Jk(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function UD(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Ug(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,u,h;return i!==o&&(h=i-o,u=a>.5?h/(2-i-o):h/(i+o),l=UD(n,r,s,h,i),l=l*60+.5),[l|0,u||0,a]}function Wg(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(as)}function $g(t,e,n){return Wg(Jk,t,e,n)}function WD(t,e,n){return Wg(zD,t,e,n)}function $D(t,e,n){return Wg(BD,t,e,n)}function eE(t){return(t%360+360)%360}function HD(t){const e=FD.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?ma(+e[5]):as(+e[5]));const s=eE(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=WD(s,i,o):e[1]==="hsv"?r=$D(s,i,o):r=$g(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function qD(t,e){var n=Ug(t);n[0]=eE(n[0]+e),n=$g(n),t.r=n[0],t.g=n[1],t.b=n[2]}function GD(t){if(!t)return;const e=Ug(t),n=e[0],r=zx(e[1]),s=zx(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${ar(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Ux={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Wx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function KD(){const t={},e=Object.keys(Wx),n=Object.keys(Ux);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,Ux[i]);i=parseInt(Wx[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Ec;function YD(t){Ec||(Ec=KD(),Ec.transparent=[0,0,0,0]);const e=Ec[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const QD=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function XD(t){const e=QD.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?ma(o):qr(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?ma(r):qr(r,0,255)),s=255&(e[4]?ma(s):qr(s,0,255)),i=255&(e[6]?ma(i):qr(i,0,255)),{r,g:s,b:i,a:n}}}function ZD(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ar(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const nf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,yi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function JD(t,e,n){const r=yi(ar(t.r)),s=yi(ar(t.g)),i=yi(ar(t.b));return{r:as(nf(r+n*(yi(ar(e.r))-r))),g:as(nf(s+n*(yi(ar(e.g))-s))),b:as(nf(i+n*(yi(ar(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Tc(t,e,n){if(t){let r=Ug(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=$g(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function tE(t,e){return t&&Object.assign(e||{},t)}function $x(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=as(t[3]))):(e=tE(t,{r:0,g:0,b:0,a:1}),e.a=as(e.a)),e}function eM(t){return t.charAt(0)==="r"?XD(t):HD(t)}class ul{constructor(e){if(e instanceof ul)return e;const n=typeof e;let r;n==="object"?r=$x(e):n==="string"&&(r=LD(e)||YD(e)||eM(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=tE(this._rgb);return e&&(e.a=ar(e.a)),e}set rgb(e){this._rgb=$x(e)}rgbString(){return this._valid?ZD(this._rgb):void 0}hexString(){return this._valid?VD(this._rgb):void 0}hslString(){return this._valid?GD(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=JD(this._rgb,e._rgb,n)),this}clone(){return new ul(this.rgb)}alpha(e){return this._rgb.a=as(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ll(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Tc(this._rgb,2,e),this}darken(e){return Tc(this._rgb,2,-e),this}saturate(e){return Tc(this._rgb,1,e),this}desaturate(e){return Tc(this._rgb,1,-e),this}rotate(e){return qD(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function nr(){}const tM=(()=>{let t=0;return()=>t++})();function xe(t){return t==null}function Xe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ge(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function vn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ln(t,e){return vn(t)?t:e}function ue(t,e){return typeof t>"u"?e:t}const nM=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ae(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function be(t,e,n,r){let s,i,o;if(Xe(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(ge(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function td(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function nd(t){if(Xe(t))return t.map(nd);if(ge(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=nd(t[n[s]]);return e}return t}function nE(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function rM(t,e,n,r){if(!nE(t))return;const s=e[t],i=n[t];ge(s)&&ge(i)?dl(s,i,r):e[t]=nd(i)}function dl(t,e,n){const r=Xe(e)?e:[e],s=r.length;if(!ge(t))return t;n=n||{};const i=n.merger||rM;let o;for(let a=0;a<s;++a){if(o=r[a],!ge(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)i(l[u],t,o,n)}return t}function Ra(t,e){return dl(t,e,{merger:sM})}function sM(t,e,n){if(!nE(t))return;const r=e[t],s=n[t];ge(r)&&ge(s)?Ra(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=nd(s))}const Hx={"":t=>t,x:t=>t.x,y:t=>t.y};function iM(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function oM(t){const e=iM(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function mo(t,e){return(Hx[e]||(Hx[e]=oM(e)))(t)}function Hg(t){return t.charAt(0).toUpperCase()+t.slice(1)}const hl=t=>typeof t<"u",gs=t=>typeof t=="function",qx=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function aM(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const it=Math.PI,Kn=2*it,lM=Kn+it,rd=Number.POSITIVE_INFINITY,cM=it/180,Sn=it/2,Is=it/4,Gx=it*2/3,rE=Math.log10,Yn=Math.sign;function Da(t,e,n){return Math.abs(t-e)<n}function Kx(t){const e=Math.round(t);t=Da(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(rE(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function uM(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function dM(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function fl(t){return!dM(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function hM(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function fM(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Bs(t){return t*(it/180)}function mM(t){return t*(180/it)}function Yx(t){if(!vn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function pM(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*it&&(i+=Kn),{angle:i,distance:s}}function Vm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function gM(t,e){return(t-e+lM)%Kn-it}function Rr(t){return(t%Kn+Kn)%Kn}function sE(t,e,n,r){const s=Rr(t),i=Rr(e),o=Rr(n),a=Rr(i-s),l=Rr(o-s),u=Rr(s-i),h=Rr(s-o);return s===i||s===o||r&&i===o||a>l&&u<h}function tn(t,e,n){return Math.max(e,Math.min(n,t))}function vM(t){return tn(t,-32768,32767)}function zs(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function qg(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Us=(t,e,n,r)=>qg(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),yM=(t,e,n)=>qg(t,n,r=>t[r][e]>=n);function xM(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const iE=["push","pop","shift","splice","unshift"];function _M(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),iE.forEach(n=>{const r="_onData"+Hg(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Qx(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(iE.forEach(i=>{delete t[i]}),delete t._chartjs)}function oE(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const aE=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function lE(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,aE.call(window,()=>{r=!1,t.apply(e,n)}))}}function wM(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Gg=t=>t==="start"?"left":t==="end"?"right":"center",wt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,bM=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function kM(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:f,max:m,minDefined:g,maxDefined:y}=o.getUserBounds();if(g){if(s=Math.min(Us(l,h,f).lo,n?r:Us(e,h,o.getPixelForValue(f)).lo),u){const w=l.slice(0,s+1).reverse().findIndex(T=>!xe(T[a.axis]));s-=Math.max(0,w)}s=tn(s,0,r-1)}if(y){let w=Math.max(Us(l,o.axis,m,!0).hi+1,n?0:Us(e,h,o.getPixelForValue(m),!0).hi+1);if(u){const T=l.slice(w-1).findIndex(_=>!xe(_[a.axis]));w+=Math.max(0,T)}i=tn(w,s,r)-s}else i=r-s}return{start:s,count:i}}function EM(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Sc=t=>t===0||t===1,Xx=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Kn/n)),Zx=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Kn/n)+1,Ma={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Sn)+1,easeOutSine:t=>Math.sin(t*Sn),easeInOutSine:t=>-.5*(Math.cos(it*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Sc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Sc(t)?t:Xx(t,.075,.3),easeOutElastic:t=>Sc(t)?t:Zx(t,.075,.3),easeInOutElastic(t){return Sc(t)?t:t<.5?.5*Xx(t*2,.1125,.45):.5+.5*Zx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ma.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ma.easeInBounce(t*2)*.5:Ma.easeOutBounce(t*2-1)*.5+.5};function Kg(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Jx(t){return Kg(t)?t:new ul(t)}function rf(t){return Kg(t)?t:new ul(t).saturate(.5).darken(.1).hexString()}const TM=["x","y","borderWidth","radius","tension"],SM=["color","borderColor","backgroundColor"];function IM(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:SM},numbers:{type:"number",properties:TM}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function CM(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const e_=new Map;function NM(t,e){e=e||{};const n=t+JSON.stringify(e);let r=e_.get(n);return r||(r=new Intl.NumberFormat(t,e),e_.set(n,r)),r}function cE(t,e,n){return NM(e,n).format(t)}const AM={values(t){return Xe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=jM(t,n)}const o=rE(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),cE(t,r,l)}};function jM(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var uE={formatters:AM};function PM(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uE.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ri=Object.create(null),Fm=Object.create(null);function La(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function sf(t,e,n){return typeof e=="string"?dl(La(t,e),n):dl(La(t,""),e)}class RM{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>rf(s.backgroundColor),this.hoverBorderColor=(r,s)=>rf(s.borderColor),this.hoverColor=(r,s)=>rf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return sf(this,e,n)}get(e){return La(this,e)}describe(e,n){return sf(Fm,e,n)}override(e,n){return sf(ri,e,n)}route(e,n,r,s){const i=La(this,e),o=La(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[s];return ge(l)?Object.assign({},u,l):ue(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var $e=new RM({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[IM,CM,PM]);function DM(t){return!t||xe(t.size)||xe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function t_(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Cs(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function n_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Bm(t,e,n,r){dE(t,e,n,r,null)}function dE(t,e,n,r,s){let i,o,a,l,u,h,f,m;const g=e.pointStyle,y=e.rotation,w=e.radius;let T=(y||0)*cM;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),g){default:s?t.ellipse(n,r,s/2,w,0,0,Kn):t.arc(n,r,w,0,Kn),t.closePath();break;case"triangle":h=s?s/2:w,t.moveTo(n+Math.sin(T)*h,r-Math.cos(T)*w),T+=Gx,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*w),T+=Gx,t.lineTo(n+Math.sin(T)*h,r-Math.cos(T)*w),t.closePath();break;case"rectRounded":u=w*.516,l=w-u,o=Math.cos(T+Is)*l,f=Math.cos(T+Is)*(s?s/2-u:l),a=Math.sin(T+Is)*l,m=Math.sin(T+Is)*(s?s/2-u:l),t.arc(n-f,r-a,u,T-it,T-Sn),t.arc(n+m,r-o,u,T-Sn,T),t.arc(n+f,r+a,u,T,T+Sn),t.arc(n-m,r+o,u,T+Sn,T+it),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*w,h=s?s/2:l,t.rect(n-h,r-l,2*h,2*l);break}T+=Is;case"rectRot":f=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,m=Math.sin(T)*(s?s/2:w),t.moveTo(n-f,r-a),t.lineTo(n+m,r-o),t.lineTo(n+f,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":T+=Is;case"cross":f=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,m=Math.sin(T)*(s?s/2:w),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":f=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,m=Math.sin(T)*(s?s/2:w),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),T+=Is,f=Math.cos(T)*(s?s/2:w),o=Math.cos(T)*w,a=Math.sin(T)*w,m=Math.sin(T)*(s?s/2:w),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(T)*w,a=Math.sin(T)*w,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(s?s/2:w),r+Math.sin(T)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ml(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Yg(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Qg(t){t.restore()}function MM(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function LM(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function OM(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),xe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function VM(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,h=s.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function FM(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function pl(t,e,n,r,s,i={}){const o=Xe(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,u;for(t.save(),t.font=s.string,OM(t,i),l=0;l<o.length;++l)u=o[l],i.backdrop&&FM(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),xe(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,n,r,i.maxWidth)),t.fillText(u,n,r,i.maxWidth),VM(t,n,r,u,i),r+=Number(s.lineHeight);t.restore()}function sd(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*it,it,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,it,Sn,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Sn,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Sn,!0),t.lineTo(n+o.topLeft,r)}const BM=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zM=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function UM(t,e){const n=(""+t).match(BM);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const WM=t=>+t||0;function hE(t,e){const n={},r=ge(e),s=r?Object.keys(e):e,i=ge(t)?r?o=>ue(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=WM(i(o));return n}function fE(t){return hE(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ki(t){return hE(t,["topLeft","topRight","bottomLeft","bottomRight"])}function yn(t){const e=fE(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function St(t,e){t=t||{},e=e||$e.font;let n=ue(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ue(t.style,e.style);r&&!(""+r).match(zM)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ue(t.family,e.family),lineHeight:UM(ue(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ue(t.weight,e.weight),string:""};return s.string=DM(s),s}function Ic(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function $M(t,e,n){const{min:r,max:s}=t,i=nM(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function di(t,e){return Object.assign(Object.create(t),e)}function Xg(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=vE("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>Xg([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return pE(a,l,()=>ZM(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return s_(a).includes(l)},ownKeys(a){return s_(a)},set(a,l,u){const h=a._storage||(a._storage=s());return a[l]=h[l]=u,delete a._keys,!0}})}function po(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:mE(t,r),setContext:i=>po(t,i,n,r),override:i=>po(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return pE(i,o,()=>qM(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function mE(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:gs(n)?n:()=>n,isIndexable:gs(r)?r:()=>r}}const HM=(t,e)=>t?t+Hg(e):e,Zg=(t,e)=>ge(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function pE(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function qM(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return gs(a)&&o.isScriptable(e)&&(a=GM(e,a,t,n)),Xe(a)&&a.length&&(a=KM(e,a,t,o.isIndexable)),Zg(e,a)&&(a=po(a,s,i&&i[e],o)),a}function GM(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),Zg(t,l)&&(l=Jg(s._scopes,s,t,l)),l}function KM(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(ge(e[0])){const l=e,u=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const f=Jg(u,s,t,h);e.push(po(f,i,o&&o[t],a))}}return e}function gE(t,e,n){return gs(t)?t(e,n):t}const YM=(t,e)=>t===!0?e:typeof t=="string"?mo(e,t):void 0;function QM(t,e,n,r,s){for(const i of e){const o=YM(n,i);if(o){t.add(o);const a=gE(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Jg(t,e,n,r){const s=e._rootScopes,i=gE(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=r_(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=r_(a,o,i,l,r),l===null)?!1:Xg(Array.from(a),[""],s,i,()=>XM(e,n,r))}function r_(t,e,n,r,s){for(;n;)n=QM(t,e,n,r,s);return n}function XM(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Xe(s)&&ge(n)?n:s||{}}function ZM(t,e,n,r){let s;for(const i of e)if(s=vE(HM(i,t),n),typeof s<"u")return Zg(t,s)?Jg(n,r,t,s):s}function vE(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function s_(t){let e=t._keys;return e||(e=t._keys=JM(t._scopes)),e}function JM(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const eL=Number.EPSILON||1e-14,go=(t,e)=>e<t.length&&!t[e].skip&&t[e],yE=t=>t==="x"?"y":"x";function tL(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Vm(i,s),l=Vm(o,i);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const f=r*u,m=r*h;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+m*(o.x-s.x),y:i.y+m*(o.y-s.y)}}}function nL(t,e,n){const r=t.length;let s,i,o,a,l,u=go(t,0);for(let h=0;h<r-1;++h)if(l=u,u=go(t,h+1),!(!l||!u)){if(Da(e[h],0,eL)){n[h]=n[h+1]=0;continue}s=n[h]/e[h],i=n[h+1]/e[h],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=s*o*e[h],n[h+1]=i*o*e[h])}}function rL(t,e,n="x"){const r=yE(n),s=t.length;let i,o,a,l=go(t,0);for(let u=0;u<s;++u){if(o=a,a=l,l=go(t,u+1),!a)continue;const h=a[n],f=a[r];o&&(i=(h-o[n])/3,a[`cp1${n}`]=h-i,a[`cp1${r}`]=f-i*e[u]),l&&(i=(l[n]-h)/3,a[`cp2${n}`]=h+i,a[`cp2${r}`]=f+i*e[u])}}function sL(t,e="x"){const n=yE(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,u=go(t,0);for(o=0;o<r;++o)if(a=l,l=u,u=go(t,o+1),!!l){if(u){const h=u[e]-l[e];s[o]=h!==0?(u[n]-l[n])/h:0}i[o]=a?u?Yn(s[o-1])!==Yn(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}nL(t,s,i),rL(t,i,e)}function Cc(t,e,n){return Math.max(Math.min(t,n),e)}function iL(t,e){let n,r,s,i,o,a=ml(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&ml(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Cc(s.cp1x,e.left,e.right),s.cp1y=Cc(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Cc(s.cp2x,e.left,e.right),s.cp2y=Cc(s.cp2y,e.top,e.bottom)))}function oL(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")sL(t,s);else{let u=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=tL(u,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&iL(t,n)}function e0(){return typeof window<"u"&&typeof document<"u"}function t0(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function id(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Qd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function aL(t,e){return Qd(t).getPropertyValue(e)}const lL=["top","right","bottom","left"];function Hs(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=lL[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const cL=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function uL(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(cL(s,i,t.target))a=s,l=i;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Rs(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Qd(n),i=s.boxSizing==="border-box",o=Hs(s,"padding"),a=Hs(s,"border","width"),{x:l,y:u,box:h}=uL(t,n),f=o.left+(h&&a.left),m=o.top+(h&&a.top);let{width:g,height:y}=e;return i&&(g-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-f)/g*n.width/r),y:Math.round((u-m)/y*n.height/r)}}function dL(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&t0(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Qd(i),l=Hs(a,"border","width"),u=Hs(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,r=id(a.maxWidth,i,"clientWidth"),s=id(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||rd,maxHeight:s||rd}}const Nc=t=>Math.round(t*10)/10;function hL(t,e,n,r){const s=Qd(t),i=Hs(s,"margin"),o=id(s.maxWidth,t,"clientWidth")||rd,a=id(s.maxHeight,t,"clientHeight")||rd,l=dL(t,e,n);let{width:u,height:h}=l;if(s.boxSizing==="content-box"){const m=Hs(s,"border","width"),g=Hs(s,"padding");u-=g.width+m.width,h-=g.height+m.height}return u=Math.max(0,u-i.width),h=Math.max(0,r?u/r:h-i.height),u=Nc(Math.min(u,o,l.maxWidth)),h=Nc(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Nc(u/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,u=Nc(Math.floor(h*r))),{width:u,height:h}}function i_(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const fL=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};e0()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function o_(t,e){const n=aL(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ds(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function mL(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function pL(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Ds(t,s,n),a=Ds(s,i,n),l=Ds(i,e,n),u=Ds(o,a,n),h=Ds(a,l,n);return Ds(u,h,n)}const gL=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},vL=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Yi(t,e,n){return t?gL(e,n):vL()}function xE(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function _E(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function wE(t){return t==="angle"?{between:sE,compare:gM,normalize:Rr}:{between:zs,compare:(e,n)=>e-n,normalize:e=>e}}function a_({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function yL(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=wE(r),l=e.length;let{start:u,end:h,loop:f}=t,m,g;if(f){for(u+=l,h+=l,m=0,g=l;m<g&&o(a(e[u%l][r]),s,i);++m)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:f,style:t.style}}function xL(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:u}=wE(r),{start:h,end:f,loop:m,style:g}=yL(t,e,n),y=[];let w=!1,T=null,_,k,b;const C=()=>l(s,b,_)&&a(s,b)!==0,A=()=>a(i,_)===0||l(i,b,_),D=()=>w||C(),E=()=>!w||A();for(let x=h,I=h;x<=f;++x)k=e[x%o],!k.skip&&(_=u(k[r]),_!==b&&(w=l(_,s,i),T===null&&D()&&(T=a(_,s)===0?x:I),T!==null&&E()&&(y.push(a_({start:T,end:x,loop:m,count:o,style:g})),T=null),I=x,b=_));return T!==null&&y.push(a_({start:T,end:f,loop:m,count:o,style:g})),y}function _L(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=xL(r[s],t.points,e);i.length&&n.push(...i)}return n}function wL(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function bL(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%s];u.skip||u.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function kL(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=wL(n,s,i,r);if(r===!0)return l_(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,u=!!t._fullLoop&&o===0&&a===s-1;return l_(t,bL(n,o,l,u),n,e)}function l_(t,e,n,r){return!r||!r.setContext||!n?e:EL(t,e,n,r)}function EL(t,e,n,r){const s=t._chart.getContext(),i=c_(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let h=i,f=e[0].start,m=f;function g(y,w,T,_){const k=a?-1:1;if(y!==w){for(y+=l;n[y%l].skip;)y-=k;for(;n[w%l].skip;)w+=k;y%l!==w%l&&(u.push({start:y%l,end:w%l,loop:T,style:_}),h=_,f=w%l)}}for(const y of e){f=a?f:y.start;let w=n[f%l],T;for(m=f+1;m<=y.end;m++){const _=n[m%l];T=c_(r.setContext(di(s,{type:"segment",p0:w,p1:_,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),TL(T,h)&&g(f,m-1,y.loop,h),w=_,h=T}f<m-1&&g(f,m-1,y.loop,h)}return u}function c_(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function TL(t,e){if(!e)return!1;const n=[],r=function(s,i){return Kg(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ac(t,e,n){return t.options.clip?t[n]:e[n]}function SL(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ac(n,e,"left"),right:Ac(n,e,"right"),top:Ac(r,e,"top"),bottom:Ac(r,e,"bottom")}:e}function IL(t,e){const n=e._clip;if(n.disabled)return!1;const r=SL(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class CL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=aE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var rr=new CL;const u_="transparent",NL={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Jx(t||u_),s=r.valid&&Jx(e||u_);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class AL{constructor(e,n,r,s){const i=n[r];s=Ic([e.to,s,i,e.from]);const o=Ic([e.from,i,s]);this._active=!0,this._fn=e.fn||NL[e.type||typeof o],this._easing=Ma[e.easing]||Ma.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ic([e.to,n,s,e.from]),this._from=Ic([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class bE{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ge(e))return;const n=Object.keys($e.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!ge(i))return;const o={};for(const a of n)o[a]=i[a];(Xe(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=PL(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&jL(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,n));continue}const h=n[u];let f=i[u];const m=r.get(u);if(f)if(m&&f.active()){f.update(m,h,a);continue}else f.cancel();if(!m||!m.duration){e[u]=h;continue}i[u]=f=new AL(m,e,u,h),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return rr.add(this._chart,r),!0}}function jL(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function PL(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function d_(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function RL(t,e,n){if(n===!1)return!1;const r=d_(t,n),s=d_(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function DL(t){let e,n,r,s;return ge(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function kE(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function h_(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(h=!0,r.all)continue;break}u=t.values[l],vn(u)&&(i||e===0||Yn(e)===Yn(u))&&(e+=u)}return!h&&!r.all?0:e}function ML(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[s]:h,[i]:t[h]};return a}function of(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function LL(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function OL(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function VL(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function f_(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function m_(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,u=o.axis,h=LL(i,o,r),f=e.length;let m;for(let g=0;g<f;++g){const y=e[g],{[l]:w,[u]:T}=y,_=y._stacks||(y._stacks={});m=_[u]=VL(s,h,w),m[a]=T,m._top=f_(m,o,!0,r.type),m._bottom=f_(m,o,!1,r.type);const k=m._visualValues||(m._visualValues={});k[a]=T}}function af(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function FL(t,e){return di(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function BL(t,e,n){return di(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Qo(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const lf=t=>t==="reset"||t==="none",p_=(t,e)=>e?t:Object.assign({},t),zL=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:kE(n,!0),values:null};class Qi{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=of(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Qo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,m,g,y)=>f==="x"?m:f==="r"?y:g,i=n.xAxisID=ue(r.xAxisID,af(e,"x")),o=n.yAxisID=ue(r.yAxisID,af(e,"y")),a=n.rAxisID=ue(r.rAxisID,af(e,"r")),l=n.indexAxis,u=n.iAxisID=s(l,i,o,a),h=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Qx(this._data,this),e._stacked&&Qo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ge(n)){const s=this._cachedMeta;this._data=ML(n,s)}else if(r!==n){if(r){Qx(r,this);const s=this._cachedMeta;Qo(s),s._parsed=[]}n&&Object.isExtensible(n)&&_M(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=of(n.vScale,n),n.stack!==r.stack&&(s=!0,Qo(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(m_(this,n._parsed),n._stacked=of(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],h,f,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{Xe(s[e])?m=this.parseArrayData(r,s,e,n):ge(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const g=()=>f[a]===null||u&&f[a]<u[a];for(h=0;h<n;++h)r._parsed[h+e]=f=m[h],l&&(g()&&(l=!1),u=f);r._sorted=l}o&&m_(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,u=i.getLabels(),h=i===o,f=new Array(s);let m,g,y;for(m=0,g=s;m<g;++m)y=m+r,f[m]={[a]:h||i.parse(u[y],y),[l]:o.parse(n[y],y)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,u,h,f;for(l=0,u=s;l<u;++l)h=l+r,f=n[h],a[l]={x:i.parse(f[0],h),y:o.parse(f[1],h)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(s);let h,f,m,g;for(h=0,f=s;h<f;++h)m=h+r,g=n[m],u[h]={x:i.parse(mo(g,a),m),y:o.parse(mo(g,l),m)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:kE(s,!0),values:n._stacks[e.axis]._visualValues};return h_(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=h_(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=zL(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=OL(a);let m,g;function y(){g=s[m];const w=g[a.axis];return!vn(g[e.axis])||h>w||f<w}for(m=0;m<o&&!(!y()&&(this.updateRangeFromParsed(u,e,g,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!y()){this.updateRangeFromParsed(u,e,g,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],vn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=DL(ue(this.options.clip,RL(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,i,a,l),h=a;h<a+l;++h){const f=s[h];f.hidden||(f.active&&u?o.push(f):f.draw(e,i))}for(h=0;h<o.length;++h)o[h].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=BL(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=FL(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&hl(r);if(a)return p_(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],m=u.getOptionScopes(this.getDataset(),h),g=Object.keys($e.elements[e]),y=()=>this.getContext(r,s,n),w=u.resolveNamedOptions(m,g,y,f);return w.$shared&&(w.$shared=l,i[o]=Object.freeze(p_(w,l))),w}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,n),m=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(m,this.getContext(e,r,n))}const u=new bE(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||lf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){lf(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!lf(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Qo(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}te(Qi,"defaults",{}),te(Qi,"datasetElementType",null),te(Qi,"dataElementType",null);function UL(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=oE(r.sort((s,i)=>s-i))}return t._cache.$bar}function WL(t){const e=t.iScale,n=UL(e,t.type);let r=e._length,s,i,o,a;const l=()=>{o===32767||o===-32768||(hl(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,i=n.length;s<i;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,i=e.ticks.length;s<i;++s)o=e.getPixelForTick(s),l();return r}function $L(t,e,n,r){const s=n.barThickness;let i,o;return xe(s)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:e.pixels[t]-i/2}}function HL(t,e,n,r){const s=e.pixels,i=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const u=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:u}}function qL(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),o=Math.min(s,i),a=Math.max(s,i);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[n.axis]=u,e._custom={barStart:l,barEnd:u,start:s,end:i,min:o,max:a}}function EE(t,e,n,r){return Xe(t)?qL(t,e,n,r):e[n.axis]=n.parse(t,r),e}function g_(t,e,n,r){const s=t.iScale,i=t.vScale,o=s.getLabels(),a=s===i,l=[];let u,h,f,m;for(u=n,h=n+r;u<h;++u)m=e[u],f={},f[s.axis]=a||s.parse(o[u],u),l.push(EE(m,f,i,u));return l}function cf(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function GL(t,e,n){return t!==0?Yn(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function KL(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function YL(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:h}=KL(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=u:(n._bottom||0)===r?s=h:(i[v_(h,o,a,l)]=!0,s=u)),i[v_(s,o,a,l)]=!0,t.borderSkipped=i}function v_(t,e,n,r){return r?(t=QL(t,e,n),t=y_(t,n,e)):t=y_(t,e,n),t}function QL(t,e,n){return t===e?n:t===n?e:t}function y_(t,e,n){return t==="start"?e:t==="end"?n:t}function XL(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class iu extends Qi{parsePrimitiveData(e,n,r,s){return g_(e,n,r,s)}parseArrayData(e,n,r,s){return g_(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=i.axis==="x"?a:l,h=o.axis==="x"?a:l,f=[];let m,g,y,w;for(m=r,g=r+s;m<g;++m)w=n[m],y={},y[i.axis]=i.parse(mo(w,u),m),f.push(EE(mo(w,h),y,o,m));return f}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),o=i._custom,a=cf(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:m}=this._getSharedOptions(n,s);for(let g=n;g<n+r;g++){const y=this.getParsed(g),w=i||xe(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),T=this._calculateBarIndexPixels(g,h),_=(y._stacks||{})[a.axis],k={horizontal:u,base:w.base,enableBorderRadius:!_||cf(y._custom)||o===_._top||o===_._bottom,x:u?w.head:T.center,y:u?T.center:w.head,height:u?T.size:Math.abs(w.size),width:u?Math.abs(w.size):T.size};m&&(k.options=f||this.resolveDataElementOptions(g,e[g].active?"active":s));const b=k.options||e[g].options;YL(k,b,_,o),XL(k,b,h.ratio),this.updateElement(e[g],g,k,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),i=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],u=h=>{const f=h._parsed.find(g=>g[r.axis]===l),m=f&&f[h.vScale.axis];if(xe(m)||isNaN(m))return!0};for(const h of s)if(!(n!==void 0&&u(h))&&((i===!1||o.indexOf(h.stack)===-1||i===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const a=e.barThickness;return{min:a||WL(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),u=l._custom,h=cf(u);let f=l[n.axis],m=0,g=r?this.applyStack(n,l,r):f,y,w;g!==f&&(m=g-f,g=f),h&&(f=u.barStart,g=u.barEnd-u.barStart,f!==0&&Yn(f)!==Yn(u.barEnd)&&(m=0),m+=f);const T=!xe(i)&&!h?i:m;let _=n.getPixelForValue(T);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(m+g):y=_,w=y-_,Math.abs(w)<o){w=GL(w,n,a)*o,f===a&&(_-=w/2);const k=n.getPixelForDecimal(0),b=n.getPixelForDecimal(1),C=Math.min(k,b),A=Math.max(k,b);_=Math.max(Math.min(_,A),C),y=_+w,r&&!h&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(y)-n.getValueForPixel(_))}if(_===n.getPixelForValue(a)){const k=Yn(w)*n.getLineWidthForValue(a)/2;_+=k,w-=k}return{size:w,base:_,head:y,center:y+w/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,o=ue(s.maxBarThickness,1/0);let a,l;if(n.grouped){const u=i?this._getStackCount(e):n.stackCount,h=s.barThickness==="flex"?HL(e,n,s,u):$L(e,n,s,u),f=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=h.start+h.chunk*f+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}te(iu,"id","bar"),te(iu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),te(iu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ou extends Qi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=kM(n,s,o);this._drawStart=a,this._drawCount=l,EM(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,s),m=o.axis,g=a.axis,{spanGaps:y,segment:w}=this.options,T=fl(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||i||s==="none",k=n+r,b=e.length;let C=n>0&&this.getParsed(n-1);for(let A=0;A<b;++A){const D=e[A],E=_?D:{};if(A<n||A>=k){E.skip=!0;continue}const x=this.getParsed(A),I=xe(x[g]),N=E[m]=o.getPixelForValue(x[m],A),j=E[g]=i||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[g],A);E.skip=isNaN(N)||isNaN(j)||I,E.stop=A>0&&Math.abs(x[m]-C[m])>T,w&&(E.parsed=x,E.raw=u.data[A]),f&&(E.options=h||this.resolveDataElementOptions(A,D.active?"active":s)),_||this.updateElement(D,A,E,s),C=x}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}te(ou,"id","line"),te(ou,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),te(ou,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ns(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class n0{constructor(e){te(this,"options");this.options=e||{}}static override(e){Object.assign(n0.prototype,e)}init(){}formats(){return Ns()}parse(){return Ns()}format(){return Ns()}add(){return Ns()}diff(){return Ns()}startOf(){return Ns()}endOf(){return Ns()}}var ZL={_date:n0};function JL(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const u=a._reversePixels?yM:Us;if(r){if(s._sharedOptions){const h=i[0],f=typeof h.getRange=="function"&&h.getRange(e);if(f){const m=u(i,e,n-f),g=u(i,e,n+f);return{lo:m.lo,hi:g.hi}}}}else{const h=u(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:m}=t,g=m.slice(0,h.lo+1).reverse().findIndex(w=>!xe(w[f.axis]));h.lo-=Math.max(0,g);const y=m.slice(h.hi).findIndex(w=>!xe(w[f.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:i.length-1}}function Xd(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:u,data:h}=i[a],{lo:f,hi:m}=JL(i[a],e,o,s);for(let g=f;g<=m;++g){const y=h[g];y.skip||r(y,u,g)}}}function e5(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function uf(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Xd(t,n,e,function(a,l,u){!s&&!ml(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:u})},!0),i}function t5(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:f}=pM(o,{x:e.x,y:e.y});sE(f,u,h)&&s.push({element:o,datasetIndex:a,index:l})}return Xd(t,n,e,i),s}function n5(t,e,n,r,s,i){let o=[];const a=e5(n);let l=Number.POSITIVE_INFINITY;function u(h,f,m){const g=h.inRange(e.x,e.y,s);if(r&&!g)return;const y=h.getCenterPoint(s);if(!(!!i||t.isPointInArea(y))&&!g)return;const T=a(e,y);T<l?(o=[{element:h,datasetIndex:f,index:m}],l=T):T===l&&o.push({element:h,datasetIndex:f,index:m})}return Xd(t,n,e,u),o}function df(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?t5(t,e,n,s):n5(t,e,n,r,s,i)}function x_(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Xd(t,n,e,(l,u,h)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var r5={modes:{index(t,e,n,r){const s=Rs(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?uf(t,s,i,r,o):df(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,f=u.data[h];f&&!f.skip&&l.push({element:f,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,n,r){const s=Rs(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?uf(t,s,i,r,o):df(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const s=Rs(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return uf(t,s,i,r,o)},nearest(t,e,n,r){const s=Rs(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return df(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Rs(e,t);return x_(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Rs(e,t);return x_(t,s,"y",n.intersect,r)}}};const TE=["left","top","right","bottom"];function Xo(t,e){return t.filter(n=>n.pos===e)}function __(t,e){return t.filter(n=>TE.indexOf(n.pos)===-1&&n.box.axis===e)}function Zo(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function s5(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function i5(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!TE.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function o5(t,e){const n=i5(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=h?h*s:l&&e.availableHeight)}return n}function a5(t){const e=s5(t),n=Zo(e.filter(u=>u.box.fullSize),!0),r=Zo(Xo(e,"left"),!0),s=Zo(Xo(e,"right")),i=Zo(Xo(e,"top"),!0),o=Zo(Xo(e,"bottom")),a=__(e,"x"),l=__(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Xo(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function w_(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function SE(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function l5(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!ge(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&SE(o,i.getPadding());const a=Math.max(0,e.outerWidth-w_(o,t,"left","right")),l=Math.max(0,e.outerHeight-w_(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function c5(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function u5(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function pa(t,e,n,r){const s=[];let i,o,a,l,u,h;for(i=0,o=t.length,u=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,u5(a.horizontal,e));const{same:f,other:m}=l5(e,n,a,r);u|=f&&s.length,h=h||m,l.fullSize||s.push(a)}return u&&pa(s,e,n,r)||h}function jc(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function b_(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,u=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const f=e.w*h,m=u.size||l.height;hl(u.start)&&(o=u.start),l.fullSize?jc(l,s.left,o,n.outerWidth-s.right-s.left,m):jc(l,e.left+u.placed,o,f,m),u.start=o,u.placed+=f,o=l.bottom}else{const f=e.h*h,m=u.size||l.width;hl(u.start)&&(i=u.start),l.fullSize?jc(l,i,s.top,m,n.outerHeight-s.bottom-s.top):jc(l,i,e.top+u.placed,m,f),u.start=i,u.placed+=f,i=l.right}}e.x=i,e.y=o}var fn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=yn(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=a5(t.boxes),l=a.vertical,u=a.horizontal;be(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,T)=>T.box.options&&T.box.options.display===!1?w:w+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/h,hBoxMaxHeight:o/2}),m=Object.assign({},s);SE(m,yn(r));const g=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),y=o5(l.concat(u),f);pa(a.fullSize,g,f,y),pa(l,g,f,y),pa(u,g,f,y)&&pa(l,g,f,y),c5(g),b_(a.leftAndTop,g,f,y),g.x+=g.w,g.y+=g.h,b_(a.rightAndBottom,g,f,y),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},be(a.chartArea,w=>{const T=w.box;Object.assign(T,t.chartArea),T.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class IE{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class d5 extends IE{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const au="$chartjs",h5={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},k_=t=>t===null||t==="";function f5(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[au]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",k_(s)){const i=o_(t,"width");i!==void 0&&(t.width=i)}if(k_(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=o_(t,"height");i!==void 0&&(t.height=i)}return t}const CE=fL?{passive:!0}:!1;function m5(t,e,n){t&&t.addEventListener(e,n,CE)}function p5(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,CE)}function g5(t,e){const n=h5[t.type]||t.type,{x:r,y:s}=Rs(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function od(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function v5(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||od(a.addedNodes,r),o=o&&!od(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function y5(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||od(a.removedNodes,r),o=o&&!od(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const gl=new Map;let E_=0;function NE(){const t=window.devicePixelRatio;t!==E_&&(E_=t,gl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function x5(t,e){gl.size||window.addEventListener("resize",NE),gl.set(t,e)}function _5(t){gl.delete(t),gl.size||window.removeEventListener("resize",NE)}function w5(t,e,n){const r=t.canvas,s=r&&t0(r);if(!s)return;const i=lE((a,l)=>{const u=s.clientWidth;n(a,l),u<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||i(u,h)});return o.observe(s),x5(t,i),o}function hf(t,e,n){n&&n.disconnect(),e==="resize"&&_5(t)}function b5(t,e,n){const r=t.canvas,s=lE(i=>{t.ctx!==null&&n(g5(i,t))},t);return m5(r,e,s),s}class k5 extends IE{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(f5(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[au])return!1;const r=n[au].initial;["height","width"].forEach(i=>{const o=r[i];xe(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[au],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:v5,detach:y5,resize:w5}[n]||b5;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:hf,detach:hf,resize:hf}[n]||p5)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return hL(e,n,r,s)}isAttached(e){const n=e&&t0(e);return!!(n&&n.isConnected)}}function E5(t){return!e0()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?d5:k5}class Zn{constructor(){te(this,"x");te(this,"y");te(this,"active",!1);te(this,"options");te(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return fl(this.x)&&fl(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}te(Zn,"defaults",{}),te(Zn,"defaultRoutes");function T5(t,e){const n=t.options.ticks,r=S5(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?C5(e):[],o=i.length,a=i[0],l=i[o-1],u=[];if(o>s)return N5(e,u,i,o/s),u;const h=I5(i,e,s);if(o>0){let f,m;const g=o>1?Math.round((l-a)/(o-1)):null;for(Pc(e,u,h,xe(g)?0:a-g,a),f=0,m=o-1;f<m;f++)Pc(e,u,h,i[f],i[f+1]);return Pc(e,u,h,l,xe(g)?e.length:l+g),u}return Pc(e,u,h),u}function S5(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function I5(t,e,n){const r=A5(t),s=e.length/n;if(!r)return Math.max(s,1);const i=uM(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function C5(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function N5(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function Pc(t,e,n,r,s){const i=ue(r,0),o=Math.min(ue(s,t.length),t.length);let a=0,l,u,h;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),h=i;h<0;)a++,h=Math.round(i+a*n);for(u=Math.max(i,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(i+a*n))}function A5(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const j5=t=>t==="left"?"right":t==="right"?"left":t,T_=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,S_=(t,e)=>Math.min(e||t,t);function I_(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function P5(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(l-i,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(s-1))/2,l+=s<e?u:-u,l<i-a||l>o+a)))return l}function R5(t,e){be(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Jo(t){return t.drawTicks?t.tickLength:0}function C_(t,e){if(!t.display)return 0;const n=St(t.font,e),r=yn(t.padding);return(Xe(t.text)?t.text.length:1)*n.lineHeight+r.height}function D5(t,e){return di(t,{scale:e,type:"scale"})}function M5(t,e,n){return di(t,{tick:n,index:e,type:"tick"})}function L5(t,e,n){let r=Gg(t);return(n&&e!=="right"||!n&&e==="right")&&(r=j5(r)),r}function O5(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let f=0,m,g,y;const w=o-s,T=a-i;if(t.isHorizontal()){if(g=wt(r,i,a),ge(n)){const _=Object.keys(n)[0],k=n[_];y=h[_].getPixelForValue(k)+w-e}else n==="center"?y=(u.bottom+u.top)/2+w-e:y=T_(t,n,e);m=a-i}else{if(ge(n)){const _=Object.keys(n)[0],k=n[_];g=h[_].getPixelForValue(k)-T+e}else n==="center"?g=(u.left+u.right)/2-T+e:g=T_(t,n,e);y=wt(r,o,s),f=n==="left"?-Sn:Sn}return{titleX:g,titleY:y,maxWidth:m,rotation:f}}class Co extends Zn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Ln(e,Number.POSITIVE_INFINITY),n=Ln(n,Number.NEGATIVE_INFINITY),r=Ln(r,Number.POSITIVE_INFINITY),s=Ln(s,Number.NEGATIVE_INFINITY),{min:Ln(e,r),max:Ln(n,s),minDefined:vn(e),maxDefined:vn(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Ln(n,Ln(r,n)),max:Ln(r,Ln(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ae(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=$M(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?I_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=T5(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ae(this.options.afterUpdate,[this])}beforeSetDimensions(){Ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Ae(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=S_(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),f=h.widest.width,m=h.highest.height,g=tn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),f+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-Jo(e.grid)-n.padding-C_(e.title,this.chart.options.font),u=Math.sqrt(f*f+m*m),o=mM(Math.min(Math.asin(tn((h.highest.height+6)/a,-1,1)),Math.asin(tn(l/u,-1,1))-Math.asin(tn(m/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=C_(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Jo(i)+l):(e.height=this.maxHeight,e.width=Jo(i)+l),r.display&&this.ticks.length){const{first:u,last:h,widest:f,highest:m}=this._getLabelSizes(),g=r.padding*2,y=Bs(this.labelRotation),w=Math.cos(y),T=Math.sin(y);if(a){const _=r.mirror?0:T*f.width+w*m.height;e.height=Math.min(this.maxHeight,e.height+_+g)}else{const _=r.mirror?0:w*f.width+T*m.height;e.width=Math.min(this.maxWidth,e.width+_+g)}this._calculatePadding(u,h,T,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,g=0;l?u?(m=s*e.width,g=r*n.height):(m=r*e.height,g=s*n.width):i==="start"?g=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,g=n.width/2),this.paddingLeft=Math.max((m-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-f+o)*this.width/(this.width-f),0)}else{let h=n.height/2,f=e.height/2;i==="start"?(h=0,f=e.height):i==="end"&&(h=n.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)xe(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=I_(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/S_(n,r));let u=0,h=0,f,m,g,y,w,T,_,k,b,C,A;for(f=0;f<n;f+=l){if(y=e[f].label,w=this._resolveTickFontOptions(f),s.font=T=w.string,_=i[T]=i[T]||{data:{},gc:[]},k=w.lineHeight,b=C=0,!xe(y)&&!Xe(y))b=t_(s,_.data,_.gc,b,y),C=k;else if(Xe(y))for(m=0,g=y.length;m<g;++m)A=y[m],!xe(A)&&!Xe(A)&&(b=t_(s,_.data,_.gc,b,A),C+=k);o.push(b),a.push(C),u=Math.max(b,u),h=Math.max(C,h)}R5(i,n);const D=o.indexOf(u),E=a.indexOf(h),x=I=>({width:o[I]||0,height:a[I]||0});return{first:x(0),last:x(n-1),widest:x(D),highest:x(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return vM(this._alignToPixels?Cs(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=M5(this.getContext(),e,r))}return this.$context||(this.$context=D5(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Bs(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,u=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=Jo(i),g=[],y=a.setContext(this.getContext()),w=y.display?y.width:0,T=w/2,_=function(ae){return Cs(r,ae,w)};let k,b,C,A,D,E,x,I,N,j,R,P;if(o==="top")k=_(this.bottom),E=this.bottom-m,I=k-T,j=_(e.top)+T,P=e.bottom;else if(o==="bottom")k=_(this.top),j=e.top,P=_(e.bottom)-T,E=k+T,I=this.top+m;else if(o==="left")k=_(this.right),D=this.right-m,x=k-T,N=_(e.left)+T,R=e.right;else if(o==="right")k=_(this.left),N=e.left,R=_(e.right)-T,D=k+T,x=this.left+m;else if(n==="x"){if(o==="center")k=_((e.top+e.bottom)/2+.5);else if(ge(o)){const ae=Object.keys(o)[0],de=o[ae];k=_(this.chart.scales[ae].getPixelForValue(de))}j=e.top,P=e.bottom,E=k+T,I=E+m}else if(n==="y"){if(o==="center")k=_((e.left+e.right)/2);else if(ge(o)){const ae=Object.keys(o)[0],de=o[ae];k=_(this.chart.scales[ae].getPixelForValue(de))}D=k-T,x=D-m,N=e.left,R=e.right}const fe=ue(s.ticks.maxTicksLimit,f),se=Math.max(1,Math.ceil(f/fe));for(b=0;b<f;b+=se){const ae=this.getContext(b),de=i.setContext(ae),U=a.setContext(ae),Y=de.lineWidth,L=de.color,H=U.dash||[],Q=U.dashOffset,Z=de.tickWidth,Ie=de.tickColor,Be=de.tickBorderDash||[],He=de.tickBorderDashOffset;C=P5(this,b,l),C!==void 0&&(A=Cs(r,C,Y),u?D=x=N=R=A:E=I=j=P=A,g.push({tx1:D,ty1:E,tx2:x,ty2:I,x1:N,y1:j,x2:R,y2:P,width:Y,color:L,borderDash:H,borderDashOffset:Q,tickWidth:Z,tickColor:Ie,tickBorderDash:Be,tickBorderDashOffset:He}))}return this._ticksLength=f,this._borderValue=k,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:f}=i,m=Jo(r.grid),g=m+h,y=f?-h:g,w=-Bs(this.labelRotation),T=[];let _,k,b,C,A,D,E,x,I,N,j,R,P="middle";if(s==="top")D=this.bottom-y,E=this._getXAxisLabelAlignment();else if(s==="bottom")D=this.top+y,E=this._getXAxisLabelAlignment();else if(s==="left"){const se=this._getYAxisLabelAlignment(m);E=se.textAlign,A=se.x}else if(s==="right"){const se=this._getYAxisLabelAlignment(m);E=se.textAlign,A=se.x}else if(n==="x"){if(s==="center")D=(e.top+e.bottom)/2+g;else if(ge(s)){const se=Object.keys(s)[0],ae=s[se];D=this.chart.scales[se].getPixelForValue(ae)+g}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")A=(e.left+e.right)/2-g;else if(ge(s)){const se=Object.keys(s)[0],ae=s[se];A=this.chart.scales[se].getPixelForValue(ae)}E=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const fe=this._getLabelSizes();for(_=0,k=a.length;_<k;++_){b=a[_],C=b.label;const se=i.setContext(this.getContext(_));x=this.getPixelForTick(_)+i.labelOffset,I=this._resolveTickFontOptions(_),N=I.lineHeight,j=Xe(C)?C.length:1;const ae=j/2,de=se.color,U=se.textStrokeColor,Y=se.textStrokeWidth;let L=E;o?(A=x,E==="inner"&&(_===k-1?L=this.options.reverse?"left":"right":_===0?L=this.options.reverse?"right":"left":L="center"),s==="top"?u==="near"||w!==0?R=-j*N+N/2:u==="center"?R=-fe.highest.height/2-ae*N+N:R=-fe.highest.height+N/2:u==="near"||w!==0?R=N/2:u==="center"?R=fe.highest.height/2-ae*N:R=fe.highest.height-j*N,f&&(R*=-1),w!==0&&!se.showLabelBackdrop&&(A+=N/2*Math.sin(w))):(D=x,R=(1-j)*N/2);let H;if(se.showLabelBackdrop){const Q=yn(se.backdropPadding),Z=fe.heights[_],Ie=fe.widths[_];let Be=R-Q.top,He=0-Q.left;switch(P){case"middle":Be-=Z/2;break;case"bottom":Be-=Z;break}switch(E){case"center":He-=Ie/2;break;case"right":He-=Ie;break;case"inner":_===k-1?He-=Ie:_>0&&(He-=Ie/2);break}H={left:He,top:Be,width:Ie+Q.width,height:Z+Q.height,color:se.backdropColor}}T.push({label:C,font:I,textOffset:R,options:{rotation:w,color:de,strokeColor:U,strokeWidth:Y,textAlign:L,textBaseline:P,translation:[A,D],backdrop:H}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Bs(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let u,h;return n==="left"?s?(h=this.right+i,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?s?(h=this.left+i,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,u,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,f,m;this.isHorizontal()?(u=Cs(e,this.left,o)-o/2,h=Cs(e,this.right,a)+a/2,f=m=l):(f=Cs(e,this.top,o)-o/2,m=Cs(e,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,f),n.lineTo(h,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Yg(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,u=o.label,h=o.textOffset;pl(r,u,0,h,l,a)}s&&Qg(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=St(r.font),o=yn(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||ge(n)?(l+=o.bottom,Xe(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:f,rotation:m}=O5(this,l,n,a);pl(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:m,textAlign:L5(a,n,s),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ue(e.grid&&e.grid.z,-1),s=ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Co.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return St(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Rc{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;B5(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,V5(e,o,r),this.override&&$e.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in $e[s]&&(delete $e[s][r],this.override&&delete ri[r])}}function V5(t,e,n){const r=dl(Object.create(null),[n?$e.get(n):{},$e.get(e),t.defaults]);$e.set(e,r),t.defaultRoutes&&F5(e,t.defaultRoutes),t.descriptors&&$e.describe(e,t.descriptors)}function F5(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");$e.route(i,s,l,a)})}function B5(t){return"id"in t&&"defaults"in t}class z5{constructor(){this.controllers=new Rc(Qi,"datasets",!0),this.elements=new Rc(Zn,"elements"),this.plugins=new Rc(Object,"plugins"),this.scales=new Rc(Co,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):be(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Hg(e);Ae(r["before"+s],[],r),n[e](r),Ae(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Fn=new z5;class U5{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Ae(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){xe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=ue(r.options&&r.options.plugins,{}),i=W5(r);return s===!1&&!n?[]:H5(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function W5(t){const e={},n=[],r=Object.keys(Fn.plugins.items);for(let i=0;i<r.length;i++)n.push(Fn.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function $5(t,e){return!e&&t===!1?null:t===!0?{}:t}function H5(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,u=$5(r[l],s);u!==null&&i.push({plugin:a,options:q5(t.config,{plugin:a,local:n[l]},u,o)})}return i}function q5(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zm(t,e){const n=$e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function G5(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function K5(t,e){return t===e?"_index_":"_value_"}function N_(t){if(t==="x"||t==="y"||t==="r")return t}function Y5(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Um(t,...e){if(N_(t))return t;for(const n of e){const r=n.axis||Y5(n.position)||t.length>1&&N_(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function A_(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Q5(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return A_(t,"x",n[0])||A_(t,"y",n[0])}return{}}function X5(t,e){const n=ri[t.type]||{scales:{}},r=e.scales||{},s=zm(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ge(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Um(o,a,Q5(o,t),$e.scales[a.type]),u=K5(l,s),h=n.scales||{};i[o]=Ra(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||zm(a,e),h=(ri[a]||{}).scales||{};Object.keys(h).forEach(f=>{const m=G5(f,l),g=o[m+"AxisID"]||m;i[g]=i[g]||Object.create(null),Ra(i[g],[{axis:m},r[g],h[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];Ra(a,[$e.scales[a.type],$e.scale])}),i}function AE(t){const e=t.options||(t.options={});e.plugins=ue(e.plugins,{}),e.scales=X5(t,e)}function jE(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Z5(t){return t=t||{},t.data=jE(t.data),AE(t),t}const j_=new Map,PE=new Set;function Dc(t,e){let n=j_.get(t);return n||(n=e(),j_.set(t,n),PE.add(n)),n}const ea=(t,e,n)=>{const r=mo(e,n);r!==void 0&&t.add(r)};class J5{constructor(e){this._config=Z5(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=jE(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),AE(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Dc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Dc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Dc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Dc(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(f=>ea(l,e,f))),h.forEach(f=>ea(l,s,f)),h.forEach(f=>ea(l,ri[i]||{},f)),h.forEach(f=>ea(l,$e,f)),h.forEach(f=>ea(l,Fm,f))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),PE.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,ri[n]||{},$e.datasets[n]||{},{type:n},$e,Fm]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=P_(this._resolverCache,e,s);let l=o;if(t6(o,n)){i.$shared=!1,r=gs(r)?r():r;const u=this.createResolver(e,r,a);l=po(o,r,u)}for(const u of n)i[u]=l[u];return i}createResolver(e,n,r=[""],s){const{resolver:i}=P_(this._resolverCache,e,r);return ge(n)?po(i,n,void 0,s):i}}function P_(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Xg(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const e6=t=>ge(t)&&Object.getOwnPropertyNames(t).some(e=>gs(t[e]));function t6(t,e){const{isScriptable:n,isIndexable:r}=mE(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(gs(a)||e6(a))||o&&Xe(a))return!0}return!1}var n6="4.4.9";const r6=["top","bottom","left","right","chartArea"];function R_(t,e){return t==="top"||t==="bottom"||r6.indexOf(t)===-1&&e==="x"}function D_(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function M_(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ae(n&&n.onComplete,[t],e)}function s6(t){const e=t.chart,n=e.options.animation;Ae(n&&n.onProgress,[t],e)}function RE(t){return e0()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const lu={},L_=t=>{const e=RE(t);return Object.values(lu).filter(n=>n.canvas===e).pop()};function i6(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function o6(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Pr;let Ol=(Pr=class{static register(...e){Fn.add(...e),O_()}static unregister(...e){Fn.remove(...e),O_()}constructor(e,n){const r=this.config=new J5(n),s=RE(e),i=L_(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||E5(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=tM(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new U5,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=wM(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],lu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}rr.listen(this,"complete",M_),rr.listen(this,"progress",s6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return xe(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():i_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return n_(this.canvas,this.ctx),this}stop(){return rr.stop(this),this}resize(e,n){rr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,i_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ae(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};be(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Um(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),be(i,o=>{const a=o.options,l=a.id,u=Um(l,a),h=ue(a.type,o.dtype);(a.position===void 0||R_(a.position,u)!==R_(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===h)f=r[l];else{const m=Fn.getScale(h);f=new m({id:l,type:h,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),be(s,(o,a)=>{o||delete r[a]}),be(r,o=>{fn.configure(this,o,o.options),fn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(D_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||zm(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Fn.getController(a),{datasetElementType:u,dataElementType:h}=$e.datasets[a];Object.assign(l,{dataElementType:Fn.getElement(h),datasetElementType:u&&Fn.getElement(u)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){be(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:f}=this.getDatasetMeta(u),m=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||be(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(D_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){be(this.scales,e=>{fn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!qx(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;i6(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!qx(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],be(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,gs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(rr.has(this)?this.attached&&!rr.running(this)&&rr.start(this):(this.draw(),M_({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=IL(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Yg(n,s),e.controller.draw(),s&&Qg(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return ml(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=r5.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=di(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);hl(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),rr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),n_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete lu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};be(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},s=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},i=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){be(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},be(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!td(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,u)=>l.filter(h=>!u.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=aM(e),u=o6(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Ae(i.onHover,[e,a,this],this),l&&Ae(i.onClick,[e,a,this],this));const h=!td(a,s);return(h||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=u,h}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},te(Pr,"defaults",$e),te(Pr,"instances",lu),te(Pr,"overrides",ri),te(Pr,"registry",Fn),te(Pr,"version",n6),te(Pr,"getChart",L_),Pr);function O_(){return be(Ol.instances,t=>t._plugins.invalidate())}function DE(t,e,n=e){t.lineCap=ue(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ue(n.borderDash,e.borderDash)),t.lineDashOffset=ue(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ue(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ue(n.borderWidth,e.borderWidth),t.strokeStyle=ue(n.borderColor,e.borderColor)}function a6(t,e,n){t.lineTo(n.x,n.y)}function l6(t){return t.stepped?MM:t.tension||t.cubicInterpolationMode==="monotone"?LM:a6}function ME(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),u=Math.min(i,a),h=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:u<l&&!h?r+u-l:u-l}}function c6(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:u}=ME(s,n,r),h=l6(i);let{move:f=!0,reverse:m}=r||{},g,y,w;for(g=0;g<=u;++g)y=s[(a+(m?u-g:g))%o],!y.skip&&(f?(t.moveTo(y.x,y.y),f=!1):h(t,w,y,m,i.stepped),w=y);return l&&(y=s[(a+(m?u:0))%o],h(t,w,y,m,i.stepped)),!!l}function u6(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=ME(s,n,r),{move:l=!0,reverse:u}=r||{};let h=0,f=0,m,g,y,w,T,_;const k=C=>(o+(u?a-C:C))%i,b=()=>{w!==T&&(t.lineTo(h,T),t.lineTo(h,w),t.lineTo(h,_))};for(l&&(g=s[k(0)],t.moveTo(g.x,g.y)),m=0;m<=a;++m){if(g=s[k(m)],g.skip)continue;const C=g.x,A=g.y,D=C|0;D===y?(A<w?w=A:A>T&&(T=A),h=(f*h+C)/++f):(b(),t.lineTo(C,A),y=D,f=0,w=T=A),_=A}b()}function Wm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?u6:c6}function d6(t){return t.stepped?mL:t.tension||t.cubicInterpolationMode==="monotone"?pL:Ds}function h6(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),DE(t,e.options),t.stroke(s)}function f6(t,e,n,r){const{segments:s,options:i}=e,o=Wm(e);for(const a of s)DE(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const m6=typeof Path2D=="function";function p6(t,e,n,r){m6&&!e.options.segment?h6(t,e,n,r):f6(t,e,n,r)}class ga extends Zn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;oL(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=kL(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=_L(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=d6(r);let u,h;for(u=0,h=o.length;u<h;++u){const{start:f,end:m}=o[u],g=i[f],y=i[m];if(g===y){a.push(g);continue}const w=Math.abs((s-g[n])/(y[n]-g[n])),T=l(g,y,w,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Wm(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=Wm(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),p6(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}te(ga,"id","line"),te(ga,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),te(ga,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),te(ga,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function V_(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class cu extends Zn{constructor(n){super();te(this,"parsed");te(this,"skip");te(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return V_(this,n,"x",r)}inYRange(n,r){return V_(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!ml(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Bm(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}te(cu,"id","point"),te(cu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),te(cu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function LE(t,e){const{x:n,y:r,base:s,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,u,h,f;return t.horizontal?(f=o/2,a=Math.min(n,s),l=Math.max(n,s),u=r-f,h=r+f):(f=i/2,a=n-f,l=n+f,u=Math.min(r,s),h=Math.max(r,s)),{left:a,top:u,right:l,bottom:h}}function Gr(t,e,n,r){return t?0:tn(e,n,r)}function g6(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=fE(r);return{t:Gr(s.top,i.top,0,n),r:Gr(s.right,i.right,0,e),b:Gr(s.bottom,i.bottom,0,n),l:Gr(s.left,i.left,0,e)}}function v6(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=Ki(s),o=Math.min(e,n),a=t.borderSkipped,l=r||ge(s);return{topLeft:Gr(!l||a.top||a.left,i.topLeft,0,o),topRight:Gr(!l||a.top||a.right,i.topRight,0,o),bottomLeft:Gr(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:Gr(!l||a.bottom||a.right,i.bottomRight,0,o)}}function y6(t){const e=LE(t),n=e.right-e.left,r=e.bottom-e.top,s=g6(t,n/2,r/2),i=v6(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function ff(t,e,n,r){const s=e===null,i=n===null,a=t&&!(s&&i)&&LE(t,r);return a&&(s||zs(e,a.left,a.right))&&(i||zs(n,a.top,a.bottom))}function x6(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function _6(t,e){t.rect(e.x,e.y,e.w,e.h)}function mf(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+o,radius:t.radius}}class uu extends Zn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=y6(this),a=x6(o.radius)?sd:_6;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,mf(o,n,i)),e.clip(),a(e,mf(i,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,mf(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return ff(this,e,n,r)}inXRange(e,n){return ff(this,e,null,n)}inYRange(e,n){return ff(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}te(uu,"id","bar"),te(uu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),te(uu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const F_=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},w6=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class B_ extends Zn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ae(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=St(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=F_(r,i);let u,h;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,i,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,s,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let m=-1,g=-h;return this.legendItems.forEach((y,w)=>{const T=r+n/2+i.measureText(y.text).width;(w===0||u[u.length-1]+T+2*a>o)&&(f+=h,u[u.length-(w>0?0:1)]=0,g+=h,m++),l[w]={left:0,top:g,row:m,width:T,height:s},u[u.length-1]+=T+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let f=a,m=0,g=0,y=0,w=0;return this.legendItems.forEach((T,_)=>{const{itemWidth:k,itemHeight:b}=b6(r,n,i,T,s);_>0&&g+b+2*a>h&&(f+=m+a,u.push({width:m,height:g}),y+=m+a,w++,m=g=0),l[_]={left:y,top:g,col:w,width:k,height:b},m=Math.max(m,k),g+=b+a}),f+=m,u.push({width:m,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Yi(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=wt(r,this.left+s,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=wt(r,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+s}else{let a=0,l=wt(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=wt(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Yg(e,this),this._draw(),Qg(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=$e.color,l=Yi(e.rtl,this.left,this.width),u=St(o.font),{padding:h}=o,f=u.size,m=f/2;let g;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:y,boxHeight:w,itemHeight:T}=F_(o,f),_=function(D,E,x){if(isNaN(y)||y<=0||isNaN(w)||w<0)return;s.save();const I=ue(x.lineWidth,1);if(s.fillStyle=ue(x.fillStyle,a),s.lineCap=ue(x.lineCap,"butt"),s.lineDashOffset=ue(x.lineDashOffset,0),s.lineJoin=ue(x.lineJoin,"miter"),s.lineWidth=I,s.strokeStyle=ue(x.strokeStyle,a),s.setLineDash(ue(x.lineDash,[])),o.usePointStyle){const N={radius:w*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:I},j=l.xPlus(D,y/2),R=E+m;dE(s,N,j,R,o.pointStyleWidth&&y)}else{const N=E+Math.max((f-w)/2,0),j=l.leftForLtr(D,y),R=Ki(x.borderRadius);s.beginPath(),Object.values(R).some(P=>P!==0)?sd(s,{x:j,y:N,w:y,h:w,radius:R}):s.rect(j,N,y,w),s.fill(),I!==0&&s.stroke()}s.restore()},k=function(D,E,x){pl(s,x.text,D,E+T/2,u,{strikethrough:x.hidden,textAlign:l.textAlign(x.textAlign)})},b=this.isHorizontal(),C=this._computeTitleHeight();b?g={x:wt(i,this.left+h,this.right-r[0]),y:this.top+h+C,line:0}:g={x:this.left+h,y:wt(i,this.top+C+h,this.bottom-n[0].height),line:0},xE(this.ctx,e.textDirection);const A=T+h;this.legendItems.forEach((D,E)=>{s.strokeStyle=D.fontColor,s.fillStyle=D.fontColor;const x=s.measureText(D.text).width,I=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),N=y+m+x;let j=g.x,R=g.y;l.setWidth(this.width),b?E>0&&j+N+h>this.right&&(R=g.y+=A,g.line++,j=g.x=wt(i,this.left+h,this.right-r[g.line])):E>0&&R+A>this.bottom&&(j=g.x=j+n[g.line].width+h,g.line++,R=g.y=wt(i,this.top+C+h,this.bottom-n[g.line].height));const P=l.x(j);if(_(P,R,D),j=bM(I,j+y+m,b?j+N:this.right,e.rtl),k(l.x(j),R,D),b)g.x+=N+h;else if(typeof D.text!="string"){const fe=u.lineHeight;g.y+=OE(D,fe)+h}else g.y+=A}),_E(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=St(n.font),s=yn(n.padding);if(!n.display)return;const i=Yi(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,u=s.top+l;let h,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+u,f=wt(e.align,f,this.right-m);else{const y=this.columnSizes.reduce((w,T)=>Math.max(w,T.height),0);h=u+wt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const g=wt(a,f,f+m);o.textAlign=i.textAlign(Gg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,pl(o,n.text,g,h,r)}_computeTitleHeight(){const e=this.options.title,n=St(e.font),r=yn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(zs(e,this.left,this.right)&&zs(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],zs(e,s.left,s.left+s.width)&&zs(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!T6(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=w6(s,r);s&&!i&&Ae(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Ae(n.onHover,[e,r,this],this)}else r&&Ae(n.onClick,[e,r,this],this)}}function b6(t,e,n,r,s){const i=k6(r,t,e,n),o=E6(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function k6(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function E6(t,e,n){let r=t;return typeof e.text!="string"&&(r=OE(e,n)),r}function OE(t,e){const n=t.text?t.text.length:0;return e*n}function T6(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var VE={id:"legend",_element:B_,start(t,e,n){const r=t.legend=new B_({ctx:t.ctx,options:n,chart:t});fn.configure(t,r,n),fn.addBox(t,r)},stop(t){fn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;fn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=yn(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class FE extends Zn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Xe(r.text)?r.text.length:1;this._padding=yn(r.padding);const i=s*St(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,u,h,f;return this.isHorizontal()?(h=wt(a,r,i),f=n+e,u=i-r):(o.position==="left"?(h=r+e,f=wt(a,s,n),l=it*-.5):(h=i-e,f=wt(a,n,s),l=it*.5),u=s-n),{titleX:h,titleY:f,maxWidth:u,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=St(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(i);pl(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:u,textAlign:Gg(n.align),textBaseline:"middle",translation:[o,a]})}}function S6(t,e){const n=new FE({ctx:t.ctx,options:e,chart:t});fn.configure(t,n,e),fn.addBox(t,n),t.titleBlock=n}var BE={id:"title",_element:FE,start(t,e,n){S6(t,n)},stop(t){const e=t.titleBlock;fn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;fn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const va={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=Vm(e,u);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function On(t,e){return e&&(Xe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function sr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function I6(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function z_(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=St(e.bodyFont),u=St(e.titleFont),h=St(e.footerFont),f=i.length,m=s.length,g=r.length,y=yn(e.padding);let w=y.height,T=0,_=r.reduce((C,A)=>C+A.before.length+A.lines.length+A.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,f&&(w+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),_){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=g*C+(_-g)*l.lineHeight+(_-1)*e.bodySpacing}m&&(w+=e.footerMarginTop+m*h.lineHeight+(m-1)*e.footerSpacing);let k=0;const b=function(C){T=Math.max(T,n.measureText(C).width+k)};return n.save(),n.font=u.string,be(t.title,b),n.font=l.string,be(t.beforeBody.concat(t.afterBody),b),k=e.displayColors?o+2+e.boxPadding:0,be(r,C=>{be(C.before,b),be(C.lines,b),be(C.after,b)}),k=0,n.font=h.string,be(t.footer,b),n.restore(),T+=y.width,{width:T,height:w}}function C6(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function N6(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function A6(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return r==="center"?u=s<=(a+l)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),N6(u,t,e,n)&&(u="center"),u}function U_(t,e,n){const r=n.yAlign||e.yAlign||C6(t,n);return{xAlign:n.xAlign||e.xAlign||A6(t,e,n,r),yAlign:r}}function j6(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function P6(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function W_(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=s+i,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:g}=Ki(o);let y=j6(e,a);const w=P6(e,l,u);return l==="center"?a==="left"?y+=u:a==="right"&&(y-=u):a==="left"?y-=Math.max(h,m)+s:a==="right"&&(y+=Math.max(f,g)+s),{x:tn(y,0,r.width-e.width),y:tn(w,0,r.height-e.height)}}function Mc(t,e,n){const r=yn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function $_(t){return On([],sr(t))}function R6(t,e,n){return di(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function H_(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const zE={beforeTitle:nr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:nr,beforeBody:nr,beforeLabel:nr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return xe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:nr,afterBody:nr,beforeFooter:nr,footer:nr,afterFooter:nr};function Vt(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?zE[e].call(n,r):s}class $m extends Zn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new bE(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=R6(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Vt(r,"beforeTitle",this,e),i=Vt(r,"title",this,e),o=Vt(r,"afterTitle",this,e);let a=[];return a=On(a,sr(s)),a=On(a,sr(i)),a=On(a,sr(o)),a}getBeforeBody(e,n){return $_(Vt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return be(e,i=>{const o={before:[],lines:[],after:[]},a=H_(r,i);On(o.before,sr(Vt(a,"beforeLabel",this,i))),On(o.lines,Vt(a,"label",this,i)),On(o.after,sr(Vt(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return $_(Vt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Vt(r,"beforeFooter",this,e),i=Vt(r,"footer",this,e),o=Vt(r,"afterFooter",this,e);let a=[];return a=On(a,sr(s)),a=On(a,sr(i)),a=On(a,sr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(I6(this.chart,n[l]));return e.filter&&(a=a.filter((h,f,m)=>e.filter(h,f,m,r))),e.itemSort&&(a=a.sort((h,f)=>e.itemSort(h,f,r))),be(a,h=>{const f=H_(e.callbacks,h);s.push(Vt(f,"labelColor",this,h)),i.push(Vt(f,"labelPointStyle",this,h)),o.push(Vt(f,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=va[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=z_(this,r),u=Object.assign({},a,l),h=U_(this.chart,r,u),f=W_(r,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:f}=Ki(a),{x:m,y:g}=e,{width:y,height:w}=n;let T,_,k,b,C,A;return i==="center"?(C=g+w/2,s==="left"?(T=m,_=T-o,b=C+o,A=C-o):(T=m+y,_=T+o,b=C-o,A=C+o),k=T):(s==="left"?_=m+Math.max(l,h)+o:s==="right"?_=m+y-Math.max(u,f)-o:_=this.caretX,i==="top"?(b=g,C=b-o,T=_-o,k=_+o):(b=g+w,C=b+o,T=_+o,k=_-o),A=b),{x1:T,x2:_,x3:k,y1:b,y2:C,y3:A}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const u=Yi(r.rtl,this.x,this.width);for(e.x=Mc(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=St(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=i,h=St(i.bodyFont),f=Mc(this,"left",i),m=s.x(f),g=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+g;if(i.usePointStyle){const w={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=s.leftForLtr(m,u)+u/2,_=y+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Bm(e,w,T,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Bm(e,w,T,_)}else{e.lineWidth=ge(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=s.leftForLtr(m,u),T=s.leftForLtr(s.xPlus(m,1),u-2),_=Ki(o.borderRadius);Object.values(_).some(k=>k!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,sd(e,{x:w,y,w:u,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),sd(e,{x:T,y:y+1,w:u-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(w,y,u,l),e.strokeRect(w,y,u,l),e.fillStyle=o.backgroundColor,e.fillRect(T,y+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=r,f=St(r.bodyFont);let m=f.lineHeight,g=0;const y=Yi(r.rtl,this.x,this.width),w=function(x){n.fillText(x,y.x(e.x+g),e.y+m/2),e.y+=m+i},T=y.textAlign(o);let _,k,b,C,A,D,E;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Mc(this,T,r),n.fillStyle=r.bodyColor,be(this.beforeBody,w),g=a&&T!=="right"?o==="center"?u/2+h:u+2+h:0,C=0,D=s.length;C<D;++C){for(_=s[C],k=this.labelTextColors[C],n.fillStyle=k,be(_.before,w),b=_.lines,a&&b.length&&(this._drawColorBox(n,e,C,y,r),m=Math.max(f.lineHeight,l)),A=0,E=b.length;A<E;++A)w(b[A]),m=f.lineHeight;be(_.after,w)}g=0,m=f.lineHeight,be(this.afterBody,w),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Yi(r.rtl,this.x,this.width);for(e.x=Mc(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=St(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=r,{topLeft:f,topRight:m,bottomLeft:g,bottomRight:y}=Ki(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+u-m,l),n.quadraticCurveTo(a+u,l,a+u,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+u,l+h-y),n.quadraticCurveTo(a+u,l+h,a+u-y,l+h),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=va[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=z_(this,e),l=Object.assign({},o,this._size),u=U_(n,e,l),h=W_(e,l,u,n);(s._to!==h.x||i._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=yn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),xE(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),_E(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),i=!td(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!td(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=va[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}te($m,"positioners",va);var UE={id:"tooltip",_element:$m,positioners:va,afterInit(t,e,n){n&&(t.tooltip=new $m({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:zE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const D6=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function M6(t,e,n,r){const s=t.indexOf(e);if(s===-1)return D6(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const L6=(t,e)=>t===null?null:tn(Math.round(t),0,e);function q_(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ad extends Co{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(xe(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:M6(r,e,ue(n,e),this._addedLabels),L6(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return q_.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}te(ad,"id","category"),te(ad,"defaults",{ticks:{callback:q_}});function O6(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:f,includeBounds:m}=t,g=i||1,y=h-1,{min:w,max:T}=e,_=!xe(o),k=!xe(a),b=!xe(u),C=(T-w)/(f+1);let A=Kx((T-w)/y/g)*g,D,E,x,I;if(A<1e-14&&!_&&!k)return[{value:w},{value:T}];I=Math.ceil(T/A)-Math.floor(w/A),I>y&&(A=Kx(I*A/y/g)*g),xe(l)||(D=Math.pow(10,l),A=Math.ceil(A*D)/D),s==="ticks"?(E=Math.floor(w/A)*A,x=Math.ceil(T/A)*A):(E=w,x=T),_&&k&&i&&hM((a-o)/i,A/1e3)?(I=Math.round(Math.min((a-o)/A,h)),A=(a-o)/I,E=o,x=a):b?(E=_?o:E,x=k?a:x,I=u-1,A=(x-E)/I):(I=(x-E)/A,Da(I,Math.round(I),A/1e3)?I=Math.round(I):I=Math.ceil(I));const N=Math.max(Yx(A),Yx(E));D=Math.pow(10,xe(l)?N:l),E=Math.round(E*D)/D,x=Math.round(x*D)/D;let j=0;for(_&&(m&&E!==o?(n.push({value:o}),E<o&&j++,Da(Math.round((E+j*A)*D)/D,o,G_(o,C,t))&&j++):E<o&&j++);j<I;++j){const R=Math.round((E+j*A)*D)/D;if(k&&R>a)break;n.push({value:R})}return k&&m&&x!==a?n.length&&Da(n[n.length-1].value,a,G_(a,C,t))?n[n.length-1].value=a:n.push({value:a}):(!k||x===a)&&n.push({value:x}),n}function G_(t,e,{horizontal:n,minRotation:r}){const s=Bs(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class V6 extends Co{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return xe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Yn(s),u=Yn(i);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=O6(s,i);return e.bounds==="ticks"&&fM(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return cE(e,this.chart.options.locale,this.options.ticks.format)}}class ld extends V6{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=vn(e)?e:0,this.max=vn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Bs(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}te(ld,"id","linear"),te(ld,"defaults",{ticks:{callback:uE.formatters.numeric}});const Zd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ut=Object.keys(Zd);function K_(t,e){return t-e}function Y_(t,e){if(xe(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),vn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(fl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function Q_(t,e,n,r){const s=Ut.length;for(let i=Ut.indexOf(t);i<s-1;++i){const o=Zd[Ut[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Ut[i]}return Ut[s-1]}function F6(t,e,n,r,s){for(let i=Ut.length-1;i>=Ut.indexOf(n);i--){const o=Ut[i];if(Zd[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Ut[n?Ut.indexOf(n):0]}function B6(t){for(let e=Ut.indexOf(t)+1,n=Ut.length;e<n;++e)if(Zd[Ut[e]].common)return Ut[e]}function X_(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=qg(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function z6(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Z_(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:z6(t,r,s,n)}class cd extends Co{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new ZL._date(e.adapters.date);s.init(n),Ra(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Y_(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=vn(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=vn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=xM(s,i,o);return this._unit=n.unit||(r.autoSkip?Q_(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):F6(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:B6(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Z_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=tn(n,0,o),r=tn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||Q_(i.minUnit,n,r,this._getLabelCapacity(n)),a=ue(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,u=fl(l)||l===!0,h={};let f=n,m,g;if(u&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,u?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=s.ticks.source==="data"&&this.getDataTimestamps();for(m=f,g=0;m<r;m=+e.add(m,a,o),g++)X_(h,m,y);return(m===r||s.bounds==="ticks"||g===1)&&X_(h,m,y),Object.keys(h).sort(K_).map(w=>+w)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Ae(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],f=u&&a[u],m=r[n],g=u&&f&&m&&m.major;return this._adapter.format(e,s||(g?f:h))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Bs(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,Z_(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Y_(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return oE(e.sort(K_))}}te(cd,"id","time"),te(cd,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Lc(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Us(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Us(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const u=o-i;return u?a+(l-a)*(e-i)/u:a}class J_ extends cd{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Lc(n,this.min),this._tableRange=Lc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],u=s[o],Math.round((h+l)/2)!==u&&i.push({time:u,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Lc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Lc(this._table,r*this._tableRange+this._minPos,!0)}}te(J_,"id","timeseries"),te(J_,"defaults",cd.defaults);const WE="label";function e1(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function U6(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function $E(t,e){t.labels=e}function HE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:WE;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function W6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:WE;const n={labels:[],datasets:[]};return $E(n,t.labels),HE(n,t.datasets,e),n}function $6(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:f,...m}=t,g=W.useRef(null),y=W.useRef(null),w=()=>{g.current&&(y.current=new Ol(g.current,{type:o,data:W6(a,i),options:l&&{...l},plugins:u}),e1(e,y.current))},T=()=>{e1(e,null),y.current&&(y.current.destroy(),y.current=null)};return W.useEffect(()=>{!s&&y.current&&l&&U6(y.current,l)},[s,l]),W.useEffect(()=>{!s&&y.current&&$E(y.current.config.data,a.labels)},[s,a.labels]),W.useEffect(()=>{!s&&y.current&&a.datasets&&HE(y.current.config.data,a.datasets,i)},[s,a.datasets]),W.useEffect(()=>{y.current&&(s?(T(),setTimeout(w)):y.current.update(f))},[s,l,a.labels,a.datasets,f]),W.useEffect(()=>{y.current&&(T(),setTimeout(w))},[o]),W.useEffect(()=>(w(),()=>T()),[]),Jm.createElement("canvas",{ref:g,role:"img",height:n,width:r,...m},h)}const H6=W.forwardRef($6);function qE(t,e){return Ol.register(e),W.forwardRef((n,r)=>Jm.createElement(H6,{...n,ref:r,type:t}))}const q6=qE("line",ou),G6=qE("bar",iu),En={BLUE:"blue",GREEN:"green",PURPLE:"purple",RED:"red",INDIGO:"indigo"},vl={[En.BLUE]:{name:"Blue",primary:"#3b82f6",primaryDark:"#2563eb",primaryLight:"#60a5fa"},[En.GREEN]:{name:"Green",primary:"#22c55e",primaryDark:"#16a34a",primaryLight:"#4ade80"},[En.PURPLE]:{name:"Purple",primary:"#a855f7",primaryDark:"#9333ea",primaryLight:"#c084fc"},[En.RED]:{name:"Red",primary:"#ef4444",primaryDark:"#dc2626",primaryLight:"#f87171"},[En.INDIGO]:{name:"Indigo",primary:"#6366f1",primaryDark:"#4f46e5",primaryLight:"#818cf8"}},Hm=t=>((!t||!Object.values(En).includes(t))&&(t=En.BLUE),document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),window.dispatchEvent(new CustomEvent("themeChanged",{detail:{theme:t,colors:vl[t]}})),t),GE=()=>{const t=localStorage.getItem("theme"),e=document.documentElement.getAttribute("data-theme");return t||e||En.BLUE},K6=()=>{const t=localStorage.getItem("theme")||En.BLUE;return Hm(t)},Y6=t=>vl[t]||vl[En.BLUE],ud=(t=null)=>{const e=t||GE(),n=Y6(e);return{primary:n.primary,primaryWithAlpha:n.primary+"80",primaryLight:n.primaryLight,primaryDark:n.primaryDark,gradient:[n.primaryLight,n.primary,n.primaryDark]}},Q6=()=>Object.entries(En).map(([t,e])=>({key:t,value:e,name:vl[e].name,colors:vl[e]}));Ol.register(ad,ld,uu,BE,UE,VE);const KE=({data:t,options:e,title:n,loading:r=!1,error:s=null,sheetName:i="",rawData:o=[]})=>{var D,E,x,I,N,j,R,P,fe,se,ae,de,U,Y,L,H,Q,Z,Ie,Be,He;const[a,l]=W.useState(null),[u,h]=W.useState(r),[f,m]=W.useState(null),g=W.useRef(null),[y,w]=W.useState(ud()),T=["issuesPost0710","vehicleBreakdown","fuelStation","post06AMOpenIssues"].includes(i);W.useEffect(()=>{const z=()=>{w(ud())};return window.addEventListener("themeChanged",z),()=>window.removeEventListener("themeChanged",z)},[]),W.useEffect(()=>{h(r)},[r]);const k={...e,onClick:(z,ve)=>{if(ve.length>0){const Kt=ve[0].index,ft=ve[0].datasetIndex,Yt=t.datasets[ft],Nt=t.labels[Kt],mt=Yt.data[Kt];if(T&&Yt.issueBreakdowns&&Yt.issueBreakdowns[Nt])l({type:"issue",zone:Nt,title:n,sheetName:i,breakdown:Yt.issueBreakdowns[Nt],total:mt,details:Yt.vehicleDetails?Yt.vehicleDetails[Nt]:null});else{const Qt=o.filter(ze=>String(ze.Zone)===String(Nt));if(i==="glitchPercentage"){let ze=0;typeof mt=="object"&&mt!==null&&mt.y!==void 0?ze=mt.y:typeof mt=="number"?ze=mt:Qt.length>0&&(ze=Qt[0].Percentage||Qt[0].Count||0),l({type:"percentage",zone:Nt,title:n,sheetName:i,total:typeof ze=="number"?ze:parseFloat(ze)||0,rawData:Qt,details:null})}else if(i==="vehicleNumbers")l({type:"vehicleNumbers",zone:Nt,title:n,sheetName:i,total:mt,rawData:Qt,details:null});else if(i==="sphereWorkshopExit"){const ze=Nt;l({type:"workshop",zone:mt,workshopTime:ze,title:n,sheetName:i,total:mt,rawData:o.filter(ye=>ye["Workshop Departure Time"]===ze),details:Yt.vehicleDetails?Yt.vehicleDetails[Nt]:null})}else if(i==="fuelStation"||i==="issuesPost0710"||i==="post06AMOpenIssues"){let ze=null;const hi=Qt.find(ye=>ye.Details&&Array.isArray(ye.Details)&&ye.Details.length>0);hi?ze=hi.Details:ze=Qt.map(ye=>({vehicleNo:ye["Vehicle No."]||ye["Vehicle Number"]||ye.Vehicle||`Vehicle ${Math.random().toString(36).substr(2,5)}`,time:ye.Time||ye["Late Time"]||ye["Arrival Time"]||ye["Departure Time"]||ye["Fuel Station Time"]||"Time not specified",issue:ye.Issue||ye.Reason||ye.Type||(i==="fuelStation"?"Fuel Station Visit":"Late Vehicle"),status:ye.Status||ye["Spare/OK"]||"Unknown",breakdownTime:ye["Breakdown Time"]||"",spareTime:ye["Spare/OK Time"]||ye["Spare Time"]||"",spareStatus:ye["Spare Status"]||"",remarks:ye.Remarks||ye.Notes||""})).filter(ye=>ye.vehicleNo&&ye.time),l({type:"timing",zone:Nt,title:n,sheetName:i,total:mt,rawData:Qt,details:ze&&ze.length>0?ze:null})}else l({type:"general",zone:Nt,title:n,sheetName:i,total:mt,rawData:Qt,details:null})}}},onHover:(z,ve)=>{m(ve.length>0?ve[0].index:null)},plugins:{...e==null?void 0:e.plugins,legend:{...(D=e==null?void 0:e.plugins)==null?void 0:D.legend,labels:{...(x=(E=e==null?void 0:e.plugins)==null?void 0:E.legend)==null?void 0:x.labels,usePointStyle:!0,pointStyle:"circle",font:{size:12,weight:"500"},color:"#374151"}},tooltip:{...(I=e==null?void 0:e.plugins)==null?void 0:I.tooltip,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#1f2937",bodyColor:"#374151",borderColor:y.primary,borderWidth:1,cornerRadius:12,displayColors:!0,usePointStyle:!0,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{...(j=(N=e==null?void 0:e.plugins)==null?void 0:N.tooltip)==null?void 0:j.callbacks,title:z=>`Zone ${z[0].label}`,label:z=>{const ve=z.parsed.y,Kt=i==="glitchPercentage"?"%":"";return`${z.dataset.label}: ${ve}${Kt}`}}}},scales:{...e==null?void 0:e.scales,x:{...(R=e==null?void 0:e.scales)==null?void 0:R.x,grid:{...(fe=(P=e==null?void 0:e.scales)==null?void 0:P.x)==null?void 0:fe.grid,color:"rgba(156, 163, 175, 0.2)",borderColor:"rgba(156, 163, 175, 0.3)"},ticks:{...(ae=(se=e==null?void 0:e.scales)==null?void 0:se.x)==null?void 0:ae.ticks,color:"#6b7280",font:{size:11,weight:"500"}}},y:{...(de=e==null?void 0:e.scales)==null?void 0:de.y,grid:{...(Y=(U=e==null?void 0:e.scales)==null?void 0:U.y)==null?void 0:Y.grid,color:"rgba(156, 163, 175, 0.2)",borderColor:"rgba(156, 163, 175, 0.3)"},ticks:{...(H=(L=e==null?void 0:e.scales)==null?void 0:L.y)==null?void 0:H.ticks,color:"#6b7280",font:{size:11,weight:"500"}}}},animation:{duration:1e3,easing:"easeInOutQuart"},interaction:{intersect:!1,mode:"index"}};if(u)return c.jsxs("div",{className:"uniform-chart-card group",children:[c.jsxs("div",{className:"card-header",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon",children:c.jsx("svg",{className:"w-5 h-5 text-white animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"card-title",children:n}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator warning"}),c.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"Loading chart data..."})]})]})]}),c.jsxs("div",{className:"chart-metric-badge",children:[c.jsx("svg",{className:"w-3 h-3 mr-1 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Loading..."]})]}),c.jsx("div",{className:"chart-container",children:c.jsx("div",{className:"chart-area chart-loading",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"chart-loading-spinner mb-4"}),c.jsx("p",{className:"text-gray-600 font-medium",children:"Loading Chart..."}),c.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Preparing visualization"})]})})})]});if(s)return c.jsxs("div",{className:"uniform-chart-card group",children:[c.jsxs("div",{className:"card-header",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon bg-gradient-to-br from-red-500 to-red-600",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"card-title",children:n}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator error"}),c.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"Error loading data"})]})]})]}),c.jsxs("div",{className:"chart-metric-badge bg-red-50 text-red-700 border-red-200",children:[c.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Error"]})]}),c.jsx("div",{className:"chart-container",children:c.jsx("div",{className:"chart-area flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-red-500 mb-4",children:c.jsx("svg",{className:"w-16 h-16 mx-auto opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("p",{className:"text-red-600 font-semibold text-lg",children:"Error Loading Chart"}),c.jsx("p",{className:"text-gray-500 text-sm mt-2 max-w-md mx-auto",children:s}),c.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Retry"})]})})})]});if(!t||!t.labels||t.labels.length===0)return c.jsxs("div",{className:"uniform-chart-card group",children:[c.jsxs("div",{className:"card-header",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon bg-gradient-to-br from-gray-400 to-gray-500",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"card-title mobile-title-truncate",title:n,children:n}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator error"}),c.jsx("span",{className:"responsive-text-xs text-gray-500 ml-2",children:"No data available"})]})]})]}),c.jsxs("div",{className:"chart-metric-badge bg-gray-50 text-gray-600 border-gray-200",children:[c.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),"Empty"]})]}),c.jsx("div",{className:"chart-container",children:c.jsx("div",{className:"chart-area flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 mb-4",children:c.jsx("svg",{className:"w-20 h-20 mx-auto opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsx("p",{className:"text-gray-600 font-semibold text-lg",children:"No Data Available"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Chart will appear when data is loaded"}),c.jsx("div",{className:"mt-4",children:c.jsx("span",{className:"chart-metric-badge bg-gray-50 text-gray-600 border-gray-200",children:"Waiting for data..."})})]})})})]});const b=((Q=t==null?void 0:t.labels)==null?void 0:Q.length)||0,C=(Ie=(Z=t==null?void 0:t.datasets)==null?void 0:Z[0])!=null&&Ie.data?Math.max(...t.datasets[0].data):0,A=(He=(Be=t==null?void 0:t.datasets)==null?void 0:Be[0])!=null&&He.data?t.datasets[0].data.reduce((z,ve)=>z+ve,0):0;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"uniform-chart-card group",children:[c.jsxs("div",{className:"card-header",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"card-title mobile-title-truncate",title:n,children:n}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator success"}),c.jsxs("span",{className:"responsive-text-xs text-gray-500 ml-2",children:[b," zones  Interactive chart"]})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"responsive-text-xl md:text-2xl font-bold text-gray-800",children:i==="glitchPercentage"?`${Math.round(A/b||0)}%`:A}),c.jsx("div",{className:"responsive-text-xs text-gray-500",children:i==="glitchPercentage"?"Avg Coverage":"Total Count"})]}),c.jsxs("div",{className:"chart-metric-badge",children:[c.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),c.jsx("span",{className:"hidden sm:inline",children:"Max: "}),i==="glitchPercentage"?`${C}%`:C]})]})]}),c.jsxs("div",{className:"chart-container mobile-chart-wrapper",children:[c.jsx("div",{className:"chart-area",children:c.jsx(G6,{ref:g,data:t,options:k})}),c.jsxs("div",{className:"click-instruction mobile-click-instruction md:click-instruction",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.121 2.122"})}),c.jsx("span",{className:"hidden sm:inline",children:"Click bars for detailed view"}),c.jsx("span",{className:"sm:hidden",children:"Tap for details"})]})]})]}),a&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg mr-3 flex items-center justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),a.type==="workshop"?`Workshop Time: ${a.workshopTime} - Zone ${a.zone}`:`Zone ${a.zone} - ${a.title}`]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Detailed breakdown and information"})]}),c.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-lg transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[c.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-blue-800",children:"Summary"}),c.jsx("p",{className:"text-sm text-blue-600",children:a.type==="workshop"?`Workshop Time: ${a.workshopTime}`:`Zone ${a.zone} overview`})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600",children:a.type==="percentage"?`${a.total}%`:a.total}),c.jsx("div",{className:"text-sm text-blue-500",children:a.type==="issue"?"Total Issues":a.type==="percentage"?"Route Coverage":a.type==="vehicleNumbers"?"Total Vehicles":"Total Count"})]})]})}),a.type==="percentage"&&a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Route Coverage Details (",a.rawData.length," records)"]}),c.jsx("div",{className:"space-y-4",children:a.rawData.map((z,ve)=>c.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200 hover:shadow-md transition-shadow",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Route Coverage"}),c.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[z.Percentage||z.Count,"%"]})]}),c.jsxs("div",{className:"w-16 h-16 relative",children:[c.jsxs("svg",{className:"w-16 h-16 transform -rotate-90",viewBox:"0 0 36 36",children:[c.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),c.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:`${z.Percentage||z.Count}, 100`})]}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("span",{className:"text-xs font-semibold text-purple-600",children:[Math.round(z.Percentage||z.Count),"%"]})})]})]}),c.jsxs("div",{className:"space-y-2",children:[z.SoftwarePercentage!==null&&z.SoftwarePercentage!==void 0&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Software %:"}),c.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[z.SoftwarePercentage,"%"]})]}),z.ActualPercentage!==null&&z.ActualPercentage!==void 0&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Actual %:"}),c.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[z.ActualPercentage,"%"]})]}),z.Date&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Date:"}),c.jsx("span",{className:"text-sm text-gray-600",children:new Date(z.Date).toLocaleDateString()})]})]})]}),z.Remarks&&c.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Remarks:"}),c.jsx("p",{className:"mt-1 text-sm text-gray-600",children:z.Remarks})]})]},ve))})]}),a.type==="vehicleNumbers"&&a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Vehicle Numbers Details (",a.rawData.length," records)"]}),c.jsx("div",{className:"space-y-4",children:a.rawData.map((z,ve)=>c.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Date:"}),c.jsx("span",{className:"text-sm text-gray-600",children:new Date(z.Date).toLocaleDateString()})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Vehicles:"}),c.jsx("span",{className:"text-sm font-semibold text-green-600",children:z.TotalVehicles})]})]}),c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Vehicle Numbers:"}),c.jsx("div",{className:"mt-1 p-2 bg-white rounded border text-sm text-gray-600 break-words",children:z.VehicleNumbers||"Not specified"})]})})]})},ve))})]}),a.type==="issue"&&a.breakdown&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Issue Breakdown"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(a.breakdown).map(([z,ve])=>ve>0&&c.jsxs("div",{className:"flex justify-between items-center p-4 bg-red-50 rounded-lg border border-red-200",children:[c.jsx("span",{className:"font-medium text-gray-700",children:z}),c.jsx("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold",children:ve})]},z))})]}),a.type==="timing"&&a.details&&a.details.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.sheetName==="fuelStation"?"Fuel Station Visit Details":"Late Vehicle Timing Details"," (",a.details.length," vehicles)"]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.details.map((z,ve)=>c.jsx("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-semibold text-gray-800",children:z.vehicleNo||`Vehicle #${ve+1}`})]}),z.status&&c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z.status.toLowerCase().includes("ok")||z.status.toLowerCase().includes("resolved")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:z.status})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[z.time&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:a.sheetName==="fuelStation"?"Fuel Station Time:":"Late Time:"}),c.jsx("span",{className:"ml-2 text-orange-600 font-semibold",children:z.time})]}),z.breakdownTime&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Breakdown Time:"}),c.jsx("span",{className:"ml-2 text-red-600 font-semibold",children:z.breakdownTime})]}),z.spareTime&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Spare Time:"}),c.jsx("span",{className:"ml-2 text-blue-600 font-semibold",children:z.spareTime})]})]}),z.issue&&c.jsxs("div",{className:"pt-2 border-t border-orange-200",children:[c.jsx("span",{className:"font-medium text-gray-700",children:a.sheetName==="fuelStation"?"Reason:":"Issue:"}),c.jsx("span",{className:"ml-2 text-gray-600",children:z.issue})]}),z.spareStatus&&z.spareStatus!==z.status&&c.jsxs("div",{className:"pt-1",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Spare Status:"}),c.jsx("span",{className:"ml-2 text-gray-600",children:z.spareStatus})]}),z.remarks&&c.jsxs("div",{className:"pt-2 border-t border-orange-200",children:[c.jsx("span",{className:"font-medium text-gray-700",children:"Remarks:"}),c.jsx("p",{className:"mt-1 text-gray-600 text-sm",children:z.remarks})]})]})},ve))})]}),a.type==="general"&&a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Detailed Records (",a.rawData.length," entries)"]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsx("tr",{children:Object.keys(a.rawData[0]).map(z=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b",children:z},z))})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:a.rawData.map((z,ve)=>c.jsx("tr",{className:"hover:bg-gray-50",children:Object.entries(z).map(([Kt,ft])=>c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 border-b",children:ft||"-"},Kt))},ve))})]})})]}),a.type==="workshop"&&a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Workshop Exit Vehicle Details (",a.rawData.length," vehicles)"]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.rawData.map((z,ve)=>c.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("span",{className:"font-semibold text-gray-800",children:["Vehicle #",ve+1]})]}),c.jsx("div",{className:"text-xs text-gray-500",children:z.Date&&new Date(z.Date).toLocaleDateString()})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[z.Ward&&c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-3 h-3 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{className:"font-medium text-gray-700",children:"Ward:"}),c.jsx("span",{className:"ml-2 text-purple-600 font-semibold",children:z.Ward})]}),z["Permanent Vehicle Number"]&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Permanent Vehicle:"}),c.jsx("span",{className:"ml-2 text-blue-600 font-semibold",children:z["Permanent Vehicle Number"]})]}),z["Spare Vehicle Number"]&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Spare Vehicle:"}),c.jsx("span",{className:"ml-2 text-green-600 font-semibold",children:z["Spare Vehicle Number"]})]}),z["Workshop Departure Time"]&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Workshop Departure:"}),c.jsx("span",{className:"ml-2 text-orange-600 font-semibold",children:z["Workshop Departure Time"]})]}),z.Zone&&c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-3 h-3 mr-2 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{className:"font-medium text-gray-700",children:"Zone:"}),c.jsx("span",{className:"ml-2 text-indigo-600 font-semibold",children:z.Zone})]})]})]})},ve))})]}),a.details&&a.details.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Vehicle Details"]}),c.jsx("div",{className:"space-y-3",children:a.details.map((z,ve)=>c.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:Object.entries(z).map(([Kt,ft])=>ft&&c.jsxs("div",{children:[c.jsxs("span",{className:"font-medium text-gray-700 capitalize",children:[Kt.replace(/([A-Z])/g," $1").trim(),":"]}),c.jsx("span",{className:"ml-2 text-gray-600",children:ft})]},Kt))})},ve))})]}),a.type==="timing"&&(!a.details||a.details.length===0)&&a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.sheetName==="fuelStation"?"Fuel Station Records":"Late Vehicle Records"," (",a.rawData.length," entries)"]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[c.jsx("thead",{className:"bg-orange-50",children:c.jsx("tr",{children:Object.keys(a.rawData[0]).map(z=>c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-700 uppercase tracking-wider border-b",children:z},z))})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:a.rawData.map((z,ve)=>c.jsx("tr",{className:"hover:bg-orange-50",children:Object.entries(z).map(([Kt,ft])=>c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 border-b",children:typeof ft=="object"&&ft!==null?JSON.stringify(ft):ft||"-"},Kt))},ve))})]})})]}),(a.type==="general"&&(!a.rawData||a.rawData.length===0)||a.type==="timing"&&(!a.details||a.details.length===0)&&(!a.rawData||a.rawData.length===0)||a.type==="percentage"&&(!a.rawData||a.rawData.length===0))&&c.jsxs("div",{className:"text-center text-gray-500 py-8",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("p",{className:"text-lg font-medium",children:"No detailed data available"}),c.jsxs("p",{className:"text-sm",children:["No records found for Zone ",a.zone]})]})]}),c.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between items-center",children:[c.jsxs("div",{className:"text-sm text-gray-500",children:["Data for Zone ",a.zone,"  ",a.title]}),c.jsx("button",{onClick:()=>l(null),className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg",children:"Close"})]})]})})]})};Ol.register(ad,ld,cu,ga,BE,UE,VE);const X6=({data:t,options:e,title:n,loading:r=!1,error:s=null,sheetName:i="",rawData:o=[]})=>{const[a,l]=W.useState(null),[u,h]=W.useState(r),[f,m]=W.useState(null);W.useRef(null);const[g,y]=W.useState(ud());W.useEffect(()=>{const _=()=>{y(ud())};return window.addEventListener("themeChanged",_),()=>window.removeEventListener("themeChanged",_)},[]),W.useEffect(()=>{h(r)},[r]);const T={...e,onClick:(_,k)=>{if(k.length>0){const b=k[0].index,C=k[0].datasetIndex,A=t.datasets[C],D=t.labels[b],E=A.data[b],x=D;l({type:"workshop",zone:E,workshopTime:x,title:n,sheetName:i,total:E,rawData:o.filter(N=>N["Workshop Departure Time"]===x),details:A.vehicleDetails?A.vehicleDetails[D]:null})}}};return r?c.jsx("div",{className:"uniform-chart-card group",children:c.jsx("div",{className:"chart-container",children:c.jsx("div",{className:"chart-area flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsxs("p",{className:"mt-2 text-gray-600",children:["Loading ",n,"..."]})]})})})}):s?c.jsx("div",{className:"uniform-chart-card group",children:c.jsx("div",{className:"chart-container",children:c.jsx("div",{className:"chart-area flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-red-500 mb-2",children:c.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsxs("p",{className:"text-red-600 font-medium",children:["Error loading ",n]}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:s})]})})})}):!t||!t.labels||t.labels.length===0?c.jsx("div",{className:"uniform-chart-card group",children:c.jsx("div",{className:"chart-container",children:c.jsx("div",{className:"chart-area flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 mb-2",children:c.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsx("p",{className:"text-gray-600 font-medium",children:"No data available"}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"No data found for the selected filters"})]})})})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"uniform-chart-card group",children:[c.jsxs("div",{className:"card-header",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"card-title mobile-title-truncate",title:n,children:n}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator success"}),c.jsx("span",{className:"responsive-text-xs text-gray-500 ml-2",children:"Workshop data  Interactive chart"})]})]})]}),c.jsx("div",{className:"flex items-center space-x-2 md:space-x-3",children:c.jsxs("div",{className:"chart-metric-badge",children:[c.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"hidden sm:inline",children:"Time-based"}),c.jsx("span",{className:"sm:hidden",children:"Time"})]})})]}),c.jsxs("div",{className:"chart-container mobile-chart-wrapper",children:[c.jsx("div",{className:"chart-area",children:c.jsx(q6,{data:t,options:T})}),c.jsxs("div",{className:"click-instruction mobile-click-instruction md:click-instruction",children:[c.jsx("svg",{className:"w-4 h-4 mr-1 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.121 2.122"})}),c.jsx("span",{className:"hidden sm:inline",children:"Click points for details"}),c.jsx("span",{className:"sm:hidden",children:"Tap for details"})]})]})]}),a&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-lg mr-3 flex items-center justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),"Workshop Time: ",a.workshopTime," - Zone ",a.zone]}),c.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"Vehicle departure details"})]}),c.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-lg transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[c.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl border border-purple-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-purple-800",children:"Summary"}),c.jsxs("p",{className:"text-sm text-purple-600",children:["Workshop Time: ",a.workshopTime]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:["Zone ",a.zone]}),c.jsx("div",{className:"text-sm text-purple-500",children:"Departure Zone"})]})]})}),a.rawData&&a.rawData.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Workshop Exit Vehicle Details (",a.rawData.length," vehicles)"]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.rawData.map((_,k)=>c.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("span",{className:"font-semibold text-gray-800",children:["Vehicle #",k+1]})]}),c.jsx("div",{className:"text-xs text-gray-500",children:_.Date&&new Date(_.Date).toLocaleDateString()})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[_.Ward&&c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-3 h-3 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{className:"font-medium text-gray-700",children:"Ward:"}),c.jsx("span",{className:"ml-2 text-purple-600 font-semibold",children:_.Ward})]}),_["Permanent Vehicle Number"]&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Permanent Vehicle:"}),c.jsx("span",{className:"ml-2 text-blue-600 font-semibold",children:_["Permanent Vehicle Number"]})]}),_["Spare Vehicle Number"]&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Spare Vehicle:"}),c.jsx("span",{className:"ml-2 text-green-600 font-semibold",children:_["Spare Vehicle Number"]})]}),_["Workshop Departure Time"]&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-3 h-3 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"font-medium text-gray-700",children:"Workshop Departure:"}),c.jsx("span",{className:"ml-2 text-orange-600 font-semibold",children:_["Workshop Departure Time"]})]}),_.Zone&&c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-3 h-3 mr-2 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{className:"font-medium text-gray-700",children:"Zone:"}),c.jsx("span",{className:"ml-2 text-indigo-600 font-semibold",children:_.Zone})]})]})]})},k))})]}),(!a.rawData||a.rawData.length===0)&&c.jsxs("div",{className:"text-center text-gray-500 py-8",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("p",{className:"text-lg font-medium",children:"No detailed data available"}),c.jsx("p",{className:"text-sm",children:"No records found for this time point"})]})]}),c.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between items-center",children:[c.jsxs("div",{className:"text-sm text-gray-500",children:["Workshop Time: ",a.workshopTime,"  Zone ",a.zone]}),c.jsx("button",{onClick:()=>l(null),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg",children:"Close"})]})]})})]})},Z6=({selectedDate:t,setSelectedDate:e,selectedZone:n,setSelectedZone:r,availableZones:s,tripCountFilter:i,setTripCountFilter:o,showTripCountFilter:a=!1,onRefresh:l})=>c.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8 backdrop-blur-sm bg-white/90",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg mr-3",children:c.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filters & Controls"})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-end justify-between",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 flex-1",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("label",{htmlFor:"date-picker",className:"text-sm font-semibold text-gray-700 mb-2 flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Select Date"]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("div",{className:"relative",children:c.jsx("input",{id:"date-picker",type:"date",value:t,onChange:u=>e(u.target.value),className:"border-2 border-gray-200 rounded-lg px-4 py-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm hover:shadow-md"})}),c.jsx("button",{onClick:()=>e(""),className:"px-4 py-3 text-sm font-medium text-gray-600 hover:text-white border-2 border-gray-200 rounded-lg hover:bg-gradient-to-r hover:from-blue-500 hover:to-indigo-500 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 shadow-sm hover:shadow-md",title:"Clear date filter",children:"All Dates"})]})]}),c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("label",{htmlFor:"zone-select",className:"text-sm font-semibold text-gray-700 mb-2 flex items-center",children:[c.jsxs("svg",{className:"w-4 h-4 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Select Zone"]}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{id:"zone-select",value:n,onChange:u=>r(u.target.value),className:"border-2 border-gray-200 rounded-lg px-4 py-3 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm hover:shadow-md appearance-none cursor-pointer w-full",children:[c.jsx("option",{value:"",children:"All Zones"}),s.map(u=>c.jsxs("option",{value:u,children:["Zone ",u]},u))]}),c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),a&&c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{htmlFor:"trip-count-select",className:"text-sm font-medium text-gray-700 mb-1",children:"Trip Count Filter"}),c.jsxs("select",{id:"trip-count-select",value:i||"all",onChange:u=>o(u.target.value),className:"border border-gray-300 rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[c.jsx("option",{value:"all",children:"All (<3 trips)"}),c.jsx("option",{value:"0",children:"0 Trips Only"}),c.jsx("option",{value:"1",children:"1 Trip Only"}),c.jsx("option",{value:"2",children:"2 Trips Only"})]})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:l,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2 transform hover:scale-105",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]}),(t||n||a&&i&&i!=="all")&&c.jsxs("button",{onClick:()=>{e(""),r(""),a&&o&&o("all")},className:"bg-white border-2 border-gray-300 hover:border-red-400 text-gray-700 hover:text-red-600 font-semibold py-3 px-6 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 flex items-center gap-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear All"]})]})]}),(t||n)&&c.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("svg",{className:"w-4 h-4 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Active Filters"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[t&&c.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium bg-white text-blue-700 border border-blue-200 shadow-sm",children:[c.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Date: ",new Date(t).toLocaleDateString()]}),n&&c.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium bg-white text-blue-700 border border-blue-200 shadow-sm",children:[c.jsx("svg",{className:"w-3 h-3 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),"Zone: ",n]})]})]})]}),J6="/vehicleReportDashboard/assets/apricity-spabbHhS.png",e3="/vehicleReportDashboard/assets/imc1-BJsiSDh7.png",t3=({isOpen:t,onClose:e,user:n,onLogin:r,onLogout:s,onShowAdminPanel:i,availableZones:o=[]})=>{if(W.useEffect(()=>{const l=u=>{u.key==="Escape"&&e()};return t&&(document.addEventListener("keydown",l),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",l),document.body.style.overflow="unset"}},[t,e]),!t)return null;const a=l=>{l.target===l.currentTarget&&e()};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mobile-nav-overlay",onClick:a,"aria-hidden":"true"}),c.jsxs("nav",{className:`mobile-nav-menu ${t?"open":"closed"}`,children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-blue-700",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-bold text-lg",children:"Menu"}),c.jsx("p",{className:"text-blue-200 text-sm",children:"Navigation"})]})]}),c.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-lg bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors duration-200 touch-manipulation","aria-label":"Close menu",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto mobile-scroll",children:[n&&c.jsxs("div",{className:"p-6 border-b border-blue-700",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-white font-semibold",children:n.name}),c.jsx("p",{className:"text-blue-200 text-sm capitalize",children:n.role}),c.jsx("p",{className:"text-blue-300 text-xs",children:n.email})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),c.jsx("span",{className:"text-green-300 text-sm",children:"Active Session"})]})]}),c.jsxs("div",{className:"py-4",children:[c.jsx("button",{onClick:e,className:"mobile-nav-item",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"})]}),"Dashboard"]})}),c.jsx("button",{onClick:e,className:"mobile-nav-item",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Vehicle Reports"]})}),o.length>0&&c.jsxs("div",{className:"px-6 py-3 border-b border-blue-700",children:[c.jsx("h5",{className:"text-blue-200 text-sm font-medium mb-2",children:"Available Zones"}),c.jsxs("div",{className:"text-white text-sm",children:[o.slice(0,3).join(", "),o.length>3&&` +${o.length-3} more`]})]}),(n==null?void 0:n.role)==="admin"&&c.jsx("button",{onClick:()=>{i(),e()},className:"mobile-nav-item",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Admin Panel"]})})]})]}),c.jsxs("div",{className:"p-6 border-t border-blue-700",children:[n?c.jsxs("button",{onClick:()=>{s(),e()},className:"w-full flex items-center justify-center px-4 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors duration-200 touch-manipulation",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]}):c.jsxs("button",{onClick:()=>{r(),e()},className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors duration-200 touch-manipulation",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign In"]}),c.jsxs("div",{className:"mt-4 text-center",children:[c.jsx("p",{className:"text-blue-300 text-xs",children:"IMC ICCC Dashboard"}),c.jsx("p",{className:"text-blue-400 text-xs",children:"Version 1.0.0"})]})]})]})]})},n3=({availableZones:t=[],user:e=null,onLogin:n,onLogout:r,onShowAdminPanel:s})=>{const[i,o]=W.useState(!1),a=()=>{o(!i)},l=()=>{o(!1)};return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"iccc-header shadow-2xl relative z-30",children:[c.jsx("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 lg:space-x-6",children:[c.jsxs("div",{className:"relative imc-logo-enhanced",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-xl blur-sm opacity-30 animate-pulse"}),c.jsx("div",{className:"relative logo-container w-12 h-12 sm:w-16 sm:h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-white to-blue-50 rounded-lg sm:rounded-xl flex items-center justify-center shadow-lg sm:shadow-xl p-2 sm:p-3 border border-blue-300 sm:border-2 hover:scale-105 transition-all duration-300",children:c.jsx("img",{src:e3,alt:"IMC Logo - Primary Organization",className:"w-full h-full object-contain drop-shadow-lg"})}),c.jsx("div",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-2 h-2 sm:w-3 sm:h-3 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),c.jsxs("div",{className:"text-white",children:[c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 mb-0.5 sm:mb-1",children:[c.jsx("h1",{className:"responsive-text-lg sm:responsive-text-xl lg:responsive-text-2xl font-bold imc-text-glow tracking-wide",children:"IMC"}),c.jsx("div",{className:"imc-divider w-0.5 sm:w-1 h-4 sm:h-5 lg:h-6 bg-gradient-to-b from-blue-300 to-blue-500 rounded-full"}),c.jsx("h2",{className:"iccc-title responsive-text-base sm:responsive-text-lg lg:responsive-text-xl font-bold tracking-wide",children:"ICCC"})]}),c.jsx("p",{className:"text-blue-200 responsive-text-xs sm:responsive-text-sm font-medium hidden sm:block",children:"Indore Municipal Corporation"}),c.jsx("p",{className:"text-blue-300 responsive-text-xs hidden lg:block",children:"Integrated Command and Control Center"})]}),c.jsx("div",{className:"logo-container w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 bg-white rounded-lg flex items-center justify-center shadow-md p-1 sm:p-1.5 opacity-75 hover:opacity-100 transition-opacity duration-300 hidden sm:flex",children:c.jsx("img",{src:J6,alt:"Apricity Logo",className:"w-full h-full object-contain"})})]}),c.jsxs("div",{className:"text-center text-white hidden md:block",children:[c.jsx("h2",{className:"iccc-title responsive-text-lg lg:responsive-text-xl font-bold mobile-text-wrap",children:"Daily Vehicle Report Dashboard"}),c.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-1",children:[c.jsx("div",{className:"status-indicator w-2 h-2 bg-green-400 rounded-full"}),c.jsx("span",{className:"responsive-text-xs text-green-300",children:"Live System"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 lg:space-x-4",children:[c.jsxs("div",{className:"text-right text-white text-sm hidden sm:block",children:[c.jsx("div",{className:"time-display text-blue-100 text-xs sm:text-sm",children:new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}),c.jsx("div",{className:"text-blue-300 text-xs hidden lg:block",children:new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"short"})})]}),c.jsx("div",{className:"hidden md:flex items-center space-x-1 sm:space-x-2 lg:space-x-3",children:e?c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 lg:space-x-3",children:[e.role==="admin"&&s&&c.jsxs("button",{onClick:s,className:"px-2 sm:px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs sm:text-sm rounded-lg transition-colors duration-200 flex items-center space-x-1 touch-manipulation min-h-[40px]",title:"Admin Dashboard",children:[c.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsx("span",{className:"hidden sm:inline",children:"Admin"}),c.jsx("span",{className:"hidden lg:inline",children:"Dashboard"})]}),c.jsxs("div",{className:"text-right text-white",children:[c.jsx("div",{className:"text-sm font-medium",children:e.name||"User"}),c.jsx("div",{className:"text-xs text-blue-200 capitalize",children:e.role||"Operator"})]}),c.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-full flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-4 h-4 sm:w-6 sm:h-6 text-blue-900",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("button",{onClick:r,className:"px-2 sm:px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm rounded-lg transition-colors duration-200 flex items-center space-x-1 touch-manipulation min-h-[40px]",children:[c.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}):c.jsxs("button",{onClick:n,className:"px-3 sm:px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-xs sm:text-sm rounded-lg transition-colors duration-200 flex items-center space-x-1 sm:space-x-2 touch-manipulation min-h-[40px]",children:[c.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),c.jsx("span",{children:"Login"})]})}),e&&c.jsx("div",{className:"md:hidden w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),c.jsxs("button",{onClick:a,className:`md:hidden hamburger-menu ${i?"active":""} touch-manipulation`,"aria-label":"Toggle navigation menu","aria-expanded":i,children:[c.jsx("div",{className:"hamburger-line"}),c.jsx("div",{className:"hamburger-line"}),c.jsx("div",{className:"hamburger-line"})]})]})]})}),c.jsx("div",{className:"nav-breadcrumb border-t border-blue-700",children:c.jsx("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-2",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("nav",{className:"flex items-center space-x-1 sm:space-x-2 text-blue-200 text-xs sm:text-sm",children:[c.jsx("span",{className:"hidden sm:inline",children:"Dashboard"}),c.jsx("svg",{className:"w-3 h-3 hidden sm:block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),c.jsx("span",{className:"text-white font-medium",children:"Vehicle Reports"}),c.jsxs("div",{className:"md:hidden ml-2 flex items-center space-x-1",children:[c.jsx("div",{className:"status-indicator w-1.5 h-1.5 bg-green-400 rounded-full"}),c.jsx("span",{className:"text-green-300 text-xs",children:"Live"})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 text-blue-200 text-xs sm:text-sm",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),c.jsx("span",{className:"hidden sm:inline",children:"Zones: "}),c.jsx("span",{className:"text-white font-semibold",children:t.length})]}),c.jsxs("div",{className:"flex items-center space-x-1 hidden sm:flex",children:[c.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),c.jsx("span",{className:"text-green-300",children:"Live"})]})]})]})})})]}),c.jsx(t3,{isOpen:i,onClose:l,user:e,onLogin:n,onLogout:r,onShowAdminPanel:s,availableZones:t})]})},r3=({currentUser:t,stats:e,setStats:n})=>{const[r,s]=W.useState([]),[i,o]=W.useState([]),[a,l]=W.useState(!0),[u,h]=W.useState([]),[f,m]=W.useState({status:"all",role:"all",search:""}),[g,y]=W.useState({}),[w,T]=W.useState(!1),[_,k]=W.useState(null),[b,C]=W.useState(!1),[A,D]=W.useState(null),[E,x]=W.useState("");W.useEffect(()=>{I()},[]),W.useEffect(()=>{N()},[r,f]);const I=async()=>{l(!0);try{const L=await ed();s(L);const H={totalUsers:L.length,pendingUsers:L.filter(Q=>Q.status===Te.PENDING).length,approvedUsers:L.filter(Q=>Q.status===Te.APPROVED).length,suspendedUsers:L.filter(Q=>Q.status===Te.SUSPENDED).length};n(H)}catch(L){console.error("Error loading users:",L)}finally{l(!1)}},N=()=>{let L=[...r];if(f.status!=="all"&&(L=L.filter(H=>H.status===f.status)),f.role!=="all"&&(L=L.filter(H=>H.role===f.role)),f.search){const H=f.search.toLowerCase();L=L.filter(Q=>{var Z,Ie,Be;return((Z=Q.name)==null?void 0:Z.toLowerCase().includes(H))||((Ie=Q.email)==null?void 0:Ie.toLowerCase().includes(H))||((Be=Q.department)==null?void 0:Be.toLowerCase().includes(H))})}o(L)},j=async(L,H,Q={})=>{y({...g,[H]:L});try{let Z;switch(L){case"approve":Z=await Kk(H,t.uid);break;case"reject":Z=await Yk(H,t.uid);break;case"suspend":Z=await SD(H,t.uid,Q.reason);break;case"reactivate":Z=await ID(H,t.uid);break;case"updateRole":Z=await TD(H,Q.role,t.uid);break;case"delete":Z=await Qk(H,t.uid,Q.reason);break}Z.success?(await I(),L==="delete"&&alert(`User ${Z.deletedUser.name} (${Z.deletedUser.email}) has been permanently deleted.`)):alert(`Error: ${Z.message}`)}catch(Z){console.error(`Error ${L} user:`,Z),alert(`Error ${L} user: ${Z.message}`)}finally{y({...g,[H]:null})}},R=async L=>{if(u.length!==0){if(L==="delete"){const H=` DANGER: You are about to permanently delete ${u.length} users. This action cannot be undone.

Type "DELETE" to confirm:`;if(prompt(H)!=="DELETE"){alert("Bulk delete cancelled.");return}}try{let H;if(L==="approve")H=await ND(u,t.uid);else if(L==="reject")H=await AD(u,t.uid);else if(L==="delete"){const Q=prompt("Please provide a reason for bulk deletion:")||"Bulk admin action";H=await CD(u,t.uid,Q)}H.success?(h([]),await I(),L==="delete"&&alert(`Successfully deleted ${H.deletedUsers.length} users.${H.errors.length>0?` ${H.errors.length} deletions failed.`:""}`)):alert(`Error: ${H.message}`)}catch(H){console.error(`Error bulk ${L}:`,H),alert(`Error bulk ${L}: ${H.message}`)}}},P=L=>{h(H=>H.includes(L)?H.filter(Q=>Q!==L):[...H,L])},fe=L=>{D(L),x(""),C(!0)},se=async()=>{if(!A||!E.trim()){alert("Please provide a reason for deletion.");return}await j("delete",A.id,{reason:E}),C(!1),D(null),x("")},ae=()=>{C(!1),D(null),x("")},de=L=>L?new Date(L.seconds*1e3).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",U=L=>({[Te.PENDING]:"bg-yellow-100 text-yellow-800",[Te.APPROVED]:"bg-green-100 text-green-800",[Te.REJECTED]:"bg-red-100 text-red-800",[Te.SUSPENDED]:"bg-gray-100 text-gray-800"})[L]||"bg-gray-100 text-gray-800",Y=L=>({[bt.ADMIN]:"bg-purple-100 text-purple-800",[bt.OPERATOR]:"bg-blue-100 text-blue-800",[bt.VIEWER]:"bg-gray-100 text-gray-800"})[L]||"bg-gray-100 text-gray-800";return a?c.jsxs("div",{className:"flex items-center justify-center h-64",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Loading users..."})]}):c.jsxs("div",{className:"p-4 sm:p-6 h-full overflow-y-auto",children:[c.jsxs("div",{className:"mb-6 space-y-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"text",placeholder:"Search users...",value:f.search,onChange:L=>m({...f,search:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),c.jsxs("select",{value:f.status,onChange:L=>m({...f,status:L.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Status"}),c.jsx("option",{value:Te.PENDING,children:"Pending"}),c.jsx("option",{value:Te.APPROVED,children:"Approved"}),c.jsx("option",{value:Te.REJECTED,children:"Rejected"}),c.jsx("option",{value:Te.SUSPENDED,children:"Suspended"})]}),c.jsxs("select",{value:f.role,onChange:L=>m({...f,role:L.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"all",children:"All Roles"}),c.jsx("option",{value:bt.ADMIN,children:"Admin"}),c.jsx("option",{value:bt.OPERATOR,children:"Operator"}),c.jsx("option",{value:bt.VIEWER,children:"Viewer"})]})]}),u.length>0&&c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 p-4 bg-blue-50 rounded-lg",children:[c.jsxs("span",{className:"text-sm text-blue-800 font-medium",children:[u.length," user(s) selected"]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("button",{onClick:()=>R("approve"),className:"admin-button px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:[c.jsx("svg",{className:"w-4 h-4 mr-1 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Bulk Approve"]}),c.jsxs("button",{onClick:()=>R("reject"),className:"admin-button px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:[c.jsx("svg",{className:"w-4 h-4 mr-1 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Bulk Reject"]}),c.jsxs("button",{onClick:()=>R("delete"),className:"admin-button px-3 py-1 bg-gray-800 text-white rounded text-sm hover:bg-gray-900 border-2 border-red-500",children:[c.jsx("svg",{className:"w-4 h-4 mr-1 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Bulk Delete"]}),c.jsxs("button",{onClick:()=>h([]),className:"admin-button px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:[c.jsx("svg",{className:"w-4 h-4 mr-1 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Selection"]})]})]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden admin-card-hover",children:c.jsx("div",{className:"overflow-x-auto admin-scrollbar",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 admin-table",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:c.jsx("input",{type:"checkbox",onChange:L=>{L.target.checked?h(i.map(H=>H.id)):h([])},checked:u.length===i.length&&i.length>0})}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(L=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("input",{type:"checkbox",checked:u.includes(L.id),onChange:()=>P(L.id)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.name}),c.jsx("div",{className:"text-sm text-gray-500",children:L.email})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`status-badge ${Y(L.role)}`,children:L.role})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`status-badge ${U(L.status)}`,children:L.status})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.department}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de(L.createdAt)}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[L.status===Te.PENDING&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>j("approve",L.id),disabled:g[L.id],className:"admin-button px-3 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700 disabled:opacity-50",children:"Approve"}),c.jsx("button",{onClick:()=>j("reject",L.id),disabled:g[L.id],className:"admin-button px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700 disabled:opacity-50",children:"Reject"})]}),L.status===Te.APPROVED&&c.jsx("button",{onClick:()=>j("suspend",L.id,{reason:"Admin action"}),disabled:g[L.id],className:"admin-button px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700 disabled:opacity-50",children:"Suspend"}),L.status===Te.SUSPENDED&&c.jsx("button",{onClick:()=>j("reactivate",L.id),disabled:g[L.id],className:"admin-button px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 disabled:opacity-50",children:"Reactivate"}),c.jsx("button",{onClick:()=>{k(L),T(!0)},className:"admin-button px-3 py-1 bg-indigo-600 text-white rounded text-xs hover:bg-indigo-700",children:"Edit"}),c.jsx("button",{onClick:()=>fe(L),disabled:g[L.id],className:"admin-button px-3 py-1 bg-gray-800 text-white rounded text-xs hover:bg-gray-900 border border-red-500 disabled:opacity-50",title:"Delete User (Permanent)",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},L.id))})]})})}),i.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Users Found"}),c.jsx("p",{className:"text-gray-600",children:"No users match your current filters."})]}),w&&_&&c.jsx("div",{className:"fixed inset-0 admin-modal-backdrop flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"User Details"}),c.jsx("button",{onClick:()=>T(!1),className:"text-white hover:text-gray-200",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] admin-scrollbar",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:_.name}),c.jsx("p",{className:"text-gray-600",children:_.email})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),c.jsxs("select",{value:_.role,onChange:L=>{k(H=>({...H,role:L.target.value})),j("updateRole",_.id,{role:L.target.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:bt.ADMIN,children:"Admin"}),c.jsx("option",{value:bt.OPERATOR,children:"Operator"}),c.jsx("option",{value:bt.VIEWER,children:"Viewer"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),c.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${U(_.status)}`,children:_.status})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),c.jsx("p",{className:"text-gray-900",children:_.department})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),c.jsx("p",{className:"text-gray-900",children:_.phone||"Not provided"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Created Date"}),c.jsx("p",{className:"text-gray-900",children:de(_.createdAt)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Updated"}),c.jsx("p",{className:"text-gray-900",children:de(_.updatedAt)})]})]}),_.approvedBy&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved By"}),c.jsxs("p",{className:"text-gray-900",children:[_.approvedBy," on ",de(_.approvedAt)]})]}),_.suspensionReason&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Suspension Reason"}),c.jsx("p",{className:"text-gray-900",children:_.suspensionReason})]})]})})]})}),b&&A&&c.jsx("div",{className:"fixed inset-0 admin-modal-backdrop flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[c.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-2 mr-3",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:" Delete User"}),c.jsx("p",{className:"text-red-100 text-sm",children:"This action cannot be undone"})]})]})}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:A.name}),c.jsx("p",{className:"text-gray-600 text-sm",children:A.email}),c.jsxs("p",{className:"text-gray-500 text-xs",children:[A.department,"  ",A.role]})]})]}),c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-red-800 font-medium text-sm",children:"Warning: Permanent Deletion"}),c.jsxs("ul",{className:"text-red-700 text-xs mt-1 space-y-1",children:[c.jsx("li",{children:" User account will be permanently deleted"}),c.jsx("li",{children:" All user data will be removed from the system"}),c.jsx("li",{children:" User will lose access immediately"}),c.jsx("li",{children:" This action cannot be undone"})]})]})]})}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason for deletion ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{value:E,onChange:L=>x(L.target.value),placeholder:"Please provide a detailed reason for deleting this user...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none",rows:"3",required:!0})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx("button",{onClick:ae,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:se,disabled:!E.trim(),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Delete User"})]})]})]})})]})},s3=()=>{var n,r,s,i,o,a;const t={hasAuth:!!Ye,hasDb:!!Gt,authConfig:{apiKey:!!((r=(n=Ye==null?void 0:Ye.app)==null?void 0:n.options)!=null&&r.apiKey),authDomain:!!((i=(s=Ye==null?void 0:Ye.app)==null?void 0:s.options)!=null&&i.authDomain),projectId:!!((a=(o=Ye==null?void 0:Ye.app)==null?void 0:o.options)!=null&&a.projectId)}},e=t.hasAuth&&t.hasDb&&t.authConfig.apiKey&&t.authConfig.authDomain&&t.authConfig.projectId;return{isValid:e,config:t,issues:e?[]:[!t.hasAuth&&"Firebase Auth not initialized",!t.hasDb&&"Firestore not initialized",!t.authConfig.apiKey&&"Missing API key",!t.authConfig.authDomain&&"Missing auth domain",!t.authConfig.projectId&&"Missing project ID"].filter(Boolean)}},i3=({currentUser:t})=>{const[e,n]=W.useState({appName:localStorage.getItem("appName")||"IMC ICCC Dashboard",appDescription:localStorage.getItem("appDescription")||"Daily Vehicle Report Dashboard",theme:GE(),enableNotifications:localStorage.getItem("enableNotifications")==="true",maintenanceMode:localStorage.getItem("maintenanceMode")==="true",maxLoginAttempts:localStorage.getItem("maxLoginAttempts")||"5",sessionTimeout:localStorage.getItem("sessionTimeout")||"3600000",enableAuditLog:localStorage.getItem("enableAuditLog")==="true"}),[r,s]=W.useState(null),[i,o]=W.useState(!1);W.useEffect(()=>{a()},[]);const a=()=>{const m=s3();s(m)},l=(m,g)=>{n(y=>({...y,[m]:g})),m==="theme"&&Hm(g)},u=()=>{o(!0);try{Object.entries(e).forEach(([m,g])=>{localStorage.setItem(m,g.toString())}),Hm(e.theme),alert("Settings saved successfully!")}catch(m){console.error("Error saving settings:",m),alert("Error saving settings. Please try again.")}finally{o(!1)}},h=()=>{if(confirm("Are you sure you want to reset all settings to default values?")){const m={appName:"IMC ICCC Dashboard",appDescription:"Daily Vehicle Report Dashboard",theme:"blue",enableNotifications:!1,maintenanceMode:!1,maxLoginAttempts:"5",sessionTimeout:"3600000",enableAuditLog:!1};n(m),Object.entries(m).forEach(([g,y])=>{localStorage.setItem(g,y.toString())}),alert("Settings reset to default values!")}},f=Q6().map(m=>({value:m.value,label:`${m.name}${m.value==="blue"?" (Default)":""}`,color:`bg-${m.value}-500`}));return c.jsx("div",{className:"p-4 sm:p-6 h-full overflow-y-auto",children:c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Application Settings"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Name"}),c.jsx("input",{type:"text",value:e.appName,onChange:m=>l("appName",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Description"}),c.jsx("input",{type:"text",value:e.appDescription,onChange:m=>l("appDescription",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme Color"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:f.map(m=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[c.jsx("input",{type:"radio",name:"theme",value:m.value,checked:e.theme===m.value,onChange:g=>l("theme",g.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),c.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[c.jsx("div",{className:`w-6 h-6 rounded-full ${m.color} shadow-sm`}),c.jsxs("div",{className:"flex-1",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900",children:m.label}),e.theme===m.value&&c.jsx("div",{className:"text-xs text-primary-600 mt-1",children:"Currently Active"})]})]})]},m.value))}),c.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Theme Preview"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg text-sm hover:bg-primary-700 transition-colors",children:"Primary Button"}),c.jsx("button",{className:"px-4 py-2 border border-primary-600 text-primary-600 rounded-lg text-sm hover:bg-primary-50 transition-colors",children:"Secondary Button"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-4 h-4 bg-primary-500 rounded-full"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Primary Color"})]}),c.jsx("div",{className:"text-xs text-gray-500",children:'Changes are applied immediately for preview. Click "Save Settings" to persist changes.'})]})]})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Settings"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Login Attempts"}),c.jsxs("select",{value:e.maxLoginAttempts,onChange:m=>l("maxLoginAttempts",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"3",children:"3 attempts"}),c.jsx("option",{value:"5",children:"5 attempts"}),c.jsx("option",{value:"10",children:"10 attempts"}),c.jsx("option",{value:"unlimited",children:"Unlimited"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout"}),c.jsxs("select",{value:e.sessionTimeout,onChange:m=>l("sessionTimeout",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"1800000",children:"30 minutes"}),c.jsx("option",{value:"3600000",children:"1 hour"}),c.jsx("option",{value:"7200000",children:"2 hours"}),c.jsx("option",{value:"14400000",children:"4 hours"}),c.jsx("option",{value:"28800000",children:"8 hours"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"enableAuditLog",checked:e.enableAuditLog,onChange:m=>l("enableAuditLog",m.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"enableAuditLog",className:"ml-2 block text-sm text-gray-700",children:"Enable Audit Logging"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Features"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Notifications"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Enable system notifications for users"})]}),c.jsx("input",{type:"checkbox",checked:e.enableNotifications,onChange:m=>l("enableNotifications",m.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Maintenance Mode"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Temporarily disable user access for maintenance"})]}),c.jsx("input",{type:"checkbox",checked:e.maintenanceMode,onChange:m=>l("maintenanceMode",m.target.checked),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Firebase Configuration Status"}),r&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:`p-4 rounded-lg ${r.isValid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${r.isValid?"bg-green-500":"bg-red-500"}`}),c.jsxs("p",{className:`font-medium ${r.isValid?"text-green-800":"text-red-800"}`,children:["Firebase Configuration: ",r.isValid?"Valid":"Invalid"]})]}),!r.isValid&&r.issues.length>0&&c.jsx("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:r.issues.map((m,g)=>c.jsx("li",{children:m},g))})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Authentication"}),c.jsx("p",{className:`text-sm ${r.config.hasAuth?"text-green-600":"text-red-600"}`,children:r.config.hasAuth?"Initialized":"Not Initialized"})]}),c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Firestore"}),c.jsx("p",{className:`text-sm ${r.config.hasDb?"text-green-600":"text-red-600"}`,children:r.config.hasDb?"Connected":"Not Connected"})]})]}),c.jsx("button",{onClick:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Refresh Status"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("button",{onClick:u,disabled:i,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":"Save Settings"}),c.jsx("button",{onClick:h,className:"flex-1 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Reset to Defaults"})]})]})})},o3=({currentUser:t,stats:e})=>{const[n,r]=W.useState({userGrowth:[],roleDistribution:{},statusDistribution:{},departmentDistribution:{},recentActivity:[]}),[s,i]=W.useState(!0),[o,a]=W.useState("30");W.useEffect(()=>{l()},[o]);const l=async()=>{i(!0);try{const f=await ed(),m=f.reduce((b,C)=>(b[C.role]=(b[C.role]||0)+1,b),{}),g=f.reduce((b,C)=>(b[C.status]=(b[C.status]||0)+1,b),{}),y=f.reduce((b,C)=>{const A=C.department||"Unknown";return b[A]=(b[A]||0)+1,b},{}),w=new Date,T=parseInt(o),_=[];for(let b=T;b>=0;b--){const C=new Date(w);C.setDate(C.getDate()-b);const A=C.toISOString().split("T")[0],D=f.filter(E=>E.createdAt?new Date(E.createdAt.seconds*1e3).toISOString().split("T")[0]===A:!1).length;_.push({date:A,count:D,cumulative:f.filter(E=>E.createdAt?new Date(E.createdAt.seconds*1e3)<=C:!1).length})}const k=f.sort((b,C)=>{var E,x;const A=((E=b.createdAt)==null?void 0:E.seconds)||0;return(((x=C.createdAt)==null?void 0:x.seconds)||0)-A}).slice(0,10);r({userGrowth:_,roleDistribution:m,statusDistribution:g,departmentDistribution:y,recentActivity:k})}catch(f){console.error("Error loading analytics data:",f)}finally{i(!1)}},u=f=>f?new Date(f.seconds*1e3).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"N/A",h=(f,m)=>m>0?(f/m*100).toFixed(1):0;return s?c.jsxs("div",{className:"flex items-center justify-center h-64",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("span",{className:"ml-3 text-gray-600",children:"Loading analytics..."})]}):c.jsxs("div",{className:"p-4 sm:p-6 h-full overflow-y-auto",children:[c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Time Range:"}),c.jsxs("select",{value:o,onChange:f=>a(f.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"7",children:"Last 7 days"}),c.jsx("option",{value:"30",children:"Last 30 days"}),c.jsx("option",{value:"90",children:"Last 90 days"}),c.jsx("option",{value:"365",children:"Last year"})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalUsers})]})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:c.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Approval"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.pendingUsers})]})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:c.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.approvedUsers})]})]})}),c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:c.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"})})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),c.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.suspendedUsers})]})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Role Distribution"}),c.jsx("div",{className:"space-y-3",children:Object.entries(n.roleDistribution).map(([f,m])=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${f===bt.ADMIN?"bg-purple-500":f===bt.OPERATOR?"bg-blue-500":"bg-gray-500"}`}),c.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:f})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:m}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",h(m,e.totalUsers),"%)"]})]})]},f))})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status Distribution"}),c.jsx("div",{className:"space-y-3",children:Object.entries(n.statusDistribution).map(([f,m])=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${f===Te.APPROVED?"bg-green-500":f===Te.PENDING?"bg-yellow-500":f===Te.REJECTED?"bg-red-500":"bg-gray-500"}`}),c.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:f})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:m}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",h(m,e.totalUsers),"%)"]})]})]},f))})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Department Distribution"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(n.departmentDistribution).sort(([,f],[,m])=>m-f).map(([f,m])=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:f}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:m}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",h(m,e.totalUsers),"%)"]})]})]},f))})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent User Registrations"}),c.jsx("div",{className:"space-y-3",children:n.recentActivity.map(f=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.name}),c.jsx("p",{className:"text-xs text-gray-500",children:f.email})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm text-gray-600",children:f.department}),c.jsx("p",{className:"text-xs text-gray-500",children:u(f.createdAt)})]})]},f.id))})]})]})},a3=({currentUser:t})=>{const[e,n]=W.useState(!1),[r,s]=W.useState(null),[i,o]=W.useState({dataSources:JSON.parse(localStorage.getItem("dataSources")||JSON.stringify([{id:1,name:"Primary Source",url:"",priority:1,status:"active",description:"Main live data source"}])),refreshInterval:localStorage.getItem("refreshInterval")||"300000",autoRefresh:localStorage.getItem("autoRefresh")==="true",enableFailover:localStorage.getItem("enableFailover")==="true",failoverTimeout:localStorage.getItem("failoverTimeout")||"10000"}),[a,l]=W.useState({lastBackup:localStorage.getItem("lastBackup")||null,autoBackup:localStorage.getItem("autoBackup")==="true"}),u=async(b="json")=>{n(!0);try{const C=await ed();if(b==="json"){const A=JSON.stringify(C,null,2),D=new Blob([A],{type:"application/json"}),E=URL.createObjectURL(D),x=document.createElement("a");x.href=E,x.download=`users_export_${new Date().toISOString().split("T")[0]}.json`,x.click(),URL.revokeObjectURL(E)}else if(b==="csv"){const A=["Name","Email","Role","Status","Department","Phone","Created Date"],D=C.map(j=>[j.name||"",j.email||"",j.role||"",j.status||"",j.department||"",j.phone||"",j.createdAt?new Date(j.createdAt.seconds*1e3).toLocaleDateString():""]),E=[A,...D].map(j=>j.map(R=>`"${R}"`).join(",")).join(`
`),x=new Blob([E],{type:"text/csv"}),I=URL.createObjectURL(x),N=document.createElement("a");N.href=I,N.download=`users_export_${new Date().toISOString().split("T")[0]}.csv`,N.click(),URL.revokeObjectURL(I)}s({timestamp:new Date().toISOString(),recordCount:C.length,format:b})}catch(C){console.error("Error exporting users:",C),alert("Error exporting users. Please try again.")}finally{n(!1)}},h=()=>{const b={id:Date.now(),name:`Backup Source ${i.dataSources.length}`,url:"",priority:i.dataSources.length+1,status:"inactive",description:"Backup data source"};o(C=>({...C,dataSources:[...C.dataSources,b]}))},f=b=>{if(i.dataSources.length<=1){alert("Cannot remove the last data source!");return}o(C=>({...C,dataSources:C.dataSources.filter(A=>A.id!==b)}))},m=(b,C,A)=>{o(D=>({...D,dataSources:D.dataSources.map(E=>E.id===b?{...E,[C]:A}:E)}))},g=(b,C)=>{const A=[...i.dataSources],D=A.findIndex(E=>E.id===b);C==="up"&&D>0?[A[D],A[D-1]]=[A[D-1],A[D]]:C==="down"&&D<A.length-1&&([A[D],A[D+1]]=[A[D+1],A[D]]),A.forEach((E,x)=>{E.priority=x+1}),o(E=>({...E,dataSources:A}))},y=async b=>{if(!b){alert("Please enter a URL first");return}try{return n(!0),(await fetch(b)).ok?(alert(" Data source is accessible!"),!0):(alert(" Data source is not accessible"),!1)}catch(C){return alert(" Error testing data source: "+C.message),!1}finally{n(!1)}},w=()=>{localStorage.setItem("dataSources",JSON.stringify(i.dataSources)),localStorage.setItem("refreshInterval",i.refreshInterval),localStorage.setItem("autoRefresh",i.autoRefresh.toString()),localStorage.setItem("enableFailover",i.enableFailover.toString()),localStorage.setItem("failoverTimeout",i.failoverTimeout),alert("Multi-source data configuration updated successfully!")},T=()=>{localStorage.setItem("autoBackup",a.autoBackup.toString()),a.autoBackup&&(localStorage.setItem("lastBackup",new Date().toISOString()),l(b=>({...b,lastBackup:new Date().toISOString()}))),alert("Backup settings updated successfully!")},_=async()=>{n(!0);try{const b=await ed(),C={timestamp:new Date().toISOString(),version:"1.0",users:b,metadata:{totalUsers:b.length,exportedBy:t.email,exportedAt:new Date().toISOString()}},A=JSON.stringify(C,null,2),D=new Blob([A],{type:"application/json"}),E=URL.createObjectURL(D),x=document.createElement("a");x.href=E,x.download=`backup_${new Date().toISOString().split("T")[0]}.json`,x.click(),URL.revokeObjectURL(E),localStorage.setItem("lastBackup",new Date().toISOString()),l(I=>({...I,lastBackup:new Date().toISOString()}))}catch(b){console.error("Error creating backup:",b),alert("Error creating backup. Please try again.")}finally{n(!1)}},k=b=>b?new Date(b).toLocaleString("en-IN"):"Never";return c.jsx("div",{className:"p-4 sm:p-6 h-full overflow-y-auto",children:c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Export"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Export user data for backup or analysis purposes."}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[c.jsxs("button",{onClick:()=>u("json"),disabled:e,className:"flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export as JSON"]}),c.jsxs("button",{onClick:()=>u("csv"),disabled:e,className:"flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export as CSV"]})]}),r&&c.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-green-800 font-medium",children:"Export Completed"}),c.jsxs("p",{className:"text-green-700 text-sm",children:[r.recordCount," records exported as ",r.format.toUpperCase()," on ",k(r.timestamp)]})]})]})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Multi-Source Data Configuration"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Configure multiple Google Sheets with automatic failover"})]}),c.jsxs("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm flex items-center",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Source"]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[c.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Failover Settings"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"enableFailover",checked:i.enableFailover,onChange:b=>o(C=>({...C,enableFailover:b.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"enableFailover",className:"ml-2 block text-sm text-blue-800",children:"Enable Automatic Failover"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-1",children:"Failover Timeout"}),c.jsxs("select",{value:i.failoverTimeout,onChange:b=>o(C=>({...C,failoverTimeout:b.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[c.jsx("option",{value:"5000",children:"5 seconds"}),c.jsx("option",{value:"10000",children:"10 seconds"}),c.jsx("option",{value:"15000",children:"15 seconds"}),c.jsx("option",{value:"30000",children:"30 seconds"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-1",children:"Refresh Interval"}),c.jsxs("select",{value:i.refreshInterval,onChange:b=>o(C=>({...C,refreshInterval:b.target.value})),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",children:[c.jsx("option",{value:"60000",children:"1 minute"}),c.jsx("option",{value:"300000",children:"5 minutes"}),c.jsx("option",{value:"600000",children:"10 minutes"}),c.jsx("option",{value:"1800000",children:"30 minutes"}),c.jsx("option",{value:"3600000",children:"1 hour"})]})]})]})]}),c.jsx("div",{className:"space-y-4 mb-6",children:i.dataSources.map((b,C)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${b.status==="active"?"bg-green-500":"bg-gray-400"}`}),c.jsxs("span",{className:"font-medium text-gray-900",children:["Priority ",b.priority]}),C===0&&c.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"Primary"}),C>0&&c.jsx("span",{className:"ml-2 px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:"Backup"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>g(b.id,"up"),disabled:C===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50",title:"Move Up",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),c.jsx("button",{onClick:()=>g(b.id,"down"),disabled:C===i.dataSources.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50",title:"Move Down",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),c.jsx("button",{onClick:()=>f(b.id),disabled:i.dataSources.length<=1,className:"p-1 text-red-400 hover:text-red-600 disabled:opacity-50",title:"Remove Source",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source Name"}),c.jsx("input",{type:"text",value:b.name,onChange:A=>m(b.id,"name",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("input",{type:"text",value:b.description,onChange:A=>m(b.id,"description",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]})]}),c.jsxs("div",{className:"mt-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Google Sheets URL"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"url",value:b.url,onChange:A=>m(b.id,"url",A.target.value),placeholder:"https://docs.google.com/spreadsheets/d/...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"}),c.jsx("button",{onClick:()=>y(b.url),disabled:e||!b.url,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm",children:"Test"})]})]})]},b.id))}),c.jsx("div",{className:"border-t pt-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"autoRefresh",checked:i.autoRefresh,onChange:b=>o(C=>({...C,autoRefresh:b.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"autoRefresh",className:"ml-2 block text-sm text-gray-700",children:"Enable Auto Refresh"})]}),c.jsx("button",{onClick:w,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Configuration"})]})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Backup Management"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Manage system backups and data recovery."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Last Backup"}),c.jsx("p",{className:"text-sm text-gray-600",children:k(a.lastBackup)})]}),c.jsx("button",{onClick:_,disabled:e,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:e?"Creating...":"Create Backup"})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:"Automatic Backup"}),c.jsx("p",{className:"text-sm text-gray-600",children:a.autoBackup?"Enabled - Daily backups":"Disabled"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("input",{type:"checkbox",id:"autoBackup",checked:a.autoBackup,onChange:b=>l(C=>({...C,autoBackup:b.target.checked})),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),c.jsx("label",{htmlFor:"autoBackup",className:"text-sm text-gray-700",children:"Enable Auto Backup"}),c.jsx("button",{onClick:T,className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Save"})]})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Health"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-green-800",children:"Database"}),c.jsx("p",{className:"text-sm text-green-600",children:"Connected"})]})]})}),c.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-green-800",children:"Authentication"}),c.jsx("p",{className:"text-sm text-green-600",children:"Active"})]})]})}),c.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-yellow-800",children:"Data Sync"}),c.jsx("p",{className:"text-sm text-yellow-600",children:"Checking..."})]})]})})]})]})]})})},l3=({currentUser:t,onClose:e})=>{var l;const[n,r]=W.useState("users"),[s,i]=W.useState({totalUsers:0,pendingUsers:0,approvedUsers:0,suspendedUsers:0}),o=[{id:"users",name:"User Management",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),component:r3},{id:"analytics",name:"Analytics",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),component:o3},{id:"data",name:"Data Management",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),component:a3},{id:"settings",name:"System Settings",icon:c.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),component:i3}],a=(l=o.find(u=>u.id===n))==null?void 0:l.component;return c.jsx("div",{className:"fixed inset-0 admin-modal-backdrop flex items-center justify-center p-2 sm:p-4 z-50",children:c.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-2xl w-full max-w-7xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4 sm:p-6 flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold",children:"Admin Dashboard"}),c.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:"Comprehensive system administration"})]}),c.jsx("button",{onClick:e,className:"text-white hover:text-gray-200 transition-colors p-1 touch-manipulation",children:c.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mt-4",children:[c.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"text-lg sm:text-xl font-bold",children:s.totalUsers}),c.jsx("div",{className:"text-xs sm:text-sm text-blue-100",children:"Total Users"})]}),c.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"text-lg sm:text-xl font-bold text-yellow-300",children:s.pendingUsers}),c.jsx("div",{className:"text-xs sm:text-sm text-blue-100",children:"Pending"})]}),c.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"text-lg sm:text-xl font-bold text-green-300",children:s.approvedUsers}),c.jsx("div",{className:"text-xs sm:text-sm text-blue-100",children:"Approved"})]}),c.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 text-center",children:[c.jsx("div",{className:"text-lg sm:text-xl font-bold text-red-300",children:s.suspendedUsers}),c.jsx("div",{className:"text-xs sm:text-sm text-blue-100",children:"Suspended"})]})]})]}),c.jsx("div",{className:"bg-gray-50 border-b border-gray-200 flex-shrink-0",children:c.jsx("div",{className:"flex overflow-x-auto",children:o.map(u=>c.jsxs("button",{onClick:()=>r(u.id),className:`flex items-center space-x-2 px-4 sm:px-6 py-3 sm:py-4 text-sm font-medium whitespace-nowrap transition-colors ${n===u.id?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[u.icon,c.jsx("span",{className:"hidden sm:inline",children:u.name})]},u.id))})}),c.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-gray-50 admin-scrollbar",children:c.jsx("div",{className:"h-full",children:a&&c.jsx(a,{currentUser:t,stats:s,setStats:i})})})]})})};function dd(t){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dd(t)}function si(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ot(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Jn(t){Ot(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||dd(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function c3(t,e){Ot(2,arguments);var n=Jn(t).getTime(),r=si(e);return new Date(n+r)}var u3={};function Jd(){return u3}function d3(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function h3(t){return Ot(1,arguments),t instanceof Date||dd(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function f3(t){if(Ot(1,arguments),!h3(t)&&typeof t!="number")return!1;var e=Jn(t);return!isNaN(Number(e))}function m3(t,e){Ot(2,arguments);var n=si(e);return c3(t,-n)}var p3=864e5;function g3(t){Ot(1,arguments);var e=Jn(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/p3)+1}function hd(t){Ot(1,arguments);var e=1,n=Jn(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function YE(t){Ot(1,arguments);var e=Jn(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=hd(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=hd(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function v3(t){Ot(1,arguments);var e=YE(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=hd(n);return r}var y3=6048e5;function x3(t){Ot(1,arguments);var e=Jn(t),n=hd(e).getTime()-v3(e).getTime();return Math.round(n/y3)+1}function fd(t,e){var n,r,s,i,o,a,l,u;Ot(1,arguments);var h=Jd(),f=si((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&s!==void 0?s:h.weekStartsOn)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=Jn(t),g=m.getUTCDay(),y=(g<f?7:0)+g-f;return m.setUTCDate(m.getUTCDate()-y),m.setUTCHours(0,0,0,0),m}function QE(t,e){var n,r,s,i,o,a,l,u;Ot(1,arguments);var h=Jn(t),f=h.getUTCFullYear(),m=Jd(),g=si((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&r!==void 0?r:(l=m.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(f+1,0,g),y.setUTCHours(0,0,0,0);var w=fd(y,e),T=new Date(0);T.setUTCFullYear(f,0,g),T.setUTCHours(0,0,0,0);var _=fd(T,e);return h.getTime()>=w.getTime()?f+1:h.getTime()>=_.getTime()?f:f-1}function _3(t,e){var n,r,s,i,o,a,l,u;Ot(1,arguments);var h=Jd(),f=si((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&s!==void 0?s:h.firstWeekContainsDate)!==null&&r!==void 0?r:(l=h.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),m=QE(t,e),g=new Date(0);g.setUTCFullYear(m,0,f),g.setUTCHours(0,0,0,0);var y=fd(g,e);return y}var w3=6048e5;function b3(t,e){Ot(1,arguments);var n=Jn(t),r=fd(n,e).getTime()-_3(n,e).getTime();return Math.round(r/w3)+1}function we(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var jr={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return we(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):we(r+1,2)},d:function(e,n){return we(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return we(e.getUTCHours()%12||12,n.length)},H:function(e,n){return we(e.getUTCHours(),n.length)},m:function(e,n){return we(e.getUTCMinutes(),n.length)},s:function(e,n){return we(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return we(i,n.length)}},xi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},k3={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return jr.y(e,n)},Y:function(e,n,r,s){var i=QE(e,s),o=i>0?i:1-i;if(n==="YY"){var a=o%100;return we(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):we(o,n.length)},R:function(e,n){var r=YE(e);return we(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return we(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return we(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return we(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return jr.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return we(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=b3(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):we(i,n.length)},I:function(e,n,r){var s=x3(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):we(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):jr.d(e,n)},D:function(e,n,r){var s=g3(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):we(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return we(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return we(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return we(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=xi.noon:s===0?i=xi.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=xi.evening:s>=12?i=xi.afternoon:s>=4?i=xi.morning:i=xi.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return jr.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):jr.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):we(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):we(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):jr.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):jr.s(e,n)},S:function(e,n){return jr.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return n1(o);case"XXXX":case"XX":return Ms(o);case"XXXXX":case"XXX":default:return Ms(o,":")}},x:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"x":return n1(o);case"xxxx":case"xx":return Ms(o);case"xxxxx":case"xxx":default:return Ms(o,":")}},O:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+t1(o,":");case"OOOO":default:return"GMT"+Ms(o,":")}},z:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+t1(o,":");case"zzzz":default:return"GMT"+Ms(o,":")}},t:function(e,n,r,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return we(o,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,o=i.getTime();return we(o,n.length)}};function t1(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e;return n+String(s)+o+we(i,2)}function n1(t,e){if(t%60===0){var n=t>0?"-":"+";return n+we(Math.abs(t)/60,2)}return Ms(t,e)}function Ms(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=we(Math.floor(s/60),2),o=we(s%60,2);return r+i+n+o}var r1=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},XE=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},E3=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return r1(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",r1(s,n)).replace("{{time}}",XE(i,n))},T3={p:XE,P:E3},S3=["D","DD"],I3=["YY","YYYY"];function C3(t){return S3.indexOf(t)!==-1}function N3(t){return I3.indexOf(t)!==-1}function s1(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var A3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},j3=function(e,n,r){var s,i=A3[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function pf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var P3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},R3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},D3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M3={date:pf({formats:P3,defaultWidth:"full"}),time:pf({formats:R3,defaultWidth:"full"}),dateTime:pf({formats:D3,defaultWidth:"full"})},L3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},O3=function(e,n,r,s){return L3[e]};function ta(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return s[u]}}var V3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},F3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},B3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},z3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},U3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},W3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$3=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},H3={ordinalNumber:$3,era:ta({values:V3,defaultWidth:"wide"}),quarter:ta({values:F3,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ta({values:B3,defaultWidth:"wide"}),day:ta({values:z3,defaultWidth:"wide"}),dayPeriod:ta({values:U3,defaultWidth:"wide",formattingValues:W3,defaultFormattingWidth:"wide"})};function na(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?G3(a,function(f){return f.test(o)}):q3(a,function(f){return f.test(o)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var h=e.slice(o.length);return{value:u,rest:h}}}function q3(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function G3(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function K3(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(s.length);return{value:o,rest:a}}}var Y3=/^(\d+)(th|st|nd|rd)?/i,Q3=/\d+/i,X3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Z3={any:[/^b/i,/^(a|c)/i]},J3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},eO={any:[/1/i,/2/i,/3/i,/4/i]},tO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aO={ordinalNumber:K3({matchPattern:Y3,parsePattern:Q3,valueCallback:function(e){return parseInt(e,10)}}),era:na({matchPatterns:X3,defaultMatchWidth:"wide",parsePatterns:Z3,defaultParseWidth:"any"}),quarter:na({matchPatterns:J3,defaultMatchWidth:"wide",parsePatterns:eO,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:na({matchPatterns:tO,defaultMatchWidth:"wide",parsePatterns:nO,defaultParseWidth:"any"}),day:na({matchPatterns:rO,defaultMatchWidth:"wide",parsePatterns:sO,defaultParseWidth:"any"}),dayPeriod:na({matchPatterns:iO,defaultMatchWidth:"any",parsePatterns:oO,defaultParseWidth:"any"})},lO={code:"en-US",formatDistance:j3,formatLong:M3,formatRelative:O3,localize:H3,match:aO,options:{weekStartsOn:0,firstWeekContainsDate:1}},cO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dO=/^'([^]*?)'?$/,hO=/''/g,fO=/[a-zA-Z]/;function ZE(t,e,n){var r,s,i,o,a,l,u,h,f,m,g,y,w,T;Ot(2,arguments);var _=String(e),k=Jd(),b=(r=(s=void 0)!==null&&s!==void 0?s:k.locale)!==null&&r!==void 0?r:lO,C=si((i=(o=(a=(l=void 0)!==null&&l!==void 0?l:void 0)!==null&&a!==void 0?a:k.firstWeekContainsDate)!==null&&o!==void 0?o:(u=k.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=si((f=(m=(g=(y=void 0)!==null&&y!==void 0?y:void 0)!==null&&g!==void 0?g:k.weekStartsOn)!==null&&m!==void 0?m:(w=k.locale)===null||w===void 0||(T=w.options)===null||T===void 0?void 0:T.weekStartsOn)!==null&&f!==void 0?f:0);if(!(A>=0&&A<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!b.localize)throw new RangeError("locale must contain localize property");if(!b.formatLong)throw new RangeError("locale must contain formatLong property");var D=Jn(t);if(!f3(D))throw new RangeError("Invalid time value");var E=d3(D),x=m3(D,E),I={firstWeekContainsDate:C,weekStartsOn:A,locale:b,_originalDate:D},N=_.match(uO).map(function(j){var R=j[0];if(R==="p"||R==="P"){var P=T3[R];return P(j,b.formatLong)}return j}).join("").match(cO).map(function(j){if(j==="''")return"'";var R=j[0];if(R==="'")return mO(j);var P=k3[R];if(P)return N3(j)&&s1(j,e,String(t)),C3(j)&&s1(j,e,String(t)),P(x,j,b.localize,I);if(R.match(fO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return j}).join("");return N}function mO(t){var e=t.match(dO);return e?e[1].replace(hO,"'"):t}const pO=()=>ZE(new Date,"yyyy-MM-dd"),i1=t=>{if(!t)return"";const e=new Date(t);return isNaN(e.getTime())?t:ZE(e,"yyyy-MM-dd")},qm=(t,e,n,r=null,s="")=>!t||t.length===0?[]:t.filter(o=>{if(s==="sphereWorkshopExit")return!n||String(o.Zone)===String(n);const a=i1(o.Date),l=i1(e),u=!e||a===l,h=!n||String(o.Zone)===String(n);let f=!0;if(r!==null&&r!=="all"&&(o.TripCount0!==void 0||o.TripCount1!==void 0||o.TripCount2!==void 0))switch(r){case"0":f=(o.TripCount0||0)>0;break;case"1":f=(o.TripCount1||0)>0;break;case"2":f=(o.TripCount2||0)>0;break;default:f=(o.TripCount0||0)+(o.TripCount1||0)+(o.TripCount2||0)>0;break}else r==="all"&&(o.TripCount0!==void 0||o.TripCount1!==void 0||o.TripCount2!==void 0)&&(f=(o.TripCount0||0)+(o.TripCount1||0)+(o.TripCount2||0)>=0);return u&&h&&f}),ra=t=>({onRouteVehicles:"Vehicles On Route",onBoardAfter3PM:"Vehicles On Board",lessThan3Trips:"Underutilized Vehicles",glitchPercentage:"Software Route Coverage",issuesPost0710:"Late Arrivals",fuelStation:"Fuel Visits",post06AMOpenIssues:"Late Departures",vehicleBreakdown:"Breakdowns",vehicleNumbers:"Vehicle Numbers",sphereWorkshopExit:"Workshop Exit Vehicles"})[t]||"Vehicle Count",_i=t=>({onRouteVehicles:{backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",hoverBackgroundColor:"rgba(34, 197, 94, 0.9)"},onBoardAfter3PM:{backgroundColor:"rgba(251, 191, 36, 0.8)",borderColor:"rgba(251, 191, 36, 1)",hoverBackgroundColor:"rgba(251, 191, 36, 0.9)"},lessThan3Trips:{backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgba(239, 68, 68, 1)",hoverBackgroundColor:"rgba(239, 68, 68, 0.9)"},glitchPercentage:{backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgba(168, 85, 247, 1)",hoverBackgroundColor:"rgba(168, 85, 247, 0.9)"},issuesPost0710:{backgroundColor:"rgba(245, 101, 101, 0.8)",borderColor:"rgba(245, 101, 101, 1)",hoverBackgroundColor:"rgba(245, 101, 101, 0.9)"},fuelStation:{backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",hoverBackgroundColor:"rgba(59, 130, 246, 0.9)"},post06AMOpenIssues:{backgroundColor:"rgba(249, 115, 22, 0.8)",borderColor:"rgba(249, 115, 22, 1)",hoverBackgroundColor:"rgba(249, 115, 22, 0.9)"},vehicleBreakdown:{backgroundColor:"rgba(220, 38, 38, 0.8)",borderColor:"rgba(220, 38, 38, 1)",hoverBackgroundColor:"rgba(220, 38, 38, 0.9)"},vehicleNumbers:{backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgba(16, 185, 129, 1)",hoverBackgroundColor:"rgba(16, 185, 129, 0.9)"},sphereWorkshopExit:{backgroundColor:"rgba(147, 51, 234, 0.8)",borderColor:"rgba(147, 51, 234, 1)",hoverBackgroundColor:"rgba(147, 51, 234, 0.9)"}})[t]||{backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",hoverBackgroundColor:"rgba(59, 130, 246, 0.9)"},Gm=(t,e,n="Zone",r="",s=null)=>{if(!t||t.length===0){const y=_i(r);return{labels:[],datasets:[{label:ra(r),data:[],...y,borderWidth:2,borderRadius:4,borderSkipped:!1}]}}const i=r==="glitchPercentage",o=r==="lessThan3Trips",a=["issuesPost0710","vehicleBreakdown","fuelStation","post06AMOpenIssues"].includes(r),l=r==="sphereWorkshopExit";if(o){const y={},w={};t.forEach(C=>{const A=C[n]||"Unknown",D=Number(A);if(!isNaN(D)&&D<=0)return;let E=0;if(s==="all"||!s)E=(C.TripCount0||0)+(C.TripCount1||0)+(C.TripCount2||0);else switch(s){case"0":E=C.TripCount0||0;break;case"1":E=C.TripCount1||0;break;case"2":E=C.TripCount2||0;break}const x=C.Remarks||"";y[A]?(y[A]+=E,x&&!w[A].includes(x)&&(w[A]+="; "+x)):(y[A]=E,w[A]=x)});const T=Object.keys(y).sort((C,A)=>{const D=parseInt(C),E=parseInt(A);return!isNaN(D)&&!isNaN(E)?D-E:C.localeCompare(A)}),_=T.map(C=>y[C]),k=_i(r);let b="Underutilized Vehicles";return s&&s!=="all"&&(b=`Vehicles with ${s} Trip${s==="1"?"":"s"}`),{labels:T,datasets:[{label:b,data:_,...k,borderWidth:2,borderRadius:4,borderSkipped:!1}]}}else if(a){const y={},w={},T={};t.forEach(C=>{const A=C[n],D=parseFloat(C[e])||0,E=Number(A);!isNaN(E)&&E<=0||(y[A]?y[A]+=D:y[A]=D,C.IssueBreakdown&&(w[A]||(w[A]={}),Object.keys(C.IssueBreakdown).forEach(x=>{w[A][x]||(w[A][x]=0),w[A][x]+=C.IssueBreakdown[x]||0})),C.Details&&C.Details.length>0&&(T[A]||(T[A]=[]),T[A]=T[A].concat(C.Details)))});const _=Object.keys(y).sort((C,A)=>{const D=parseInt(C),E=parseInt(A);return!isNaN(D)&&!isNaN(E)?D-E:C.localeCompare(A)}),k=_.map(C=>y[C]),b=_i(r);return{labels:_,datasets:[{label:ra(r),data:k,...b,borderWidth:2,borderRadius:4,borderSkipped:!1,issueBreakdowns:w,vehicleDetails:T}]}}else if(l){const y=t.sort((b,C)=>{const A=b["Workshop Departure Time"]||"",D=C["Workshop Departure Time"]||"";return A.localeCompare(D)}),w=[],T=[],_={};y.forEach((b,C)=>{const A=b["Workshop Departure Time"]||`Record ${C+1}`,D=b.Zone||"Unknown",E=Number(D);!isNaN(E)&&E<=0||(w.push(A),T.push(Number(D)),_[A]=[{ward:b.Ward,permanentVehicleNumber:b["Permanent Vehicle Number"],spareVehicleNumber:b["Spare Vehicle Number"],workshopDepartureTime:b["Workshop Departure Time"],zone:b.Zone,date:b.Date}])});const k=_i(r);return{labels:w,datasets:[{label:ra(r),data:T,borderColor:k.borderColor,backgroundColor:k.backgroundColor,pointBackgroundColor:k.borderColor,pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8,fill:!1,tension:.4,vehicleDetails:_}]}}else if(i){const y={},w={},T={};t.forEach(A=>{const D=A[n]||"Unknown",E=Number(D);if(!isNaN(E)&&E<=0)return;const x=A.SoftwarePercentage||0,I=A.ActualPercentage||0,N=A.Remarks||"";y[D]?(y[D]=x,w[D]=I,N&&!T[D].includes(N)&&(T[D]+="; "+N)):(y[D]=x,w[D]=I,T[D]=N)});const _=Object.keys(y).sort((A,D)=>{const E=parseInt(A),x=parseInt(D);return!isNaN(E)&&!isNaN(x)?E-x:A.localeCompare(D)}),k=_.map(A=>({x:A,y:y[A],remarks:T[A]})),b=_.map(A=>({x:A,y:w[A],remarks:T[A]}));if(t.some(A=>A.SoftwarePercentage&&A.ActualPercentage))return{labels:_,datasets:[{label:"Software Route Coverage",data:k,backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgba(168, 85, 247, 1)",hoverBackgroundColor:"rgba(168, 85, 247, 0.9)",borderWidth:2,borderRadius:4,borderSkipped:!1},{label:"Actual Route Coverage",data:b,backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",hoverBackgroundColor:"rgba(34, 197, 94, 0.9)",borderWidth:2,borderRadius:4,borderSkipped:!1}]};{const A=_i(r);return{labels:_,datasets:[{label:ra(r),data:k,...A,borderWidth:2,borderRadius:4,borderSkipped:!1}]}}}const u={},h={};t.forEach(y=>{const w=y[n]||"Unknown",T=Number(w);if(!isNaN(T)&&T<=0)return;const _=y[e],k=parseInt(_)||0,b=y.Remarks||"";u[w]?(u[w]+=k,b&&!h[w].includes(b)&&(h[w]+="; "+b)):(u[w]=k,h[w]=b)});const f=Object.keys(u).sort((y,w)=>{const T=parseInt(y),_=parseInt(w);return!isNaN(T)&&!isNaN(_)?T-_:y.localeCompare(w)}),m=f.map(y=>u[y]),g=_i(r);return{labels:f,datasets:[{label:ra(r),data:m,...g,borderWidth:2,borderRadius:4,borderSkipped:!1}]}},gO=t=>t==="glitchPercentage"?{xLabel:"Zones",yLabel:"Route Coverage (%)"}:t==="sphereWorkshopExit"?{xLabel:"Workshop Departure Time",yLabel:"Zones"}:{xLabel:"Zones",yLabel:"Number of Vehicles"},JE=(t,e)=>{const n=gO(e),r=e==="glitchPercentage",s=["issuesPost0710","vehicleBreakdown","fuelStation","post06AMOpenIssues"].includes(e),i=e==="sphereWorkshopExit";return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:12,family:"Inter, system-ui, sans-serif"},padding:20,usePointStyle:!0,pointStyle:"rect"}},title:{display:!0,text:t,font:{size:16,weight:"bold",family:"Inter, system-ui, sans-serif"},padding:{bottom:20},color:"#1f2937"},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#f9fafb",bodyColor:"#f9fafb",borderColor:"#374151",borderWidth:1,cornerRadius:8,displayColors:!0,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},padding:12,callbacks:{title:function(o){return i?`Workshop Time: ${o[0].label}`:`Zone ${o[0].label}`},label:function(o){const a=o.dataset.label||"",l=o.parsed.y;return r?`${a}: ${l.toFixed(1)}%`:i?`Zone: ${l}`:`${a}: ${l}`},afterLabel:function(o){return r&&o.raw&&typeof o.raw=="object"&&o.raw.remarks?`Note: ${o.raw.remarks}`:""},afterBody:function(o){if(s&&o.length>0){const a=o[0].datasetIndex,l=o[0].chart.data.datasets[a],u=o[0].label;if(l.issueBreakdowns&&l.issueBreakdowns[u]){const h=l.issueBreakdowns[u],f=["","Issue Breakdown:"];return Object.keys(h).forEach(m=>{const g=h[m];g>0&&f.push(`${m}: ${g}`)}),f.length>2?f:[]}}return[]}}}},scales:{y:{beginAtZero:!0,max:r?100:void 0,ticks:{stepSize:r?10:1,font:{size:11,family:"Inter, system-ui, sans-serif"},color:"#6b7280",callback:function(o){return r?o+"%":o}},title:{display:!0,text:n.yLabel,font:{size:12,weight:"bold",family:"Inter, system-ui, sans-serif"},color:"#374151",padding:{bottom:10}},grid:{color:"#f3f4f6",lineWidth:1},border:{color:"#e5e7eb"}},x:{title:{display:!0,text:n.xLabel,font:{size:12,weight:"bold",family:"Inter, system-ui, sans-serif"},color:"#374151",padding:{top:10}},ticks:{font:{size:11,family:"Inter, system-ui, sans-serif"},color:"#6b7280"},grid:{display:!1},border:{color:"#e5e7eb"}}},interaction:{intersect:!1,mode:"index"},animation:{duration:750,easing:"easeInOutQuart"},layout:{padding:{top:10,bottom:10,left:10,right:10}}}},Ur={onRouteVehicles:"On Route Vehicles After 3:00 PM",onBoardAfter3PM:"Vehicle on Route after 3:00 PM",lessThan3Trips:"Vehicles with Less than 3 Trips",glitchPercentage:"Route Coverage Percent",issuesPost0710:"Vehicles Arriving At First Point After 7:10 AM",fuelStation:"Vehicles Going to Fuel Station On Route",post06AMOpenIssues:"Open Tipper Leaving Zones Parking After 6:00 AM",vehicleBreakdown:"On Route Vehicles Breakdown Information",vehicleNumbers:"Zone Wise Breakdown Vehicle Count",sphereWorkshopExit:"Sphere Vehicles Leaving Workshops Late"},Km=()=>"Count",vO=({isOpen:t,onClose:e,allData:n,selectedDate:r,selectedZone:s,loading:i,error:o})=>{var D,E,x;const[a,l]=W.useState("all"),[u,h]=W.useState("chart");if(!t)return null;const f="lessThan3Trips",m=n[f]||[],g=qm(m,r,s,a,f),y=Km(),w=Gm(g,y,"Zone",f,a),T=JE(Ur[f],f),_=((E=(D=w.datasets[0])==null?void 0:D.data)==null?void 0:E.reduce((I,N)=>I+N,0))||0,k=Math.max(...((x=w.datasets[0])==null?void 0:x.data)||[0]),b=_>0?(_/w.labels.length).toFixed(1):0;let C=w;w.labels.length===0&&m.length===0&&(C={labels:["Zone 1","Zone 2","Zone 3","Zone 4","Zone 5"],datasets:[{label:"Test Vehicles",data:[12,8,15,6,10],backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgba(239, 68, 68, 1)",hoverBackgroundColor:"rgba(239, 68, 68, 0.9)",borderWidth:2,borderRadius:4,borderSkipped:!1}]});const A=I=>{I.target===I.currentTarget&&e()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",onClick:A,children:c.jsxs("div",{className:"bg-white mobile-modal tablet-modal desktop-modal rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-7xl overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white p-4 sm:p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-2 sm:p-3 mr-3 sm:mr-4",children:c.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:Ur[f]}),c.jsx("p",{className:"text-red-100 mt-1 text-sm sm:text-base",children:"Detailed analysis and navigation"})]})]}),c.jsx("button",{onClick:e,className:"bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg p-2 transition-all duration-200 touch-manipulation",children:c.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),c.jsxs("div",{className:"mobile-modal-content tablet-optimized overflow-y-auto mobile-scroll",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[c.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border border-red-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-red-600 text-sm font-medium",children:"Total Vehicles"}),c.jsx("p",{className:"text-2xl font-bold text-red-700",children:_})]}),c.jsx("div",{className:"bg-red-500 rounded-lg p-2",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),c.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-orange-600 text-sm font-medium",children:"Max per Zone"}),c.jsx("p",{className:"text-2xl font-bold text-orange-700",children:k})]}),c.jsx("div",{className:"bg-orange-500 rounded-lg p-2",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})})]})}),c.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4 border border-yellow-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-yellow-600 text-sm font-medium",children:"Average"}),c.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:b})]}),c.jsx("div",{className:"bg-yellow-500 rounded-lg p-2",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]})}),c.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-green-600 text-sm font-medium",children:"Active Zones"}),c.jsx("p",{className:"text-2xl font-bold text-green-700",children:w.labels.length})]}),c.jsx("div",{className:"bg-green-500 rounded-lg p-2",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})})})]})})]}),c.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[c.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Count Filter:"}),c.jsxs("select",{value:a,onChange:I=>l(I.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200",children:[c.jsx("option",{value:"all",children:"All Vehicles (<3 trips)"}),c.jsx("option",{value:"0",children:"0 Trips Only"}),c.jsx("option",{value:"1",children:"1 Trip Only"}),c.jsx("option",{value:"2",children:"2 Trips Only"})]})]})}),c.jsxs("div",{className:"flex bg-white rounded-lg border border-gray-200 p-1",children:[c.jsxs("button",{onClick:()=>h("chart"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${u==="chart"?"bg-red-500 text-white shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[c.jsx("svg",{className:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Chart View"]}),c.jsxs("button",{onClick:()=>h("table"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${u==="table"?"bg-red-500 text-white shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[c.jsx("svg",{className:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Table View"]})]})]})}),u==="chart"?c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:c.jsx("div",{className:"h-96",children:i?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading chart data..."})]})}):o?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center",children:[c.jsx("svg",{className:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Error Loading Data"}),c.jsx("p",{className:"text-gray-500",children:o})]})}):c.jsx(KE,{data:C,options:T,title:Ur[f],loading:i,error:o,sheetName:f,rawData:g})})}):c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zone"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle Count"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.labels.map((I,N)=>{var P;const j=((P=C.datasets[0])==null?void 0:P.data[N])||0,R=_>0?(j/_*100).toFixed(1):0;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:I}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[R,"%"]})]},I)})})]})})})]})]})})},yO="1DsDk17Vyf2zj5kxr86JPVhYZ04ZstY0IAH7La4UeVa0",eT={onRouteVehicles:"0",onBoardAfter3PM:"1335240771",lessThan3Trips:"1474814226",glitchPercentage:"1163492617",issuesPost0710:"203626227",fuelStation:"431461673",post06AMOpenIssues:"1903869379",vehicleBreakdown:"213524255",vehicleNumbers:"510665731",sphereWorkshopExit:"291765477"},xO=t=>`https://docs.google.com/spreadsheets/d/${yO}/export?format=csv&gid=${t}`,_O=t=>{console.log(" CSV Parser - Input length:",t.length),console.log(" CSV Parser - Contains newlines:",t.includes(`
`)),console.log(" CSV Parser - Contains dates:",t.includes("2025-"));let e=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`);if(!e.includes(`
`)&&e.includes("2025-")){console.log("  Detected single-line CSV format - applying fix");const o=e.search(/\d{4}-\d{2}-\d{2}/);if(o>0){const l=e.substring(0,o).lastIndexOf(",");if(l>0){const u=e.substring(0,l+1).trim(),h=e.substring(l+1).trim();console.log(" Extracted header:",u),console.log(" Data section preview:",h.substring(0,100)+"...");const f=h.split(/(?=\d{4}-\d{2}-\d{2})/).filter(m=>m.trim());console.log(" Found data rows:",f.length),e=u+`
`+f.join(`
`)}else e=e.replace(/(\d{4}-\d{2}-\d{2})/g,`
$1`),e=e.replace(/^\n/,"")}console.log(" Fixed CSV format - new line count:",e.split(`
`).length)}const n=e.split(`
`);if(n.length===0)return[];const r=o=>{const a=[];let l="",u=!1;for(let h=0;h<o.length;h++){const f=o[h];f==='"'?u=!u:f===","&&!u?(a.push(l.trim()),l=""):l+=f}return a.push(l.trim()),a},s=r(n[0]).map(o=>o.replace(/"/g,"").trim()),i=[];for(let o=1;o<n.length;o++)if(n[o].trim()){const a=r(n[o]).map(u=>u.replace(/"/g,"").trim()),l={};s.forEach((u,h)=>{l[u]=a[h]||""}),i.push(l)}return i},wO=t=>{const e=[];return t.forEach(n=>{const r=jn(n.Date);Object.keys(n).forEach(s=>{if(s!=="Date"&&s.startsWith("Zone ")){const i=s.replace("Zone ",""),o=parseInt(n[s])||0;e.push({Date:r,Zone:i,Count:o})}})}),e},bO=t=>{const e=[];return t.forEach(n=>{const r=n.Date;let s=n.Zone;if(s){const o=s.match(/Zone\s*(-?\d+)/);o&&(s=o[1])}let i=0;Object.keys(n).forEach(o=>{o!=="Date"&&o!=="Zone"&&!isNaN(parseInt(n[o]))&&(i+=parseInt(n[o])||0)}),i>0&&e.push({Date:r,Zone:s,Count:i})}),e},kO=t=>{const e=[],n={};return t.forEach(r=>{const s=jn(r.Date);let i=r.Zone;const o=r.Issue||"",a=r["Vehicle No."]||"",l=r["Breakdown Time"]||"",u=r["Spare/OK"]||"",h=r["Spare/OK Time"]||"";!s||!i||!o||(i=String(i),n[i]||(n[i]={Date:s,Zone:i,Count:0,IssueBreakdown:{},Details:[]}),n[i].Count+=1,n[i].IssueBreakdown[o]||(n[i].IssueBreakdown[o]=0),n[i].IssueBreakdown[o]+=1,n[i].Details.push({vehicleNo:a,issue:o,breakdownTime:l,spareStatus:u,spareTime:h}))}),Object.values(n).forEach(r=>{r.Count>0&&e.push(r)}),e},EO=t=>{const e=[];return t.forEach(n=>{const r=jn(n.Date);let s=n.Zone;const i=n["Fuel Station Times"]||"",o=parseInt(n["Count of Vehicles"])||0;if(!r||!s||o===0)return;if(s){const u=s.match(/Zone\s*(-?\d+)/);u&&(s=Math.abs(parseInt(u[1])))}const a=i.split(",").map(u=>u.trim()).filter(u=>u),l=[];a.forEach((u,h)=>{l.push({vehicleNo:`Vehicle ${h+1}`,time:u,issue:"Fuel Station Visit",status:"Completed",remarks:`Fuel station visit at ${u}`})});for(let u=a.length;u<o;u++)l.push({vehicleNo:`Vehicle ${u+1}`,time:"Time not specified",issue:"Fuel Station Visit",status:"Completed",remarks:"Fuel station visit - time not recorded"});e.push({Date:r,Zone:String(s),Count:o,FuelStationTimes:i,Details:l})}),e},TO=t=>{const e=[],n={};return t.forEach(r=>{const s=jn(r.Date);let i=r.Zone;const o=r["Vehicle No."]||r["Vehicle Number"]||r.Vehicle||"",a=r.Issue||r.Reason||r.Type||"Late Vehicle",l=r.Time||r["Late Time"]||r["Arrival Time"]||r["Departure Time"]||"",u=r.Status||r["Spare/OK"]||"",h=r.Remarks||r.Notes||"";!s||!i||(i=String(i),n[i]||(n[i]={Date:s,Zone:i,Count:0,IssueBreakdown:{},Details:[]}),n[i].Count+=1,n[i].IssueBreakdown[a]||(n[i].IssueBreakdown[a]=0),n[i].IssueBreakdown[a]+=1,n[i].Details.push({vehicleNo:o,issue:a,time:l,status:u,remarks:h}))}),Object.values(n).forEach(r=>{r.Count>0&&e.push(r)}),e},SO=t=>{const e=[];return t.forEach(n=>{const r=jn(n.Date);let s=n.Zone;if(s){const f=s.match(/Zone\s*(-?\d+)/);f&&(s=f[1])}const i=parseInt(n["Driver Issue"])||0,o=parseInt(n["Helper Issue"])||0,a=parseInt(n["Breakdown Issue"])||0,l=parseInt(n["Workshop Issue"])||0,u=parseInt(n["Other Issue"])||0,h=i+o+a+l+u;h>0&&e.push({Date:r,Zone:s,Count:h,DriverIssue:i,HelperIssue:o,BreakdownIssue:a,WorkshopIssue:l,OtherIssue:u,IssueBreakdown:{"Driver Issue":i,"Helper Issue":o,"Breakdown Issue":a,"Workshop Issue":l,"Other Issue":u}})}),e},IO=t=>{const e=[];return t.forEach(n=>{const r=n.Date;let s=n.Zone;if(s){const u=s.match(/Zone\s*(-?\d+)/);u&&(s=u[1])}const i=parseInt(n["0 Trip Count Vehicles"])||0,o=parseInt(n["1 Trip Count Vehicles"])||0,a=parseInt(n["2 Trip Count Vehicles"])||0,l=i+o+a;l>0&&e.push({Date:r,Zone:s,Count:l,TripCount0:i,TripCount1:o,TripCount2:a})}),e},CO=t=>{const e=[];return t.forEach(n=>{const r=n.Date;let s=n.Zone;if(s){const a=s.match(/Zone\s*(-?\d+)/);a&&(s=a[1])}let i=0,o=n.Remarks||"";n["Software %"]?i=parseFloat(n["Software %"].replace("%",""))||0:n["Actual %"]&&(i=parseFloat(n["Actual %"].replace("%",""))||0),i>0&&e.push({Date:r,Zone:s,Count:i,Percentage:i,SoftwarePercentage:n["Software %"]?parseFloat(n["Software %"].replace("%","")):null,ActualPercentage:n["Actual %"]?parseFloat(n["Actual %"].replace("%","")):null,Remarks:o})}),e},NO=t=>{const e=[];return t.forEach(n=>{const r=jn(n.Date);let s=n.Zone;const i=n["Vehicle Numbers"]||"",o=parseInt(n["Total Vehicles"])||1;!r||!s||(s=String(s),e.push({Date:r,Zone:s,Count:o,VehicleNumbers:i,TotalVehicles:o}))}),e},AO=t=>t.map(e=>({Date:jn(e.Date),Zone:e.Zone,Ward:e.Ward||"","Permanent Vehicle Number":e["Permanent Vehicle Number"]||"","Spare Vehicle Number":e["Spare Vehicle Number"]||"","Workshop Departure Time":e["Workshop Departure Time"]||""})).filter(e=>e.Date&&e.Zone),jO=async t=>{try{const e=eT[t];if(!e)throw new Error(`Unknown sheet: ${t}`);const n=xO(e),r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.text();let i=_O(s);if(i.length>0){const o=Object.keys(i[0]),a=o.some(g=>g.startsWith("Zone ")),l=o.includes("Zone"),u=o.some(g=>g.includes("%")),h=o.some(g=>g.includes("Driver Issue")||g.includes("Helper Issue")||g.includes("Breakdown Issue")||g.includes("Workshop Issue")),f=o.includes("Issue")&&o.includes("Vehicle No."),m=o.filter(g=>g!=="Date"&&g!=="Zone"&&!isNaN(parseInt(i[0][g]||0))).length>1;if(a)i=wO(i);else if(t==="glitchPercentage"&&u)i=CO(i);else if(t==="lessThan3Trips")i=IO(i);else if(t==="vehicleBreakdown"&&f)i=kO(i);else if(t==="fuelStation")i=EO(i);else if(t==="issuesPost0710"||t==="post06AMOpenIssues"){const g=TO(i);g.length===0&&i.length>0?i=i.map(y=>({...y,Date:jn(y.Date),Count:y.Count||1})).filter(y=>y.Date&&y.Zone):i=g}else h&&["issuesPost0710","post06AMOpenIssues"].includes(t)?i=SO(i):l&&m?i=bO(i):t==="vehicleNumbers"?i=NO(i):t==="sphereWorkshopExit"?i=AO(i):t==="onRouteVehicles"?i=i.map(g=>({...g,Date:jn(g.Date),Count:g["On Route Vehicle Count"]||g.Count||0})).filter(g=>g.Date&&g.Zone):i=i.map(g=>({...g,Date:jn(g.Date),Count:g.Count||1})).filter(g=>g.Date&&g.Zone)}return i}catch(e){return console.error(`Error fetching data for ${t}:`,e),[]}},PO=async()=>{const t=Object.keys(eT).map(async r=>{const s=await jO(r);return{sheetName:r,data:s}}),e=await Promise.all(t),n={};return e.forEach(({sheetName:r,data:s})=>{n[r]=s}),n},RO=t=>{const e=new Set;return Object.values(t).forEach(n=>{n.forEach(r=>{if(r.Zone){const s=Number(r.Zone);!isNaN(s)&&s>0&&e.add(r.Zone)}})}),Array.from(e).sort((n,r)=>Number(n)-Number(r))},jn=t=>{if(!t)return"";const e=new Date(t);return isNaN(e.getTime())?t:e.toISOString().split("T")[0]},DO=t=>{const e=new Set;return Object.values(t).forEach(n=>{n.forEach(r=>{if(r.Date){const s=jn(r.Date);s&&e.add(s)}})}),Array.from(e).sort()},MO=()=>{const{user:t,logout:e}=Zk(),[n,r]=W.useState({}),[s,i]=W.useState(!0),[o,a]=W.useState(null),[l,u]=W.useState(pO()),[h,f]=W.useState(""),[m,g]=W.useState("all"),[y,w]=W.useState([]),[T,_]=W.useState([]),[k,b]=W.useState(!1),[C,A]=W.useState(!1),D=()=>{console.log("Login should be handled by AuthPage")},E=async()=>{await e()},x=async()=>{try{i(!0),a(null);const R=await PO();r(R);const P=DO(R),fe=RO(R);w(P),_(fe)}catch(R){a(R.message),console.error("Error loading data:",R)}finally{i(!1)}};W.useEffect(()=>{x()},[]);const I=()=>{x()},N=R=>{var L,H,Q;const P=n[R]||[],fe=qm(P,l,h,m,R),se=Km(),ae=Gm(fe,se,"Zone",R,m),de=((H=(L=ae.datasets[0])==null?void 0:L.data)==null?void 0:H.reduce((Z,Ie)=>Z+Ie,0))||0,U=Math.max(...((Q=ae.datasets[0])==null?void 0:Q.data)||[0]),Y=ae.labels.length;return c.jsxs("div",{className:"uniform-chart-card group cursor-pointer transform transition-all duration-300 hover:scale-105 hover:shadow-2xl",onClick:()=>A(!0),children:[c.jsxs("div",{className:"card-header",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"card-icon bg-gradient-to-br from-red-500 to-orange-500",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsxs("div",{children:[c.jsx("h3",{className:"card-title",children:Ur[R]}),c.jsxs("div",{className:"flex items-center mt-1",children:[c.jsx("div",{className:"chart-status-indicator success"}),c.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"Click to open detailed view"})]})]})]}),c.jsx("div",{className:"flex items-center",children:c.jsx("svg",{className:"w-6 h-6 text-gray-400 group-hover:text-red-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]}),c.jsx("div",{className:"chart-container",children:c.jsxs("div",{className:"chart-area flex flex-col items-center justify-center bg-gradient-to-br from-red-50 to-orange-50",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full max-w-md mb-6",children:[c.jsxs("div",{className:"text-center bg-white bg-opacity-70 rounded-lg p-3 backdrop-blur-sm",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:de}),c.jsx("div",{className:"text-xs text-gray-600",children:"Total Vehicles"})]}),c.jsxs("div",{className:"text-center bg-white bg-opacity-70 rounded-lg p-3 backdrop-blur-sm",children:[c.jsx("div",{className:"text-2xl font-bold text-orange-600",children:U}),c.jsx("div",{className:"text-xs text-gray-600",children:"Max per Zone"})]}),c.jsxs("div",{className:"text-center bg-white bg-opacity-70 rounded-lg p-3 backdrop-blur-sm",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Y}),c.jsx("div",{className:"text-xs text-gray-600",children:"Active Zones"})]})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-full px-6 py-3 font-semibold shadow-lg group-hover:shadow-xl transition-all duration-200 flex items-center",children:[c.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Detailed Analysis"]}),c.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Interactive charts, filters, and data tables"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6 w-full max-w-md",children:[c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Advanced Filtering"]}),c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Chart & Table Views"]}),c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Interactive Data"]}),c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx("svg",{className:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Mobile Optimized"]})]})]})})]})},j=R=>{const P=n[R]||[],se=R==="lessThan3Trips"?m:null,ae=qm(P,l,h,se,R),de=Km(),U=Gm(ae,de,"Zone",R,se),Y=JE(Ur[R],R);return R==="sphereWorkshopExit"?c.jsx(X6,{data:U,options:Y,title:Ur[R],loading:s,error:o,sheetName:R,rawData:ae},`${R}-${l}-${h}-${se}`):c.jsx(KE,{data:U,options:Y,title:Ur[R],loading:s,error:o,sheetName:R,rawData:ae},`${R}-${l}-${h}-${se}`)};return s&&Object.keys(n).length===0?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),c.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Loading Dashboard..."})]})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(n3,{availableZones:T,user:t,onLogin:D,onLogout:E,onShowAdminPanel:()=>b(!0)}),k&&(t==null?void 0:t.role)==="admin"&&c.jsx(l3,{currentUser:t,onClose:()=>b(!1)}),c.jsx(vO,{isOpen:C,onClose:()=>A(!1),allData:n,selectedDate:l,selectedZone:h,loading:s,error:o}),c.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8",children:[c.jsx(Z6,{selectedDate:l,setSelectedDate:u,selectedZone:h,setSelectedZone:f,availableZones:T,onRefresh:I}),o&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),c.jsx("p",{className:"mt-1 text-sm text-red-700",children:o})]})]})}),c.jsx("div",{className:"mobile-dashboard-grid md:grid md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 md:gap-6 lg:gap-8 auto-rows-fr",children:Object.keys(Ur).map(R=>c.jsx("div",{className:"flex",children:R==="lessThan3Trips"?N(R):j(R)},R))}),!s&&!o&&c.jsxs("div",{className:"mt-8 md:mt-12",children:[c.jsxs("div",{className:"text-center mb-6 md:mb-8",children:[c.jsx("h2",{className:"responsive-text-xl md:responsive-text-2xl font-bold text-gray-800 mb-2 mobile-text-wrap",children:"Dashboard Overview"}),c.jsx("p",{className:"responsive-text-sm md:responsive-text-base text-gray-600 mobile-text-wrap",children:"Key metrics and system information"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"card text-center group hover:scale-105",children:[c.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full mx-auto mb-4 group-hover:shadow-lg transition-all duration-300",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Total Zones"}),c.jsx("p",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-2",children:T.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Active monitoring zones"})]}),c.jsxs("div",{className:"card text-center group hover:scale-105",children:[c.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full mx-auto mb-4 group-hover:shadow-lg transition-all duration-300",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Date Range"}),c.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:y.length>0?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"font-medium text-green-600",children:new Date(y[0]).toLocaleDateString()}),c.jsx("div",{className:"text-gray-400",children:"to"}),c.jsx("div",{className:"font-medium text-green-600",children:new Date(y[y.length-1]).toLocaleDateString()})]}):c.jsx("div",{className:"text-gray-400",children:"No data available"})})]}),c.jsxs("div",{className:"card text-center group hover:scale-105",children:[c.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mx-auto mb-4 group-hover:shadow-lg transition-all duration-300",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Last Updated"}),c.jsx("p",{className:"text-sm font-medium text-purple-600 mb-1",children:new Date().toLocaleDateString()}),c.jsx("p",{className:"text-sm text-gray-500",children:new Date().toLocaleTimeString()}),c.jsxs("div",{className:"mt-2 flex items-center justify-center",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),c.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Live"})]})]})]})]})]})]})},LO=({onSuccess:t,onSwitchToSignup:e})=>{const[n,r]=W.useState({email:"",password:""}),[s,i]=W.useState(!1),[o,a]=W.useState(""),l=h=>{r({...n,[h.target.name]:h.target.value}),a("")},u=async h=>{h.preventDefault(),i(!0),a("");try{const f=await kD(n.email,n.password);f.success?t(f.user):a(f.message)}catch{a("An unexpected error occurred. Please try again.")}finally{i(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-3 sm:p-4 lg:p-6",children:c.jsxs("div",{className:"w-full max-w-sm sm:max-w-md lg:max-w-lg",children:[c.jsx("div",{className:"text-center mb-6 sm:mb-8",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-3 sm:space-y-0 sm:space-x-4 mb-4 sm:mb-6",children:[c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-white rounded-lg flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-blue-900",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),c.jsxs("div",{className:"text-white text-center sm:text-left",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"IMC ICCC"}),c.jsx("p",{className:"text-blue-200 text-xs sm:text-sm",children:"Vehicle Management System"})]})]})}),c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl mobile-form tablet-optimized p-4 sm:p-6 lg:p-8",children:[c.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),c.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Sign in to access the dashboard"})]}),o&&c.jsx("div",{className:"mb-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"text-red-700 text-sm leading-relaxed",children:o})]})}),c.jsxs("form",{onSubmit:u,className:"space-y-4 sm:space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:l,required:!0,className:"w-full px-3 sm:px-4 py-3 sm:py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Enter your email"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),c.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:l,required:!0,className:"w-full px-3 sm:px-4 py-3 sm:py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Enter your password"})]}),c.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 sm:py-4 px-4 rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed text-base touch-manipulation min-h-[48px]",children:s?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Signing In..."]}):"Sign In"})]}),c.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:c.jsxs("p",{className:"text-gray-600 text-sm",children:["Don't have an account?"," ",c.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-700 font-medium touch-manipulation",children:"Request Access"})]})}),c.jsx("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-gray-200",children:c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Secure access to IMC Vehicle Management System"}),c.jsx("p",{className:"text-xs text-gray-400",children:"All access requests require admin approval"})]})})]})]})})},OO=({onSuccess:t,onSwitchToLogin:e})=>{const[n,r]=W.useState({name:"",email:"",password:"",confirmPassword:"",department:"",phone:"",role:bt.VIEWER}),[s,i]=W.useState(!1),[o,a]=W.useState(""),[l,u]=W.useState(""),h=["Traffic Management","Public Transport","Emergency Services","Municipal Operations","IT Department","Administration","Other"],f=y=>{r({...n,[y.target.name]:y.target.value}),a(""),u("")},m=()=>n.password!==n.confirmPassword?(a("Passwords do not match"),!1):n.password.length<6?(a("Password must be at least 6 characters long"),!1):!0,g=async y=>{if(y.preventDefault(),i(!0),a(""),u(""),!m()){i(!1);return}try{console.log(" Starting signup process from component...",{email:n.email});const w=await bD(n);console.log(" Signup result:",w),w.success?(u(w.message),console.log(" Signup successful, resetting form..."),r({name:"",email:"",password:"",confirmPassword:"",department:"",phone:"",role:bt.VIEWER})):(console.log(" Signup failed:",w.message),a(w.message))}catch(w){console.error(" Signup error in component:",w),a("An unexpected error occurred. Please try again.")}finally{console.log(" Signup process completed, setting loading to false"),i(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-3 sm:p-4 lg:p-6",children:c.jsxs("div",{className:"w-full max-w-sm sm:max-w-md lg:max-w-lg",children:[c.jsx("div",{className:"text-center mb-6 sm:mb-8",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-3 sm:space-y-0 sm:space-x-4 mb-4 sm:mb-6",children:[c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-white rounded-lg flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-blue-900",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),c.jsxs("div",{className:"text-white text-center sm:text-left",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"IMC ICCC"}),c.jsx("p",{className:"text-blue-200 text-xs sm:text-sm",children:"Vehicle Management System"})]})]})}),c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl mobile-form tablet-optimized p-4 sm:p-6 lg:p-8",children:[c.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[c.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:"Request Access"}),c.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Submit your details for admin approval"})]}),o&&c.jsx("div",{className:"mb-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("span",{className:"text-red-700 text-sm leading-relaxed",children:o})]})}),l&&c.jsx("div",{className:"mb-4 p-3 sm:p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c.jsx("span",{className:"text-green-700 text-sm leading-relaxed",children:l})]})}),c.jsxs("form",{onSubmit:g,className:"space-y-3 sm:space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),c.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:f,required:!0,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Enter your full name"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:f,required:!0,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Enter your email"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),c.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:f,required:!0,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Password"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"}),c.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:f,required:!0,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Confirm"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department *"}),c.jsxs("select",{id:"department",name:"department",value:n.department,onChange:f,required:!0,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",children:[c.jsx("option",{value:"",children:"Select Department"}),h.map(y=>c.jsx("option",{value:y,children:y},y))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),c.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:f,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",placeholder:"Enter your phone number"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Requested Role"}),c.jsxs("select",{id:"role",name:"role",value:n.role,onChange:f,className:"w-full px-3 sm:px-4 py-3 text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors touch-manipulation",children:[c.jsx("option",{value:bt.VIEWER,children:"Viewer (Read Only)"}),c.jsx("option",{value:bt.OPERATOR,children:"Operator (Limited Access)"})]})]}),c.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 sm:py-4 px-4 rounded-lg hover:from-green-700 hover:to-emerald-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed text-base touch-manipulation min-h-[48px]",children:s?c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Submitting Request..."]}):"Submit Access Request"})]}),c.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:c.jsxs("p",{className:"text-gray-600 text-sm",children:["Already have an account?"," ",c.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-700 font-medium touch-manipulation",children:"Sign In"})]})}),c.jsx("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-gray-200",children:c.jsxs("div",{className:"text-center space-y-1",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Your request will be reviewed by an administrator"}),c.jsx("p",{className:"text-xs text-gray-400",children:"You will be notified once your access is approved"})]})})]})]})})},VO=({onAuthSuccess:t})=>{const[e,n]=W.useState(!0),r=o=>{t(o)},s=()=>{n(!1)},i=()=>{n(!0)};return c.jsx(c.Fragment,{children:e?c.jsx(LO,{onSuccess:r,onSwitchToSignup:s}):c.jsx(OO,{onSuccess:r,onSwitchToLogin:i})})},FO=()=>{const{user:t,loading:e,authChecked:n}=Zk();return e||!n?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),c.jsx("p",{className:"text-white text-lg",children:"Loading IMC ICCC System..."})]})}):t?c.jsx(MO,{}):c.jsx(VO,{onAuthSuccess:()=>{}})};function BO(){return W.useEffect(()=>{K6()},[]),c.jsx(PD,{children:c.jsx("div",{className:"App",children:c.jsx(FO,{})})})}gf.createRoot(document.getElementById("root")).render(c.jsx(Jm.StrictMode,{children:c.jsx(BO,{})}));
